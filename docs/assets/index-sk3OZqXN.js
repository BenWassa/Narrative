(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))v(p);new MutationObserver(p=>{for(const g of p)if(g.type==="childList")for(const j of g.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&v(j)}).observe(document,{childList:!0,subtree:!0});function a(p){const g={};return p.integrity&&(g.integrity=p.integrity),p.referrerPolicy&&(g.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?g.credentials="include":p.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function v(p){if(p.ep)return;p.ep=!0;const g=a(p);fetch(p.href,g)}})();function Nf(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Ri={exports:{}},Pl={},Li={exports:{}},De={};var pc;function kf(){if(pc)return De;pc=1;var c=Symbol.for("react.element"),d=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),j=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),I=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),_=Symbol.iterator;function D(f){return f===null||typeof f!="object"?null:(f=_&&f[_]||f["@@iterator"],typeof f=="function"?f:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,z={};function B(f,x,oe){this.props=f,this.context=x,this.refs=z,this.updater=oe||H}B.prototype.isReactComponent={},B.prototype.setState=function(f,x){if(typeof f!="object"&&typeof f!="function"&&f!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,f,x,"setState")},B.prototype.forceUpdate=function(f){this.updater.enqueueForceUpdate(this,f,"forceUpdate")};function q(){}q.prototype=B.prototype;function Q(f,x,oe){this.props=f,this.context=x,this.refs=z,this.updater=oe||H}var ie=Q.prototype=new q;ie.constructor=Q,W(ie,B.prototype),ie.isPureReactComponent=!0;var J=Array.isArray,xe=Object.prototype.hasOwnProperty,je={current:null},ee={key:!0,ref:!0,__self:!0,__source:!0};function G(f,x,oe){var Y,de={},re=null,Le=null;if(x!=null)for(Y in x.ref!==void 0&&(Le=x.ref),x.key!==void 0&&(re=""+x.key),x)xe.call(x,Y)&&!ee.hasOwnProperty(Y)&&(de[Y]=x[Y]);var ze=arguments.length-2;if(ze===1)de.children=oe;else if(1<ze){for(var $=Array(ze),ve=0;ve<ze;ve++)$[ve]=arguments[ve+2];de.children=$}if(f&&f.defaultProps)for(Y in ze=f.defaultProps,ze)de[Y]===void 0&&(de[Y]=ze[Y]);return{$$typeof:c,type:f,key:re,ref:Le,props:de,_owner:je.current}}function Pe(f,x){return{$$typeof:c,type:f.type,key:x,ref:f.ref,props:f.props,_owner:f._owner}}function ce(f){return typeof f=="object"&&f!==null&&f.$$typeof===c}function ke(f){var x={"=":"=0",":":"=2"};return"$"+f.replace(/[=:]/g,function(oe){return x[oe]})}var X=/\/+/g;function Z(f,x){return typeof f=="object"&&f!==null&&f.key!=null?ke(""+f.key):x.toString(36)}function A(f,x,oe,Y,de){var re=typeof f;(re==="undefined"||re==="boolean")&&(f=null);var Le=!1;if(f===null)Le=!0;else switch(re){case"string":case"number":Le=!0;break;case"object":switch(f.$$typeof){case c:case d:Le=!0}}if(Le)return Le=f,de=de(Le),f=Y===""?"."+Z(Le,0):Y,J(de)?(oe="",f!=null&&(oe=f.replace(X,"$&/")+"/"),A(de,x,oe,"",function(ve){return ve})):de!=null&&(ce(de)&&(de=Pe(de,oe+(!de.key||Le&&Le.key===de.key?"":(""+de.key).replace(X,"$&/")+"/")+f)),x.push(de)),1;if(Le=0,Y=Y===""?".":Y+":",J(f))for(var ze=0;ze<f.length;ze++){re=f[ze];var $=Y+Z(re,ze);Le+=A(re,x,oe,$,de)}else if($=D(f),typeof $=="function")for(f=$.call(f),ze=0;!(re=f.next()).done;)re=re.value,$=Y+Z(re,ze++),Le+=A(re,x,oe,$,de);else if(re==="object")throw x=String(f),Error("Objects are not valid as a React child (found: "+(x==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":x)+"). If you meant to render a collection of children, use an array instead.");return Le}function M(f,x,oe){if(f==null)return f;var Y=[],de=0;return A(f,Y,"","",function(re){return x.call(oe,re,de++)}),Y}function ae(f){if(f._status===-1){var x=f._result;x=x(),x.then(function(oe){(f._status===0||f._status===-1)&&(f._status=1,f._result=oe)},function(oe){(f._status===0||f._status===-1)&&(f._status=2,f._result=oe)}),f._status===-1&&(f._status=0,f._result=x)}if(f._status===1)return f._result.default;throw f._result}var ne={current:null},R={transition:null},K={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:R,ReactCurrentOwner:je};function C(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:M,forEach:function(f,x,oe){M(f,function(){x.apply(this,arguments)},oe)},count:function(f){var x=0;return M(f,function(){x++}),x},toArray:function(f){return M(f,function(x){return x})||[]},only:function(f){if(!ce(f))throw Error("React.Children.only expected to receive a single React element child.");return f}},De.Component=B,De.Fragment=a,De.Profiler=p,De.PureComponent=Q,De.StrictMode=v,De.Suspense=b,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,De.act=C,De.cloneElement=function(f,x,oe){if(f==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+f+".");var Y=W({},f.props),de=f.key,re=f.ref,Le=f._owner;if(x!=null){if(x.ref!==void 0&&(re=x.ref,Le=je.current),x.key!==void 0&&(de=""+x.key),f.type&&f.type.defaultProps)var ze=f.type.defaultProps;for($ in x)xe.call(x,$)&&!ee.hasOwnProperty($)&&(Y[$]=x[$]===void 0&&ze!==void 0?ze[$]:x[$])}var $=arguments.length-2;if($===1)Y.children=oe;else if(1<$){ze=Array($);for(var ve=0;ve<$;ve++)ze[ve]=arguments[ve+2];Y.children=ze}return{$$typeof:c,type:f.type,key:de,ref:re,props:Y,_owner:Le}},De.createContext=function(f){return f={$$typeof:j,_currentValue:f,_currentValue2:f,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},f.Provider={$$typeof:g,_context:f},f.Consumer=f},De.createElement=G,De.createFactory=function(f){var x=G.bind(null,f);return x.type=f,x},De.createRef=function(){return{current:null}},De.forwardRef=function(f){return{$$typeof:S,render:f}},De.isValidElement=ce,De.lazy=function(f){return{$$typeof:L,_payload:{_status:-1,_result:f},_init:ae}},De.memo=function(f,x){return{$$typeof:I,type:f,compare:x===void 0?null:x}},De.startTransition=function(f){var x=R.transition;R.transition={};try{f()}finally{R.transition=x}},De.unstable_act=C,De.useCallback=function(f,x){return ne.current.useCallback(f,x)},De.useContext=function(f){return ne.current.useContext(f)},De.useDebugValue=function(){},De.useDeferredValue=function(f){return ne.current.useDeferredValue(f)},De.useEffect=function(f,x){return ne.current.useEffect(f,x)},De.useId=function(){return ne.current.useId()},De.useImperativeHandle=function(f,x,oe){return ne.current.useImperativeHandle(f,x,oe)},De.useInsertionEffect=function(f,x){return ne.current.useInsertionEffect(f,x)},De.useLayoutEffect=function(f,x){return ne.current.useLayoutEffect(f,x)},De.useMemo=function(f,x){return ne.current.useMemo(f,x)},De.useReducer=function(f,x,oe){return ne.current.useReducer(f,x,oe)},De.useRef=function(f){return ne.current.useRef(f)},De.useState=function(f){return ne.current.useState(f)},De.useSyncExternalStore=function(f,x,oe){return ne.current.useSyncExternalStore(f,x,oe)},De.useTransition=function(){return ne.current.useTransition()},De.version="18.3.1",De}var mc;function Ui(){return mc||(mc=1,Li.exports=kf()),Li.exports}var hc;function jf(){if(hc)return Pl;hc=1;var c=Ui(),d=Symbol.for("react.element"),a=Symbol.for("react.fragment"),v=Object.prototype.hasOwnProperty,p=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function j(S,b,I){var L,_={},D=null,H=null;I!==void 0&&(D=""+I),b.key!==void 0&&(D=""+b.key),b.ref!==void 0&&(H=b.ref);for(L in b)v.call(b,L)&&!g.hasOwnProperty(L)&&(_[L]=b[L]);if(S&&S.defaultProps)for(L in b=S.defaultProps,b)_[L]===void 0&&(_[L]=b[L]);return{$$typeof:d,type:S,key:D,ref:H,props:_,_owner:p.current}}return Pl.Fragment=a,Pl.jsx=j,Pl.jsxs=j,Pl}var yc;function Sf(){return yc||(yc=1,Ri.exports=jf()),Ri.exports}var o=Sf(),P=Ui();const Nn=Nf(P);var Ms={},Di={exports:{}},Et={},Ti={exports:{}},zi={};var gc;function Cf(){return gc||(gc=1,(function(c){function d(R,K){var C=R.length;R.push(K);e:for(;0<C;){var f=C-1>>>1,x=R[f];if(0<p(x,K))R[f]=K,R[C]=x,C=f;else break e}}function a(R){return R.length===0?null:R[0]}function v(R){if(R.length===0)return null;var K=R[0],C=R.pop();if(C!==K){R[0]=C;e:for(var f=0,x=R.length,oe=x>>>1;f<oe;){var Y=2*(f+1)-1,de=R[Y],re=Y+1,Le=R[re];if(0>p(de,C))re<x&&0>p(Le,de)?(R[f]=Le,R[re]=C,f=re):(R[f]=de,R[Y]=C,f=Y);else if(re<x&&0>p(Le,C))R[f]=Le,R[re]=C,f=re;else break e}}return K}function p(R,K){var C=R.sortIndex-K.sortIndex;return C!==0?C:R.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;c.unstable_now=function(){return g.now()}}else{var j=Date,S=j.now();c.unstable_now=function(){return j.now()-S}}var b=[],I=[],L=1,_=null,D=3,H=!1,W=!1,z=!1,B=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ie(R){for(var K=a(I);K!==null;){if(K.callback===null)v(I);else if(K.startTime<=R)v(I),K.sortIndex=K.expirationTime,d(b,K);else break;K=a(I)}}function J(R){if(z=!1,ie(R),!W)if(a(b)!==null)W=!0,ae(xe);else{var K=a(I);K!==null&&ne(J,K.startTime-R)}}function xe(R,K){W=!1,z&&(z=!1,q(G),G=-1),H=!0;var C=D;try{for(ie(K),_=a(b);_!==null&&(!(_.expirationTime>K)||R&&!ke());){var f=_.callback;if(typeof f=="function"){_.callback=null,D=_.priorityLevel;var x=f(_.expirationTime<=K);K=c.unstable_now(),typeof x=="function"?_.callback=x:_===a(b)&&v(b),ie(K)}else v(b);_=a(b)}if(_!==null)var oe=!0;else{var Y=a(I);Y!==null&&ne(J,Y.startTime-K),oe=!1}return oe}finally{_=null,D=C,H=!1}}var je=!1,ee=null,G=-1,Pe=5,ce=-1;function ke(){return!(c.unstable_now()-ce<Pe)}function X(){if(ee!==null){var R=c.unstable_now();ce=R;var K=!0;try{K=ee(!0,R)}finally{K?Z():(je=!1,ee=null)}}else je=!1}var Z;if(typeof Q=="function")Z=function(){Q(X)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,M=A.port2;A.port1.onmessage=X,Z=function(){M.postMessage(null)}}else Z=function(){B(X,0)};function ae(R){ee=R,je||(je=!0,Z())}function ne(R,K){G=B(function(){R(c.unstable_now())},K)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(R){R.callback=null},c.unstable_continueExecution=function(){W||H||(W=!0,ae(xe))},c.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Pe=0<R?Math.floor(1e3/R):5},c.unstable_getCurrentPriorityLevel=function(){return D},c.unstable_getFirstCallbackNode=function(){return a(b)},c.unstable_next=function(R){switch(D){case 1:case 2:case 3:var K=3;break;default:K=D}var C=D;D=K;try{return R()}finally{D=C}},c.unstable_pauseExecution=function(){},c.unstable_requestPaint=function(){},c.unstable_runWithPriority=function(R,K){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var C=D;D=R;try{return K()}finally{D=C}},c.unstable_scheduleCallback=function(R,K,C){var f=c.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?f+C:f):C=f,R){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=C+x,R={id:L++,callback:K,priorityLevel:R,startTime:C,expirationTime:x,sortIndex:-1},C>f?(R.sortIndex=C,d(I,R),a(b)===null&&R===a(I)&&(z?(q(G),G=-1):z=!0,ne(J,C-f))):(R.sortIndex=x,d(b,R),W||H||(W=!0,ae(xe))),R},c.unstable_shouldYield=ke,c.unstable_wrapCallback=function(R){var K=D;return function(){var C=D;D=K;try{return R.apply(this,arguments)}finally{D=C}}}})(zi)),zi}var vc;function Ef(){return vc||(vc=1,Ti.exports=Cf()),Ti.exports}var xc;function Pf(){if(xc)return Et;xc=1;var c=Ui(),d=Ef();function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v=new Set,p={};function g(e,t){j(e,t),j(e+"Capture",t)}function j(e,t){for(p[e]=t,e=0;e<t.length;e++)v.add(t[e])}var S=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),b=Object.prototype.hasOwnProperty,I=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,L={},_={};function D(e){return b.call(_,e)?!0:b.call(L,e)?!1:I.test(e)?_[e]=!0:(L[e]=!0,!1)}function H(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function W(e,t,n,r){if(t===null||typeof t>"u"||H(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function z(e,t,n,r,l,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){B[e]=new z(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];B[t]=new z(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){B[e]=new z(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){B[e]=new z(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){B[e]=new z(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){B[e]=new z(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){B[e]=new z(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){B[e]=new z(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){B[e]=new z(e,5,!1,e.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function Q(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(q,Q);B[t]=new z(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(q,Q);B[t]=new z(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(q,Q);B[t]=new z(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){B[e]=new z(e,1,!1,e.toLowerCase(),null,!1,!1)}),B.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){B[e]=new z(e,1,!1,e.toLowerCase(),null,!0,!0)});function ie(e,t,n,r){var l=B.hasOwnProperty(t)?B[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(W(t,n,l,r)&&(n=null),r||l===null?D(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var J=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xe=Symbol.for("react.element"),je=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),Pe=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),ke=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),R=Symbol.iterator;function K(e){return e===null||typeof e!="object"?null:(e=R&&e[R]||e["@@iterator"],typeof e=="function"?e:null)}var C=Object.assign,f;function x(e){if(f===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);f=t&&t[1]||""}return`
`+f+e}var oe=!1;function Y(e,t){if(!e||oe)return"";oe=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(k){var r=k}Reflect.construct(e,[],t)}else{try{t.call()}catch(k){r=k}e.call(t.prototype)}else{try{throw Error()}catch(k){r=k}e()}}catch(k){if(k&&r&&typeof k.stack=="string"){for(var l=k.stack.split(`
`),s=r.stack.split(`
`),i=l.length-1,u=s.length-1;1<=i&&0<=u&&l[i]!==s[u];)u--;for(;1<=i&&0<=u;i--,u--)if(l[i]!==s[u]){if(i!==1||u!==1)do if(i--,u--,0>u||l[i]!==s[u]){var m=`
`+l[i].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=i&&0<=u);break}}}finally{oe=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?x(e):""}function de(e){switch(e.tag){case 5:return x(e.type);case 16:return x("Lazy");case 13:return x("Suspense");case 19:return x("SuspenseList");case 0:case 2:case 15:return e=Y(e.type,!1),e;case 11:return e=Y(e.type.render,!1),e;case 1:return e=Y(e.type,!0),e;default:return""}}function re(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ee:return"Fragment";case je:return"Portal";case Pe:return"Profiler";case G:return"StrictMode";case Z:return"Suspense";case A:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ke:return(e.displayName||"Context")+".Consumer";case ce:return(e._context.displayName||"Context")+".Provider";case X:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return t=e.displayName||null,t!==null?t:re(e.type)||"Memo";case ae:t=e._payload,e=e._init;try{return re(e(t))}catch{}}return null}function Le(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(t);case 8:return t===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ze(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ve(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ye(e){e._valueTracker||(e._valueTracker=ve(e))}function te(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ce(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Te(e,t){var n=t.checked;return C({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ae(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ze(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _e(e,t){t=t.checked,t!=null&&ie(e,"checked",t,!1)}function Oe(e,t){_e(e,t);var n=ze(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ve(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ve(e,t.type,ze(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ue(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ve(e,t,n){(t!=="number"||Ce(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var _t=Array.isArray;function Rt(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ze(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function vt(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(a(91));return C({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Lt(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(a(92));if(_t(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ze(n)}}function at(e,t){var n=ze(t.value),r=ze(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ur(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dn(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cn(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var cr,Br=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(cr=cr||document.createElement("div"),cr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=cr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function jn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Sn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dr=["Webkit","ms","Moz","O"];Object.keys(Sn).forEach(function(e){dr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sn[t]=Sn[e]})});function Vt(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Sn.hasOwnProperty(e)&&Sn[e]?(""+t).trim():t+"px"}function Hr(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=Vt(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var Rl=C({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vr(e,t){if(t){if(Rl[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(a(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(a(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(t.style!=null&&typeof t.style!="object")throw Error(a(62))}}function Gn(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ht=null;function Wr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fr=null,Zt=null,Cn=null;function xt(e){if(e=fl(e)){if(typeof fr!="function")throw Error(a(280));var t=e.stateNode;t&&(t=Zl(t),fr(e.stateNode,e.type,t))}}function Ll(e){Zt?Cn?Cn.push(e):Cn=[e]:Zt=e}function pr(){if(Zt){var e=Zt,t=Cn;if(Cn=Zt=null,xt(e),t)for(e=0;e<t.length;e++)xt(t[e])}}function Dl(e,t){return e(t)}function en(){}var Kr=!1;function wt(e,t,n){if(Kr)return e(t,n);Kr=!0;try{return Dl(e,t,n)}finally{Kr=!1,(Zt!==null||Cn!==null)&&(en(),pr())}}function Ze(e,t){var n=e.stateNode;if(n===null)return null;var r=Zl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(a(231,t,typeof n));return n}var tn=!1;if(S)try{var En={};Object.defineProperty(En,"passive",{get:function(){tn=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{tn=!1}function mr(e,t,n,r,l,s,i,u,m){var k=Array.prototype.slice.call(arguments,3);try{t.apply(n,k)}catch(F){this.onError(F)}}var nn=!1,Pn=null,Xn=!1,Qr=null,Tl={onError:function(e){nn=!0,Pn=e}};function Gs(e,t,n,r,l,s,i,u,m){nn=!1,Pn=null,mr.apply(Tl,arguments)}function hr(e,t,n,r,l,s,i,u,m){if(Gs.apply(this,arguments),nn){if(nn){var k=Pn;nn=!1,Pn=null}else throw Error(a(198));Xn||(Xn=!0,Qr=k)}}function fn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function yr(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function zl(e){if(fn(e)!==e)throw Error(a(188))}function h(e){var t=e.alternate;if(!t){if(t=fn(e),t===null)throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var s=l.alternate;if(s===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===s.child){for(s=l.child;s;){if(s===n)return zl(l),e;if(s===r)return zl(l),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=l,r=s;else{for(var i=!1,u=l.child;u;){if(u===n){i=!0,n=l,r=s;break}if(u===r){i=!0,r=l,n=s;break}u=u.sibling}if(!i){for(u=s.child;u;){if(u===n){i=!0,n=s,r=l;break}if(u===r){i=!0,r=s,n=l;break}u=u.sibling}if(!i)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(n.tag!==3)throw Error(a(188));return n.stateNode.current===n?e:t}function E(e){return e=h(e),e!==null?T(e):null}function T(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=T(e);if(t!==null)return t;e=e.sibling}return null}var le=d.unstable_scheduleCallback,Fe=d.unstable_cancelCallback,be=d.unstable_shouldYield,Se=d.unstable_requestPaint,ge=d.unstable_now,me=d.unstable_getCurrentPriorityLevel,Ie=d.unstable_ImmediatePriority,lt=d.unstable_UserBlockingPriority,Re=d.unstable_NormalPriority,Be=d.unstable_LowPriority,rn=d.unstable_IdlePriority,Wt=null,It=null;function qn(e){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Wt,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:Mc,Fc=Math.log,Ic=Math.LN2;function Mc(e){return e>>>=0,e===0?32:31-(Fc(e)/Ic|0)|0}var Ol=64,Fl=4194304;function Yr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Il(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var u=i&~l;u!==0?r=Yr(u):(s&=i,s!==0&&(r=Yr(s)))}else i=n&~l,i!==0?r=Yr(i):s!==0&&(r=Yr(s));if(r===0)return 0;if(t!==0&&t!==r&&(t&l)===0&&(l=r&-r,s=t&-t,l>=s||l===16&&(s&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Kt(t),l=1<<n,r|=e[n],t&=~l;return r}function $c(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ac(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-Kt(s),u=1<<i,m=l[i];m===-1?((u&n)===0||(u&r)!==0)&&(l[i]=$c(u,t)):m<=t&&(e.expiredLanes|=u),s&=~u}}function Xs(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Vi(){var e=Ol;return Ol<<=1,(Ol&4194240)===0&&(Ol=64),e}function qs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=n}function Uc(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-Kt(n),s=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~s}}function Js(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Kt(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var He=0;function Wi(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ki,Zs,Qi,Yi,Gi,eo=!1,Ml=[],bn=null,_n=null,Rn=null,Xr=new Map,qr=new Map,Ln=[],Bc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xi(e,t){switch(e){case"focusin":case"focusout":bn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":Xr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qr.delete(t.pointerId)}}function Jr(e,t,n,r,l,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[l]},t!==null&&(t=fl(t),t!==null&&Zs(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Hc(e,t,n,r,l){switch(t){case"focusin":return bn=Jr(bn,e,t,n,r,l),!0;case"dragenter":return _n=Jr(_n,e,t,n,r,l),!0;case"mouseover":return Rn=Jr(Rn,e,t,n,r,l),!0;case"pointerover":var s=l.pointerId;return Xr.set(s,Jr(Xr.get(s)||null,e,t,n,r,l)),!0;case"gotpointercapture":return s=l.pointerId,qr.set(s,Jr(qr.get(s)||null,e,t,n,r,l)),!0}return!1}function qi(e){var t=Jn(e.target);if(t!==null){var n=fn(t);if(n!==null){if(t=n.tag,t===13){if(t=yr(n),t!==null){e.blockedOn=t,Gi(e.priority,function(){Qi(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $l(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=no(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ht=r,n.target.dispatchEvent(r),ht=null}else return t=fl(n),t!==null&&Zs(t),e.blockedOn=n,!1;t.shift()}return!0}function Ji(e,t,n){$l(e)&&n.delete(t)}function Vc(){eo=!1,bn!==null&&$l(bn)&&(bn=null),_n!==null&&$l(_n)&&(_n=null),Rn!==null&&$l(Rn)&&(Rn=null),Xr.forEach(Ji),qr.forEach(Ji)}function Zr(e,t){e.blockedOn===t&&(e.blockedOn=null,eo||(eo=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,Vc)))}function el(e){function t(l){return Zr(l,e)}if(0<Ml.length){Zr(Ml[0],e);for(var n=1;n<Ml.length;n++){var r=Ml[n];r.blockedOn===e&&(r.blockedOn=null)}}for(bn!==null&&Zr(bn,e),_n!==null&&Zr(_n,e),Rn!==null&&Zr(Rn,e),Xr.forEach(t),qr.forEach(t),n=0;n<Ln.length;n++)r=Ln[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ln.length&&(n=Ln[0],n.blockedOn===null);)qi(n),n.blockedOn===null&&Ln.shift()}var gr=J.ReactCurrentBatchConfig,Al=!0;function Wc(e,t,n,r){var l=He,s=gr.transition;gr.transition=null;try{He=1,to(e,t,n,r)}finally{He=l,gr.transition=s}}function Kc(e,t,n,r){var l=He,s=gr.transition;gr.transition=null;try{He=4,to(e,t,n,r)}finally{He=l,gr.transition=s}}function to(e,t,n,r){if(Al){var l=no(e,t,n,r);if(l===null)wo(e,t,r,Ul,n),Xi(e,r);else if(Hc(l,e,t,n,r))r.stopPropagation();else if(Xi(e,r),t&4&&-1<Bc.indexOf(e)){for(;l!==null;){var s=fl(l);if(s!==null&&Ki(s),s=no(e,t,n,r),s===null&&wo(e,t,r,Ul,n),s===l)break;l=s}l!==null&&r.stopPropagation()}else wo(e,t,r,null,n)}}var Ul=null;function no(e,t,n,r){if(Ul=null,e=Wr(r),e=Jn(e),e!==null)if(t=fn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=yr(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ul=e,null}function Zi(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(me()){case Ie:return 1;case lt:return 4;case Re:case Be:return 16;case rn:return 536870912;default:return 16}default:return 16}}var Dn=null,ro=null,Bl=null;function ea(){if(Bl)return Bl;var e,t=ro,n=t.length,r,l="value"in Dn?Dn.value:Dn.textContent,s=l.length;for(e=0;e<n&&t[e]===l[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===l[s-r];r++);return Bl=l.slice(e,1<r?1-r:void 0)}function Hl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vl(){return!0}function ta(){return!1}function Dt(e){function t(n,r,l,s,i){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Vl:ta,this.isPropagationStopped=ta,this}return C(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vl)},persist:function(){},isPersistent:Vl}),t}var vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lo=Dt(vr),tl=C({},vr,{view:0,detail:0}),Qc=Dt(tl),so,oo,nl,Wl=C({},tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ao,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nl&&(nl&&e.type==="mousemove"?(so=e.screenX-nl.screenX,oo=e.screenY-nl.screenY):oo=so=0,nl=e),so)},movementY:function(e){return"movementY"in e?e.movementY:oo}}),na=Dt(Wl),Yc=C({},Wl,{dataTransfer:0}),Gc=Dt(Yc),Xc=C({},tl,{relatedTarget:0}),io=Dt(Xc),qc=C({},vr,{animationName:0,elapsedTime:0,pseudoElement:0}),Jc=Dt(qc),Zc=C({},vr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ed=Dt(Zc),td=C({},vr,{data:0}),ra=Dt(td),nd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ld={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sd(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ld[e])?!!t[e]:!1}function ao(){return sd}var od=C({},tl,{key:function(e){if(e.key){var t=nd[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Hl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ao,charCode:function(e){return e.type==="keypress"?Hl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),id=Dt(od),ad=C({},Wl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),la=Dt(ad),ud=C({},tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ao}),cd=Dt(ud),dd=C({},vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),fd=Dt(dd),pd=C({},Wl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),md=Dt(pd),hd=[9,13,27,32],uo=S&&"CompositionEvent"in window,rl=null;S&&"documentMode"in document&&(rl=document.documentMode);var yd=S&&"TextEvent"in window&&!rl,sa=S&&(!uo||rl&&8<rl&&11>=rl),oa=" ",ia=!1;function aa(e,t){switch(e){case"keyup":return hd.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ua(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xr=!1;function gd(e,t){switch(e){case"compositionend":return ua(t);case"keypress":return t.which!==32?null:(ia=!0,oa);case"textInput":return e=t.data,e===oa&&ia?null:e;default:return null}}function vd(e,t){if(xr)return e==="compositionend"||!uo&&aa(e,t)?(e=ea(),Bl=ro=Dn=null,xr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sa&&t.locale!=="ko"?null:t.data;default:return null}}var xd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ca(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xd[e.type]:t==="textarea"}function da(e,t,n,r){Ll(r),t=Xl(t,"onChange"),0<t.length&&(n=new lo("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ll=null,sl=null;function wd(e){_a(e,0)}function Kl(e){var t=Sr(e);if(te(t))return e}function Nd(e,t){if(e==="change")return t}var fa=!1;if(S){var co;if(S){var fo="oninput"in document;if(!fo){var pa=document.createElement("div");pa.setAttribute("oninput","return;"),fo=typeof pa.oninput=="function"}co=fo}else co=!1;fa=co&&(!document.documentMode||9<document.documentMode)}function ma(){ll&&(ll.detachEvent("onpropertychange",ha),sl=ll=null)}function ha(e){if(e.propertyName==="value"&&Kl(sl)){var t=[];da(t,sl,e,Wr(e)),wt(wd,t)}}function kd(e,t,n){e==="focusin"?(ma(),ll=t,sl=n,ll.attachEvent("onpropertychange",ha)):e==="focusout"&&ma()}function jd(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Kl(sl)}function Sd(e,t){if(e==="click")return Kl(t)}function Cd(e,t){if(e==="input"||e==="change")return Kl(t)}function Ed(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qt=typeof Object.is=="function"?Object.is:Ed;function ol(e,t){if(Qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!b.call(t,l)||!Qt(e[l],t[l]))return!1}return!0}function ya(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ga(e,t){var n=ya(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ya(n)}}function va(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?va(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xa(){for(var e=window,t=Ce();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ce(e.document)}return t}function po(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Pd(e){var t=xa(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&va(n.ownerDocument.documentElement,n)){if(r!==null&&po(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,s=Math.min(r.start,l);r=r.end===void 0?s:Math.min(r.end,l),!e.extend&&s>r&&(l=r,r=s,s=l),l=ga(n,s);var i=ga(n,r);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var bd=S&&"documentMode"in document&&11>=document.documentMode,wr=null,mo=null,il=null,ho=!1;function wa(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ho||wr==null||wr!==Ce(r)||(r=wr,"selectionStart"in r&&po(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),il&&ol(il,r)||(il=r,r=Xl(mo,"onSelect"),0<r.length&&(t=new lo("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=wr)))}function Ql(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},yo={},Na={};S&&(Na=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);function Yl(e){if(yo[e])return yo[e];if(!Nr[e])return e;var t=Nr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Na)return yo[e]=t[n];return e}var ka=Yl("animationend"),ja=Yl("animationiteration"),Sa=Yl("animationstart"),Ca=Yl("transitionend"),Ea=new Map,Pa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tn(e,t){Ea.set(e,t),g(t,[e])}for(var go=0;go<Pa.length;go++){var vo=Pa[go],_d=vo.toLowerCase(),Rd=vo[0].toUpperCase()+vo.slice(1);Tn(_d,"on"+Rd)}Tn(ka,"onAnimationEnd"),Tn(ja,"onAnimationIteration"),Tn(Sa,"onAnimationStart"),Tn("dblclick","onDoubleClick"),Tn("focusin","onFocus"),Tn("focusout","onBlur"),Tn(Ca,"onTransitionEnd"),j("onMouseEnter",["mouseout","mouseover"]),j("onMouseLeave",["mouseout","mouseover"]),j("onPointerEnter",["pointerout","pointerover"]),j("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ld=new Set("cancel close invalid load scroll toggle".split(" ").concat(al));function ba(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,hr(r,t,void 0,e),e.currentTarget=null}function _a(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var u=r[i],m=u.instance,k=u.currentTarget;if(u=u.listener,m!==s&&l.isPropagationStopped())break e;ba(l,u,k),s=m}else for(i=0;i<r.length;i++){if(u=r[i],m=u.instance,k=u.currentTarget,u=u.listener,m!==s&&l.isPropagationStopped())break e;ba(l,u,k),s=m}}}if(Xn)throw e=Qr,Xn=!1,Qr=null,e}function Qe(e,t){var n=t[Eo];n===void 0&&(n=t[Eo]=new Set);var r=e+"__bubble";n.has(r)||(Ra(t,e,2,!1),n.add(r))}function xo(e,t,n){var r=0;t&&(r|=4),Ra(n,e,r,t)}var Gl="_reactListening"+Math.random().toString(36).slice(2);function ul(e){if(!e[Gl]){e[Gl]=!0,v.forEach(function(n){n!=="selectionchange"&&(Ld.has(n)||xo(n,!1,e),xo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gl]||(t[Gl]=!0,xo("selectionchange",!1,t))}}function Ra(e,t,n,r){switch(Zi(t)){case 1:var l=Wc;break;case 4:l=Kc;break;default:l=to}n=l.bind(null,t,n,e),l=void 0,!tn||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function wo(e,t,n,r,l){var s=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var u=r.stateNode.containerInfo;if(u===l||u.nodeType===8&&u.parentNode===l)break;if(i===4)for(i=r.return;i!==null;){var m=i.tag;if((m===3||m===4)&&(m=i.stateNode.containerInfo,m===l||m.nodeType===8&&m.parentNode===l))return;i=i.return}for(;u!==null;){if(i=Jn(u),i===null)return;if(m=i.tag,m===5||m===6){r=s=i;continue e}u=u.parentNode}}r=r.return}wt(function(){var k=s,F=Wr(n),U=[];e:{var O=Ea.get(e);if(O!==void 0){var se=lo,fe=e;switch(e){case"keypress":if(Hl(n)===0)break e;case"keydown":case"keyup":se=id;break;case"focusin":fe="focus",se=io;break;case"focusout":fe="blur",se=io;break;case"beforeblur":case"afterblur":se=io;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=na;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Gc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=cd;break;case ka:case ja:case Sa:se=Jc;break;case Ca:se=fd;break;case"scroll":se=Qc;break;case"wheel":se=md;break;case"copy":case"cut":case"paste":se=ed;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=la}var pe=(t&4)!==0,et=!pe&&e==="scroll",w=pe?O!==null?O+"Capture":null:O;pe=[];for(var y=k,N;y!==null;){N=y;var V=N.stateNode;if(N.tag===5&&V!==null&&(N=V,w!==null&&(V=Ze(y,w),V!=null&&pe.push(cl(y,V,N)))),et)break;y=y.return}0<pe.length&&(O=new se(O,fe,null,n,F),U.push({event:O,listeners:pe}))}}if((t&7)===0){e:{if(O=e==="mouseover"||e==="pointerover",se=e==="mouseout"||e==="pointerout",O&&n!==ht&&(fe=n.relatedTarget||n.fromElement)&&(Jn(fe)||fe[pn]))break e;if((se||O)&&(O=F.window===F?F:(O=F.ownerDocument)?O.defaultView||O.parentWindow:window,se?(fe=n.relatedTarget||n.toElement,se=k,fe=fe?Jn(fe):null,fe!==null&&(et=fn(fe),fe!==et||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(se=null,fe=k),se!==fe)){if(pe=na,V="onMouseLeave",w="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(pe=la,V="onPointerLeave",w="onPointerEnter",y="pointer"),et=se==null?O:Sr(se),N=fe==null?O:Sr(fe),O=new pe(V,y+"leave",se,n,F),O.target=et,O.relatedTarget=N,V=null,Jn(F)===k&&(pe=new pe(w,y+"enter",fe,n,F),pe.target=N,pe.relatedTarget=et,V=pe),et=V,se&&fe)t:{for(pe=se,w=fe,y=0,N=pe;N;N=kr(N))y++;for(N=0,V=w;V;V=kr(V))N++;for(;0<y-N;)pe=kr(pe),y--;for(;0<N-y;)w=kr(w),N--;for(;y--;){if(pe===w||w!==null&&pe===w.alternate)break t;pe=kr(pe),w=kr(w)}pe=null}else pe=null;se!==null&&La(U,O,se,pe,!1),fe!==null&&et!==null&&La(U,et,fe,pe,!0)}}e:{if(O=k?Sr(k):window,se=O.nodeName&&O.nodeName.toLowerCase(),se==="select"||se==="input"&&O.type==="file")var he=Nd;else if(ca(O))if(fa)he=Cd;else{he=jd;var we=kd}else(se=O.nodeName)&&se.toLowerCase()==="input"&&(O.type==="checkbox"||O.type==="radio")&&(he=Sd);if(he&&(he=he(e,k))){da(U,he,n,F);break e}we&&we(e,O,k),e==="focusout"&&(we=O._wrapperState)&&we.controlled&&O.type==="number"&&Ve(O,"number",O.value)}switch(we=k?Sr(k):window,e){case"focusin":(ca(we)||we.contentEditable==="true")&&(wr=we,mo=k,il=null);break;case"focusout":il=mo=wr=null;break;case"mousedown":ho=!0;break;case"contextmenu":case"mouseup":case"dragend":ho=!1,wa(U,n,F);break;case"selectionchange":if(bd)break;case"keydown":case"keyup":wa(U,n,F)}var Ne;if(uo)e:{switch(e){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else xr?aa(e,n)&&(Ee="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ee="onCompositionStart");Ee&&(sa&&n.locale!=="ko"&&(xr||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&xr&&(Ne=ea()):(Dn=F,ro="value"in Dn?Dn.value:Dn.textContent,xr=!0)),we=Xl(k,Ee),0<we.length&&(Ee=new ra(Ee,e,null,n,F),U.push({event:Ee,listeners:we}),Ne?Ee.data=Ne:(Ne=ua(n),Ne!==null&&(Ee.data=Ne)))),(Ne=yd?gd(e,n):vd(e,n))&&(k=Xl(k,"onBeforeInput"),0<k.length&&(F=new ra("onBeforeInput","beforeinput",null,n,F),U.push({event:F,listeners:k}),F.data=Ne))}_a(U,t)})}function cl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xl(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,s=l.stateNode;l.tag===5&&s!==null&&(l=s,s=Ze(e,n),s!=null&&r.unshift(cl(e,s,l)),s=Ze(e,t),s!=null&&r.push(cl(e,s,l))),e=e.return}return r}function kr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function La(e,t,n,r,l){for(var s=t._reactName,i=[];n!==null&&n!==r;){var u=n,m=u.alternate,k=u.stateNode;if(m!==null&&m===r)break;u.tag===5&&k!==null&&(u=k,l?(m=Ze(n,s),m!=null&&i.unshift(cl(n,m,u))):l||(m=Ze(n,s),m!=null&&i.push(cl(n,m,u)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Dd=/\r\n?/g,Td=/\u0000|\uFFFD/g;function Da(e){return(typeof e=="string"?e:""+e).replace(Dd,`
`).replace(Td,"")}function ql(e,t,n){if(t=Da(t),Da(e)!==t&&n)throw Error(a(425))}function Jl(){}var No=null,ko=null;function jo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var So=typeof setTimeout=="function"?setTimeout:void 0,zd=typeof clearTimeout=="function"?clearTimeout:void 0,Ta=typeof Promise=="function"?Promise:void 0,Od=typeof queueMicrotask=="function"?queueMicrotask:typeof Ta<"u"?function(e){return Ta.resolve(null).then(e).catch(Fd)}:So;function Fd(e){setTimeout(function(){throw e})}function Co(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),el(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);el(t)}function zn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function za(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var jr=Math.random().toString(36).slice(2),ln="__reactFiber$"+jr,dl="__reactProps$"+jr,pn="__reactContainer$"+jr,Eo="__reactEvents$"+jr,Id="__reactListeners$"+jr,Md="__reactHandles$"+jr;function Jn(e){var t=e[ln];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pn]||n[ln]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=za(e);e!==null;){if(n=e[ln])return n;e=za(e)}return t}e=n,n=e.parentNode}return null}function fl(e){return e=e[ln]||e[pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Sr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(a(33))}function Zl(e){return e[dl]||null}var Po=[],Cr=-1;function On(e){return{current:e}}function Ye(e){0>Cr||(e.current=Po[Cr],Po[Cr]=null,Cr--)}function We(e,t){Cr++,Po[Cr]=e.current,e.current=t}var Fn={},dt=On(Fn),Nt=On(!1),Zn=Fn;function Er(e,t){var n=e.type.contextTypes;if(!n)return Fn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},s;for(s in n)l[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function kt(e){return e=e.childContextTypes,e!=null}function es(){Ye(Nt),Ye(dt)}function Oa(e,t,n){if(dt.current!==Fn)throw Error(a(168));We(dt,t),We(Nt,n)}function Fa(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(a(108,Le(e)||"Unknown",l));return C({},n,r)}function ts(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fn,Zn=dt.current,We(dt,e),We(Nt,Nt.current),!0}function Ia(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Fa(e,t,Zn),r.__reactInternalMemoizedMergedChildContext=e,Ye(Nt),Ye(dt),We(dt,e)):Ye(Nt),We(Nt,n)}var mn=null,ns=!1,bo=!1;function Ma(e){mn===null?mn=[e]:mn.push(e)}function $d(e){ns=!0,Ma(e)}function In(){if(!bo&&mn!==null){bo=!0;var e=0,t=He;try{var n=mn;for(He=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}mn=null,ns=!1}catch(l){throw mn!==null&&(mn=mn.slice(e+1)),le(Ie,In),l}finally{He=t,bo=!1}}return null}var Pr=[],br=0,rs=null,ls=0,Mt=[],$t=0,er=null,hn=1,yn="";function tr(e,t){Pr[br++]=ls,Pr[br++]=rs,rs=e,ls=t}function $a(e,t,n){Mt[$t++]=hn,Mt[$t++]=yn,Mt[$t++]=er,er=e;var r=hn;e=yn;var l=32-Kt(r)-1;r&=~(1<<l),n+=1;var s=32-Kt(t)+l;if(30<s){var i=l-l%5;s=(r&(1<<i)-1).toString(32),r>>=i,l-=i,hn=1<<32-Kt(t)+l|n<<l|r,yn=s+e}else hn=1<<s|n<<l|r,yn=e}function _o(e){e.return!==null&&(tr(e,1),$a(e,1,0))}function Ro(e){for(;e===rs;)rs=Pr[--br],Pr[br]=null,ls=Pr[--br],Pr[br]=null;for(;e===er;)er=Mt[--$t],Mt[$t]=null,yn=Mt[--$t],Mt[$t]=null,hn=Mt[--$t],Mt[$t]=null}var Tt=null,zt=null,Ge=!1,Yt=null;function Aa(e,t){var n=Ht(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ua(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tt=e,zt=zn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tt=e,zt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=er!==null?{id:hn,overflow:yn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ht(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Tt=e,zt=null,!0):!1;default:return!1}}function Lo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Do(e){if(Ge){var t=zt;if(t){var n=t;if(!Ua(e,t)){if(Lo(e))throw Error(a(418));t=zn(n.nextSibling);var r=Tt;t&&Ua(e,t)?Aa(r,n):(e.flags=e.flags&-4097|2,Ge=!1,Tt=e)}}else{if(Lo(e))throw Error(a(418));e.flags=e.flags&-4097|2,Ge=!1,Tt=e}}}function Ba(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tt=e}function ss(e){if(e!==Tt)return!1;if(!Ge)return Ba(e),Ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!jo(e.type,e.memoizedProps)),t&&(t=zt)){if(Lo(e))throw Ha(),Error(a(418));for(;t;)Aa(e,t),t=zn(t.nextSibling)}if(Ba(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zt=zn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zt=null}}else zt=Tt?zn(e.stateNode.nextSibling):null;return!0}function Ha(){for(var e=zt;e;)e=zn(e.nextSibling)}function _r(){zt=Tt=null,Ge=!1}function To(e){Yt===null?Yt=[e]:Yt.push(e)}var Ad=J.ReactCurrentBatchConfig;function pl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var l=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var u=l.refs;i===null?delete u[s]:u[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function os(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Va(e){var t=e._init;return t(e._payload)}function Wa(e){function t(w,y){if(e){var N=w.deletions;N===null?(w.deletions=[y],w.flags|=16):N.push(y)}}function n(w,y){if(!e)return null;for(;y!==null;)t(w,y),y=y.sibling;return null}function r(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function l(w,y){return w=Wn(w,y),w.index=0,w.sibling=null,w}function s(w,y,N){return w.index=N,e?(N=w.alternate,N!==null?(N=N.index,N<y?(w.flags|=2,y):N):(w.flags|=2,y)):(w.flags|=1048576,y)}function i(w){return e&&w.alternate===null&&(w.flags|=2),w}function u(w,y,N,V){return y===null||y.tag!==6?(y=Si(N,w.mode,V),y.return=w,y):(y=l(y,N),y.return=w,y)}function m(w,y,N,V){var he=N.type;return he===ee?F(w,y,N.props.children,V,N.key):y!==null&&(y.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===ae&&Va(he)===y.type)?(V=l(y,N.props),V.ref=pl(w,y,N),V.return=w,V):(V=Rs(N.type,N.key,N.props,null,w.mode,V),V.ref=pl(w,y,N),V.return=w,V)}function k(w,y,N,V){return y===null||y.tag!==4||y.stateNode.containerInfo!==N.containerInfo||y.stateNode.implementation!==N.implementation?(y=Ci(N,w.mode,V),y.return=w,y):(y=l(y,N.children||[]),y.return=w,y)}function F(w,y,N,V,he){return y===null||y.tag!==7?(y=ur(N,w.mode,V,he),y.return=w,y):(y=l(y,N),y.return=w,y)}function U(w,y,N){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Si(""+y,w.mode,N),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case xe:return N=Rs(y.type,y.key,y.props,null,w.mode,N),N.ref=pl(w,null,y),N.return=w,N;case je:return y=Ci(y,w.mode,N),y.return=w,y;case ae:var V=y._init;return U(w,V(y._payload),N)}if(_t(y)||K(y))return y=ur(y,w.mode,N,null),y.return=w,y;os(w,y)}return null}function O(w,y,N,V){var he=y!==null?y.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return he!==null?null:u(w,y,""+N,V);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case xe:return N.key===he?m(w,y,N,V):null;case je:return N.key===he?k(w,y,N,V):null;case ae:return he=N._init,O(w,y,he(N._payload),V)}if(_t(N)||K(N))return he!==null?null:F(w,y,N,V,null);os(w,N)}return null}function se(w,y,N,V,he){if(typeof V=="string"&&V!==""||typeof V=="number")return w=w.get(N)||null,u(y,w,""+V,he);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case xe:return w=w.get(V.key===null?N:V.key)||null,m(y,w,V,he);case je:return w=w.get(V.key===null?N:V.key)||null,k(y,w,V,he);case ae:var we=V._init;return se(w,y,N,we(V._payload),he)}if(_t(V)||K(V))return w=w.get(N)||null,F(y,w,V,he,null);os(y,V)}return null}function fe(w,y,N,V){for(var he=null,we=null,Ne=y,Ee=y=0,it=null;Ne!==null&&Ee<N.length;Ee++){Ne.index>Ee?(it=Ne,Ne=null):it=Ne.sibling;var $e=O(w,Ne,N[Ee],V);if($e===null){Ne===null&&(Ne=it);break}e&&Ne&&$e.alternate===null&&t(w,Ne),y=s($e,y,Ee),we===null?he=$e:we.sibling=$e,we=$e,Ne=it}if(Ee===N.length)return n(w,Ne),Ge&&tr(w,Ee),he;if(Ne===null){for(;Ee<N.length;Ee++)Ne=U(w,N[Ee],V),Ne!==null&&(y=s(Ne,y,Ee),we===null?he=Ne:we.sibling=Ne,we=Ne);return Ge&&tr(w,Ee),he}for(Ne=r(w,Ne);Ee<N.length;Ee++)it=se(Ne,w,Ee,N[Ee],V),it!==null&&(e&&it.alternate!==null&&Ne.delete(it.key===null?Ee:it.key),y=s(it,y,Ee),we===null?he=it:we.sibling=it,we=it);return e&&Ne.forEach(function(Kn){return t(w,Kn)}),Ge&&tr(w,Ee),he}function pe(w,y,N,V){var he=K(N);if(typeof he!="function")throw Error(a(150));if(N=he.call(N),N==null)throw Error(a(151));for(var we=he=null,Ne=y,Ee=y=0,it=null,$e=N.next();Ne!==null&&!$e.done;Ee++,$e=N.next()){Ne.index>Ee?(it=Ne,Ne=null):it=Ne.sibling;var Kn=O(w,Ne,$e.value,V);if(Kn===null){Ne===null&&(Ne=it);break}e&&Ne&&Kn.alternate===null&&t(w,Ne),y=s(Kn,y,Ee),we===null?he=Kn:we.sibling=Kn,we=Kn,Ne=it}if($e.done)return n(w,Ne),Ge&&tr(w,Ee),he;if(Ne===null){for(;!$e.done;Ee++,$e=N.next())$e=U(w,$e.value,V),$e!==null&&(y=s($e,y,Ee),we===null?he=$e:we.sibling=$e,we=$e);return Ge&&tr(w,Ee),he}for(Ne=r(w,Ne);!$e.done;Ee++,$e=N.next())$e=se(Ne,w,Ee,$e.value,V),$e!==null&&(e&&$e.alternate!==null&&Ne.delete($e.key===null?Ee:$e.key),y=s($e,y,Ee),we===null?he=$e:we.sibling=$e,we=$e);return e&&Ne.forEach(function(wf){return t(w,wf)}),Ge&&tr(w,Ee),he}function et(w,y,N,V){if(typeof N=="object"&&N!==null&&N.type===ee&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case xe:e:{for(var he=N.key,we=y;we!==null;){if(we.key===he){if(he=N.type,he===ee){if(we.tag===7){n(w,we.sibling),y=l(we,N.props.children),y.return=w,w=y;break e}}else if(we.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===ae&&Va(he)===we.type){n(w,we.sibling),y=l(we,N.props),y.ref=pl(w,we,N),y.return=w,w=y;break e}n(w,we);break}else t(w,we);we=we.sibling}N.type===ee?(y=ur(N.props.children,w.mode,V,N.key),y.return=w,w=y):(V=Rs(N.type,N.key,N.props,null,w.mode,V),V.ref=pl(w,y,N),V.return=w,w=V)}return i(w);case je:e:{for(we=N.key;y!==null;){if(y.key===we)if(y.tag===4&&y.stateNode.containerInfo===N.containerInfo&&y.stateNode.implementation===N.implementation){n(w,y.sibling),y=l(y,N.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else t(w,y);y=y.sibling}y=Ci(N,w.mode,V),y.return=w,w=y}return i(w);case ae:return we=N._init,et(w,y,we(N._payload),V)}if(_t(N))return fe(w,y,N,V);if(K(N))return pe(w,y,N,V);os(w,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,y!==null&&y.tag===6?(n(w,y.sibling),y=l(y,N),y.return=w,w=y):(n(w,y),y=Si(N,w.mode,V),y.return=w,w=y),i(w)):n(w,y)}return et}var Rr=Wa(!0),Ka=Wa(!1),is=On(null),as=null,Lr=null,zo=null;function Oo(){zo=Lr=as=null}function Fo(e){var t=is.current;Ye(is),e._currentValue=t}function Io(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Dr(e,t){as=e,zo=Lr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(jt=!0),e.firstContext=null)}function At(e){var t=e._currentValue;if(zo!==e)if(e={context:e,memoizedValue:t,next:null},Lr===null){if(as===null)throw Error(a(308));Lr=e,as.dependencies={lanes:0,firstContext:e}}else Lr=Lr.next=e;return t}var nr=null;function Mo(e){nr===null?nr=[e]:nr.push(e)}function Qa(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,Mo(t)):(n.next=l.next,l.next=n),t.interleaved=n,gn(e,r)}function gn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mn=!1;function $o(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ya(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $n(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Me&2)!==0){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,gn(e,n)}return l=r.interleaved,l===null?(t.next=t,Mo(r)):(t.next=l.next,l.next=t),r.interleaved=t,gn(e,n)}function us(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Js(e,n)}}function Ga(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?l=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?l=s=t:s=s.next=t}else l=s=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function cs(e,t,n,r){var l=e.updateQueue;Mn=!1;var s=l.firstBaseUpdate,i=l.lastBaseUpdate,u=l.shared.pending;if(u!==null){l.shared.pending=null;var m=u,k=m.next;m.next=null,i===null?s=k:i.next=k,i=m;var F=e.alternate;F!==null&&(F=F.updateQueue,u=F.lastBaseUpdate,u!==i&&(u===null?F.firstBaseUpdate=k:u.next=k,F.lastBaseUpdate=m))}if(s!==null){var U=l.baseState;i=0,F=k=m=null,u=s;do{var O=u.lane,se=u.eventTime;if((r&O)===O){F!==null&&(F=F.next={eventTime:se,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var fe=e,pe=u;switch(O=t,se=n,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){U=fe.call(se,U,O);break e}U=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,O=typeof fe=="function"?fe.call(se,U,O):fe,O==null)break e;U=C({},U,O);break e;case 2:Mn=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,O=l.effects,O===null?l.effects=[u]:O.push(u))}else se={eventTime:se,lane:O,tag:u.tag,payload:u.payload,callback:u.callback,next:null},F===null?(k=F=se,m=U):F=F.next=se,i|=O;if(u=u.next,u===null){if(u=l.shared.pending,u===null)break;O=u,u=O.next,O.next=null,l.lastBaseUpdate=O,l.shared.pending=null}}while(!0);if(F===null&&(m=U),l.baseState=m,l.firstBaseUpdate=k,l.lastBaseUpdate=F,t=l.shared.interleaved,t!==null){l=t;do i|=l.lane,l=l.next;while(l!==t)}else s===null&&(l.shared.lanes=0);sr|=i,e.lanes=i,e.memoizedState=U}}function Xa(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(a(191,l));l.call(r)}}}var ml={},sn=On(ml),hl=On(ml),yl=On(ml);function rr(e){if(e===ml)throw Error(a(174));return e}function Ao(e,t){switch(We(yl,t),We(hl,e),We(sn,ml),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:dn(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=dn(t,e)}Ye(sn),We(sn,t)}function Tr(){Ye(sn),Ye(hl),Ye(yl)}function qa(e){rr(yl.current);var t=rr(sn.current),n=dn(t,e.type);t!==n&&(We(hl,e),We(sn,n))}function Uo(e){hl.current===e&&(Ye(sn),Ye(hl))}var Xe=On(0);function ds(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bo=[];function Ho(){for(var e=0;e<Bo.length;e++)Bo[e]._workInProgressVersionPrimary=null;Bo.length=0}var fs=J.ReactCurrentDispatcher,Vo=J.ReactCurrentBatchConfig,lr=0,qe=null,nt=null,st=null,ps=!1,gl=!1,vl=0,Ud=0;function ft(){throw Error(a(321))}function Wo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qt(e[n],t[n]))return!1;return!0}function Ko(e,t,n,r,l,s){if(lr=s,qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fs.current=e===null||e.memoizedState===null?Wd:Kd,e=n(r,l),gl){s=0;do{if(gl=!1,vl=0,25<=s)throw Error(a(301));s+=1,st=nt=null,t.updateQueue=null,fs.current=Qd,e=n(r,l)}while(gl)}if(fs.current=ys,t=nt!==null&&nt.next!==null,lr=0,st=nt=qe=null,ps=!1,t)throw Error(a(300));return e}function Qo(){var e=vl!==0;return vl=0,e}function on(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?qe.memoizedState=st=e:st=st.next=e,st}function Ut(){if(nt===null){var e=qe.alternate;e=e!==null?e.memoizedState:null}else e=nt.next;var t=st===null?qe.memoizedState:st.next;if(t!==null)st=t,nt=e;else{if(e===null)throw Error(a(310));nt=e,e={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},st===null?qe.memoizedState=st=e:st=st.next=e}return st}function xl(e,t){return typeof t=="function"?t(e):t}function Yo(e){var t=Ut(),n=t.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=e;var r=nt,l=r.baseQueue,s=n.pending;if(s!==null){if(l!==null){var i=l.next;l.next=s.next,s.next=i}r.baseQueue=l=s,n.pending=null}if(l!==null){s=l.next,r=r.baseState;var u=i=null,m=null,k=s;do{var F=k.lane;if((lr&F)===F)m!==null&&(m=m.next={lane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),r=k.hasEagerState?k.eagerState:e(r,k.action);else{var U={lane:F,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null};m===null?(u=m=U,i=r):m=m.next=U,qe.lanes|=F,sr|=F}k=k.next}while(k!==null&&k!==s);m===null?i=r:m.next=u,Qt(r,t.memoizedState)||(jt=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=m,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do s=l.lane,qe.lanes|=s,sr|=s,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Go(e){var t=Ut(),n=t.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,s=t.memoizedState;if(l!==null){n.pending=null;var i=l=l.next;do s=e(s,i.action),i=i.next;while(i!==l);Qt(s,t.memoizedState)||(jt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ja(){}function Za(e,t){var n=qe,r=Ut(),l=t(),s=!Qt(r.memoizedState,l);if(s&&(r.memoizedState=l,jt=!0),r=r.queue,Xo(nu.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,wl(9,tu.bind(null,n,r,l,t),void 0,null),ot===null)throw Error(a(349));(lr&30)!==0||eu(n,t,l)}return l}function eu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function tu(e,t,n,r){t.value=n,t.getSnapshot=r,ru(t)&&lu(e)}function nu(e,t,n){return n(function(){ru(t)&&lu(e)})}function ru(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qt(e,n)}catch{return!0}}function lu(e){var t=gn(e,1);t!==null&&Jt(t,e,1,-1)}function su(e){var t=on();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xl,lastRenderedState:e},t.queue=e,e=e.dispatch=Vd.bind(null,qe,e),[t.memoizedState,e]}function wl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ou(){return Ut().memoizedState}function ms(e,t,n,r){var l=on();qe.flags|=e,l.memoizedState=wl(1|t,n,void 0,r===void 0?null:r)}function hs(e,t,n,r){var l=Ut();r=r===void 0?null:r;var s=void 0;if(nt!==null){var i=nt.memoizedState;if(s=i.destroy,r!==null&&Wo(r,i.deps)){l.memoizedState=wl(t,n,s,r);return}}qe.flags|=e,l.memoizedState=wl(1|t,n,s,r)}function iu(e,t){return ms(8390656,8,e,t)}function Xo(e,t){return hs(2048,8,e,t)}function au(e,t){return hs(4,2,e,t)}function uu(e,t){return hs(4,4,e,t)}function cu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function du(e,t,n){return n=n!=null?n.concat([e]):null,hs(4,4,cu.bind(null,t,e),n)}function qo(){}function fu(e,t){var n=Ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function pu(e,t){var n=Ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function mu(e,t,n){return(lr&21)===0?(e.baseState&&(e.baseState=!1,jt=!0),e.memoizedState=n):(Qt(n,t)||(n=Vi(),qe.lanes|=n,sr|=n,e.baseState=!0),t)}function Bd(e,t){var n=He;He=n!==0&&4>n?n:4,e(!0);var r=Vo.transition;Vo.transition={};try{e(!1),t()}finally{He=n,Vo.transition=r}}function hu(){return Ut().memoizedState}function Hd(e,t,n){var r=Hn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yu(e))gu(t,n);else if(n=Qa(e,t,n,r),n!==null){var l=gt();Jt(n,e,r,l),vu(n,t,r)}}function Vd(e,t,n){var r=Hn(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yu(e))gu(t,l);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,u=s(i,n);if(l.hasEagerState=!0,l.eagerState=u,Qt(u,i)){var m=t.interleaved;m===null?(l.next=l,Mo(t)):(l.next=m.next,m.next=l),t.interleaved=l;return}}catch{}n=Qa(e,t,l,r),n!==null&&(l=gt(),Jt(n,e,r,l),vu(n,t,r))}}function yu(e){var t=e.alternate;return e===qe||t!==null&&t===qe}function gu(e,t){gl=ps=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function vu(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Js(e,n)}}var ys={readContext:At,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},Wd={readContext:At,useCallback:function(e,t){return on().memoizedState=[e,t===void 0?null:t],e},useContext:At,useEffect:iu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ms(4194308,4,cu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ms(4194308,4,e,t)},useInsertionEffect:function(e,t){return ms(4,2,e,t)},useMemo:function(e,t){var n=on();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=on();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Hd.bind(null,qe,e),[r.memoizedState,e]},useRef:function(e){var t=on();return e={current:e},t.memoizedState=e},useState:su,useDebugValue:qo,useDeferredValue:function(e){return on().memoizedState=e},useTransition:function(){var e=su(!1),t=e[0];return e=Bd.bind(null,e[1]),on().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=qe,l=on();if(Ge){if(n===void 0)throw Error(a(407));n=n()}else{if(n=t(),ot===null)throw Error(a(349));(lr&30)!==0||eu(r,t,n)}l.memoizedState=n;var s={value:n,getSnapshot:t};return l.queue=s,iu(nu.bind(null,r,s,e),[e]),r.flags|=2048,wl(9,tu.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=on(),t=ot.identifierPrefix;if(Ge){var n=yn,r=hn;n=(r&~(1<<32-Kt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=vl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Ud++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Kd={readContext:At,useCallback:fu,useContext:At,useEffect:Xo,useImperativeHandle:du,useInsertionEffect:au,useLayoutEffect:uu,useMemo:pu,useReducer:Yo,useRef:ou,useState:function(){return Yo(xl)},useDebugValue:qo,useDeferredValue:function(e){var t=Ut();return mu(t,nt.memoizedState,e)},useTransition:function(){var e=Yo(xl)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:Ja,useSyncExternalStore:Za,useId:hu,unstable_isNewReconciler:!1},Qd={readContext:At,useCallback:fu,useContext:At,useEffect:Xo,useImperativeHandle:du,useInsertionEffect:au,useLayoutEffect:uu,useMemo:pu,useReducer:Go,useRef:ou,useState:function(){return Go(xl)},useDebugValue:qo,useDeferredValue:function(e){var t=Ut();return nt===null?t.memoizedState=e:mu(t,nt.memoizedState,e)},useTransition:function(){var e=Go(xl)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:Ja,useSyncExternalStore:Za,useId:hu,unstable_isNewReconciler:!1};function Gt(e,t){if(e&&e.defaultProps){t=C({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Jo(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:C({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var gs={isMounted:function(e){return(e=e._reactInternals)?fn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=gt(),l=Hn(e),s=vn(r,l);s.payload=t,n!=null&&(s.callback=n),t=$n(e,s,l),t!==null&&(Jt(t,e,l,r),us(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=gt(),l=Hn(e),s=vn(r,l);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=$n(e,s,l),t!==null&&(Jt(t,e,l,r),us(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=gt(),r=Hn(e),l=vn(n,r);l.tag=2,t!=null&&(l.callback=t),t=$n(e,l,r),t!==null&&(Jt(t,e,r,n),us(t,e,r))}};function xu(e,t,n,r,l,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!ol(n,r)||!ol(l,s):!0}function wu(e,t,n){var r=!1,l=Fn,s=t.contextType;return typeof s=="object"&&s!==null?s=At(s):(l=kt(t)?Zn:dt.current,r=t.contextTypes,s=(r=r!=null)?Er(e,l):Fn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gs,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=s),t}function Nu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gs.enqueueReplaceState(t,t.state,null)}function Zo(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},$o(e);var s=t.contextType;typeof s=="object"&&s!==null?l.context=At(s):(s=kt(t)?Zn:dt.current,l.context=Er(e,s)),l.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Jo(e,t,s,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&gs.enqueueReplaceState(l,l.state,null),cs(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function zr(e,t){try{var n="",r=t;do n+=de(r),r=r.return;while(r);var l=n}catch(s){l=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:l,digest:null}}function ei(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ti(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Yd=typeof WeakMap=="function"?WeakMap:Map;function ku(e,t,n){n=vn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ss||(Ss=!0,yi=r),ti(e,t)},n}function ju(e,t,n){n=vn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){ti(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ti(e,t),typeof r!="function"&&(Un===null?Un=new Set([this]):Un.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Su(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Yd;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=uf.bind(null,e,t,n),t.then(e,e))}function Cu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Eu(e,t,n,r,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=vn(-1,1),t.tag=2,$n(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var Gd=J.ReactCurrentOwner,jt=!1;function yt(e,t,n,r){t.child=e===null?Ka(t,null,n,r):Rr(t,e.child,n,r)}function Pu(e,t,n,r,l){n=n.render;var s=t.ref;return Dr(t,l),r=Ko(e,t,n,r,s,l),n=Qo(),e!==null&&!jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,xn(e,t,l)):(Ge&&n&&_o(t),t.flags|=1,yt(e,t,r,l),t.child)}function bu(e,t,n,r,l){if(e===null){var s=n.type;return typeof s=="function"&&!ji(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,_u(e,t,s,r,l)):(e=Rs(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&l)===0){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:ol,n(i,r)&&e.ref===t.ref)return xn(e,t,l)}return t.flags|=1,e=Wn(s,r),e.ref=t.ref,e.return=t,t.child=e}function _u(e,t,n,r,l){if(e!==null){var s=e.memoizedProps;if(ol(s,r)&&e.ref===t.ref)if(jt=!1,t.pendingProps=r=s,(e.lanes&l)!==0)(e.flags&131072)!==0&&(jt=!0);else return t.lanes=e.lanes,xn(e,t,l)}return ni(e,t,n,r,l)}function Ru(e,t,n){var r=t.pendingProps,l=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Fr,Ot),Ot|=n;else{if((n&1073741824)===0)return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,We(Fr,Ot),Ot|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,We(Fr,Ot),Ot|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,We(Fr,Ot),Ot|=r;return yt(e,t,l,n),t.child}function Lu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ni(e,t,n,r,l){var s=kt(n)?Zn:dt.current;return s=Er(t,s),Dr(t,l),n=Ko(e,t,n,r,s,l),r=Qo(),e!==null&&!jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,xn(e,t,l)):(Ge&&r&&_o(t),t.flags|=1,yt(e,t,n,l),t.child)}function Du(e,t,n,r,l){if(kt(n)){var s=!0;ts(t)}else s=!1;if(Dr(t,l),t.stateNode===null)xs(e,t),wu(t,n,r),Zo(t,n,r,l),r=!0;else if(e===null){var i=t.stateNode,u=t.memoizedProps;i.props=u;var m=i.context,k=n.contextType;typeof k=="object"&&k!==null?k=At(k):(k=kt(n)?Zn:dt.current,k=Er(t,k));var F=n.getDerivedStateFromProps,U=typeof F=="function"||typeof i.getSnapshotBeforeUpdate=="function";U||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(u!==r||m!==k)&&Nu(t,i,r,k),Mn=!1;var O=t.memoizedState;i.state=O,cs(t,r,i,l),m=t.memoizedState,u!==r||O!==m||Nt.current||Mn?(typeof F=="function"&&(Jo(t,n,F,r),m=t.memoizedState),(u=Mn||xu(t,n,u,r,O,m,k))?(U||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=k,r=u):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ya(e,t),u=t.memoizedProps,k=t.type===t.elementType?u:Gt(t.type,u),i.props=k,U=t.pendingProps,O=i.context,m=n.contextType,typeof m=="object"&&m!==null?m=At(m):(m=kt(n)?Zn:dt.current,m=Er(t,m));var se=n.getDerivedStateFromProps;(F=typeof se=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(u!==U||O!==m)&&Nu(t,i,r,m),Mn=!1,O=t.memoizedState,i.state=O,cs(t,r,i,l);var fe=t.memoizedState;u!==U||O!==fe||Nt.current||Mn?(typeof se=="function"&&(Jo(t,n,se,r),fe=t.memoizedState),(k=Mn||xu(t,n,k,r,O,fe,m)||!1)?(F||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,fe,m),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,fe,m)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||u===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=fe),i.props=r,i.state=fe,i.context=m,r=k):(typeof i.componentDidUpdate!="function"||u===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),r=!1)}return ri(e,t,n,r,s,l)}function ri(e,t,n,r,l,s){Lu(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return l&&Ia(t,n,!1),xn(e,t,s);r=t.stateNode,Gd.current=t;var u=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Rr(t,e.child,null,s),t.child=Rr(t,null,u,s)):yt(e,t,u,s),t.memoizedState=r.state,l&&Ia(t,n,!0),t.child}function Tu(e){var t=e.stateNode;t.pendingContext?Oa(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Oa(e,t.context,!1),Ao(e,t.containerInfo)}function zu(e,t,n,r,l){return _r(),To(l),t.flags|=256,yt(e,t,n,r),t.child}var li={dehydrated:null,treeContext:null,retryLane:0};function si(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ou(e,t,n){var r=t.pendingProps,l=Xe.current,s=!1,i=(t.flags&128)!==0,u;if((u=i)||(u=e!==null&&e.memoizedState===null?!1:(l&2)!==0),u?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),We(Xe,l&1),e===null)return Do(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Ls(i,r,0,null),e=ur(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=si(n),t.memoizedState=li,e):oi(t,i));if(l=e.memoizedState,l!==null&&(u=l.dehydrated,u!==null))return Xd(e,t,i,r,u,l,n);if(s){s=r.fallback,i=t.mode,l=e.child,u=l.sibling;var m={mode:"hidden",children:r.children};return(i&1)===0&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=m,t.deletions=null):(r=Wn(l,m),r.subtreeFlags=l.subtreeFlags&14680064),u!==null?s=Wn(u,s):(s=ur(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?si(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=li,r}return s=e.child,e=s.sibling,r=Wn(s,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function oi(e,t){return t=Ls({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function vs(e,t,n,r){return r!==null&&To(r),Rr(t,e.child,null,n),e=oi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xd(e,t,n,r,l,s,i){if(n)return t.flags&256?(t.flags&=-257,r=ei(Error(a(422))),vs(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,l=t.mode,r=Ls({mode:"visible",children:r.children},l,0,null),s=ur(s,l,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,(t.mode&1)!==0&&Rr(t,e.child,null,i),t.child.memoizedState=si(i),t.memoizedState=li,s);if((t.mode&1)===0)return vs(e,t,i,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error(a(419)),r=ei(s,r,void 0),vs(e,t,i,r)}if(u=(i&e.childLanes)!==0,jt||u){if(r=ot,r!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(r.suspendedLanes|i))!==0?0:l,l!==0&&l!==s.retryLane&&(s.retryLane=l,gn(e,l),Jt(r,e,l,-1))}return ki(),r=ei(Error(a(421))),vs(e,t,i,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=cf.bind(null,e),l._reactRetry=t,null):(e=s.treeContext,zt=zn(l.nextSibling),Tt=t,Ge=!0,Yt=null,e!==null&&(Mt[$t++]=hn,Mt[$t++]=yn,Mt[$t++]=er,hn=e.id,yn=e.overflow,er=t),t=oi(t,r.children),t.flags|=4096,t)}function Fu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Io(e.return,t,n)}function ii(e,t,n,r,l){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=l)}function Iu(e,t,n){var r=t.pendingProps,l=r.revealOrder,s=r.tail;if(yt(e,t,r.children,n),r=Xe.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fu(e,n,t);else if(e.tag===19)Fu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(We(Xe,r),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&ds(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),ii(t,!1,l,n,s);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&ds(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}ii(t,!0,n,null,s);break;case"together":ii(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xs(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),sr|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,n=Wn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Wn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function qd(e,t,n){switch(t.tag){case 3:Tu(t),_r();break;case 5:qa(t);break;case 1:kt(t.type)&&ts(t);break;case 4:Ao(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;We(is,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(We(Xe,Xe.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Ou(e,t,n):(We(Xe,Xe.current&1),e=xn(e,t,n),e!==null?e.sibling:null);We(Xe,Xe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Iu(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),We(Xe,Xe.current),r)break;return null;case 22:case 23:return t.lanes=0,Ru(e,t,n)}return xn(e,t,n)}var Mu,ai,$u,Au;Mu=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ai=function(){},$u=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,rr(sn.current);var s=null;switch(n){case"input":l=Te(e,l),r=Te(e,r),s=[];break;case"select":l=C({},l,{value:void 0}),r=C({},r,{value:void 0}),s=[];break;case"textarea":l=vt(e,l),r=vt(e,r),s=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Jl)}Vr(n,r);var i;n=null;for(k in l)if(!r.hasOwnProperty(k)&&l.hasOwnProperty(k)&&l[k]!=null)if(k==="style"){var u=l[k];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else k!=="dangerouslySetInnerHTML"&&k!=="children"&&k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(p.hasOwnProperty(k)?s||(s=[]):(s=s||[]).push(k,null));for(k in r){var m=r[k];if(u=l?.[k],r.hasOwnProperty(k)&&m!==u&&(m!=null||u!=null))if(k==="style")if(u){for(i in u)!u.hasOwnProperty(i)||m&&m.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in m)m.hasOwnProperty(i)&&u[i]!==m[i]&&(n||(n={}),n[i]=m[i])}else n||(s||(s=[]),s.push(k,n)),n=m;else k==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,u=u?u.__html:void 0,m!=null&&u!==m&&(s=s||[]).push(k,m)):k==="children"?typeof m!="string"&&typeof m!="number"||(s=s||[]).push(k,""+m):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&(p.hasOwnProperty(k)?(m!=null&&k==="onScroll"&&Qe("scroll",e),s||u===m||(s=[])):(s=s||[]).push(k,m))}n&&(s=s||[]).push("style",n);var k=s;(t.updateQueue=k)&&(t.flags|=4)}},Au=function(e,t,n,r){n!==r&&(t.flags|=4)};function Nl(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Jd(e,t,n){var r=t.pendingProps;switch(Ro(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(t),null;case 1:return kt(t.type)&&es(),pt(t),null;case 3:return r=t.stateNode,Tr(),Ye(Nt),Ye(dt),Ho(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ss(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Yt!==null&&(xi(Yt),Yt=null))),ai(e,t),pt(t),null;case 5:Uo(t);var l=rr(yl.current);if(n=t.type,e!==null&&t.stateNode!=null)$u(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(a(166));return pt(t),null}if(e=rr(sn.current),ss(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ln]=t,r[dl]=s,e=(t.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(l=0;l<al.length;l++)Qe(al[l],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":Ae(r,s),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Qe("invalid",r);break;case"textarea":Lt(r,s),Qe("invalid",r)}Vr(n,s),l=null;for(var i in s)if(s.hasOwnProperty(i)){var u=s[i];i==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&ql(r.textContent,u,e),l=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&ql(r.textContent,u,e),l=["children",""+u]):p.hasOwnProperty(i)&&u!=null&&i==="onScroll"&&Qe("scroll",r)}switch(n){case"input":ye(r),Ue(r,s,!0);break;case"textarea":ye(r),Ur(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Jl)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cn(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[ln]=t,e[dl]=r,Mu(e,t,!1,!1),t.stateNode=e;e:{switch(i=Gn(n,r),n){case"dialog":Qe("cancel",e),Qe("close",e),l=r;break;case"iframe":case"object":case"embed":Qe("load",e),l=r;break;case"video":case"audio":for(l=0;l<al.length;l++)Qe(al[l],e);l=r;break;case"source":Qe("error",e),l=r;break;case"img":case"image":case"link":Qe("error",e),Qe("load",e),l=r;break;case"details":Qe("toggle",e),l=r;break;case"input":Ae(e,r),l=Te(e,r),Qe("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=C({},r,{value:void 0}),Qe("invalid",e);break;case"textarea":Lt(e,r),l=vt(e,r),Qe("invalid",e);break;default:l=r}Vr(n,l),u=l;for(s in u)if(u.hasOwnProperty(s)){var m=u[s];s==="style"?Hr(e,m):s==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&Br(e,m)):s==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&jn(e,m):typeof m=="number"&&jn(e,""+m):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(p.hasOwnProperty(s)?m!=null&&s==="onScroll"&&Qe("scroll",e):m!=null&&ie(e,s,m,i))}switch(n){case"input":ye(e),Ue(e,r,!1);break;case"textarea":ye(e),Ur(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ze(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Rt(e,!!r.multiple,s,!1):r.defaultValue!=null&&Rt(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Jl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pt(t),null;case 6:if(e&&t.stateNode!=null)Au(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(a(166));if(n=rr(yl.current),rr(sn.current),ss(t)){if(r=t.stateNode,n=t.memoizedProps,r[ln]=t,(s=r.nodeValue!==n)&&(e=Tt,e!==null))switch(e.tag){case 3:ql(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ql(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ln]=t,t.stateNode=r}return pt(t),null;case 13:if(Ye(Xe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ge&&zt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Ha(),_r(),t.flags|=98560,s=!1;else if(s=ss(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(a(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(a(317));s[ln]=t}else _r(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;pt(t),s=!1}else Yt!==null&&(xi(Yt),Yt=null),s=!0;if(!s)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Xe.current&1)!==0?rt===0&&(rt=3):ki())),t.updateQueue!==null&&(t.flags|=4),pt(t),null);case 4:return Tr(),ai(e,t),e===null&&ul(t.stateNode.containerInfo),pt(t),null;case 10:return Fo(t.type._context),pt(t),null;case 17:return kt(t.type)&&es(),pt(t),null;case 19:if(Ye(Xe),s=t.memoizedState,s===null)return pt(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)Nl(s,!1);else{if(rt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=ds(e),i!==null){for(t.flags|=128,Nl(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return We(Xe,Xe.current&1|2),t.child}e=e.sibling}s.tail!==null&&ge()>Ir&&(t.flags|=128,r=!0,Nl(s,!1),t.lanes=4194304)}else{if(!r)if(e=ds(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Nl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Ge)return pt(t),null}else 2*ge()-s.renderingStartTime>Ir&&n!==1073741824&&(t.flags|=128,r=!0,Nl(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ge(),t.sibling=null,n=Xe.current,We(Xe,r?n&1|2:n&1),t):(pt(t),null);case 22:case 23:return Ni(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(Ot&1073741824)!==0&&(pt(t),t.subtreeFlags&6&&(t.flags|=8192)):pt(t),null;case 24:return null;case 25:return null}throw Error(a(156,t.tag))}function Zd(e,t){switch(Ro(t),t.tag){case 1:return kt(t.type)&&es(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Tr(),Ye(Nt),Ye(dt),Ho(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Uo(t),null;case 13:if(Ye(Xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));_r()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ye(Xe),null;case 4:return Tr(),null;case 10:return Fo(t.type._context),null;case 22:case 23:return Ni(),null;case 24:return null;default:return null}}var ws=!1,mt=!1,ef=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Or(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(e,t,r)}else n.current=null}function ui(e,t,n){try{n()}catch(r){Je(e,t,r)}}var Uu=!1;function tf(e,t){if(No=Al,e=xa(),po(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,u=-1,m=-1,k=0,F=0,U=e,O=null;t:for(;;){for(var se;U!==n||l!==0&&U.nodeType!==3||(u=i+l),U!==s||r!==0&&U.nodeType!==3||(m=i+r),U.nodeType===3&&(i+=U.nodeValue.length),(se=U.firstChild)!==null;)O=U,U=se;for(;;){if(U===e)break t;if(O===n&&++k===l&&(u=i),O===s&&++F===r&&(m=i),(se=U.nextSibling)!==null)break;U=O,O=U.parentNode}U=se}n=u===-1||m===-1?null:{start:u,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(ko={focusedElem:e,selectionRange:n},Al=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var fe=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,et=fe.memoizedState,w=t.stateNode,y=w.getSnapshotBeforeUpdate(t.elementType===t.type?pe:Gt(t.type,pe),et);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(V){Je(t,t.return,V)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return fe=Uu,Uu=!1,fe}function kl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var s=l.destroy;l.destroy=void 0,s!==void 0&&ui(t,n,s)}l=l.next}while(l!==r)}}function Ns(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ci(e){var t=e.ref;if(t!==null){var n=e.stateNode;e.tag,e=n,typeof t=="function"?t(e):t.current=e}}function Bu(e){var t=e.alternate;t!==null&&(e.alternate=null,Bu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ln],delete t[dl],delete t[Eo],delete t[Id],delete t[Md])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hu(e){return e.tag===5||e.tag===3||e.tag===4}function Vu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function di(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Jl));else if(r!==4&&(e=e.child,e!==null))for(di(e,t,n),e=e.sibling;e!==null;)di(e,t,n),e=e.sibling}function fi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(fi(e,t,n),e=e.sibling;e!==null;)fi(e,t,n),e=e.sibling}var ut=null,Xt=!1;function An(e,t,n){for(n=n.child;n!==null;)Wu(e,t,n),n=n.sibling}function Wu(e,t,n){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Wt,n)}catch{}switch(n.tag){case 5:mt||Or(n,t);case 6:var r=ut,l=Xt;ut=null,An(e,t,n),ut=r,Xt=l,ut!==null&&(Xt?(e=ut,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(Xt?(e=ut,n=n.stateNode,e.nodeType===8?Co(e.parentNode,n):e.nodeType===1&&Co(e,n),el(e)):Co(ut,n.stateNode));break;case 4:r=ut,l=Xt,ut=n.stateNode.containerInfo,Xt=!0,An(e,t,n),ut=r,Xt=l;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var s=l,i=s.destroy;s=s.tag,i!==void 0&&((s&2)!==0||(s&4)!==0)&&ui(n,t,i),l=l.next}while(l!==r)}An(e,t,n);break;case 1:if(!mt&&(Or(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Je(n,t,u)}An(e,t,n);break;case 21:An(e,t,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,An(e,t,n),mt=r):An(e,t,n);break;default:An(e,t,n)}}function Ku(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ef),t.forEach(function(r){var l=df.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function qt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var s=e,i=t,u=i;e:for(;u!==null;){switch(u.tag){case 5:ut=u.stateNode,Xt=!1;break e;case 3:ut=u.stateNode.containerInfo,Xt=!0;break e;case 4:ut=u.stateNode.containerInfo,Xt=!0;break e}u=u.return}if(ut===null)throw Error(a(160));Wu(s,i,l),ut=null,Xt=!1;var m=l.alternate;m!==null&&(m.return=null),l.return=null}catch(k){Je(l,t,k)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Qu(t,e),t=t.sibling}function Qu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qt(t,e),an(e),r&4){try{kl(3,e,e.return),Ns(3,e)}catch(pe){Je(e,e.return,pe)}try{kl(5,e,e.return)}catch(pe){Je(e,e.return,pe)}}break;case 1:qt(t,e),an(e),r&512&&n!==null&&Or(n,n.return);break;case 5:if(qt(t,e),an(e),r&512&&n!==null&&Or(n,n.return),e.flags&32){var l=e.stateNode;try{jn(l,"")}catch(pe){Je(e,e.return,pe)}}if(r&4&&(l=e.stateNode,l!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,u=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&_e(l,s),Gn(u,i);var k=Gn(u,s);for(i=0;i<m.length;i+=2){var F=m[i],U=m[i+1];F==="style"?Hr(l,U):F==="dangerouslySetInnerHTML"?Br(l,U):F==="children"?jn(l,U):ie(l,F,U,k)}switch(u){case"input":Oe(l,s);break;case"textarea":at(l,s);break;case"select":var O=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!s.multiple;var se=s.value;se!=null?Rt(l,!!s.multiple,se,!1):O!==!!s.multiple&&(s.defaultValue!=null?Rt(l,!!s.multiple,s.defaultValue,!0):Rt(l,!!s.multiple,s.multiple?[]:"",!1))}l[dl]=s}catch(pe){Je(e,e.return,pe)}}break;case 6:if(qt(t,e),an(e),r&4){if(e.stateNode===null)throw Error(a(162));l=e.stateNode,s=e.memoizedProps;try{l.nodeValue=s}catch(pe){Je(e,e.return,pe)}}break;case 3:if(qt(t,e),an(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{el(t.containerInfo)}catch(pe){Je(e,e.return,pe)}break;case 4:qt(t,e),an(e);break;case 13:qt(t,e),an(e),l=e.child,l.flags&8192&&(s=l.memoizedState!==null,l.stateNode.isHidden=s,!s||l.alternate!==null&&l.alternate.memoizedState!==null||(hi=ge())),r&4&&Ku(e);break;case 22:if(F=n!==null&&n.memoizedState!==null,e.mode&1?(mt=(k=mt)||F,qt(t,e),mt=k):qt(t,e),an(e),r&8192){if(k=e.memoizedState!==null,(e.stateNode.isHidden=k)&&!F&&(e.mode&1)!==0)for(ue=e,F=e.child;F!==null;){for(U=ue=F;ue!==null;){switch(O=ue,se=O.child,O.tag){case 0:case 11:case 14:case 15:kl(4,O,O.return);break;case 1:Or(O,O.return);var fe=O.stateNode;if(typeof fe.componentWillUnmount=="function"){r=O,n=O.return;try{t=r,fe.props=t.memoizedProps,fe.state=t.memoizedState,fe.componentWillUnmount()}catch(pe){Je(r,n,pe)}}break;case 5:Or(O,O.return);break;case 22:if(O.memoizedState!==null){Xu(U);continue}}se!==null?(se.return=O,ue=se):Xu(U)}F=F.sibling}e:for(F=null,U=e;;){if(U.tag===5){if(F===null){F=U;try{l=U.stateNode,k?(s=l.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=U.stateNode,m=U.memoizedProps.style,i=m!=null&&m.hasOwnProperty("display")?m.display:null,u.style.display=Vt("display",i))}catch(pe){Je(e,e.return,pe)}}}else if(U.tag===6){if(F===null)try{U.stateNode.nodeValue=k?"":U.memoizedProps}catch(pe){Je(e,e.return,pe)}}else if((U.tag!==22&&U.tag!==23||U.memoizedState===null||U===e)&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===e)break e;for(;U.sibling===null;){if(U.return===null||U.return===e)break e;F===U&&(F=null),U=U.return}F===U&&(F=null),U.sibling.return=U.return,U=U.sibling}}break;case 19:qt(t,e),an(e),r&4&&Ku(e);break;case 21:break;default:qt(t,e),an(e)}}function an(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Hu(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(jn(l,""),r.flags&=-33);var s=Vu(e);fi(e,s,l);break;case 3:case 4:var i=r.stateNode.containerInfo,u=Vu(e);di(e,u,i);break;default:throw Error(a(161))}}catch(m){Je(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nf(e,t,n){ue=e,Yu(e)}function Yu(e,t,n){for(var r=(e.mode&1)!==0;ue!==null;){var l=ue,s=l.child;if(l.tag===22&&r){var i=l.memoizedState!==null||ws;if(!i){var u=l.alternate,m=u!==null&&u.memoizedState!==null||mt;u=ws;var k=mt;if(ws=i,(mt=m)&&!k)for(ue=l;ue!==null;)i=ue,m=i.child,i.tag===22&&i.memoizedState!==null?qu(l):m!==null?(m.return=i,ue=m):qu(l);for(;s!==null;)ue=s,Yu(s),s=s.sibling;ue=l,ws=u,mt=k}Gu(e)}else(l.subtreeFlags&8772)!==0&&s!==null?(s.return=l,ue=s):Gu(e)}}function Gu(e){for(;ue!==null;){var t=ue;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:mt||Ns(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!mt)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:Gt(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Xa(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Xa(t,i,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var k=t.alternate;if(k!==null){var F=k.memoizedState;if(F!==null){var U=F.dehydrated;U!==null&&el(U)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}mt||t.flags&512&&ci(t)}catch(O){Je(t,t.return,O)}}if(t===e){ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Xu(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ue=n;break}ue=t.return}}function qu(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ns(4,t)}catch(m){Je(t,n,m)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(m){Je(t,l,m)}}var s=t.return;try{ci(t)}catch(m){Je(t,s,m)}break;case 5:var i=t.return;try{ci(t)}catch(m){Je(t,i,m)}}}catch(m){Je(t,t.return,m)}if(t===e){ue=null;break}var u=t.sibling;if(u!==null){u.return=t.return,ue=u;break}ue=t.return}}var rf=Math.ceil,ks=J.ReactCurrentDispatcher,pi=J.ReactCurrentOwner,Bt=J.ReactCurrentBatchConfig,Me=0,ot=null,tt=null,ct=0,Ot=0,Fr=On(0),rt=0,jl=null,sr=0,js=0,mi=0,Sl=null,St=null,hi=0,Ir=1/0,wn=null,Ss=!1,yi=null,Un=null,Cs=!1,Bn=null,Es=0,Cl=0,gi=null,Ps=-1,bs=0;function gt(){return(Me&6)!==0?ge():Ps!==-1?Ps:Ps=ge()}function Hn(e){return(e.mode&1)===0?1:(Me&2)!==0&&ct!==0?ct&-ct:Ad.transition!==null?(bs===0&&(bs=Vi()),bs):(e=He,e!==0||(e=window.event,e=e===void 0?16:Zi(e.type)),e)}function Jt(e,t,n,r){if(50<Cl)throw Cl=0,gi=null,Error(a(185));Gr(e,n,r),((Me&2)===0||e!==ot)&&(e===ot&&((Me&2)===0&&(js|=n),rt===4&&Vn(e,ct)),Ct(e,r),n===1&&Me===0&&(t.mode&1)===0&&(Ir=ge()+500,ns&&In()))}function Ct(e,t){var n=e.callbackNode;Ac(e,t);var r=Il(e,e===ot?ct:0);if(r===0)n!==null&&Fe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Fe(n),t===1)e.tag===0?$d(Zu.bind(null,e)):Ma(Zu.bind(null,e)),Od(function(){(Me&6)===0&&In()}),n=null;else{switch(Wi(r)){case 1:n=Ie;break;case 4:n=lt;break;case 16:n=Re;break;case 536870912:n=rn;break;default:n=Re}n=ic(n,Ju.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ju(e,t){if(Ps=-1,bs=0,(Me&6)!==0)throw Error(a(327));var n=e.callbackNode;if(Mr()&&e.callbackNode!==n)return null;var r=Il(e,e===ot?ct:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=_s(e,r);else{t=r;var l=Me;Me|=2;var s=tc();(ot!==e||ct!==t)&&(wn=null,Ir=ge()+500,ir(e,t));do try{of();break}catch(u){ec(e,u)}while(!0);Oo(),ks.current=s,Me=l,tt!==null?t=0:(ot=null,ct=0,t=rt)}if(t!==0){if(t===2&&(l=Xs(e),l!==0&&(r=l,t=vi(e,l))),t===1)throw n=jl,ir(e,0),Vn(e,r),Ct(e,ge()),n;if(t===6)Vn(e,r);else{if(l=e.current.alternate,(r&30)===0&&!lf(l)&&(t=_s(e,r),t===2&&(s=Xs(e),s!==0&&(r=s,t=vi(e,s))),t===1))throw n=jl,ir(e,0),Vn(e,r),Ct(e,ge()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:ar(e,St,wn);break;case 3:if(Vn(e,r),(r&130023424)===r&&(t=hi+500-ge(),10<t)){if(Il(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){gt(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=So(ar.bind(null,e,St,wn),t);break}ar(e,St,wn);break;case 4:if(Vn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var i=31-Kt(r);s=1<<i,i=t[i],i>l&&(l=i),r&=~s}if(r=l,r=ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rf(r/1960))-r,10<r){e.timeoutHandle=So(ar.bind(null,e,St,wn),r);break}ar(e,St,wn);break;case 5:ar(e,St,wn);break;default:throw Error(a(329))}}}return Ct(e,ge()),e.callbackNode===n?Ju.bind(null,e):null}function vi(e,t){var n=Sl;return e.current.memoizedState.isDehydrated&&(ir(e,t).flags|=256),e=_s(e,t),e!==2&&(t=St,St=n,t!==null&&xi(t)),e}function xi(e){St===null?St=e:St.push.apply(St,e)}function lf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],s=l.getSnapshot;l=l.value;try{if(!Qt(s(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vn(e,t){for(t&=~mi,t&=~js,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function Zu(e){if((Me&6)!==0)throw Error(a(327));Mr();var t=Il(e,0);if((t&1)===0)return Ct(e,ge()),null;var n=_s(e,t);if(e.tag!==0&&n===2){var r=Xs(e);r!==0&&(t=r,n=vi(e,r))}if(n===1)throw n=jl,ir(e,0),Vn(e,t),Ct(e,ge()),n;if(n===6)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ar(e,St,wn),Ct(e,ge()),null}function wi(e,t){var n=Me;Me|=1;try{return e(t)}finally{Me=n,Me===0&&(Ir=ge()+500,ns&&In())}}function or(e){Bn!==null&&Bn.tag===0&&(Me&6)===0&&Mr();var t=Me;Me|=1;var n=Bt.transition,r=He;try{if(Bt.transition=null,He=1,e)return e()}finally{He=r,Bt.transition=n,Me=t,(Me&6)===0&&In()}}function Ni(){Ot=Fr.current,Ye(Fr)}function ir(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,zd(n)),tt!==null)for(n=tt.return;n!==null;){var r=n;switch(Ro(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&es();break;case 3:Tr(),Ye(Nt),Ye(dt),Ho();break;case 5:Uo(r);break;case 4:Tr();break;case 13:Ye(Xe);break;case 19:Ye(Xe);break;case 10:Fo(r.type._context);break;case 22:case 23:Ni()}n=n.return}if(ot=e,tt=e=Wn(e.current,null),ct=Ot=t,rt=0,jl=null,mi=js=sr=0,St=Sl=null,nr!==null){for(t=0;t<nr.length;t++)if(n=nr[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=l,r.next=i}n.pending=r}nr=null}return e}function ec(e,t){do{var n=tt;try{if(Oo(),fs.current=ys,ps){for(var r=qe.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}ps=!1}if(lr=0,st=nt=qe=null,gl=!1,vl=0,pi.current=null,n===null||n.return===null){rt=1,jl=t,tt=null;break}e:{var s=e,i=n.return,u=n,m=t;if(t=ct,u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var k=m,F=u,U=F.tag;if((F.mode&1)===0&&(U===0||U===11||U===15)){var O=F.alternate;O?(F.updateQueue=O.updateQueue,F.memoizedState=O.memoizedState,F.lanes=O.lanes):(F.updateQueue=null,F.memoizedState=null)}var se=Cu(i);if(se!==null){se.flags&=-257,Eu(se,i,u,s,t),se.mode&1&&Su(s,k,t),t=se,m=k;var fe=t.updateQueue;if(fe===null){var pe=new Set;pe.add(m),t.updateQueue=pe}else fe.add(m);break e}else{if((t&1)===0){Su(s,k,t),ki();break e}m=Error(a(426))}}else if(Ge&&u.mode&1){var et=Cu(i);if(et!==null){(et.flags&65536)===0&&(et.flags|=256),Eu(et,i,u,s,t),To(zr(m,u));break e}}s=m=zr(m,u),rt!==4&&(rt=2),Sl===null?Sl=[s]:Sl.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var w=ku(s,m,t);Ga(s,w);break e;case 1:u=m;var y=s.type,N=s.stateNode;if((s.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Un===null||!Un.has(N)))){s.flags|=65536,t&=-t,s.lanes|=t;var V=ju(s,u,t);Ga(s,V);break e}}s=s.return}while(s!==null)}rc(n)}catch(he){t=he,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(!0)}function tc(){var e=ks.current;return ks.current=ys,e===null?ys:e}function ki(){(rt===0||rt===3||rt===2)&&(rt=4),ot===null||(sr&268435455)===0&&(js&268435455)===0||Vn(ot,ct)}function _s(e,t){var n=Me;Me|=2;var r=tc();(ot!==e||ct!==t)&&(wn=null,ir(e,t));do try{sf();break}catch(l){ec(e,l)}while(!0);if(Oo(),Me=n,ks.current=r,tt!==null)throw Error(a(261));return ot=null,ct=0,rt}function sf(){for(;tt!==null;)nc(tt)}function of(){for(;tt!==null&&!be();)nc(tt)}function nc(e){var t=oc(e.alternate,e,Ot);e.memoizedProps=e.pendingProps,t===null?rc(e):tt=t,pi.current=null}function rc(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Jd(n,t,Ot),n!==null){tt=n;return}}else{if(n=Zd(n,t),n!==null){n.flags&=32767,tt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rt=6,tt=null;return}}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);rt===0&&(rt=5)}function ar(e,t,n){var r=He,l=Bt.transition;try{Bt.transition=null,He=1,af(e,t,n,r)}finally{Bt.transition=l,He=r}return null}function af(e,t,n,r){do Mr();while(Bn!==null);if((Me&6)!==0)throw Error(a(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Uc(e,s),e===ot&&(tt=ot=null,ct=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Cs||(Cs=!0,ic(Re,function(){return Mr(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=Bt.transition,Bt.transition=null;var i=He;He=1;var u=Me;Me|=4,pi.current=null,tf(e,n),Qu(n,e),Pd(ko),Al=!!No,ko=No=null,e.current=n,nf(n),Se(),Me=u,He=i,Bt.transition=s}else e.current=n;if(Cs&&(Cs=!1,Bn=e,Es=l),s=e.pendingLanes,s===0&&(Un=null),qn(n.stateNode),Ct(e,ge()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(Ss)throw Ss=!1,e=yi,yi=null,e;return(Es&1)!==0&&e.tag!==0&&Mr(),s=e.pendingLanes,(s&1)!==0?e===gi?Cl++:(Cl=0,gi=e):Cl=0,In(),null}function Mr(){if(Bn!==null){var e=Wi(Es),t=Bt.transition,n=He;try{if(Bt.transition=null,He=16>e?16:e,Bn===null)var r=!1;else{if(e=Bn,Bn=null,Es=0,(Me&6)!==0)throw Error(a(331));var l=Me;for(Me|=4,ue=e.current;ue!==null;){var s=ue,i=s.child;if((ue.flags&16)!==0){var u=s.deletions;if(u!==null){for(var m=0;m<u.length;m++){var k=u[m];for(ue=k;ue!==null;){var F=ue;switch(F.tag){case 0:case 11:case 15:kl(8,F,s)}var U=F.child;if(U!==null)U.return=F,ue=U;else for(;ue!==null;){F=ue;var O=F.sibling,se=F.return;if(Bu(F),F===k){ue=null;break}if(O!==null){O.return=se,ue=O;break}ue=se}}}var fe=s.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var et=pe.sibling;pe.sibling=null,pe=et}while(pe!==null)}}ue=s}}if((s.subtreeFlags&2064)!==0&&i!==null)i.return=s,ue=i;else e:for(;ue!==null;){if(s=ue,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:kl(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,ue=w;break e}ue=s.return}}var y=e.current;for(ue=y;ue!==null;){i=ue;var N=i.child;if((i.subtreeFlags&2064)!==0&&N!==null)N.return=i,ue=N;else e:for(i=y;ue!==null;){if(u=ue,(u.flags&2048)!==0)try{switch(u.tag){case 0:case 11:case 15:Ns(9,u)}}catch(he){Je(u,u.return,he)}if(u===i){ue=null;break e}var V=u.sibling;if(V!==null){V.return=u.return,ue=V;break e}ue=u.return}}if(Me=l,In(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Wt,e)}catch{}r=!0}return r}finally{He=n,Bt.transition=t}}return!1}function lc(e,t,n){t=zr(n,t),t=ku(e,t,1),e=$n(e,t,1),t=gt(),e!==null&&(Gr(e,1,t),Ct(e,t))}function Je(e,t,n){if(e.tag===3)lc(e,e,n);else for(;t!==null;){if(t.tag===3){lc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Un===null||!Un.has(r))){e=zr(n,e),e=ju(t,e,1),t=$n(t,e,1),e=gt(),t!==null&&(Gr(t,1,e),Ct(t,e));break}}t=t.return}}function uf(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=gt(),e.pingedLanes|=e.suspendedLanes&n,ot===e&&(ct&n)===n&&(rt===4||rt===3&&(ct&130023424)===ct&&500>ge()-hi?ir(e,0):mi|=n),Ct(e,t)}function sc(e,t){t===0&&((e.mode&1)===0?t=1:(t=Fl,Fl<<=1,(Fl&130023424)===0&&(Fl=4194304)));var n=gt();e=gn(e,t),e!==null&&(Gr(e,t,n),Ct(e,n))}function cf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),sc(e,n)}function df(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}r!==null&&r.delete(t),sc(e,n)}var oc;oc=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Nt.current)jt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return jt=!1,qd(e,t,n);jt=(e.flags&131072)!==0}else jt=!1,Ge&&(t.flags&1048576)!==0&&$a(t,ls,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;xs(e,t),e=t.pendingProps;var l=Er(t,dt.current);Dr(t,n),l=Ko(null,t,r,e,l,n);var s=Qo();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kt(r)?(s=!0,ts(t)):s=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,$o(t),l.updater=gs,t.stateNode=l,l._reactInternals=t,Zo(t,r,e,n),t=ri(null,t,r,!0,s,n)):(t.tag=0,Ge&&s&&_o(t),yt(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(xs(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=pf(r),e=Gt(r,e),l){case 0:t=ni(null,t,r,e,n);break e;case 1:t=Du(null,t,r,e,n);break e;case 11:t=Pu(null,t,r,e,n);break e;case 14:t=bu(null,t,r,Gt(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Gt(r,l),ni(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Gt(r,l),Du(e,t,r,l,n);case 3:e:{if(Tu(t),e===null)throw Error(a(387));r=t.pendingProps,s=t.memoizedState,l=s.element,Ya(e,t),cs(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){l=zr(Error(a(423)),t),t=zu(e,t,r,n,l);break e}else if(r!==l){l=zr(Error(a(424)),t),t=zu(e,t,r,n,l);break e}else for(zt=zn(t.stateNode.containerInfo.firstChild),Tt=t,Ge=!0,Yt=null,n=Ka(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_r(),r===l){t=xn(e,t,n);break e}yt(e,t,r,n)}t=t.child}return t;case 5:return qa(t),e===null&&Do(t),r=t.type,l=t.pendingProps,s=e!==null?e.memoizedProps:null,i=l.children,jo(r,l)?i=null:s!==null&&jo(r,s)&&(t.flags|=32),Lu(e,t),yt(e,t,i,n),t.child;case 6:return e===null&&Do(t),null;case 13:return Ou(e,t,n);case 4:return Ao(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Rr(t,null,r,n):yt(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Gt(r,l),Pu(e,t,r,l,n);case 7:return yt(e,t,t.pendingProps,n),t.child;case 8:return yt(e,t,t.pendingProps.children,n),t.child;case 12:return yt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,s=t.memoizedProps,i=l.value,We(is,r._currentValue),r._currentValue=i,s!==null)if(Qt(s.value,i)){if(s.children===l.children&&!Nt.current){t=xn(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var u=s.dependencies;if(u!==null){i=s.child;for(var m=u.firstContext;m!==null;){if(m.context===r){if(s.tag===1){m=vn(-1,n&-n),m.tag=2;var k=s.updateQueue;if(k!==null){k=k.shared;var F=k.pending;F===null?m.next=m:(m.next=F.next,F.next=m),k.pending=m}}s.lanes|=n,m=s.alternate,m!==null&&(m.lanes|=n),Io(s.return,n,t),u.lanes|=n;break}m=m.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(a(341));i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Io(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}yt(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,Dr(t,n),l=At(l),r=r(l),t.flags|=1,yt(e,t,r,n),t.child;case 14:return r=t.type,l=Gt(r,t.pendingProps),l=Gt(r.type,l),bu(e,t,r,l,n);case 15:return _u(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Gt(r,l),xs(e,t),t.tag=1,kt(r)?(e=!0,ts(t)):e=!1,Dr(t,n),wu(t,r,l),Zo(t,r,l,n),ri(null,t,r,!0,e,n);case 19:return Iu(e,t,n);case 22:return Ru(e,t,n)}throw Error(a(156,t.tag))};function ic(e,t){return le(e,t)}function ff(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(e,t,n,r){return new ff(e,t,n,r)}function ji(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pf(e){if(typeof e=="function")return ji(e)?1:0;if(e!=null){if(e=e.$$typeof,e===X)return 11;if(e===M)return 14}return 2}function Wn(e,t){var n=e.alternate;return n===null?(n=Ht(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rs(e,t,n,r,l,s){var i=2;if(r=e,typeof e=="function")ji(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ee:return ur(n.children,l,s,t);case G:i=8,l|=8;break;case Pe:return e=Ht(12,n,t,l|2),e.elementType=Pe,e.lanes=s,e;case Z:return e=Ht(13,n,t,l),e.elementType=Z,e.lanes=s,e;case A:return e=Ht(19,n,t,l),e.elementType=A,e.lanes=s,e;case ne:return Ls(n,l,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ce:i=10;break e;case ke:i=9;break e;case X:i=11;break e;case M:i=14;break e;case ae:i=16,r=null;break e}throw Error(a(130,e==null?e:typeof e,""))}return t=Ht(i,n,t,l),t.elementType=e,t.type=r,t.lanes=s,t}function ur(e,t,n,r){return e=Ht(7,e,r,t),e.lanes=n,e}function Ls(e,t,n,r){return e=Ht(22,e,r,t),e.elementType=ne,e.lanes=n,e.stateNode={isHidden:!1},e}function Si(e,t,n){return e=Ht(6,e,null,t),e.lanes=n,e}function Ci(e,t,n){return t=Ht(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mf(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qs(0),this.expirationTimes=qs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qs(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Ei(e,t,n,r,l,s,i,u,m){return e=new mf(e,t,n,u,m),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Ht(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$o(s),e}function hf(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:je,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ac(e){if(!e)return Fn;e=e._reactInternals;e:{if(fn(e)!==e||e.tag!==1)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(a(171))}if(e.tag===1){var n=e.type;if(kt(n))return Fa(e,n,t)}return t}function uc(e,t,n,r,l,s,i,u,m){return e=Ei(n,r,!0,e,l,s,i,u,m),e.context=ac(null),n=e.current,r=gt(),l=Hn(n),s=vn(r,l),s.callback=t??null,$n(n,s,l),e.current.lanes=l,Gr(e,l,r),Ct(e,r),e}function Ds(e,t,n,r){var l=t.current,s=gt(),i=Hn(l);return n=ac(n),t.context===null?t.context=n:t.pendingContext=n,t=vn(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=$n(l,t,i),e!==null&&(Jt(e,l,i,s),us(e,l,i)),i}function Ts(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function cc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Pi(e,t){cc(e,t),(e=e.alternate)&&cc(e,t)}function yf(){return null}var dc=typeof reportError=="function"?reportError:function(e){console.error(e)};function bi(e){this._internalRoot=e}zs.prototype.render=bi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));Ds(e,t,null,null)},zs.prototype.unmount=bi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;or(function(){Ds(null,e,null,null)}),t[pn]=null}};function zs(e){this._internalRoot=e}zs.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yi();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ln.length&&t!==0&&t<Ln[n].priority;n++);Ln.splice(n,0,e),n===0&&qi(e)}};function _i(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Os(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fc(){}function gf(e,t,n,r,l){if(l){if(typeof r=="function"){var s=r;r=function(){var k=Ts(i);s.call(k)}}var i=uc(t,r,e,0,null,!1,!1,"",fc);return e._reactRootContainer=i,e[pn]=i.current,ul(e.nodeType===8?e.parentNode:e),or(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var u=r;r=function(){var k=Ts(m);u.call(k)}}var m=Ei(e,0,!1,null,null,!1,!1,"",fc);return e._reactRootContainer=m,e[pn]=m.current,ul(e.nodeType===8?e.parentNode:e),or(function(){Ds(t,m,n,r)}),m}function Fs(e,t,n,r,l){var s=n._reactRootContainer;if(s){var i=s;if(typeof l=="function"){var u=l;l=function(){var m=Ts(i);u.call(m)}}Ds(t,i,e,l)}else i=gf(n,t,e,l,r);return Ts(i)}Ki=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Yr(t.pendingLanes);n!==0&&(Js(t,n|1),Ct(t,ge()),(Me&6)===0&&(Ir=ge()+500,In()))}break;case 13:or(function(){var r=gn(e,1);if(r!==null){var l=gt();Jt(r,e,1,l)}}),Pi(e,1)}},Zs=function(e){if(e.tag===13){var t=gn(e,134217728);if(t!==null){var n=gt();Jt(t,e,134217728,n)}Pi(e,134217728)}},Qi=function(e){if(e.tag===13){var t=Hn(e),n=gn(e,t);if(n!==null){var r=gt();Jt(n,e,t,r)}Pi(e,t)}},Yi=function(){return He},Gi=function(e,t){var n=He;try{return He=e,t()}finally{He=n}},fr=function(e,t,n){switch(t){case"input":if(Oe(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=Zl(r);if(!l)throw Error(a(90));te(r),Oe(r,l)}}}break;case"textarea":at(e,n);break;case"select":t=n.value,t!=null&&Rt(e,!!n.multiple,t,!1)}},Dl=wi,en=or;var vf={usingClientEntryPoint:!1,Events:[fl,Sr,Zl,Ll,pr,wi]},El={findFiberByHostInstance:Jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xf={bundleType:El.bundleType,version:El.version,rendererPackageName:El.rendererPackageName,rendererConfig:El.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=E(e),e===null?null:e.stateNode},findFiberByHostInstance:El.findFiberByHostInstance||yf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Is=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Is.isDisabled&&Is.supportsFiber)try{Wt=Is.inject(xf),It=Is}catch{}}return Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vf,Et.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_i(t))throw Error(a(200));return hf(e,t,null,n)},Et.createRoot=function(e,t){if(!_i(e))throw Error(a(299));var n=!1,r="",l=dc;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Ei(e,1,!1,null,null,n,!1,r,l),e[pn]=t.current,ul(e.nodeType===8?e.parentNode:e),new bi(t)},Et.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=E(t),e=e===null?null:e.stateNode,e},Et.flushSync=function(e){return or(e)},Et.hydrate=function(e,t,n){if(!Os(t))throw Error(a(200));return Fs(null,e,t,!0,n)},Et.hydrateRoot=function(e,t,n){if(!_i(e))throw Error(a(405));var r=n!=null&&n.hydratedSources||null,l=!1,s="",i=dc;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=uc(t,null,e,1,n??null,l,!1,s,i),e[pn]=t.current,ul(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new zs(t)},Et.render=function(e,t,n){if(!Os(t))throw Error(a(200));return Fs(null,e,t,!1,n)},Et.unmountComponentAtNode=function(e){if(!Os(e))throw Error(a(40));return e._reactRootContainer?(or(function(){Fs(null,null,e,!1,function(){e._reactRootContainer=null,e[pn]=null})}),!0):!1},Et.unstable_batchedUpdates=wi,Et.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Os(n))throw Error(a(200));if(e==null||e._reactInternals===void 0)throw Error(a(38));return Fs(e,t,n,!1,r)},Et.version="18.3.1-next-f1338f8080-20240426",Et}var wc;function bf(){if(wc)return Di.exports;wc=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(d){console.error(d)}}return c(),Di.exports=Pf(),Di.exports}var Nc;function _f(){if(Nc)return Ms;Nc=1;var c=bf();return Ms.createRoot=c.createRoot,Ms.hydrateRoot=c.hydrateRoot,Ms}var Rf=_f();const Ke={get(c){try{return localStorage.getItem(c)}catch(d){return console.warn("safeLocalStorage.get failed",d),null}},set(c,d){try{if(localStorage.setItem(c,d),localStorage.getItem(c)!==d)throw new Error("Failed to verify localStorage write")}catch(a){throw console.error("safeLocalStorage.set failed",a),a}},remove(c){try{localStorage.removeItem(c)}catch(d){console.warn("safeLocalStorage.remove failed",d)}}},Lf="narrative-covers",Df=1,Yn="covers",Pt="metadata";let $s=null;async function Ws(){return $s||new Promise((c,d)=>{const a=indexedDB.open(Lf,Df);a.onerror=()=>d(a.error),a.onsuccess=()=>{$s=a.result,c($s)},a.onupgradeneeded=v=>{const p=v.target.result;p.objectStoreNames.contains(Yn)||p.createObjectStore(Yn,{keyPath:"coverKey"}),p.objectStoreNames.contains(Pt)||p.createObjectStore(Pt,{keyPath:"projectId"}).createIndex("lastUsed","lastUsed",{unique:!1})}})}async function Tf(c,d,a=120,v=90){const p=await Ws(),g=`cover-${c}-${Date.now()}`,j=d.size,S=p.transaction([Yn],"readwrite").objectStore(Yn).put({coverKey:g,blob:d});await new Promise((L,_)=>{S.onsuccess=()=>L(),S.onerror=()=>_(S.error)});const b={projectId:c,coverKey:g,lastUsed:Date.now(),width:a,height:v,sizeBytes:j},I=p.transaction([Pt],"readwrite").objectStore(Pt).put(b);return await new Promise((L,_)=>{I.onsuccess=()=>L(),I.onerror=()=>_(I.error)}),g}async function zf(c){const d=await Ws(),a=d.transaction([Pt],"readonly").objectStore(Pt).get(c),v=await new Promise((S,b)=>{a.onsuccess=()=>S(a.result),a.onerror=()=>b(a.error)});if(!v)return null;const p=d.transaction([Pt],"readwrite").objectStore(Pt).put({...v,lastUsed:Date.now()});await new Promise((S,b)=>{p.onsuccess=()=>S(),p.onerror=()=>b(p.error)});const g=d.transaction([Yn],"readonly").objectStore(Yn).get(v.coverKey);return(await new Promise((S,b)=>{g.onsuccess=()=>S(g.result),g.onerror=()=>b(g.error)}))?.blob||null}async function Of(c){const d=await zf(c);return d?URL.createObjectURL(d):null}async function Ff(c){const d=await Ws(),a=d.transaction([Pt],"readonly").objectStore(Pt).get(c),v=await new Promise((j,S)=>{a.onsuccess=()=>j(a.result),a.onerror=()=>S(a.error)});if(!v)return;const p=d.transaction([Yn],"readwrite").objectStore(Yn).delete(v.coverKey);await new Promise((j,S)=>{p.onsuccess=()=>j(),p.onerror=()=>S(p.error)});const g=d.transaction([Pt],"readwrite").objectStore(Pt).delete(c);await new Promise((j,S)=>{g.onsuccess=()=>j(),g.onerror=()=>S(g.error)})}async function If(){const d=(await Ws()).transaction([Pt],"readonly").objectStore(Pt).index("lastUsed");return await new Promise((v,p)=>{const g=d.getAll();g.onsuccess=()=>v(g.result),g.onerror=()=>p(g.error)})}async function Mf(c=10){const d=await If(),a=[];if(d.length>c){const v=d.slice(0,d.length-c);for(const p of v)await Ff(p.projectId),a.push(p.projectId)}return a}var $f={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Af=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bt=(c,d)=>{const a=P.forwardRef(({color:v="currentColor",size:p=24,strokeWidth:g=2,absoluteStrokeWidth:j,children:S,...b},I)=>P.createElement("svg",{ref:I,...$f,width:p,height:p,stroke:v,strokeWidth:j?Number(g)*24/Number(p):g,className:`lucide lucide-${Af(c)}`,...b},[...d.map(([L,_])=>P.createElement(L,_)),...(Array.isArray(S)?S:[S])||[]]));return a.displayName=`${c}`,a},Uf=bt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Oi=bt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Fi=bt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Bf=bt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),kc=bt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Hf=bt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Ii=bt("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),As=bt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Ks=bt("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),Mi=bt("Pencil",[["line",{x1:"18",x2:"22",y1:"2",y2:"6",key:"1e96e7"}],["path",{d:"M7.5 20.5 19 9l-4-4L3.5 16.5 2 22z",key:"12iwkt"}]]),Vf=bt("Plus",[["line",{x1:"12",x2:"12",y1:"5",y2:"19",key:"pwfkuu"}],["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}]]),$i=bt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Wf=bt("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),kn=bt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Kf=/^(?:day|d)[\s_-]?(\d{1,2})(?:[^\d]|$)/i,Qf=/(\d{4})-(\d{2})-(\d{2})/,Yf=/(\d{4})_(\d{2})_(\d{2})/,Gf=/^(\d{1,2})[\s_-]/,Xf=/^([A-M])(?:[\s_-]+)(Establishing|People|Culture(?:[-_\s]?Detail)?|Detail|Action|Moment|Transition|Mood|Food)$/i,qf=/^([A-M])$/i,Jf=/^([A-M])(?:[\s_-]+)(.+)$/i,Zf=/^(0[1-6])$/,jc={"01":"A","02":"B","03":"C","04":"D","05":"E","06":"M"};function Sc(c,d){try{const a=new Date(c),v=d?new Date(d):a;if(isNaN(a.getTime())||isNaN(v.getTime()))return null;const p=a.getTime()-v.getTime();return Math.floor(p/(1e3*60*60*24))+1}catch{return null}}function Us(c,d){const a=c.match(Kf);if(a){const g=parseInt(a[1],10);if(g>=1&&g<=31)return{day:g,pattern:"day_prefix",confidence:"high"}}let v=c.match(Qf);if(v){const g=`${v[1]}-${v[2]}-${v[3]}`,j=Sc(g,d);if(j!==null)return{day:j,pattern:"iso_date",confidence:d?"high":"medium"}}if(v=c.match(Yf),v){const g=`${v[1]}-${v[2]}-${v[3]}`,j=Sc(g,d);if(j!==null)return{day:j,pattern:"iso_date",confidence:d?"high":"medium"}}const p=c.match(Gf);if(p){const g=parseInt(p[1],10);if(g>=1&&g<=31)return{day:g,pattern:"numeric_prefix",confidence:"medium"}}return null}function Ar(c,d){return Us(c,d)?.day??null}function Ai(c){const d=c.match(Xf);if(d)return{bucket:d[1].toUpperCase(),confidence:"high",pattern:"standard"};const a=c.match(qf);if(a)return{bucket:a[1].toUpperCase(),confidence:"high",pattern:"letter"};const v=c.match(Jf);if(v)return{bucket:v[1].toUpperCase(),confidence:"medium",pattern:"custom"};const p=c.match(Zf);return p&&jc[p[1]]?{bucket:jc[p[1]],confidence:"low",pattern:"numeric"}:null}function ep(c,d){const a="01_DAYS",v=c.split(/[\\/]/).filter(Boolean),p=v.length>0?v.slice(0,-1):[];let g=null,j=null,S="none",b="none";const I=p.findIndex(D=>{const H=D.toLowerCase();return H===a.toLowerCase()||H==="01_days"||H==="days"});if(I!==-1&&I<p.length-1){const D=p[I+1],H=Us(D);if(H&&(g=H.day,S=H.confidence,I+2<p.length)){const W=p[I+2],z=Ai(W);z&&(j=z.bucket,b=z.confidence)}}else for(let D=0;D<p.length;D++){const H=p[D],W=Us(H);if(W){if(g=W.day,S=W.confidence==="high"?"medium":"low",D+1<p.length){const z=p[D+1],B=Ai(z);B&&(j=B.bucket,b=B.confidence)}break}}const L=g!==null&&j!==null;let _="none";return L?S==="high"&&b==="high"?_="high":S!=="none"&&b!=="none"?_="medium":_="low":g!==null&&(_=S),{detectedDay:g,detectedBucket:j,isPreOrganized:L,confidence:_,pathSegments:p}}async function Cc(c){const d=[],a=["jpg","jpeg","png","heic","webp","mp4","mov","webm","avi","mkv"];try{for await(const[v,p]of c.entries()){if(p.kind!=="directory")continue;const g=Ai(v);if(!g)continue;let j=0;for await(const[S,b]of p.entries()){if(b.kind!=="file")continue;const I=S.split(".").pop()?.toLowerCase()||"";a.includes(I)&&(j+=1)}d.push({bucketLetter:g.bucket,folderName:v,photoCount:j,confidence:g.confidence,patternMatched:g.pattern})}}catch(v){console.warn("Failed to scan for buckets:",v)}return d.sort((v,p)=>v.bucketLetter.localeCompare(p.bucketLetter))}function Ec(c){return c===null?"Unsorted":`Day ${String(c).padStart(2,"0")}`}function tp(c){return[/^\..*/,/^unsorted$/i,/^inbox$/i,/^miscellaneous$/i,/^metadata$/i,/^_meta$/i].some(a=>a.test(c))}function Pc(c,d){const{photoCountMap:a=new Map,projectName:v="",tripStart:p}=d||{},g=[];for(const j of c){if(tp(j)||v&&j.toLowerCase()===v.toLowerCase())continue;const S=a.get(j)||0,b=Us(j,p);b?g.push({folder:j,folderPath:j,detectedDay:b.day,confidence:b.confidence,patternMatched:b.pattern,suggestedName:Ec(b.day),manual:!1,photoCount:S}):g.push({folder:j,folderPath:j,detectedDay:null,confidence:"undetected",patternMatched:"none",suggestedName:Ec(null),manual:!1,photoCount:S})}return g.sort((j,S)=>j.detectedDay===null&&S.detectedDay===null?j.folder.localeCompare(S.folder):j.detectedDay===null?1:S.detectedDay===null?-1:j.detectedDay-S.detectedDay),g}function Rc({isOpen:c,onClose:d,onComplete:a,recentProjects:v=[],onSelectRecent:p}){const[g,j]=P.useState("select"),[S,b]=P.useState(""),[I,L]=P.useState(""),[_,D]=P.useState(null),[H,W]=P.useState(null),[z,B]=P.useState([]),[q,Q]=P.useState(!1),ie=Nn.useRef(null),J=P.useCallback(async()=>{if(!S.trim()){D("Please enter a project name");return}if(!H){D("Please choose a folder");return}D(null),Q(!0);try{const ee=["jpg","jpeg","png","heic","webp","mp4","mov","webm","avi","mkv"],G=ne=>{const R=ne.toLowerCase().replace(/[^a-z0-9]+/g,"");return R==="01days"||R==="days"},Pe=async ne=>{let R=0;for await(const[,K]of ne.entries())if(K.kind==="directory")R+=await Pe(K);else if(K.kind==="file"){const C=K.name.split(".").pop()?.toLowerCase()||"";ee.includes(C)&&(R+=1)}return R},ce=new Map,ke=[],X=new Map;for await(const[ne,R]of H.entries()){if(R.kind!=="directory")continue;ke.push(ne),X.set(ne,R);let K=0;for await(const[,C]of R.entries()){if(C.kind!=="file")continue;const f=C.name.split(".").pop()?.toLowerCase()||"";ee.includes(f)&&(K+=1)}ce.set(ne,K)}const Z=ke.find(ne=>G(ne))||null;if(Z){const ne=X.get(Z);if(ne){const R=[],K=new Map,C=new Map;for await(const[Y,de]of ne.entries()){if(de.kind!=="directory")continue;R.push(Y),K.set(Y,de);const re=await Pe(de);C.set(Y,re)}const f=Pc(R,{photoCountMap:C,projectName:S}).map(Y=>({...Y,folderPath:`${Z}/${Y.folder}`})),oe=(await Promise.all(f.map(async Y=>{const de=K.get(Y.folder);if(!de||Y.confidence==="undetected")return Y;const re=await Cc(de);return{...Y,detectedBuckets:re,isOrganizedStructure:re.length>0,bucketConfidence:re.length>0?re.every(Le=>Le.confidence==="high")?"high":"medium":"none"}}))).map(Y=>({...Y,skip:Y.confidence==="undetected"?!0:Y.skip??!1}));B(oe),j("preview");return}}const A=Pc(ke,{photoCountMap:ce,projectName:S}),ae=(await Promise.all(A.map(async ne=>{const R=X.get(ne.folder);if(!R||ne.confidence==="undetected")return ne;const K=await Cc(R);return{...ne,detectedBuckets:K,isOrganizedStructure:K.length>0,bucketConfidence:K.length>0?K.every(C=>C.confidence==="high")?"high":"medium":"none"}}))).map(ne=>({...ne,skip:ne.confidence==="undetected"?!0:ne.skip??!1}));B(ae),j("preview")}catch(ee){D(ee instanceof Error?ee.message:"Failed to detect folder structure")}finally{Q(!1)}},[H,S]),xe=P.useCallback((ee,G,Pe)=>{B(ce=>{const ke=[...ce];return G==="detectedDay"?(ke[ee].detectedDay=Pe===""?null:parseInt(Pe,10),ke[ee].manual=!0):G==="skip"?ke[ee].skip=Pe:ke[ee][G]=Pe,ke})},[]),je=P.useCallback(()=>{if(!S.trim()){D("Please enter a project name");return}if(!H){D("Please choose a folder");return}const ee=I.trim()||H.name,G=v.find(Pe=>Pe.rootPath.toLowerCase()===ee.toLowerCase());if(G){D(`This folder is already being used by project "${G.projectName}". Opening the same folder twice could cause conflicts. Open the existing project instead or choose a different folder.`);return}D(null),a({projectName:S.trim(),rootPath:ee,dirHandle:H,mappings:z}),d()},[H,z,d,a,S,I,v]);return c?o.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-start justify-center z-50 pt-12",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full mx-6 max-h-[88vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-8 py-6 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-extrabold text-gray-900",children:g==="select"?"Create Project":"Review Folder Structure"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:g==="select"?"Add a project name and choose the folder that contains your photos.":"Confirm how your existing folders map to days."})]}),o.jsx("button",{onClick:d,className:"text-gray-600 hover:text-gray-800 rounded-md px-2 py-1","aria-label":"Close",children:o.jsx(kn,{size:20})})]}),o.jsxs("div",{className:"px-8 py-6 space-y-6",children:[_&&o.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-sm text-red-800",children:_}),g==="select"&&v.length>0&&o.jsxs("div",{className:"space-y-3 rounded-lg border border-gray-200 bg-gray-50 p-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Recent Projects"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Open a recent project instead of creating a new one."})]}),o.jsx("div",{className:"space-y-2",children:v.map(ee=>o.jsxs("button",{onClick:()=>{p?.(ee.projectId),d()},className:"w-full text-left rounded-lg border border-gray-200 bg-white px-3 py-2 hover:border-blue-300 hover:bg-blue-50",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:ee.projectName}),o.jsx("div",{className:"text-xs text-gray-600 truncate",children:ee.rootPath})]},ee.projectId))})]}),g==="select"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),o.jsx("input",{type:"text",value:S,onChange:ee=>b(ee.target.value),placeholder:"e.g., Mexico 2025",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder:text-gray-600 text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Folder Path"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:I,onChange:ee=>L(ee.target.value),placeholder:"/Users/you/trips/mexico",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder:text-gray-600 text-gray-900"}),o.jsx("input",{ref:ie,type:"file",webkitdirectory:"true",as:!0,any:!0,directory:"true",mozdirectory:"true",className:"hidden",onChange:ee=>{const G=ee.currentTarget.files;if(!G||G.length===0)return;const Pe=G[0],ke=(Pe.webkitRelativePath||Pe.name).split("/")[0];L(ke),W(null),ee.currentTarget.value=""}}),o.jsxs("button",{onClick:async()=>{if("showDirectoryPicker"in window){const ee=await window.showDirectoryPicker();W(ee),L(ee?.name||"");return}ie.current?.click()},className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 flex items-center gap-2",children:[o.jsx(Ii,{size:18}),"Browse"]})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Use the folder picker to grant access. If the picker is unavailable, paste the full path (the app will ask again on first open)."})]})]}),g==="preview"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Review the detected folders and adjust the day numbers if needed."}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[o.jsx("th",{className:"text-left px-3 py-2 font-medium text-gray-700",children:"Folder"}),o.jsx("th",{className:"text-center px-3 py-2 font-medium text-gray-700",children:"Day #"}),o.jsx("th",{className:"text-left px-3 py-2 font-medium text-gray-700",children:"Buckets"}),o.jsx("th",{className:"text-center px-3 py-2 font-medium text-gray-700",children:"Photos"}),o.jsx("th",{className:"text-center px-3 py-2 font-medium text-gray-700",children:"Action"})]})}),o.jsxs("tbody",{children:[z.map((ee,G)=>o.jsxs("tr",{className:`border-b border-gray-200 ${ee.skip?"bg-gray-100 opacity-60":"hover:bg-blue-50"}`,children:[o.jsx("td",{className:"px-3 py-3 text-gray-900",children:ee.folder}),o.jsx("td",{className:"px-3 py-3 text-center",children:o.jsx("input",{type:"number",min:"1",max:"31",value:ee.detectedDay??"",onChange:Pe=>xe(G,"detectedDay",Pe.target.value),disabled:ee.skip,className:"w-12 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:""})}),o.jsx("td",{className:"px-3 py-3",children:ee.detectedBuckets&&ee.detectedBuckets.length>0?o.jsx("div",{className:"flex flex-wrap gap-1",children:ee.detectedBuckets.map(Pe=>o.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",title:`${Pe.folderName} (${Pe.photoCount} photos)`,children:[Pe.bucketLetter,o.jsxs("span",{className:"ml-1 text-green-600",children:["(",Pe.photoCount,")"]})]},Pe.bucketLetter))}):o.jsx("span",{className:"text-xs text-gray-400 italic",children:"None detected"})}),o.jsx("td",{className:"px-3 py-3 text-center text-gray-600",children:ee.photoCount}),o.jsx("td",{className:"px-3 py-3 text-center",children:o.jsx("button",{onClick:()=>xe(G,"skip",!ee.skip),className:`px-3 py-1 rounded text-sm font-medium ${ee.skip?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:ee.skip?"Skip":"Map"})})]},ee.folder)),z.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"px-3 py-4 text-sm text-gray-600 text-center",children:"No subfolders detected. You can still continue and sort manually."})})]})]})})]})]}),o.jsx("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex justify-between gap-3",children:g==="select"?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:d,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 font-medium",children:"Cancel"}),o.jsx("button",{onClick:J,disabled:!S.trim()||!H||q,"aria-disabled":!S.trim()||!H||q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:bg-gray-200 disabled:text-gray-500 disabled:cursor-not-allowed",children:q?"Detecting":"Next"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>j("select"),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 font-medium",children:"Back"}),o.jsx("button",{onClick:je,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Create Project"})]})})]})}):null}function np({project:c,onOpen:d}){const[a,v]=P.useState(null);return P.useEffect(()=>(c.coverKey?Of(c.projectId).then(p=>v(p)).catch(p=>{console.warn(`Failed to load cover for ${c.projectId}:`,p),c.coverUrl&&v(c.coverUrl)}):c.coverUrl&&v(c.coverUrl),()=>{a&&a.startsWith("blob:")&&URL.revokeObjectURL(a)}),[c,c.coverKey,c.coverUrl]),o.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-800 bg-gray-950 hover:border-blue-500 transition-colors group cursor-pointer",children:[o.jsx("button",{onClick:()=>d(c.projectId),className:"w-full block text-left","aria-label":`Open project ${c.projectName}`,children:o.jsx("div",{className:"aspect-video overflow-hidden bg-gray-900 relative",children:a?o.jsx("img",{src:a,alt:c.projectName,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}):o.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center text-sm text-gray-400",children:o.jsx("div",{className:"text-center",children:o.jsx("div",{className:"text-xs font-medium text-gray-500",children:"No cover"})})})})}),o.jsxs("div",{className:"p-3 space-y-1",children:[o.jsx("div",{className:"text-sm font-semibold text-gray-200 truncate",children:c.projectName}),typeof c.totalPhotos=="number"&&o.jsx("div",{className:"text-xs text-gray-500",children:`${c.totalPhotos} ${c.totalPhotos===1?"photo":"photos"}`}),o.jsx("div",{className:"text-xs text-gray-600 truncate",children:c.rootPath})]})]})}const rp="4.0.0";class $r{static instance;version;constructor(){this.version=rp}static getInstance(){return $r.instance||($r.instance=new $r),$r.instance}getVersion(){return this.version}getDisplayVersion(){return`v${this.version}`}isValidVersion(d){return/^\d+\.\d+\.\d+$/.test(d)}isCurrentVersionValid(){return this.isValidVersion(this.version)}getVersionComponents(){const[d,a,v]=this.version.split(".").map(Number);return{major:d,minor:a,patch:v}}compareVersions(d,a){const v=d.split(".").map(Number),p=a.split(".").map(Number);for(let g=0;g<3;g++){if(v[g]<p[g])return-1;if(v[g]>p[g])return 1}return 0}async fetchRuntimeVersion(){try{return null}catch(d){return console.warn("Error fetching runtime version:",d),null}}async getCurrentVersion(){return this.version}}const Bs=$r.getInstance();function lp({isOpen:c,onClose:d,onCreateComplete:a,onOpenProject:v,recentProjects:p=[],canClose:g=!1,errorMessage:j=null}){const[S,b]=P.useState(!1),[I,L]=P.useState(Bs.getDisplayVersion());P.useEffect(()=>{(async()=>{try{const z=await Bs.getCurrentVersion();L(`v${z}`)}catch(z){console.warn("Failed to fetch runtime version:",z)}})()},[]);const _=typeof globalThis<"u"&&(globalThis.vitest||globalThis.__APP_VERSION__==="0.0.0"),D="showDirectoryPicker"in window,H="indexedDB"in window;return!_&&(!D||!H)?o.jsx("div",{className:"h-screen bg-gray-950 text-gray-100 flex items-center justify-center",children:o.jsxs("div",{className:"max-w-md mx-auto text-center p-6",children:[o.jsx("div",{className:"text-red-400 text-6xl mb-4",children:""}),o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Browser Not Supported"}),o.jsx("p",{className:"text-gray-400 mb-4",children:"This app requires a modern browser with support for the File System Access API and IndexedDB."}),o.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[!D&&o.jsx("div",{children:" File System Access API not available"}),!H&&o.jsx("div",{children:" IndexedDB not available"})]}),o.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Please use a recent version of Chrome, Edge, or another supported browser."})]})}):o.jsxs("div",{className:"h-screen bg-gray-950 text-gray-100 flex flex-col",children:[o.jsx("div",{className:"border-b border-gray-800 bg-gray-900/50 backdrop-blur-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("img",{src:"/Narrative/assets/Narrative_icon.png",alt:"Narrative",className:"w-8 h-8 rounded"}),o.jsx("h1",{className:"text-xl font-bold",children:"Narrative"})]}),o.jsx("div",{className:"px-3 py-1 bg-gray-800 text-gray-300 rounded-md text-xs font-medium tracking-wide",children:o.jsx("span",{className:"uppercase",children:I})})]})}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:o.jsxs("div",{className:"w-full max-w-7xl",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Projects"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Create a new project or open a recent one"})]}),j&&o.jsx("div",{className:"rounded-lg border border-red-800 bg-red-950/60 px-4 py-3 text-sm text-red-200 mb-6",children:j}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 auto-rows-max",children:[o.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 border-dashed border-gray-700 bg-gray-950 hover:border-blue-500 transition-colors group cursor-pointer",children:[o.jsx("button",{onClick:()=>b(!0),className:"w-full block text-left","aria-label":"Create new project",children:o.jsx("div",{className:"aspect-video overflow-hidden bg-gray-900 relative",children:o.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center group-hover:from-gray-700 group-hover:to-gray-800 transition-colors",children:o.jsx("div",{className:"w-14 h-14 rounded-full bg-gray-700 group-hover:bg-blue-500/20 flex items-center justify-center mb-2 transition-colors",children:o.jsx(Vf,{className:"w-7 h-7 text-blue-400"})})})})}),o.jsxs("div",{className:"p-3 space-y-1",children:[o.jsx("div",{className:"text-sm font-semibold text-gray-200",children:"New Project"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Start organizing photos"})]})]}),p.map(W=>o.jsx(np,{project:W,onOpen:v},W.projectId))]}),p.length===0&&o.jsx("div",{className:"text-center py-12 text-gray-500",children:o.jsx("p",{className:"text-sm",children:"No recent projects. Create one to get started."})})]})}),o.jsx(Rc,{isOpen:S,onClose:()=>b(!1),onComplete:W=>{b(!1),a(W)},recentProjects:p,onSelectRecent:v})]})}function sp({isOpen:c,title:d="Loading Project",message:a="Please wait while we load your project...",progress:v=0,showProgressBar:p=!0}){const[g,j]=P.useState(0);return P.useEffect(()=>{if(v!==g){const S=setTimeout(()=>{j(v)},100);return()=>clearTimeout(S)}},[v,g]),c?o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-lg shadow-2xl p-8 max-w-md w-full mx-4 border border-gray-800",children:[o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-full blur-lg opacity-20"}),o.jsx(Ks,{className:"w-12 h-12 text-blue-400 animate-spin relative"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:d}),o.jsx("p",{className:"text-gray-400 text-sm",children:a})]})]}),p&&o.jsxs("div",{className:"mt-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-xs font-medium text-gray-400",children:"Progress"}),o.jsxs("span",{className:"text-xs font-bold text-blue-400",children:[Math.round(g),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2 overflow-hidden",children:o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 h-full rounded-full transition-all duration-300 ease-out",style:{width:`${g}%`}})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:g===100?"Almost done...":"Loading..."})})]})}):null}const op="modulepreload",ip=function(c){return"/Narrative/"+c},bc={},ap=function(d,a,v){let p=Promise.resolve();if(a&&a.length>0){let b=function(I){return Promise.all(I.map(L=>Promise.resolve(L).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const j=document.querySelector("meta[property=csp-nonce]"),S=j?.nonce||j?.getAttribute("nonce");p=b(a.map(I=>{if(I=ip(I),I in bc)return;bc[I]=!0;const L=I.endsWith(".css"),_=L?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${I}"]${_}`))return;const D=document.createElement("link");if(D.rel=L?"stylesheet":op,L||(D.as="script"),D.crossOrigin="",D.href=I,S&&D.setAttribute("nonce",S),document.head.appendChild(D),L)return new Promise((H,W)=>{D.addEventListener("load",H),D.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${I}`)))})}))}function g(j){const S=new Event("vite:preloadError",{cancelable:!0});if(S.payload=j,window.dispatchEvent(S),!S.defaultPrevented)throw j}return p.then(j=>{for(const S of j||[])S.status==="rejected"&&g(S.reason);return d().catch(g)})},up=["jpg","jpeg","png","heic","webp","mp4","mov","webm","avi","mkv"],Qs="narrative:projectState:",cp="narrative:handles",un="projects",Hs={autoDay:!0,folderStructure:{daysFolder:"01_DAYS",archiveFolder:"98_ARCHIVE",favoritesFolder:"FAV",metaFolder:"_meta"}};function Lc(){return`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`}const dp=1e4;async function Ys(){if(!window.indexedDB)throw new Error("IndexedDB is not available in this environment.");return new Promise((c,d)=>{let a=!1;const v=j=>{a||(a=!0,j())},p=window.setTimeout(()=>{v(()=>d(new Error("IndexedDB open timed out.")))},dp),g=indexedDB.open(cp,1);g.onupgradeneeded=()=>{const j=g.result;j.objectStoreNames.contains(un)||j.createObjectStore(un)},g.onsuccess=()=>{window.clearTimeout(p),v(()=>c(g.result))},g.onerror=()=>{window.clearTimeout(p),v(()=>d(g.error))},g.onblocked=()=>{window.clearTimeout(p),v(()=>d(new Error("IndexedDB open was blocked. Please close other Narrative tabs and retry.")))}})}async function Bi(c,d){const a=await Ys();return new Promise((v,p)=>{const g=a.transaction(un,"readwrite");g.objectStore(un).put(d,c),g.oncomplete=()=>v(),g.onerror=()=>p(g.error)})}async function Vs(c){const d=await Ys();return new Promise((a,v)=>{const g=d.transaction(un,"readonly").objectStore(un).get(c);g.onsuccess=()=>a(g.result||null),g.onerror=()=>v(g.error)})}async function fp(c){const d=await Ys();return new Promise((a,v)=>{const p=d.transaction(un,"readwrite");p.objectStore(un).delete(c),p.oncomplete=()=>a(),p.onerror=()=>v(p.error)})}function pp(c){const d=c.split(".").pop()?.toLowerCase()||"";return up.includes(d)}function mp(c){const d=c.toLowerCase();return c.startsWith(".")||c.startsWith("._")||d==="thumbs.db"||d==="desktop.ini"}async function Dc(c,d=""){const a=[];for await(const[v,p]of c.entries())if(p.kind==="directory"){if(v.startsWith("."))continue;const g=await Dc(p,d?`${d}/${v}`:v);a.push(...g)}else if(p.kind==="file"){if(mp(v)||!pp(v))continue;const g=d?`${d}/${v}`:v;a.push({handle:p,path:g})}return a}async function hp(c){try{if(typeof createImageBitmap<"u")return(await createImageBitmap(c)).close(),c}catch{}try{const v=(await ap(async()=>{const{default:p}=await import("./heic2any-B8d0QBts.js").then(g=>g.h);return{default:p}},[])).default;try{return await v({blob:c,toType:"image/jpeg",quality:.8})}catch(p){if(p?.message?.includes("already browser readable")||p?.message?.includes("ERR_USER")||p?.code===1)return c;console.warn(`heic2any conversion failed for ${c.name}:`,p)}}catch{console.warn("heic2any library not available, trying fallbacks")}const d=document.createElement("canvas"),a=d.getContext("2d");if(!a)return new Blob([""],{type:"image/jpeg"});try{if(typeof createImageBitmap<"u")try{const v=await createImageBitmap(c);d.width=v.width||400,d.height=v.height||300;try{a.drawImage(v,0,0)}catch{}return new Promise((p,g)=>{try{if(typeof d.toBlob=="function")d.toBlob(j=>{if(j){p(j);return}try{const b=d.toDataURL("image/jpeg",.8).split(","),I=b[0].match(/:(.*?);/),L=b[1];let _;if(typeof atob=="function"){const D=atob(L);let H=D.length;for(_=new Uint8Array(H);H--;)_[H]=D.charCodeAt(H)}else if(typeof Buffer<"u"){const D=Buffer.from(L,"base64");_=new Uint8Array(D.buffer,D.byteOffset,D.byteLength)}else throw new Error("No base64 decoder available");p(new Blob([_],{type:I&&I[1]||"image/jpeg"}))}catch{p(new Blob([""],{type:"image/jpeg"}))}},"image/jpeg",.8);else{const S=d.toDataURL("image/jpeg",.8).split(","),b=S[0].match(/:(.*?);/),I=S[1];let L;if(typeof atob=="function"){const _=atob(I);let D=_.length;for(L=new Uint8Array(D);D--;)L[D]=_.charCodeAt(D)}else if(typeof Buffer<"u"){const _=Buffer.from(I,"base64");L=new Uint8Array(_.buffer,_.byteOffset,_.byteLength)}else return p(new Blob([""],{type:"image/jpeg"}));p(new Blob([L],{type:b&&b[1]||"image/jpeg"}))}}catch{p(new Blob([""],{type:"image/jpeg"}))}})}catch{}try{const v=new Image,p=URL.createObjectURL(c);return v.crossOrigin="Anonymous",await new Promise((g,j)=>{v.onload=()=>g(),v.onerror=()=>j(new Error("Image load failed")),v.src=p}),d.width=v.naturalWidth||v.width||400,d.height=v.naturalHeight||v.height||300,a.drawImage(v,0,0),URL.revokeObjectURL(p),new Promise((g,j)=>{d.toBlob(S=>{if(S){g(S);return}try{const I=d.toDataURL("image/jpeg",.8).split(","),L=I[0].match(/:(.*?);/),_=I[1];let D;if(typeof atob=="function"){const H=atob(_);let W=H.length;for(D=new Uint8Array(W);W--;)D[W]=H.charCodeAt(W)}else if(typeof Buffer<"u"){const H=Buffer.from(_,"base64");D=new Uint8Array(H.buffer,H.byteOffset,H.byteLength)}else{g(new Blob([""],{type:"image/jpeg"}));return}g(new Blob([D],{type:L&&L[1]||"image/jpeg"}))}catch{g(new Blob([""],{type:"image/jpeg"}))}},"image/jpeg",.8)})}catch{}return d.width=400,d.height=300,a.fillStyle="#e5e5e5",a.fillRect(0,0,400,300),a.fillStyle="#666666",a.font="bold 16px sans-serif",a.textAlign="center",a.textBaseline="middle",a.fillText("HEIC",200,140),a.font="12px sans-serif",a.fillText("Preview not available",200,165),new Promise(v=>{d.toBlob(p=>{if(p){v(p);return}v(new Blob([""],{type:"image/jpeg"}))},"image/jpeg",.8)})}catch{return new Blob([""],{type:"image/jpeg"})}}async function Hi(c,d){const a=await Dc(c),v=[],p=new Set;for(let g=0;g<a.length;g++){const j=a[g],S=Math.round((g+1)/a.length*100);d?.(S,`Processing ${j.handle.name}...`);const b=await j.handle.getFile(),I=b.lastModified,L=b.name,_=`${L}|${I}|${b.size}`;if(p.has(_))continue;p.add(_);const D=Lc(),H=b.name.split(".").pop()?.toLowerCase()||"",W=H==="heic"||H==="heif"||b.type.toLowerCase().includes("heic");let z="";if(W)try{const je=await hp(b);je&&(z=URL.createObjectURL(je))}catch(je){console.warn(`Failed to generate preview for ${L}:`,je)}else try{z=URL.createObjectURL(b)}catch(je){console.warn(`Failed to create object URL for ${L}:`,je)}const B=ep(j.path),q=j.path.split(/[\\/]/).filter(Boolean),Q=q.length>1?q.slice(0,-1):[],ie=Q[Q.length-1]||"root";let J=null,xe=null;B.isPreOrganized&&B.confidence==="high"&&(J=B.detectedDay,xe=B.detectedBucket),v.push({id:D,originalName:L,currentName:L,timestamp:I,day:J,bucket:xe,sequence:null,favorite:!1,rating:0,archived:!1,thumbnail:z,mimeType:b.type||(W?"image/heic":""),fileHandle:j.handle,filePath:j.path,sourceFolder:ie,folderHierarchy:Q,detectedDay:B.detectedDay,detectedBucket:B.detectedBucket,isPreOrganized:B.isPreOrganized,organizationConfidence:B.confidence})}return v.sort((g,j)=>g.timestamp-j.timestamp)}function yp(c){const d={};if(c.length===0)return d;let a=1,v=c[0].timestamp;const p=360*60*1e3;return d[a]=[],c.forEach(g=>{g.timestamp-v>p&&(a+=1,d[a]=[]),d[a].push(g.id),v=g.timestamp}),d}function Tc(c){const d=c.photos.map(a=>({filePath:a.filePath,day:a.day,bucket:a.bucket,sequence:a.sequence,favorite:a.favorite,rating:a.rating,archived:a.archived,currentName:a.currentName,sourceFolder:a.sourceFolder,folderHierarchy:a.folderHierarchy,detectedDay:a.detectedDay,detectedBucket:a.detectedBucket,isPreOrganized:a.isPreOrganized,organizationConfidence:a.organizationConfidence,subfolderOverride:a.subfolderOverride}));return{projectName:c.projectName,rootPath:c.rootPath,settings:c.settings,dayLabels:c.dayLabels||{},dayContainers:c.dayContainers||[],lastModified:c.lastModified??Date.now(),edits:d}}function gp(c,d){const a=c.toLowerCase(),v=a.replace(/[^a-z0-9]+/g," ").trim(),p=d.toLowerCase();return!!(p&&a===p||a==="archive"||a==="archives"||a.endsWith("_archive")||a.endsWith("-archive")||a.includes("archive")||v.includes("archive"))}function zc(c,d){return d?c.map(a=>a.filePath&&a.filePath.split(/[\\/]/).filter(Boolean).some(p=>gp(p,d))?{...a,archived:!0,bucket:"X"}:a):c}async function vp(c){const{dirHandle:d,projectName:a,rootLabel:v,onProgress:p}=c;if(!("requestPermission"in d))throw new Error("File System Access API is not available or supported in this environment.");let g;try{g=await d.requestPermission({mode:"read"})}catch(L){throw console.warn("Permission request failed:",L),new Error("Unable to request folder access. Please try again.")}if(g!=="granted")throw new Error("Folder access was not granted. Please allow access to create the project.");p?.(5,"Scanning folder structure...");const j=Lc();p?.(10,"Collecting image files...");const S=zc(await Hi(d,(L,_)=>{const D=10+L*.6;p?.(D,_)}),Hs.folderStructure.archiveFolder);p?.(75,"Analyzing photo timestamps...");const b=yp(S);p?.(85,"Saving project data...");const I={projectName:a?.trim()||d.name,rootPath:v||d.name,photos:S,settings:Hs,lastModified:Date.now()};return await Bi(j,d),Ke.set(`${Qs}${j}`,JSON.stringify(Tc(I))),p?.(95,"Project initialized successfully"),{projectId:j,photos:S,suggestedDays:b}}async function xp(c){const d=await Vs(c);if(!d)throw new Error("Project folder access not available. Please reselect the folder.");if(!("requestPermission"in d))throw new Error("File System Access API is not available or supported in this environment.");let a;try{a=await d.requestPermission({mode:"read"})}catch(I){throw console.warn("Permission request failed, removing stale handle:",I),await fp(c),new Error("Project folder access has expired. Please click the project again to reselect the folder.")}if(a!=="granted")throw new Error("Folder access was not granted. Please allow access to continue.");const v=Ke.get(`${Qs}${c}`),p=v?JSON.parse(v):{},g=await Hi(d);if(g.length===0)throw new Error("Project folder access is no longer available. Please reselect the folder.");let j=g;if(p.edits){const I=new Map;p.edits.forEach(L=>{L?.filePath&&I.set(L.filePath,L)}),j=g.map(L=>{const _=L.filePath?I.get(L.filePath):null;return _?{...L,day:_.day,bucket:_.bucket,sequence:_.sequence,favorite:_.favorite,rating:_.rating,archived:_.archived,currentName:_.currentName,subfolderOverride:_.subfolderOverride}:L})}const S=p.settings||Hs,b=zc(j,S.folderStructure?.archiveFolder||Hs.folderStructure.archiveFolder);return{projectName:p.projectName||d.name,rootPath:p.rootPath||d.name,photos:b,settings:S,dayLabels:p.dayLabels||{},dayContainers:p.dayContainers||[],lastModified:p.lastModified}}async function Oc(c,d){Ke.set(`${Qs}${c}`,JSON.stringify(Tc(d)))}async function wp(c){try{Ke.remove(`${Qs}${c}`)}catch{}try{const d=await Ys();await new Promise((a,v)=>{const p=d.transaction(un,"readwrite");p.objectStore(un).delete(c),p.oncomplete=()=>a(),p.onerror=()=>v(p.error)})}catch{}}const Ft="narrative:recentProjects",Qn="narrative:activeProject";function Np({photos:c,setPhotos:d,projectRootPath:a,projectName:v,projectFolderLabel:p,projectSettings:g,dayLabels:j,prevThumbnailsRef:S}){const[b,I]=P.useState([]),[L,_]=P.useState(-1),D=P.useCallback(B=>{if(!a)return;Oc(a,{projectName:v,rootPath:p||a,photos:B??c,settings:g,dayLabels:j}).catch(()=>{})},[a,v,p,c,g,j]),H=P.useCallback(B=>{const q=c.map(J=>({id:J.id,filePath:J.filePath,day:J.day,bucket:J.bucket,sequence:J.sequence,favorite:J.favorite,rating:J.rating,archived:J.archived,currentName:J.currentName,originalName:J.originalName,timestamp:J.timestamp,subfolderOverride:J.subfolderOverride})),Q=b.slice(0,L+1);Q.push(q);const ie=Q.slice(-30);I(ie),_(ie.length-1);try{const J=B.map(xe=>xe.thumbnail).filter(Boolean);S.current.forEach(xe=>{if(xe&&!J.includes(xe)&&xe.startsWith("blob:"))try{URL.revokeObjectURL(xe)}catch{}}),S.current=J}catch{}d(B),D(B)},[b,L,c,D,S,d]),W=P.useCallback(()=>{if(L>0){const B=b[L-1],q=c.map(Q=>{const ie=B.find(J=>J.id===Q.id);return ie?{...Q,...ie}:Q});_(L-1),d(q),D(q)}},[b,L,D,c,d]),z=P.useCallback(()=>{if(L<b.length-1){const B=b[L+1],q=c.map(Q=>{const ie=B.find(J=>J.id===Q.id);return ie?{...Q,...ie}:Q});_(L+1),d(q),D(q)}},[b,L,D,c,d]);return{history:b,historyIndex:L,setHistory:I,setHistoryIndex:_,persistState:D,saveToHistory:H,undo:W,redo:z}}function kp({filteredPhotos:c,coverSelectionMode:d,setCoverForPhotoId:a,setCoverSelectionMode:v}){const[p,g]=P.useState(new Set),[j,S]=P.useState(null),[b,I]=P.useState(null),L=P.useRef(null),_=P.useCallback(()=>{g(new Set),S(null),I(null),L.current=null},[]),D=P.useCallback(async(H,W,z,B=c)=>{if(H.shiftKey&&L.current!==null&&L.current!==void 0){const q=Math.min(L.current,z),Q=Math.max(L.current,z),ie=B.slice(q,Q+1).map(J=>J.id);g(new Set(ie)),S(W),I(z),L.current=z;return}if(H.metaKey||H.ctrlKey){const q=new Set(p);q.has(W)?q.delete(W):q.add(W),g(q),S(W),I(z),L.current=z;return}g(new Set([W])),S(W),I(z),L.current=z,d&&(await a(W),v(!1))},[d,c,p,a,v]);return{selectedPhotos:p,setSelectedPhotos:g,focusedPhoto:j,setFocusedPhoto:S,lastSelectedIndex:b,setLastSelectedIndex:I,lastSelectedIndexRef:L,resetSelection:_,handleSelectPhoto:D}}const bl={autoDay:!0,folderStructure:{daysFolder:"01_DAYS",archiveFolder:"98_ARCHIVE",favoritesFolder:"FAV",metaFolder:"_meta"}},jp="narrative:projectState:";function Sp({debugEnabled:c,showToast:d,prevThumbnailsRef:a}){const[v,p]=P.useState([]),[g,j]=P.useState("No Project"),[S,b]=P.useState(null),[I,L]=P.useState(null),[_,D]=P.useState(bl),[H,W]=P.useState([]),[z,B]=P.useState(!1),[q,Q]=P.useState(()=>!Ke.get(Qn)),[ie,J]=P.useState(null),[xe,je]=P.useState(null),[ee,G]=P.useState(null),[Pe,ce]=P.useState(!1),[ke,X]=P.useState(0),[Z,A]=P.useState("Loading project..."),[M,ae]=P.useState({}),[ne,R]=P.useState([]),K=P.useRef(!1),C=P.useCallback($=>{const ve=$.split(/[/\\]/).filter(Boolean);return ve[ve.length-1]||"Untitled Project"},[]),f=P.useCallback(($,ve)=>{if(!ve)return $;const ye=new Map;return Object.entries(ve).forEach(([te,Ce])=>{const Te=Number.parseInt(te,10);Number.isNaN(Te)||Ce.forEach(Ae=>ye.set(Ae,Te))}),$.map(te=>({...te,day:ye.get(te.id)??te.day}))},[]),x=P.useCallback($=>{try{const ve=($.photos||[]).map(ye=>ye.thumbnail).filter(Boolean);a.current.forEach(ye=>{if(ye&&!ve.includes(ye)&&ye.startsWith("blob:"))try{URL.revokeObjectURL(ye)}catch{}}),a.current=ve}catch{}p($.photos||[]),j($.projectName||"No Project"),L($.rootPath||null),D($.settings||bl),ae($.dayLabels||{}),R($.dayContainers||[])},[a]),oe=P.useCallback($=>{try{const ve=Ke.get(Ft),te=(ve?JSON.parse(ve):[]).map(Ue=>({...Ue,projectId:Ue.projectId||Ue.rootPath}));let Ce=te.findIndex(Ue=>Ue.projectId===$.projectId);Ce===-1&&(Ce=te.findIndex(Ue=>Ue.rootPath===$.rootPath));const Ae={...Ce!==-1?te[Ce]:{},...$},_e=te.filter((Ue,Ve)=>Ve!==Ce),Oe=[Ae,..._e].slice(0,20);Ke.set(Ft,JSON.stringify(Oe)),W(Oe)}catch(ve){if(ve instanceof Error&&ve.name==="QuotaExceededError")try{const ye=[$,...H].map((te,Ce)=>{if(Ce>=3&&te.coverUrl){const{coverUrl:Te,...Ae}=te;return Ae}return te}).slice(0,20);Ke.set(Ft,JSON.stringify(ye)),W(ye),d("Storage limit reached. Kept covers for 3 most recent projects.","info")}catch{try{const te=[$,...H.slice(0,9)].map((Ce,Te)=>{if(Te>0&&Ce.coverUrl){const{coverUrl:Ae,..._e}=Ce;return _e}return Ce});Ke.set(Ft,JSON.stringify(te)),W(te),d("Storage critically low. Removed older project covers.","error")}catch{try{const Ce=[{...$,coverUrl:void 0}];Ke.set(Ft,JSON.stringify(Ce)),W(Ce),d("Storage full. Reset to current project only.","error")}catch{Ke.remove(Ft),W([]),d("Storage exhausted. Unable to save projects.","error")}}}else d("Failed to persist recent project updates. Changes may not be saved.","error")}},[H,d]),Y=P.useCallback(($,ve)=>{const ye=new Map;return ve.forEach(te=>ye.set(te.folderPath||te.folder,te)),$.map(te=>{if(!te.filePath||te.isPreOrganized&&te.day!=null&&te.bucket!=null)return te;const Ce=te.filePath.split(/[\\/]/),Te=Ce.join("/");if(Ce.length>1){const _e=Ce[1].match(/^D(\d{1,2})/i);if(_e){const Oe=parseInt(_e[1],10);if(!Number.isNaN(Oe))return{...te,day:Oe}}}for(const[Ae,_e]of ye.entries()){if(!_e||_e.skip||_e.detectedDay==null)continue;const Oe=Ae.split(/[\\/]/).join("/");if(Te===Oe||Te.startsWith(`${Oe}/`))return{...te,day:_e.detectedDay}}return te.day!=null?te:{...te,day:null}})},[]),de=P.useCallback(($,ve)=>{const ye=new Map;return ve.forEach((te,Ce)=>{const Te=Ar(te);Te!=null&&ye.set(te,Te)}),$.map(te=>{if(!te.filePath||te.isPreOrganized&&te.day!=null)return te;const Ce=te.filePath.split(/[\\/]/),Te=Ce.join("/"),Ae=Ce[0],_e=ye.get(Ae);if(_e!=null)return{...te,day:_e};for(const[Oe,Ue]of ye.entries()){const Ve=Oe.split(/[\\/]/).join("/");if(Te===Ve||Te.startsWith(`${Ve}/`))return{...te,day:Ue}}if(Ce.length>1){const Ue=Ce[1].match(/^D(\d{1,2})/i);if(Ue){const Ve=parseInt(Ue[1],10);if(!Number.isNaN(Ve))return{...te,day:Ve}}}return te})},[]),re=P.useCallback(async($,ve)=>{ce(!0),X(0),A("Loading project..."),J(null);try{X(25),A("Reading project data...");const ye=await xp($);X(50),A("Processing photos...");const te=de(ye.photos,ye.dayContainers||[]),Ce={...ye,photos:te};if(X(75),A("Initializing view..."),x(Ce),b($),B(!1),Q(!1),Ke.set(Qn,$),X(90),ve?.addRecent!==!1){const Te=Ke.get(Ft),_e=(Te?JSON.parse(Te):[]).map(Ve=>({...Ve,projectId:Ve.projectId||Ve.rootPath}));let Oe=_e.find(Ve=>Ve.projectId===$);Oe||(Oe=_e.find(Ve=>Ve.rootPath===$));const Ue=Oe?.coverUrl;oe({projectName:ye.projectName||"Untitled Project",projectId:$,rootPath:ye.rootPath||"Unknown location",lastOpened:Date.now(),totalPhotos:ye.photos?.length||0,...Ue&&{coverUrl:Ue}})}X(100),je(null)}catch(ye){const te=ye instanceof Error?ye.message:"Failed to load project";console.error("Failed to load project:",ye),J(te),(te.includes("access")&&!te.includes("no longer available")||te.includes("permission")||te.includes("granted"))&&je($),d(te,"error"),Ke.remove(Qn),Q(!0)}finally{ce(!1),X(0)}},[de,x,d,oe]),Le=P.useCallback(async()=>{if(xe){ce(!0),X(0),A("Requesting folder access..."),J(null);try{const $=await Vs(xe);if($){if(X(25),A("Re-requesting permissions..."),await $.requestPermission({mode:"read"})==="granted"){X(50),A("Loading project..."),await re(xe,{addRecent:!1}),je(null);return}}else throw new Error("Project folder access is no longer available. Please reselect the folder from the start screen.");throw new Error("Folder access was not granted.")}catch($){const ve=$ instanceof Error?$.message:"Failed to retry permission";console.error("Failed to retry permission:",$),J(ve),d(ve,"error"),Q(!0),je(null)}finally{ce(!1),X(0)}}},[xe,re,d]),ze=P.useCallback(async($,ve)=>{ce(!0),X(0),A("Initializing project..."),J(null);try{if(ve)return X(25),A("Saving folder access..."),await Bi(ve,$.dirHandle),X(50),A("Loading project..."),re(ve),!0;X(5),A("Requesting folder access...");const ye=await vp({dirHandle:$.dirHandle,projectName:$.projectName,rootLabel:$.rootPath,onProgress:(Oe,Ue)=>{const Ve=5+Oe*.789;X(Ve),A(Ue)}});X(80),A("Processing photo organization...");const te=$.mappings?.length?Y(ye.photos,$.mappings):f(ye.photos,ye.suggestedDays),Ce=($.mappings||[]).filter(Oe=>!Oe.skip).map(Oe=>Oe.folderPath||Oe.folder),Te=$.projectName?.trim()||C($.rootPath);let Ae,_e;if(ve){Ae=ve,X(80),A("Loading existing project data...");const Oe=Ke.get(`${jp}${ve}`),Ue=Oe?JSON.parse(Oe):{},Ve=await Hi($.dirHandle);let _t=Ve;if(Ue.edits){const Rt=new Map;Ue.edits.forEach(vt=>{vt?.filePath&&Rt.set(vt.filePath,vt)}),_t=Ve.map(vt=>{const Lt=vt.filePath?Rt.get(vt.filePath):null;return Lt?{...vt,day:Lt.day,bucket:Lt.bucket,sequence:Lt.sequence,favorite:Lt.favorite,rating:Lt.rating,archived:Lt.archived,currentName:Lt.currentName}:vt})}_e={projectName:Ue.projectName||Te,rootPath:$.rootPath||$.dirHandle.name,photos:_t,settings:Ue.settings||bl,dayContainers:Ue.dayContainers||Ce,dayLabels:Ue.dayLabels,lastModified:Date.now()}}else Ae=ye.projectId,_e={projectName:Te,rootPath:$.rootPath||$.dirHandle.name,photos:te,settings:bl,dayContainers:Ce};return X(90),A("Saving project state..."),p(te),j(Te),b(Ae),L($.rootPath||$.dirHandle.name),D(bl),B(!1),Q(!1),Ke.set(Qn,Ae),X(95),A("Updating recent projects..."),oe({projectName:Te,projectId:Ae,rootPath:$.rootPath||$.dirHandle.name,lastOpened:Date.now(),totalPhotos:te.length}),X(98),A("Finalizing project..."),await Oc(Ae,_e),Q(!1),X(100),je(null),!0}catch(ye){return J(ye instanceof Error?ye.message:"Failed to initialize project"),B(!0),Q(!0),!1}finally{ce(!1),X(0)}},[Y,f,c,C,re,oe]);return P.useEffect(()=>{if(K.current)return;K.current=!0;try{const ye=Ke.get(Ft);if(ye)try{const te=JSON.parse(ye),Ce=Array.isArray(te)?te.map(_e=>({..._e,projectId:_e.projectId||_e.rootPath})):[],Te=new Map;Ce.forEach(_e=>{_e.projectId&&!Te.has(_e.projectId)&&Te.set(_e.projectId,_e)});const Ae=Array.from(Te.values());JSON.stringify(Ae)!==JSON.stringify(te)&&Ke.set(Ft,JSON.stringify(Ae)),console.log("Loaded recent projects:",Ae.map(_e=>({id:_e.projectId,cover:_e.coverUrl?"has cover":"no cover"}))),W(Ae)}catch(te){console.warn("Failed to parse recent projects from storage",te),W([])}}catch{W([])}const $=Ke.get(Qn),ve=typeof globalThis<"u"&&(globalThis.vitest||globalThis.__APP_VERSION__==="0.0.0");$&&(ve||"showDirectoryPicker"in window)?ve?Q(!1):(async()=>{try{await Vs($)&&(je($),J('Project needs permission to access its folder. Click "Try Again" to grant access.')),Q(!0)}catch(ye){console.warn("Error checking stored handle on startup:",ye),Q(!0)}})():Q(!0)},[]),{photos:v,setPhotos:p,projectName:g,setProjectName:j,projectRootPath:S,setProjectRootPath:b,projectFolderLabel:I,setProjectFolderLabel:L,projectSettings:_,setProjectSettings:D,recentProjects:H,setRecentProjects:W,showOnboarding:z,setShowOnboarding:B,showWelcome:q,setShowWelcome:Q,projectError:ie,setProjectError:J,permissionRetryProjectId:xe,setPermissionRetryProjectId:je,projectNeedingReselection:ee,setProjectNeedingReselection:G,loadingProject:Pe,loadingProgress:ke,loadingMessage:Z,dayLabels:M,setDayLabels:ae,dayContainers:ne,setDayContainers:R,loadProject:re,retryProjectPermission:Le,handleOnboardingComplete:ze,updateRecentProjects:oe,applySuggestedDays:f,applyFolderMappings:Y,applyDayContainers:de}}function Cp(){const[c,d]=P.useState("folders"),[a,v]=P.useState(!1),[p,g]=P.useState(!1),[j,S]=P.useState(!1),[b,I]=P.useState(!1),[L,_]=P.useState(null),[D,H]=P.useState(null),[W,z]=P.useState(null),[B,q]=P.useState(null),Q=P.useRef({selectedRootFolder:null,selectedDay:null});return{currentView:c,setCurrentView:d,sidebarCollapsed:a,setSidebarCollapsed:v,hideAssigned:p,setHideAssigned:g,showHelp:j,setShowHelp:S,showExportScript:b,setShowExportScript:I,galleryViewPhoto:L,setGalleryViewPhoto:_,fullscreenPhoto:D,setFullscreenPhoto:H,selectedDay:W,setSelectedDay:z,selectedRootFolder:B,setSelectedRootFolder:q,foldersViewStateRef:Q}}function Ep({showWelcome:c,projectName:d,stats:a,currentVersion:v,coverSelectionMode:p,selectedPhotosCount:g,projectRootPath:j,currentView:S,hideAssigned:b,recentProjects:I,projectError:L,permissionRetryProjectId:_,loadingProject:D,onMainMenu:H,onStartCoverSelection:W,onUseCoverSelection:z,onCancelCoverSelection:B,onSelectRecentProject:q,onOpenProject:Q,onDeleteProject:ie,onImportTrip:J,onExportScript:xe,onShowHelp:je,onRetryPermission:ee,onChangeView:G,onToggleHideAssigned:Pe,onRememberFoldersViewState:ce,onRestoreFoldersViewState:ke,onClearDaySelection:X}){const[Z,A]=P.useState(!1);return c?null:o.jsxs("header",{className:"border-b border-gray-800 bg-gray-900",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-3",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("img",{src:"/Narrative/assets/Narrative_icon.png",alt:"Narrative",className:"w-8 h-8 rounded"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-semibold text-gray-100",children:d}),o.jsxs("p",{className:"text-xs text-gray-400",children:[a.sorted," sorted  ",a.root," root  ",a.favorites," favorites"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-gray-500",children:v}),o.jsx("button",{onClick:()=>{A(!1),H()},className:"px-3 py-1 bg-gray-800 hover:bg-gray-700 rounded text-sm font-medium",title:"Back to the main menu",children:"Main Menu"}),j&&o.jsx("button",{onClick:W,className:`px-3 py-1 rounded text-sm font-medium ${p?"bg-yellow-200 text-yellow-900":"bg-gray-800 hover:bg-gray-700 text-gray-100"}`,title:"Set cover from selected photo",children:p?"Selecting":"Set Cover"}),p&&o.jsxs("div",{className:"px-3 py-1 bg-yellow-50 text-yellow-900 rounded text-sm flex items-center gap-3",children:[o.jsx("span",{children:"Select a photo to set as cover"}),g===1&&o.jsx("button",{onClick:z,className:"underline",children:"Use selection"}),o.jsx("button",{onClick:B,className:"underline",children:"Cancel"})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>A(M=>!M),className:"px-3 py-1 bg-gray-800 hover:bg-gray-700 rounded text-sm font-medium flex items-center gap-1",title:"Open recent projects","aria-expanded":Z,children:["Projects",o.jsx(Oi,{className:"w-4 h-4"})]}),Z&&o.jsxs("div",{className:"absolute right-0 mt-2 w-72 rounded-lg border border-gray-800 bg-gray-900 shadow-xl z-20",children:[o.jsx("div",{className:"px-3 py-2 text-xs uppercase tracking-wide text-gray-400 border-b border-gray-800",children:"Recent Projects"}),I.length===0?o.jsx("div",{className:"px-3 py-3 text-sm text-gray-400",children:"No recent projects yet."}):o.jsx("div",{className:"max-h-64 overflow-y-auto",children:I.map(M=>o.jsxs("button",{onClick:()=>{A(!1),q(M.projectId)},className:"w-full text-left px-3 py-2 hover:bg-gray-800",children:[o.jsx("div",{className:"text-sm text-gray-100",children:M.projectName}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:M.rootPath})]},M.projectId))}),o.jsx("div",{className:"border-t border-gray-800",children:o.jsx("button",{onClick:()=>{A(!1),Q()},className:"w-full text-left px-3 py-2 text-sm text-blue-300 hover:bg-gray-800",children:"Open Project"})})]})]}),j&&o.jsx("button",{onClick:ie,className:"px-3 py-1 bg-red-700 hover:bg-red-800 rounded text-sm font-medium",title:"Delete project",children:"Delete"}),o.jsxs("button",{onClick:J,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm font-medium flex items-center gap-1",title:"Import existing trip folder",disabled:D,children:[D?o.jsx(Ks,{className:"w-4 h-4 animate-spin"}):o.jsx(Hf,{className:"w-4 h-4"}),"Import Trip"]}),o.jsx("button",{onClick:xe,className:"px-3 py-1 bg-gray-800 hover:bg-gray-700 rounded text-sm font-medium",title:"Export rename script",disabled:a.total===0,children:"Export Script"}),o.jsx("button",{onClick:je,className:"p-2 hover:bg-gray-800 rounded",title:"Show shortcuts (?)",children:"?"})]})]}),o.jsx("div",{className:"flex gap-1 px-6 pb-2",children:[{id:"folders",label:"Folders",count:a.root},{id:"favorites",label:"Favorites",count:a.favorites},{id:"archive",label:"Archive",count:a.archived},{id:"review",label:"Review",count:a.sorted}].map(M=>o.jsxs("button",{onClick:()=>{S==="folders"&&ce(),G(M.id),M.id==="folders"?ke():X()},className:`px-4 py-2 rounded-t text-sm font-medium transition-colors ${S===M.id?"bg-gray-950 text-blue-400":"text-gray-400 hover:text-gray-200"}`,children:[M.label," ",M.count>0&&o.jsxs("span",{className:"text-xs opacity-60",children:["(",M.count,")"]})]},M.id))}),o.jsx("div",{className:"flex flex-wrap items-center gap-2 px-6 pb-3",children:o.jsx("button",{onClick:Pe,className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${b?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:b?"Show All":"Hide Assigned"})}),L&&o.jsx("div",{className:"mx-6 mb-3 rounded-lg border border-red-800 bg-red-950/60 px-4 py-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-red-200",children:L}),_&&o.jsx("button",{onClick:ee,className:"ml-3 px-3 py-1 bg-red-700 hover:bg-red-600 text-white text-xs rounded transition-colors",children:"Try Again"})]})})]})}function Pp({currentView:c,sidebarCollapsed:d,onCollapseSidebar:a,onExpandSidebar:v,visibleDays:p,selectedDay:g,selectedRootFolder:j,onSelectDay:S,onSelectRootFolder:b,editingDay:I,editingDayName:L,onChangeEditingDayName:_,onStartEditingDay:D,onSaveDayName:H,onCancelEditingDay:W,onClearSelectedDay:z,days:B,dayLabels:q,dayContainers:Q,photos:ie,normalizePath:J,rootGroups:xe,displayRootGroups:je,sortFolders:ee,projectSettings:G,debugEnabled:Pe}){return c==="days"&&d?o.jsx("button",{onClick:v,className:"w-12 border-r border-gray-800 bg-gray-900 flex items-center justify-center hover:bg-gray-800 transition-colors","aria-label":"Expand sidebar",title:"Expand sidebar",children:o.jsx(Fi,{className:"w-4 h-4 text-gray-400 rotate-180"})}):c==="days"?o.jsx("aside",{className:"w-48 border-r border-gray-800 bg-gray-900 overflow-y-auto",children:o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Days"}),o.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-800 rounded","aria-label":"Collapse sidebar",title:"Collapse sidebar",children:o.jsx(Fi,{className:"w-4 h-4 text-gray-400"})})]}),o.jsx("div",{className:"space-y-1",children:p.map(([ce,ke])=>o.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{b(null),S(ce)},onKeyDown:X=>{X.key==="Enter"&&(b(null),S(ce))},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${g===ce?"bg-blue-600 text-white":"hover:bg-gray-800 text-gray-300"}`,children:[o.jsx("div",{className:"flex items-center justify-between",children:I===ce?o.jsxs("div",{className:"flex items-center gap-2 w-full",children:[o.jsx("input",{value:L,onChange:X=>_(X.target.value),className:"w-full px-2 py-1 rounded bg-gray-800 text-sm text-gray-100"}),o.jsx("button",{onClick:X=>{X.stopPropagation(),H(ce)},className:"p-1 bg-green-600 rounded","aria-label":"Save day name",children:o.jsx($i,{className:"w-4 h-4"})}),o.jsx("button",{onClick:X=>{X.stopPropagation(),W()},className:"p-1 bg-gray-800 rounded","aria-label":"Cancel",children:o.jsx(kn,{className:"w-4 h-4"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"font-medium",children:q[ce]||`Day ${String(ce).padStart(2,"0")}`}),o.jsxs("div",{className:"flex items-center gap-2",children:[g===ce&&o.jsx("button",{onClick:X=>{X.stopPropagation(),z()},className:"px-2 py-0.5 rounded bg-gray-800 text-xs text-gray-300 hover:text-white","aria-label":"Clear day selection",title:"Clear day selection",children:"Clear"}),o.jsx("button",{onClick:X=>{X.stopPropagation(),D(ce,q[ce]||`Day ${String(ce).padStart(2,"0")}`)},className:"p-1","aria-label":`Edit day ${ce}`,children:o.jsx(Mi,{className:"w-4 h-4 text-gray-400"})})]})]})}),o.jsxs("div",{className:"text-xs opacity-70",children:[ke.length," photos"]})]},ce))})]})}):c!=="folders"?null:o.jsx("aside",{className:"w-48 border-r border-gray-800 bg-gray-900 overflow-y-auto",children:o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase mb-3",children:"Days"}),o.jsx("div",{className:"space-y-1 mb-4",children:(()=>{const ce=new Map,ke=Q||[],X=[],Z=[];ke.forEach(C=>{const f=J(C);f.includes("/")?Z.push(f):X.push(f)});const A=C=>{const f=J(C);return ie.filter(x=>{const oe=J(x.filePath||x.originalName||"");return oe===f||oe.startsWith(`${f}/`)})};B.forEach(([C,f])=>{ce.has(C)||ce.set(C,{dayNumber:C,photos:f,folderName:null})}),Z.forEach(C=>{const f=C.split("/").slice(-1)[0],x=Ar(f);x==null||ce.has(x)||ce.set(x,{dayNumber:x,photos:A(C),folderName:C})});const M=G?.folderStructure?.daysFolder;if(M){const C=J(M),f=new Map;ie.forEach(x=>{const Y=J(x.filePath||x.originalName||"").split("/");if(Y.length<2||Y[0]!==C)return;const de=Ar(Y[1]);de!=null&&(f.has(de)||f.set(de,[]),f.get(de).push(x))}),f.forEach((x,oe)=>{ce.has(oe)||ce.set(oe,{dayNumber:oe,photos:x,folderName:`${C}/${q[oe]||`Day ${String(oe).padStart(2,"0")}`}`})})}const ae=ee(je),ne=[...ae.selected,...ae.nonDay,...ae.dayLike];Pe&&console.debug("[PhotoOrganizer] Folder categorization:",{selected:ae.selected.map(C=>C.folder),nonDay:ae.nonDay.map(C=>C.folder),dayLike:ae.dayLike.map(C=>C.folder)}),xe.forEach(([C,f])=>{const x=ne.find(oe=>oe.folder===C);if(x&&x.isDayLike&&x.dayNumber!==null&&!ce.has(x.dayNumber)){const oe=f.filter(Y=>Y.day===x.dayNumber||Y.day===null);ce.set(x.dayNumber,{dayNumber:x.dayNumber,photos:oe,folderName:C})}});const R=Array.from(ce.values()).sort((C,f)=>C.dayNumber-f.dayNumber),K=X.filter(C=>ne.find(x=>x.folder===C)?.dayNumber===null);return o.jsxs(o.Fragment,{children:[R.map(C=>o.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{b(null),S(C.dayNumber)},onKeyDown:f=>{f.key==="Enter"&&(b(null),S(C.dayNumber))},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${g===C.dayNumber?"bg-blue-600 text-white":"hover:bg-gray-800 text-gray-300"}`,children:[o.jsx("div",{className:"flex items-center justify-between",children:I===C.dayNumber?o.jsxs("div",{className:"flex items-center gap-2 w-full",children:[o.jsx("input",{value:L,onChange:f=>_(f.target.value),className:"w-full px-2 py-1 rounded bg-gray-800 text-sm text-gray-100"}),o.jsx("button",{onClick:f=>{f.stopPropagation(),H(C.dayNumber)},className:"p-1 bg-green-600 rounded","aria-label":"Save day name",children:o.jsx($i,{className:"w-4 h-4"})}),o.jsx("button",{onClick:f=>{f.stopPropagation(),W()},className:"p-1 bg-gray-800 rounded","aria-label":"Cancel",children:o.jsx(kn,{className:"w-4 h-4"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"font-medium",children:q[C.dayNumber]||`Day ${String(C.dayNumber).padStart(2,"0")}`}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("button",{onClick:f=>{f.stopPropagation(),D(C.dayNumber,q[C.dayNumber]||`Day ${String(C.dayNumber).padStart(2,"0")}`)},className:"p-1","aria-label":`Edit day ${C.dayNumber}`,children:o.jsx(Mi,{className:"w-4 h-4 text-gray-400"})})})]})}),o.jsxs("div",{className:"text-xs opacity-70",children:[C.photos.length," photos"]})]},`day-${C.dayNumber}`)),K.map(C=>o.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{b(C),S(null)},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${j===C?"bg-blue-600 text-white":"hover:bg-gray-800 text-gray-300"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"font-medium",children:C}),o.jsx("div",{className:"text-xs px-2 py-0.5 rounded bg-gray-700 text-gray-300",children:"Container"})]}),o.jsxs("div",{className:"text-xs opacity-70",children:[xe.find(([f])=>f===C)?.[1].length||0," photos"]})]},`container-${C}`))]})})()}),o.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase mb-3",children:"Other"}),o.jsx("div",{className:"space-y-1",children:(()=>{const{selected:ce,nonDay:ke}=ee(je),X=G?.folderStructure?.daysFolder,Z=[];if(X){const M=J(X),ae=new Map;ie.forEach(ne=>{if(ne.archived)return;const K=J(ne.filePath||ne.originalName||"").split("/");if(K.length<3||K[0]!==M||Ar(K[1])!=null)return;const f=K[1],x=`${M}/${f}`;ae.has(x)||ae.set(x,[]),ae.get(x).push(ne)}),ae.forEach((ne,R)=>{Z.push({key:R,label:R,items:ne})})}const A=[...ke.map(M=>({key:M.folder,label:M.folder,items:M.items})),...Z];return o.jsxs(o.Fragment,{children:[A.map(M=>o.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{b(M.key),S(null)},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${j===M.key?"bg-blue-600 text-white":"hover:bg-gray-800 text-gray-300"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"font-medium",children:M.label}),o.jsx("div",{className:"flex gap-2"})]}),o.jsxs("div",{className:"text-xs opacity-70",children:[M.items.length," photos (",M.items.filter(ae=>ae.day===null).length," ","unsorted)"]})]},M.key)),A.length===0&&o.jsx("div",{className:"text-xs text-gray-400",children:"No other folders"})]})})()})]})})}const bp=async c=>{try{const d=await c.getFile();return new Promise(a=>{const v=document.createElement("video"),p=document.createElement("canvas"),g=p.getContext("2d"),j=()=>{p.width=v.videoWidth,p.height=v.videoHeight,v.currentTime=0},S=()=>{if(g){g.drawImage(v,0,0);const b=p.toDataURL("image/jpeg",.8);v.removeEventListener("loadedmetadata",j),v.removeEventListener("seeked",S),a(b)}};v.addEventListener("loadedmetadata",j),v.addEventListener("seeked",S),v.src=URL.createObjectURL(d),v.load(),setTimeout(()=>{v.removeEventListener("loadedmetadata",j),v.removeEventListener("seeked",S),a(null)},2e3)})}catch(d){return console.error("Failed to generate video thumbnail:",d),null}},_p=({photos:c,currentPhotoId:d,onSelectPhoto:a,visibleCount:v=7})=>{const p=P.useRef(null),g=P.useRef(null),[j,S]=P.useState({});P.useEffect(()=>{(async()=>{const B=c.filter(q=>q.mimeType?.startsWith("video/")&&!j[q.id]);for(const q of B)if(q.fileHandle){const Q=await bp(q.fileHandle);S(ie=>({...ie,[q.id]:Q}))}})()},[c]),P.useEffect(()=>{if(g.current&&p.current){const z=p.current,B=g.current,q=z.getBoundingClientRect(),Q=B.getBoundingClientRect();(Q.left<q.left||Q.right>q.right)&&B.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},[d]);const b=z=>{if(p.current){const B=p.current.clientWidth*.7;p.current.scrollBy({left:z==="right"?B:-B,behavior:"smooth"})}},I=c.findIndex(z=>z.id===d),L=I>0,_=I<c.length-1,D=c.filter(z=>!z.mimeType?.startsWith("video/")),H=c.filter(z=>z.mimeType?.startsWith("video/")),W=(z,B)=>{const q=z.id===d,Q=z.bucket?{A:"bg-blue-500",B:"bg-purple-500",C:"bg-green-500",D:"bg-orange-500",E:"bg-yellow-500",M:"bg-indigo-500",X:"bg-gray-500"}[z.bucket]||"bg-gray-500":null,ie=z.mimeType?.startsWith("video/")&&j[z.id]||z.thumbnail;return o.jsxs("button",{ref:q?g:null,onClick:()=>a(z.id),className:`relative flex-shrink-0 group ${q?"ring-4 ring-blue-500 shadow-xl scale-110":"hover:ring-2 hover:ring-gray-600"} transition-all duration-200 rounded-lg overflow-hidden`,style:{width:"120px",height:"90px"},"aria-label":`${z.currentName}${q?" (current)":""}`,"aria-current":q?"true":void 0,children:[ie?o.jsx("img",{src:ie,alt:z.currentName,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:o.jsx("span",{className:"text-xs text-gray-500 text-center px-2 break-words",children:z.currentName})}),z.mimeType?.startsWith("video/")&&o.jsx("div",{className:"absolute top-1 left-1 bg-black/70 rounded p-1",children:o.jsx(Wf,{className:"w-3 h-3 text-white"})}),Q&&o.jsx("div",{className:`absolute top-1 right-1 ${Q} text-white text-xs font-bold rounded px-1.5 py-0.5 shadow-lg`,children:z.bucket}),z.favorite&&o.jsx("div",{className:"absolute bottom-1 right-1 bg-yellow-500 text-white text-xs rounded-full p-1",children:o.jsx("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),!q&&o.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:o.jsxs("span",{className:"text-white text-xs font-medium",children:["#",B+1]})}),q&&o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:"absolute inset-0 bg-blue-500/10"})})]},z.id)};return o.jsxs("div",{className:"relative bg-gray-900 border-t border-gray-800",children:[L&&o.jsx("button",{onClick:()=>b("left"),className:"absolute left-2 top-1/2 -translate-y-1/2 z-10 p-2 bg-gray-950/80 hover:bg-gray-800 rounded-lg text-gray-300 hover:text-white transition-colors shadow-lg","aria-label":"Scroll left",children:o.jsx(Fi,{className:"w-5 h-5"})}),o.jsxs("div",{ref:p,className:"flex items-center gap-3 px-12 py-4 overflow-x-auto scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900",style:{scrollbarWidth:"thin"},children:[D.length>0&&o.jsxs(o.Fragment,{children:[D.map((z,B)=>W(z,B)),H.length>0&&o.jsx("div",{className:"h-20 border-l border-gray-700 mx-2"})]}),H.length>0&&o.jsx("div",{className:"flex gap-3",children:H.map((z,B)=>{const q=c.findIndex(Q=>Q.id===z.id);return W(z,q)})})]}),_&&o.jsx("button",{onClick:()=>b("right"),className:"absolute right-2 top-1/2 -translate-y-1/2 z-10 p-2 bg-gray-950/80 hover:bg-gray-800 rounded-lg text-gray-300 hover:text-white transition-colors shadow-lg","aria-label":"Scroll right",children:o.jsx(Bf,{className:"w-5 h-5"})}),o.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 bg-gray-950/80 px-3 py-1 rounded-full text-xs text-gray-300",children:[I+1," / ",c.length]})]})},Rp=({photo:c,filteredPhotos:d,onClose:a,onNavigate:v,onToggleFavorite:p,onAssignBucket:g,onAssignDay:j,selectedBucket:S,selectedDay:b,buckets:I,dayLabels:L={}})=>{const[_,D]=P.useState(d.findIndex(Z=>Z.id===c.id)),[H,W]=P.useState(null),[z,B]=P.useState(!1),[q,Q]=P.useState(null),[ie,J]=P.useState(!0),[xe,je]=P.useState(!0),ee=P.useRef(null);P.useEffect(()=>{const Z=d.findIndex(A=>A.id===c.id);Z!==-1&&Z!==_&&D(Z)},[d,c.id,_]);const G=d[_]||c;P.useEffect(()=>(Q(null),(async()=>{H&&(G.fileHandle&&ee.current===H||!G.fileHandle&&G.thumbnail===H)||(B(!0),ee.current=null);try{if(G.fileHandle){const M=await G.fileHandle.getFile(),ae=URL.createObjectURL(M);ee.current=ae,W(ae)}else G.thumbnail?W(G.thumbnail):Q("No image data available")}catch(M){console.error("Failed to load full resolution image:",M),G.thumbnail?W(G.thumbnail):Q("Failed to load image")}finally{B(!1)}})(),()=>{if(ee.current&&ee.current.startsWith("blob:"))try{URL.revokeObjectURL(ee.current)}catch{}}),[G.id,G.fileHandle,G.thumbnail]),P.useEffect(()=>{const A=setTimeout(async()=>{const M=Math.min(_+1,d.length-1),ae=Math.max(_-1,0),ne=[M,ae].filter(R=>R!==_);for(const R of ne){const K=d[R];if(K?.fileHandle)try{await K.fileHandle.getFile()}catch{}}},100);return()=>clearTimeout(A)},[_,d]);const Pe=P.useCallback(Z=>{let A=_;Z==="next"?A=Math.min(_+1,d.length-1):A=Math.max(_-1,0),A!==_&&(D(A),v(d[A].id))},[_,d,v]),ce=P.useCallback(Z=>{const A=d.findIndex(M=>M.id===Z);A!==-1&&A!==_&&(D(A),v(Z))},[d,_,v]),ke=P.useCallback(Z=>{if(Z.key==="Escape")Z.preventDefault(),a();else if(Z.key==="ArrowRight")Z.preventDefault(),Pe("next");else if(Z.key==="ArrowLeft")Z.preventDefault(),Pe("prev");else if(Z.key==="f"||Z.key==="F")Z.preventDefault(),p(G.id);else if(Z.key.toLowerCase()==="x")Z.preventDefault(),g(G.id,"X");else{const A=Z.key.toUpperCase();if(["A","B","C","D","E","M"].includes(A)){Z.preventDefault();const ae=G.bucket===A?"":A;g(G.id,ae)}}},[G.id,G.bucket,a,Pe,p,g]);P.useEffect(()=>(window.addEventListener("keydown",ke),()=>window.removeEventListener("keydown",ke)),[ke]);const X=I.find(Z=>Z.key===G.bucket);return o.jsxs("div",{className:"fixed inset-0 bg-black z-40 flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-3 border-b border-gray-800 bg-gray-900/95 backdrop-blur",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-100",children:"Gallery View"}),o.jsxs("div",{className:"text-sm text-gray-400",children:[_+1," of ",d.length]})]}),o.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-800 rounded-lg transition-colors","aria-label":"Close gallery view",children:o.jsx(kn,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex-1 flex items-center justify-center bg-gray-950 overflow-hidden relative",children:[z&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/50 z-10",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Ks,{className:"w-12 h-12 animate-spin text-blue-400 mx-auto mb-3"}),o.jsx("p",{className:"text-sm text-gray-400",children:"Loading image..."})]})}),q&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/50 z-10",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm text-red-400 mb-2",children:q}),o.jsxs("p",{className:"text-xs text-gray-500",children:["File: ",G.currentName]})]})}),H&&o.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:G.mimeType?.startsWith("video/")?o.jsx("video",{src:H,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl",controls:!0,autoPlay:!0,muted:!0}):o.jsx("img",{src:H,alt:G.currentName,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl"})}),o.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col items-end gap-2",children:[X&&o.jsxs("div",{className:`${X.color} text-white px-4 py-2 rounded-lg shadow-xl flex items-center gap-2`,children:[o.jsx("span",{className:"text-xl font-bold",children:X.key}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"text-sm font-semibold",children:X.label}),o.jsx("div",{className:"text-xs opacity-90",children:X.description})]})]}),G.day&&o.jsxs("div",{className:"bg-gray-900/90 backdrop-blur text-white px-4 py-2 rounded-lg shadow-xl",children:[o.jsx("div",{className:"text-xs text-gray-400",children:"Day"}),o.jsx("div",{className:"text-sm font-semibold",children:L[G.day]||`Day ${String(G.day).padStart(2,"0")}`})]}),G.favorite&&o.jsxs("div",{className:"bg-yellow-500 text-white px-3 py-2 rounded-lg shadow-xl flex items-center gap-2",children:[o.jsx(As,{className:"w-4 h-4 fill-current"}),o.jsx("span",{className:"text-sm font-semibold",children:"Favorite"})]})]}),o.jsxs("div",{className:"absolute top-4 left-4 bg-gray-900/80 backdrop-blur rounded-lg shadow-lg overflow-hidden flex flex-col",children:[o.jsxs("button",{onClick:()=>J(!ie),className:"flex items-center justify-between px-3 py-2 text-xs text-gray-300 hover:bg-gray-800 transition-colors border-b border-gray-700",children:[o.jsx("span",{className:"font-semibold",children:"Quick Actions"}),ie?o.jsx(kc,{className:"w-4 h-4"}):o.jsx(Oi,{className:"w-4 h-4"})]}),ie&&o.jsxs("div",{className:"px-3 py-2 space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-800 rounded text-[10px]",children:""}),o.jsx("span",{children:"Navigate"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-800 rounded text-[10px]",children:"A-E,M,X"}),o.jsx("span",{children:"Assign"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-800 rounded text-[10px]",children:"F"}),o.jsx("span",{children:"Favorite"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-800 rounded text-[10px]",children:"Esc"}),o.jsx("span",{children:"Exit"})]})]})]}),o.jsxs("div",{className:"absolute top-4 right-4 bg-gray-900/80 backdrop-blur rounded-lg shadow-lg overflow-hidden flex flex-col max-w-xs",children:[o.jsxs("button",{onClick:()=>je(!xe),className:"flex items-center justify-between px-3 py-2 text-xs text-gray-300 hover:bg-gray-800 transition-colors border-b border-gray-700",children:[o.jsx("span",{className:"font-semibold",children:"MECE Categories"}),xe?o.jsx(kc,{className:"w-4 h-4"}):o.jsx(Oi,{className:"w-4 h-4"})]}),xe&&o.jsx("div",{className:"px-3 py-3 space-y-2 max-h-80 overflow-y-auto",children:I.map(Z=>o.jsxs("div",{className:`${Z.color} text-white px-3 py-2 rounded text-xs`,children:[o.jsxs("div",{className:"font-bold text-sm",children:[Z.key," - ",Z.label]}),o.jsx("div",{className:"opacity-90 text-[11px] mt-0.5",children:Z.description})]},Z.key))})]})]}),o.jsx(_p,{photos:d,currentPhotoId:G.id,onSelectPhoto:ce})]})};function Lp({loadingProject:c,currentView:d,selectedDay:a,selectedRootFolder:v,photos:p,rootGroups:g,filteredPhotos:j,selectedPhotos:S,galleryViewPhoto:b,dayLabels:I,buckets:L,onSelectPhoto:_,onOpenViewer:D,onCloseViewer:H,onNavigateViewer:W,onToggleFavorite:z,onAssignBucket:B,onAssignDay:q,onSaveToHistory:Q,onShowToast:ie,getSubfolderGroup:J,getDerivedSubfolderGroup:xe,isVideoPhoto:je,isMeceBucketLabel:ee}){const G=(ke,X,Z)=>o.jsx("div",{className:"grid grid-cols-5 gap-3",children:ke.map(A=>o.jsxs("div",{onClick:M=>{M.stopPropagation(),_(A.id)},onDoubleClick:M=>{M.stopPropagation(),D(A.id)},"data-testid":`photo-${A.id}`,className:`relative group cursor-pointer rounded-lg overflow-hidden transition-all shadow-lg hover:shadow-xl ${A.bucket||A.archived?"opacity-70 saturate-75":"hover:scale-105"} ${S.has(A.id)?"ring-2 ring-blue-500":""}`,children:[A.thumbnail?A.mimeType?.startsWith("video/")?o.jsx("video",{src:A.thumbnail,className:"w-full aspect-square object-cover",muted:!0,preload:"metadata"}):o.jsx("img",{src:A.thumbnail,alt:A.currentName,className:"w-full aspect-square object-cover"}):o.jsx("div",{className:"w-full aspect-square bg-gray-900 flex items-center justify-center text-xs text-gray-400 px-2 text-center",children:A.currentName}),A.mimeType?.startsWith("video/")&&o.jsx("div",{className:"absolute top-2 left-2 bg-black/70 backdrop-blur-sm rounded-full p-1.5",children:o.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M6.3 2.84A1.5 1.5 0 004 4.11v11.78a1.5 1.5 0 002.3 1.27l9.344-5.891a1.5 1.5 0 000-2.538L6.3 2.841z"})})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2",children:o.jsx("p",{className:"text-xs font-medium text-white truncate",children:A.currentName})})}),A.isPreOrganized&&o.jsx("div",{className:"absolute top-2 right-2 z-10",children:o.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-blue-600 text-white shadow-lg",title:`Auto-assigned: Day ${A.detectedDay??""}, Bucket ${A.detectedBucket??""}`,children:"Organized"})}),A.bucket&&o.jsx("div",{className:`absolute bottom-2 left-2 px-2 py-1 rounded text-xs font-bold ${L.find(M=>M.key===A.bucket)?.color} text-white shadow-lg`,children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{children:A.bucket}),A.favorite&&o.jsx(As,{className:"w-3 h-3 fill-current"})]})}),!A.bucket&&A.favorite&&o.jsx("div",{className:"absolute bottom-2 left-2 bg-yellow-500 text-white rounded-full p-1.5 shadow-lg",children:o.jsx(As,{className:"w-3.5 h-3.5 fill-current"})})]},A.id))});if(c)return o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Ks,{className:"w-12 h-12 mx-auto mb-4 animate-spin text-blue-400"}),o.jsx("p",{className:"text-gray-400",children:"Loading project..."})]})});if(d==="days"&&a===null)return o.jsx("div",{className:"flex items-center justify-center h-96 text-gray-500",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Uf,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"Select a day to view photos"})]})});if(d==="folders"&&v===null&&a===null)return o.jsx("div",{className:"flex items-center justify-center h-96 text-gray-500",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Ii,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"Select a folder to view photos"})]})});const Pe=d==="folders"&&v?(g.find(ke=>ke[0]===v)?.[1]||[]).filter(ke=>!ke.archived):null,ce=Pe!==null?Pe:j;if(ce.length===0)return o.jsx("div",{className:"flex items-center justify-center h-96 text-gray-500",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Ii,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No photos in this view"})]})});if(b){const ke=ce.find(X=>X.id===b);if(ke)return o.jsx(Rp,{photo:ke,filteredPhotos:ce,onClose:H,onNavigate:W,onToggleFavorite:X=>z(X),onAssignBucket:(X,Z)=>{if(B(X,Z),Z==="X"){const A=ce.findIndex(M=>M.id===X);A!==-1&&(A<ce.length-1?W(ce[A+1].id):A>0?W(ce[A-1].id):H())}},onAssignDay:(X,Z)=>q(X,Z),selectedBucket:ke.bucket||void 0,selectedDay:ke.day,buckets:L,dayLabels:I})}if(a!==null){const ke=new Map;ce.forEach(M=>{const ae=J(M,a);ke.has(ae)||ke.set(ae,{label:ae,photos:[]}),ke.get(ae).photos.push(M)});const X=Array.from(ke.values()).sort((M,ae)=>M.label==="Day Root"?-1:ae.label==="Day Root"?1:M.label.localeCompare(ae.label)),Z=[];X.forEach(M=>{const ae=M.photos.filter(je),ne=M.photos.filter(R=>!je(R));ae.length>0&&ne.length>0?Z.push(...ne,...ae):Z.push(...M.photos)});const A=new Map;return Z.forEach((M,ae)=>A.set(M.id,ae)),o.jsx("div",{className:"space-y-8",children:X.map(M=>{const ae=M.photos.filter(je),ne=M.photos.filter(Y=>!je(Y)),R=ae.length>0&&ne.length>0,K=M.photos.filter(Y=>Y.day!==a?!1:xe(Y,a)===M.label),C=K.some(Y=>Y.subfolderOverride!==void 0),f=M.label==="Day Root",x=ee(M.label),oe=!f&&!x;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:M.label}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[o.jsxs("span",{children:[M.photos.length," items"]}),oe&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"text-xs text-blue-300 hover:text-blue-200",title:"Move photos in this subfolder to the day root",onClick:()=>{const Y=p,de=p.map(Le=>Le.day!==a||xe(Le,a)!==M.label?Le:{...Le,subfolderOverride:null});Q(de);const re=I[a]||`Day ${String(a).padStart(2,"0")}`;ie(`Photos moved to ${re}.`,"info",{durationMs:5e3,actionLabel:"Undo",onAction:()=>{Q(Y)}})},children:"Ingest to Day"}),o.jsx("button",{className:"text-xs text-gray-300 hover:text-gray-100",onClick:()=>{const Y=p.map(de=>{if(de.day!==a)return de;const re=xe(de,a);return re!==M.label?de:{...de,subfolderOverride:re}});Q(Y)},children:"Keep Subfolder"}),C&&o.jsx("button",{className:"text-xs text-red-300 hover:text-red-200",onClick:()=>{const Y=p.map(de=>de.day!==a?de:K.find(re=>re.id===de.id)?{...de,subfolderOverride:void 0}:de);Q(Y)},children:"Undo Ingest"})]})]})]}),R&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-2 text-xs uppercase tracking-wider text-gray-500",children:"Photos"}),G(ne),o.jsx("div",{className:"mt-6 mb-2 text-xs uppercase tracking-wider text-gray-500",children:"Videos"}),G(ae)]}),!R&&G(M.photos)]},M.label)})})}return G(ce)}function Dp({selectedPhotos:c,photos:d,days:a,buckets:v,onSaveToHistory:p,onPersistState:g,onSetDayLabels:j,onSetSelectedDay:S,onSetCurrentView:b,onSetSelectedPhotos:I,onRemoveDayAssignment:L,onAssignBucket:_,onToggleFavorite:D}){const[H,W]=P.useState(!1),[z,B]=P.useState("");if(P.useEffect(()=>{W(!1)},[c]),c.size===0)return null;const q=c.size===1?Array.from(c)[0]:null,Q=q?d.find(ie=>ie.id===q):null;return o.jsx("aside",{className:"w-80 border-l border-gray-800 bg-gray-900 overflow-y-auto",children:o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"mb-6",children:c.size===1&&Q?o.jsxs(o.Fragment,{children:[Q.mimeType?.startsWith("video/")?o.jsx("video",{src:Q.thumbnail,className:"w-full rounded-lg",controls:!0}):o.jsx("img",{src:Q.thumbnail,alt:"Selected",className:"w-full rounded-lg"}),o.jsx("div",{className:"mt-2 text-xs text-gray-400 font-mono break-all",children:H?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{value:z,onChange:ie=>B(ie.target.value),className:"w-full px-2 py-1 rounded bg-gray-800 text-sm text-gray-100"}),o.jsx("button",{onClick:()=>{const ie=d.map(J=>J.id===q?{...J,currentName:z}:J);p(ie),W(!1)},className:"p-1 bg-green-600 rounded","aria-label":"Save name",children:o.jsx($i,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>W(!1),className:"p-1 bg-gray-800 rounded","aria-label":"Cancel edit name",children:o.jsx(kn,{className:"w-4 h-4"})})]}):o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{children:Q.currentName}),o.jsx("button",{onClick:()=>{B(Q.currentName||Q.originalName||""),W(!0)},className:"p-1 ml-2","aria-label":"Edit name",children:o.jsx(Mi,{className:"w-4 h-4 text-gray-400"})})]})})]}):o.jsxs("div",{className:"text-sm text-gray-300",children:[c.size," selected"]})}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Assign Day"}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsxs("select",{"aria-label":"Assign to...",onChange:ie=>{const J=ie.target.value;if(!J)return;const xe=J==="new"?Math.max(0,...a.map(G=>G[0]))+1:Number(J),je=Array.from(c),ee=d.map(G=>je.includes(G.id)?{...G,day:xe}:G);p(ee),J==="new"&&(j(G=>({...G,[xe]:`Day ${String(xe).padStart(2,"0")}`})),g(ee)),S(xe),b("days"),I(new Set)},className:"px-3 py-2 rounded bg-gray-800",defaultValue:"",children:[o.jsx("option",{value:"",children:"Assign to..."}),a.map(([ie])=>o.jsx("option",{value:ie,children:`Day ${String(ie).padStart(2,"0")}`},ie)),o.jsx("option",{value:"new",children:"Create new day"})]}),o.jsx("div",{className:"text-xs text-gray-400",children:"Assign selected photos to a day folder"})]}),o.jsx("button",{onClick:()=>{L(Array.from(c)),I(new Set)},className:"w-full px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm font-medium transition-colors",children:"Remove Day Assignment"})]}),o.jsxs("div",{className:"space-y-2 mb-6",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Assign Category"}),v.map(ie=>o.jsxs("button",{onClick:()=>_(Array.from(c),ie.key),className:`w-full text-left px-4 py-3 rounded-lg transition-all ${ie.color} hover:brightness-110 text-white`,children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-lg",children:ie.key}),o.jsx("span",{className:"ml-3 font-medium",children:ie.label})]})}),o.jsx("p",{className:"text-xs mt-1 opacity-80",children:ie.description})]},ie.key))]}),o.jsx("div",{className:"space-y-3 pt-6 border-t border-gray-800",children:o.jsxs("button",{onClick:()=>D(Array.from(c)),className:`w-full px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${c.size===1&&Q?.favorite?"bg-yellow-600 hover:bg-yellow-700":"bg-gray-800 hover:bg-gray-700"}`,children:[o.jsx(As,{className:`w-4 h-4 ${c.size===1&&Q?.favorite?"fill-current":""}`}),"Toggle Favorite (F)"]})})]})})}const _l=[{key:"A",label:"Establishing",color:"bg-blue-500",description:"Wide shots, landscapes"},{key:"B",label:"People",color:"bg-purple-500",description:"Portraits, groups"},{key:"C",label:"Culture/Detail",color:"bg-green-500",description:"Local life, close-ups"},{key:"D",label:"Action/Moment",color:"bg-orange-500",description:"Events, activities"},{key:"E",label:"Transition",color:"bg-yellow-500",description:"Travel, movement"},{key:"M",label:"Mood/Food",color:"bg-indigo-500",description:"Food, mood"},{key:"X",label:"Archive",color:"bg-gray-500",description:"Unwanted shots"}],Tp=new Set(_l.map(c=>c.key)),zp=c=>{const a=c.trim().split(/[\s_-]+/)[0]||"";return Tp.has(a.toUpperCase())};function Op(){const c=P.useRef([]),d=P.useRef(null),[a,v]=P.useState(Bs.getDisplayVersion()),p=!1,[g,j]=P.useState(null),[S,b]=P.useState(""),[I,L]=P.useState(""),[_,D]=P.useState("idle"),[H,W]=P.useState(null),[z,B]=P.useState(!1),{currentView:q,setCurrentView:Q,sidebarCollapsed:ie,setSidebarCollapsed:J,hideAssigned:xe,setHideAssigned:je,showHelp:ee,setShowHelp:G,showExportScript:Pe,setShowExportScript:ce,galleryViewPhoto:ke,setGalleryViewPhoto:X,fullscreenPhoto:Z,setFullscreenPhoto:A,selectedDay:M,setSelectedDay:ae,selectedRootFolder:ne,setSelectedRootFolder:R,foldersViewStateRef:K}=Cp(),C=P.useCallback(()=>{W(null),d.current&&(window.clearTimeout(d.current),d.current=null)},[]),f=P.useCallback((h,E="info",T)=>{W({message:h,tone:E,actionLabel:T?.actionLabel,onAction:T?.onAction}),d.current&&window.clearTimeout(d.current);const le=T?.durationMs??2500;d.current=window.setTimeout(()=>{W(null),d.current=null},le)},[]),{photos:x,setPhotos:oe,projectName:Y,setProjectName:de,projectRootPath:re,setProjectRootPath:Le,projectFolderLabel:ze,projectSettings:$,recentProjects:ve,setRecentProjects:ye,showOnboarding:te,setShowOnboarding:Ce,showWelcome:Te,setShowWelcome:Ae,projectError:_e,setProjectError:Oe,permissionRetryProjectId:Ue,projectNeedingReselection:Ve,setProjectNeedingReselection:_t,loadingProject:Rt,loadingProgress:vt,loadingMessage:Lt,dayLabels:at,setDayLabels:Ur,dayContainers:cn,loadProject:dn,retryProjectPermission:cr,handleOnboardingComplete:Br}=Sp({debugEnabled:p,showToast:f,prevThumbnailsRef:c}),{setHistory:jn,setHistoryIndex:Sn,persistState:dr,saveToHistory:Vt,undo:Hr,redo:Rl}=Np({photos:x,setPhotos:oe,projectRootPath:re,projectName:Y,projectFolderLabel:ze,projectSettings:$,dayLabels:at,prevThumbnailsRef:c}),Vr=P.useCallback(()=>{const h=[],E={A:"Establishing",B:"People",C:"Culture-Detail",D:"Action-Moment",E:"Transition",M:"Mood-Food"},T={},le=[],Fe=[];x.forEach(me=>{if(me.archived)le.push(me);else if(me.bucket){const Ie=me.day;T[Ie]||(T[Ie]={}),T[Ie][me.bucket]||(T[Ie][me.bucket]=[]),T[Ie][me.bucket].push(me)}else Fe.push(me)});const be=$.folderStructure.daysFolder,Se=$.folderStructure.archiveFolder;h.push("#!/usr/bin/env bash"),h.push("set -e"),h.push(""),h.push("# Export script with dry-run first, then safe execution with preview and confirmation."),h.push("# Usage: Paste this script into terminal (after cd'ing to your project root)"),h.push("# It will show a preview first, then ask for confirmation before copying any files."),h.push(""),h.push(`DAYS_FOLDER="${be}"`),h.push(`ARCHIVE_FOLDER="${Se}"`),h.push('CURRENT_DIR="$(pwd)"'),h.push('TARGET_DAYS_DIR="${CURRENT_DIR}/${DAYS_FOLDER}"'),h.push('TARGET_ARCHIVE_DIR="${CURRENT_DIR}/${ARCHIVE_FOLDER}"'),h.push(""),h.push("# Color codes for output"),h.push("RED='\\033[0;31m'"),h.push("GREEN='\\033[0;32m'"),h.push("YELLOW='\\033[1;33m'"),h.push("BLUE='\\033[0;34m'"),h.push("NC='\\033[0m' # No Color"),h.push(""),h.push('echo "\\${BLUE}\\${NC}"'),h.push('echo "\\${BLUE}       EXPORT SCRIPT - DRY RUN PREVIEW\\${NC}"'),h.push('echo "\\${BLUE}\\${NC}"'),h.push("echo"),h.push('echo "\\${YELLOW}Current directory:\\${NC} \\${CURRENT_DIR}"'),h.push('echo "\\${YELLOW}Target days folder:\\${NC} \\${TARGET_DAYS_DIR}"'),h.push('echo "\\${YELLOW}Target archive folder:\\${NC} \\${TARGET_ARCHIVE_DIR}"'),h.push("echo"),h.push('echo "\\${GREEN}This is a DRY RUN - no files will be copied yet.\\${NC}"'),h.push('echo "\\${GREEN}You will be asked to confirm before any files are moved.\\${NC}"'),h.push("echo"),Fe.length>0&&(h.push('echo "\\${YELLOW}Root files (\\${NC}'+Fe.length+'):\\${NC}"'),Fe.forEach(me=>{me.filePath&&h.push(`echo "  cp \\"${me.filePath}\\"  \\"${me.currentName}\\""`)}),h.push(""));let ge=Fe.length+le.length;return Object.keys(T).forEach(me=>{Object.keys(T[parseInt(me)]).forEach(Ie=>{ge+=T[parseInt(me)][Ie].length})}),h.push('echo "\\${YELLOW}Days with organized photos:\\${NC}"'),Object.keys(T).map(Number).sort((me,Ie)=>me-Ie).forEach(me=>{const Ie=at[me]||`Day ${String(me).padStart(2,"0")}`,lt=T[me],Re=Object.values(lt).reduce((Be,rn)=>Be+rn.length,0);h.push(`echo "  ${Ie} (${Re} photos)"`),Object.keys(lt).sort().forEach(Be=>{const rn=E[Be]||Be,Wt=lt[Be];h.push(`echo "     ${Be}_${rn} (${Wt.length})"`)})}),le.length>0&&h.push('echo "  \\${YELLOW}Archive ('+le.length+')\\${NC}"'),h.push(""),h.push('echo "\\${YELLOW}Total files to copy:\\${NC} '+ge+'"'),h.push("echo"),h.push('echo "\\${YELLOW}\\${NC}"'),h.push('echo "\\${YELLOW}Ready to proceed?\\${NC}"'),h.push('echo "\\${RED}WARNING: This will copy files to your project directory.\\${NC}"'),h.push('echo "\\${YELLOW}\\${NC}"'),h.push("echo"),h.push('read -r -p "\\${YELLOW}Type \\"yes\\" to confirm and copy files (or press Ctrl+C to abort):\\${NC} " confirm'),h.push('if [ "$confirm" != "yes" ]; then'),h.push('  echo "\\${RED}Aborted - no files were copied.\\${NC}"'),h.push("  exit 0"),h.push("fi"),h.push(""),h.push('echo "\\${GREEN}\\${NC}"'),h.push('echo "\\${GREEN}Starting file copy operation...\\${NC}"'),h.push('echo "\\${GREEN}\\${NC}"'),h.push("echo"),Fe.length>0&&(Fe.forEach(me=>{me.filePath&&h.push(`if [ -e "${me.currentName}" ]; then echo "Skipping existing: ${me.currentName}"; else cp "${me.filePath}" "${me.currentName}"; fi`)}),h.push("")),h.push('mkdir -p "${DAYS_FOLDER}"'),Object.keys(T).map(Number).sort((me,Ie)=>me-Ie).forEach(me=>{const Ie=at[me]||`Day ${String(me).padStart(2,"0")}`,lt=`${be}/${Ie}`,Re=T[me];Object.keys(Re).sort().forEach(Be=>{const rn=E[Be]||Be,Wt=`${lt}/${Be}_${rn}`,It=Re[Be];h.push(`mkdir -p "${Wt}"`),It.forEach(qn=>{qn.filePath&&h.push(`if [ -e "${Wt}/${qn.currentName}" ]; then echo "Skipping existing: ${Wt}/${qn.currentName}"; else cp "${qn.filePath}" "${Wt}/${qn.currentName}"; fi`)})})}),le.length>0&&(h.push('mkdir -p "${ARCHIVE_FOLDER}"'),le.forEach(me=>{me.filePath&&h.push(`if [ -e "${Se}/${me.currentName}" ]; then echo "Skipping existing: ${Se}/${me.currentName}"; else cp "${me.filePath}" "${Se}/${me.currentName}"; fi`)})),h.push(""),h.push('echo "\\${GREEN}\\${NC}"'),h.push('echo "\\${GREEN} Copy operation complete!\\${NC}"'),h.push('echo "\\${GREEN}\\${NC}"'),h.join(`
`)},[x,at,$]),Gn=P.useCallback(async h=>{if(!re)return;const E=x.find(T=>T.id===h);if(!E){f("Selected photo is no longer available.","error");return}try{let T;if(E.fileHandle)T=await E.fileHandle.getFile();else if(E.thumbnail)T=await(await fetch(E.thumbnail)).blob();else{f("Cannot create cover from this photo.","error");return}const le=T,Fe=`original (${(le.size/1024).toFixed(1)}KB)`;await Mf(10);const be=await Tf(re,le,0,0),Se=Ke.get(Ft),me=(Se?JSON.parse(Se):[]).map(Re=>({...Re,projectId:Re.projectId||Re.rootPath}));let Ie=me.findIndex(Re=>Re.projectId===re);Ie===-1&&(Ie=me.findIndex(Re=>Re.rootPath===re));const lt=me.map((Re,Be)=>Be===Ie?{...Re,coverKey:be,lastOpened:Date.now()}:Re);Ie===-1&&lt.unshift({projectName:Y||"Untitled Project",projectId:re,rootPath:ze||re,lastOpened:Date.now(),totalPhotos:x.length,coverKey:be}),Ke.set(Ft,JSON.stringify(lt.slice(0,20))),ye(lt.slice(0,20)),console.log(`Cover saved to IndexedDB (${Fe}):`,re),f("Cover photo updated.")}catch(T){console.error("Failed to set cover photo:",T),f("Failed to set cover photo.","error")}},[x,re,Y,ze,f]);P.useEffect(()=>{(async()=>{try{const E=await Bs.getCurrentVersion();v(`v${E}`)}catch{}})()},[p]);const ht=Nn.useMemo(()=>{const h=new Map;return x.forEach(E=>{E.day&&(h.has(E.day)||h.set(E.day,[]),h.get(E.day).push(E))}),Array.from(h.entries()).sort((E,T)=>E[0]-T[0])},[x]),Wr=Nn.useMemo(()=>ht.filter(([h])=>at[h]!=null),[ht,at]),fr=/^(?:day|d)[\s_-]?(\d{1,2})/i,Zt=P.useCallback((h,E)=>{const T=(cn||[]).includes(h),le=E.some(Re=>Re.day!==null),Fe=E.some(Re=>{const Be=(Re.filePath||Re.originalName||"").split("/");return Be.length>1&&/^D\d{1,2}/i.test(Be[1])}),be=ht.some(([Re])=>(at[Re]||`Day ${String(Re).padStart(2,"0")}`)===h),Se=h===$?.folderStructure?.daysFolder,ge=fr.test(h)||h.toLowerCase().startsWith("day"),me=le||Fe||be||Se||ge;let Ie=null;if(le){const Re={};E.forEach(Be=>{Be.day!=null&&(Re[Be.day]=(Re[Be.day]||0)+1)}),Object.keys(Re).length&&(Ie=Number(Object.entries(Re).sort((Be,rn)=>rn[1]-Be[1])[0][0]))}if(Ie==null){const Re=h.match(fr);if(Re){const Be=parseInt(Re[1],10);Number.isNaN(Be)||(Ie=Be)}}const lt=Ie!=null?at[Ie]||`Day ${String(Ie).padStart(2,"0")}`:h;return{isSelected:T,isDayLike:me,dayNumber:Ie,displayName:lt}},[cn,at,ht,$]),Cn=P.useCallback(h=>{const E=h.map(([be,Se])=>{const ge=Zt(be,Se);return{folder:be,items:Se,...ge}}),T=E.filter(be=>be.isSelected),le=E.filter(be=>!be.isSelected&&!be.isDayLike),Fe=E.filter(be=>!be.isSelected&&be.isDayLike);return T.sort((be,Se)=>(be.dayNumber??999)-(Se.dayNumber??999)),le.sort((be,Se)=>be.folder.localeCompare(Se.folder)),Fe.sort((be,Se)=>be.folder.localeCompare(Se.folder)),{selected:T,nonDay:le,dayLike:Fe}},[Zt]),xt=P.useCallback(h=>h.split(/[\\/]/).filter(Boolean).join("/"),[]),Ll=P.useCallback(h=>{if(h.mimeType?.startsWith("video/"))return!0;const E=h.originalName.split(".").pop()?.toLowerCase()||"";return["mp4","mov","webm","avi","mkv"].includes(E)},[]),pr=P.useCallback((h,E)=>{if(E==null)return"Day Root";const le=xt(h.filePath||h.originalName||"").split("/").slice(0,-1),Fe=$?.folderStructure?.daysFolder;let be=-1;if(Fe){const Se=xt(Fe),ge=le.findIndex(me=>me.toLowerCase()===Se.toLowerCase());if(ge!==-1&&ge+1<le.length){const me=le[ge+1];Ar(me)===E&&(be=ge+1)}}return be===-1&&(be=le.findIndex(Se=>Fe&&Se.toLowerCase()===Fe.toLowerCase()?!1:Ar(Se)===E)),be!==-1&&be+1<le.length?le[be+1]:"Day Root"},[xt,$]),Dl=P.useCallback((h,E)=>h.subfolderOverride!==void 0?h.subfolderOverride??"Day Root":pr(h,E),[pr]),en=Nn.useMemo(()=>{const h=new Map;for(const E of x){if(E.archived)continue;const T=(E.filePath||E.originalName||"").split(/[\\/]/),le=T.length>1?T[0]:"(root)";h.has(le)||h.set(le,[]),h.get(le).push(E)}return Array.from(h.entries()).sort((E,T)=>E[0].localeCompare(T[0]))},[x]),Kr=Nn.useMemo(()=>{new Set(ht.map(([T])=>at[T]||`Day ${String(T).padStart(2,"0")}`)),$?.folderStructure?.daysFolder;const h=new Set;for(const T of x){const le=(T.filePath||T.originalName||"").split(/[\\/]/);le.length>1&&/^D\d{2}/i.test(le[1])&&h.add(le[0])}const E=new Map(en);return(cn||[]).forEach(T=>{const le=xt(T).split("/")[0];E.has(le)||E.set(le,[])}),Array.from(E.entries())},[en,ht,at,$,xt]);Nn.useEffect(()=>{},[p,ht,en,cn,$,at,x,Zt]);const wt=Nn.useMemo(()=>{const h=T=>!!T.bucket||T.isPreOrganized&&!!T.detectedBucket,E=T=>!xe||!h(T)&&!T.archived;switch(q){case"days":return M!==null?x.filter(T=>!T.archived&&T.day===M).filter(E):x.filter(T=>T.day!==null&&!T.archived).filter(E);case"folders":return ne!==null?x.filter(T=>{if(T.archived)return!1;const le=xt(T.filePath||T.originalName||""),Fe=xt(ne),be=le.split("/")[0]||"(root)";return(Fe.includes("/")?le===Fe||le.startsWith(`${Fe}/`):be===Fe)&&E(T)}):M!==null?x.filter(T=>!T.archived&&T.day===M).filter(E):[];case"root":return ne!==null?x.filter(T=>!T.archived&&(xt(T.filePath||T.originalName||"").split("/")[0]||"(root)")===xt(ne)&&E(T)):[];case"favorites":return x.filter(T=>T.favorite&&!T.archived).filter(E);case"archive":return x.filter(T=>T.archived).filter(E);case"review":return x.filter(T=>T.bucket&&!T.archived).filter(E);default:return x.filter(E)}},[x,q,M,ne,cn,$,xt,xe]),{selectedPhotos:Ze,setSelectedPhotos:tn,focusedPhoto:En,setFocusedPhoto:mr,setLastSelectedIndex:nn,lastSelectedIndexRef:Pn,resetSelection:Xn}=kp({filteredPhotos:wt,coverSelectionMode:z,setCoverForPhotoId:Gn,setCoverSelectionMode:B}),Qr=P.useCallback(async()=>{if(!re)return;if(Ze.size===0){f("Select a photo to set as cover.");return}if(Ze.size>1){f("Select a single photo to set as cover.");return}const h=Array.from(Ze)[0];await Gn(h)},[re,Ze,f,Gn]),Tl=P.useCallback(async(h,E)=>{await Br(h,E)&&(jn([]),Sn(-1),Xn(),ae(null),R(null),Q("folders"))},[Br,Xn,Q,jn,Sn,ae,R]),Gs=P.useCallback(()=>{ae(null),R(null)},[ae,R]);P.useEffect(()=>{if(re&&x.length>0&&ne===null&&M===null&&q==="folders"){const h=ht[0]?.[0]??null;if(h!==null){ae(h);return}const E=en[0]?.[0];E&&R(E)}},[re,x.length,ne,M,q,en,ht]);const hr=P.useCallback((h,E,T=null)=>{const le=Array.isArray(h)?h:[h],Fe={},be=x.map(Se=>{if(le.includes(Se.id)){const ge=T||Se.day||M||Math.ceil(new Date(Se.timestamp).getDate()/1),me=`${ge}_${E}`,Ie=x.filter(Be=>Be.day===ge&&Be.bucket===E).length,lt=(Fe[me]||Ie)+1;Fe[me]=lt;const Re=E==="X"?Se.originalName:`D${String(ge).padStart(2,"0")}_${E}_${String(lt).padStart(3,"0")}__${Se.originalName}`;return{...Se,bucket:E,day:ge,sequence:lt,currentName:Re,archived:E==="X"}}return Se});Vt(be)},[x,Vt,M]),fn=P.useCallback(h=>{const E=Array.isArray(h)?h:[h],T=x.map(le=>E.includes(le.id)?{...le,day:null}:le);Vt(T)},[x,Vt]),yr=P.useCallback(h=>{const E=Array.isArray(h)?h:[h],T=x.map(le=>E.includes(le.id)?{...le,favorite:!le.favorite}:le);Vt(T)},[x,Vt]);P.useEffect(()=>{const h=E=>{const T=E.target;if(Te||te||Pe||T&&(T.tagName==="INPUT"||T.tagName==="TEXTAREA"||T.tagName==="SELECT"||T.isContentEditable))return;if(ee){(E.key==="Escape"||E.key==="?")&&G(!1);return}if(z&&E.key==="Escape"){B(!1),f("Cover selection cancelled.");return}if(E.key==="?"){G(!0);return}const le=En||(Ze.size===1?Array.from(Ze)[0]:null);if(!le)return;if(E.key.toLowerCase()==="f"&&!E.shiftKey&&!E.metaKey&&!E.ctrlKey&&!E.altKey){const Se=Ze.size>0?Array.from(Ze):[le];yr(Se);return}let Fe=E.key.toUpperCase();const be=_l.find(Se=>Se.key===Fe);if(be&&be.key!=="F"){const Se=Ze.size>0?Array.from(Ze):[le];hr(Se,be.key);const ge=wt.findIndex(me=>me.id===le);if(ge<wt.length-1){const me=wt[ge+1].id;mr(me),tn(new Set([me])),nn(ge+1),Pn.current=ge+1}return}if(E.key==="ArrowRight"){const Se=wt.findIndex(ge=>ge.id===le);if(Se<wt.length-1){const ge=wt[Se+1].id;mr(ge),tn(new Set([ge])),nn(Se+1)}}else if(E.key==="ArrowLeft"){const Se=wt.findIndex(ge=>ge.id===le);if(Se>0){const ge=wt[Se-1].id;mr(ge),tn(new Set([ge])),nn(Se-1),Pn.current=Se-1}}else E.key==="Enter"||E.key===" "?(E.preventDefault(),A(le)):E.key==="Escape"?Z?A(null):(tn(new Set),mr(null),nn(null),Pn.current=null):E.key==="z"&&(E.metaKey||E.ctrlKey)&&(E.preventDefault(),E.shiftKey?Rl():Hr())};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[Ze,En,wt,hr,yr,Hr,Rl,ee,Z,Te,te,Pe,z]);const zl=Nn.useMemo(()=>({total:x.length,sorted:x.filter(h=>h.bucket&&!h.archived).length,unsorted:x.filter(h=>!h.bucket&&!h.archived).length,archived:x.filter(h=>h.archived).length,favorites:x.filter(h=>h.favorite).length,root:x.filter(h=>h.day===null&&!h.archived).length}),[x]);return o.jsxs("div",{className:"h-screen flex flex-col bg-gray-950 text-gray-100",children:[o.jsx(Ep,{showWelcome:Te,projectName:Y,stats:zl,currentVersion:a,coverSelectionMode:z,selectedPhotosCount:Ze.size,projectRootPath:re,currentView:q,hideAssigned:xe,recentProjects:ve,projectError:_e,permissionRetryProjectId:Ue,loadingProject:Rt,onMainMenu:()=>{Ce(!1),Oe(null),Ae(!0),Ke.remove(Qn)},onStartCoverSelection:()=>{B(!0),f("Select a photo to set as cover. Click a photo to set, or press Esc to cancel.","info")},onUseCoverSelection:async()=>{await Qr(),B(!1)},onCancelCoverSelection:()=>{B(!1),f("Cover selection cancelled.")},onSelectRecentProject:h=>{dn(h)},onOpenProject:()=>{Ce(!0)},onDeleteProject:async()=>{if(!(!re||!window.confirm(`Delete project '${Y}'? This will remove local state and stored folder access. This cannot be undone.`))){try{await wp(re)}catch{f("Failed to delete project.","error");return}try{const E=Ke.get(Ft),le=(E?JSON.parse(E):[]).filter(Fe=>Fe.projectId!==re);Ke.set(Ft,JSON.stringify(le)),ye(le)}catch{}Ke.remove(Qn),oe([]),Le(null),de("No Project"),Ae(!0),f("Project deleted.")}},onImportTrip:()=>{Oe(null),Ce(!0)},onExportScript:()=>{L(Vr()),D("idle"),ce(!0)},onShowHelp:()=>G(!0),onRetryPermission:cr,onChangeView:h=>Q(h),onToggleHideAssigned:()=>je(h=>!h),onRememberFoldersViewState:()=>{K.current={selectedRootFolder:ne,selectedDay:M}},onRestoreFoldersViewState:()=>{R(K.current.selectedRootFolder),ae(K.current.selectedDay)},onClearDaySelection:()=>{ae(null)}}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o.jsx(Pp,{currentView:q,sidebarCollapsed:ie,onCollapseSidebar:()=>J(!0),onExpandSidebar:()=>J(!1),visibleDays:Wr,selectedDay:M,selectedRootFolder:ne,onSelectDay:ae,onSelectRootFolder:R,editingDay:g,editingDayName:S,onChangeEditingDayName:b,onStartEditingDay:(h,E)=>{j(h),b(E)},onSaveDayName:h=>{Ur(E=>({...E,[h]:S})),dr(x),j(null)},onCancelEditingDay:()=>j(null),onClearSelectedDay:Gs,days:ht,dayLabels:at,dayContainers:cn,photos:x,normalizePath:xt,rootGroups:en,displayRootGroups:Kr,sortFolders:Cn,projectSettings:$,debugEnabled:p}),o.jsx("main",{className:"flex-1 overflow-y-auto",children:o.jsx("div",{className:"p-6",children:o.jsx(Lp,{loadingProject:Rt,currentView:q,selectedDay:M,selectedRootFolder:ne,photos:x,rootGroups:en,filteredPhotos:wt,selectedPhotos:Ze,galleryViewPhoto:ke,dayLabels:at,buckets:_l,onSelectPhoto:h=>tn(new Set([h])),onOpenViewer:h=>X(h),onCloseViewer:()=>X(null),onNavigateViewer:h=>X(h),onToggleFavorite:h=>{oe(E=>E.map(T=>T.id===h?{...T,favorite:!T.favorite}:T)),dr(x.map(E=>E.id===h?{...E,favorite:!E.favorite}:E))},onAssignBucket:(h,E)=>hr(h,E),onAssignDay:(h,E)=>{oe(T=>T.map(le=>le.id===h?{...le,day:E}:le)),dr(x.map(T=>T.id===h?{...T,day:E}:T))},onSaveToHistory:Vt,onShowToast:f,getSubfolderGroup:Dl,getDerivedSubfolderGroup:pr,isVideoPhoto:Ll,isMeceBucketLabel:zp})})}),Ze.size>0&&!Z&&o.jsx(Dp,{selectedPhotos:Ze,photos:x,days:ht,buckets:_l,onSaveToHistory:Vt,onPersistState:dr,onSetDayLabels:Ur,onSetSelectedDay:ae,onSetCurrentView:Q,onSetSelectedPhotos:tn,onRemoveDayAssignment:fn,onAssignBucket:hr,onToggleFavorite:yr})]}),Z&&o.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex items-center justify-center",children:[o.jsx("button",{onClick:()=>A(null),className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black/70 rounded-full transition-colors",children:o.jsx(kn,{className:"w-6 h-6"})}),(()=>{const h=x.find(E=>E.id===Z);return h?h.mimeType?.startsWith("video/")?o.jsx("video",{src:h.thumbnail,controls:!0,className:"max-w-full max-h-full object-contain",autoPlay:!1}):o.jsx("img",{src:h.thumbnail,alt:"Fullscreen",className:"max-w-full max-h-full object-contain"}):null})(),o.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-6",children:[o.jsx("p",{className:"text-center text-sm font-mono",children:x.find(h=>h.id===Z)?.currentName}),o.jsx("p",{className:"text-center text-xs text-gray-400 mt-2",children:"Press ESC to close  Arrow keys to navigate"})]})]}),Pe&&o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-6",children:o.jsxs("div",{className:"bg-gray-900 rounded-lg max-w-2xl w-full overflow-hidden border border-gray-800",children:[o.jsxs("div",{className:"px-5 py-4 border-b border-gray-800 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-100",children:"Export Script"}),o.jsx("button",{onClick:()=>ce(!1),className:"p-2 hover:bg-gray-800 rounded","aria-label":"Close export script dialog",children:o.jsx(kn,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"px-5 py-4 space-y-3",children:[o.jsx("p",{className:"text-sm text-gray-400",children:"Copy these commands and run them in your terminal from the project root directory. They create organized day folders and copy your photos with the current bucket naming. Originals are preserved."}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(I),D("copied")}catch{D("failed")}},className:"px-3 py-2 rounded-lg bg-gray-800 text-gray-100 hover:bg-gray-700 text-sm",children:"Copy Script"}),_==="copied"&&o.jsx("span",{className:"text-xs text-green-400",children:"Copied."}),_==="failed"&&o.jsx("span",{className:"text-xs text-red-400",children:"Copy failed. Select and copy below."})]}),o.jsx("textarea",{readOnly:!0,value:I,className:"w-full h-64 rounded-lg border border-gray-800 bg-gray-950 px-3 py-2 text-xs text-gray-100 font-mono"})]})]})}),ee&&o.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-6",children:o.jsx("div",{className:"bg-gray-900 rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-xl font-bold",children:"Keyboard Shortcuts"}),o.jsx("button",{onClick:()=>G(!1),className:"p-2 hover:bg-gray-800 rounded",children:o.jsx(kn,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-blue-400 mb-3",children:"MECE Categories"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:_l.map(h=>o.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[o.jsx("kbd",{className:`px-2 py-1 rounded ${h.color} text-white font-bold`,children:h.key==="F"?"M":h.key}),o.jsx("span",{children:h.label})]},h.key))}),o.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"Keyboard shortcuts: AE, X, M (Mood/Food). F is reserved for Favorite."})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-blue-400 mb-3",children:"Navigation"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:""}),o.jsx("span",{children:"Previous / Next photo"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"Enter"}),o.jsx("span",{children:"Fullscreen view"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"Esc"}),o.jsx("span",{children:"Close / Deselect"})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-blue-400 mb-3",children:"Actions"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"F"}),o.jsx("span",{children:"Toggle favorite"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"Z"}),o.jsx("span",{children:"Undo (keyboard)"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"Z"}),o.jsx("span",{children:"Redo (keyboard)"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"?"}),o.jsx("span",{children:"Show this help"})]})]})]})]})]})})}),H&&o.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:o.jsxs("div",{className:`flex items-center gap-3 px-4 py-2 rounded-lg text-sm shadow-lg ${H.tone==="error"?"bg-red-600 text-white":"bg-gray-800 text-gray-100"}`,role:"status","aria-live":"polite",children:[o.jsx("span",{children:H.message}),o.jsxs("div",{className:"flex items-center gap-2",children:[H.actionLabel&&o.jsx("button",{onClick:()=>{H.onAction?.(),C()},className:"px-2 py-0.5 rounded bg-white/10 text-xs text-white hover:bg-white/20",children:H.actionLabel}),o.jsx("button",{onClick:C,className:"p-1 rounded hover:bg-white/10","aria-label":"Dismiss toast",children:o.jsx(kn,{className:"w-4 h-4"})})]})]})}),Te&&o.jsx(lp,{isOpen:Te,onClose:()=>{re&&(Ae(!1),Ke.set(Qn,re))},onCreateComplete:Tl,onOpenProject:async h=>{Oe(null);const E=typeof globalThis<"u"&&(globalThis.vitest||globalThis.__APP_VERSION__==="0.0.0");if(!E&&!("showDirectoryPicker"in window)){Oe("This app requires the File System Access API, which is not available in this browser environment. Please use a compatible browser like Chrome or Edge.");return}if(E){dn(h);return}try{if(!await Vs(h))try{const le=await window.showDirectoryPicker();await Bi(h,le),dn(h);return}catch(le){console.warn("Folder re-selection cancelled or failed:",le),_t(h),Ce(!0);return}dn(h)}catch(T){console.warn("Error checking stored handle on project open:",T),_t(h),Ce(!0)}},recentProjects:ve,canClose:!!re,errorMessage:_e}),o.jsx(Rc,{isOpen:te,onClose:()=>{Ce(!1),_t(null)},onComplete:h=>Tl(h,Ve),recentProjects:ve,onSelectRecent:h=>{Oe(null),_t(null),Ce(!1),dn(h)}}),o.jsx(sp,{isOpen:Rt,title:"Loading Project",message:Lt,progress:vt,showProgressBar:!0})]})}const _c=document.getElementById("root");_c&&Rf.createRoot(_c).render(o.jsx(Nn.StrictMode,{children:o.jsx(Op,{})}));export{Nf as g};
