(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))P(y);new MutationObserver(y=>{for(const k of y)if(k.type==="childList")for(const z of k.addedNodes)z.tagName==="LINK"&&z.rel==="modulepreload"&&P(z)}).observe(document,{childList:!0,subtree:!0});function u(y){const k={};return y.integrity&&(k.integrity=y.integrity),y.referrerPolicy&&(k.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?k.credentials="include":y.crossOrigin==="anonymous"?k.credentials="omit":k.credentials="same-origin",k}function P(y){if(y.ep)return;y.ep=!0;const k=u(y);fetch(y.href,k)}})();function mf(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var bi={exports:{}},Rl={},Ti={exports:{}},me={};var pc;function hf(){if(pc)return me;pc=1;var d=Symbol.for("react.element"),h=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),z=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),H=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),O=Symbol.iterator;function B(w){return w===null||typeof w!="object"?null:(w=O&&w[O]||w["@@iterator"],typeof w=="function"?w:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},se=Object.assign,le={};function ae(w,_,Z){this.props=w,this.context=_,this.refs=le,this.updater=Z||G}ae.prototype.isReactComponent={},ae.prototype.setState=function(w,_){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,_,"setState")},ae.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function Ee(){}Ee.prototype=ae.prototype;function Ue(w,_,Z){this.props=w,this.context=_,this.refs=le,this.updater=Z||G}var be=Ue.prototype=new Ee;be.constructor=Ue,se(be,ae.prototype),be.isPureReactComponent=!0;var oe=Array.isArray,_e=Object.prototype.hasOwnProperty,Te={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function ee(w,_,Z){var ue,ye={},pe=null,Ne=null;if(_!=null)for(ue in _.ref!==void 0&&(Ne=_.ref),_.key!==void 0&&(pe=""+_.key),_)_e.call(_,ue)&&!T.hasOwnProperty(ue)&&(ye[ue]=_[ue]);var ve=arguments.length-2;if(ve===1)ye.children=Z;else if(1<ve){for(var je=Array(ve),mt=0;mt<ve;mt++)je[mt]=arguments[mt+2];ye.children=je}if(w&&w.defaultProps)for(ue in ve=w.defaultProps,ve)ye[ue]===void 0&&(ye[ue]=ve[ue]);return{$$typeof:d,type:w,key:pe,ref:Ne,props:ye,_owner:Te.current}}function de(w,_){return{$$typeof:d,type:w.type,key:_,ref:w.ref,props:w.props,_owner:w._owner}}function ot(w){return typeof w=="object"&&w!==null&&w.$$typeof===d}function Re(w){var _={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(Z){return _[Z]})}var st=/\/+/g;function Ye(w,_){return typeof w=="object"&&w!==null&&w.key!=null?Re(""+w.key):_.toString(36)}function Ve(w,_,Z,ue,ye){var pe=typeof w;(pe==="undefined"||pe==="boolean")&&(w=null);var Ne=!1;if(w===null)Ne=!0;else switch(pe){case"string":case"number":Ne=!0;break;case"object":switch(w.$$typeof){case d:case h:Ne=!0}}if(Ne)return Ne=w,ye=ye(Ne),w=ue===""?"."+Ye(Ne,0):ue,oe(ye)?(Z="",w!=null&&(Z=w.replace(st,"$&/")+"/"),Ve(ye,_,Z,"",function(mt){return mt})):ye!=null&&(ot(ye)&&(ye=de(ye,Z+(!ye.key||Ne&&Ne.key===ye.key?"":(""+ye.key).replace(st,"$&/")+"/")+w)),_.push(ye)),1;if(Ne=0,ue=ue===""?".":ue+":",oe(w))for(var ve=0;ve<w.length;ve++){pe=w[ve];var je=ue+Ye(pe,ve);Ne+=Ve(pe,_,Z,je,ye)}else if(je=B(w),typeof je=="function")for(w=je.call(w),ve=0;!(pe=w.next()).done;)pe=pe.value,je=ue+Ye(pe,ve++),Ne+=Ve(pe,_,Z,je,ye);else if(pe==="object")throw _=String(w),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return Ne}function it(w,_,Z){if(w==null)return w;var ue=[],ye=0;return Ve(w,ue,"","",function(pe){return _.call(Z,pe,ye++)}),ue}function fe(w){if(w._status===-1){var _=w._result;_=_(),_.then(function(Z){(w._status===0||w._status===-1)&&(w._status=1,w._result=Z)},function(Z){(w._status===0||w._status===-1)&&(w._status=2,w._result=Z)}),w._status===-1&&(w._status=0,w._result=_)}if(w._status===1)return w._result.default;throw w._result}var De={current:null},A={transition:null},te={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:A,ReactCurrentOwner:Te};function W(){throw Error("act(...) is not supported in production builds of React.")}return me.Children={map:it,forEach:function(w,_,Z){it(w,function(){_.apply(this,arguments)},Z)},count:function(w){var _=0;return it(w,function(){_++}),_},toArray:function(w){return it(w,function(_){return _})||[]},only:function(w){if(!ot(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},me.Component=ae,me.Fragment=u,me.Profiler=y,me.PureComponent=Ue,me.StrictMode=P,me.Suspense=U,me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,me.act=W,me.cloneElement=function(w,_,Z){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var ue=se({},w.props),ye=w.key,pe=w.ref,Ne=w._owner;if(_!=null){if(_.ref!==void 0&&(pe=_.ref,Ne=Te.current),_.key!==void 0&&(ye=""+_.key),w.type&&w.type.defaultProps)var ve=w.type.defaultProps;for(je in _)_e.call(_,je)&&!T.hasOwnProperty(je)&&(ue[je]=_[je]===void 0&&ve!==void 0?ve[je]:_[je])}var je=arguments.length-2;if(je===1)ue.children=Z;else if(1<je){ve=Array(je);for(var mt=0;mt<je;mt++)ve[mt]=arguments[mt+2];ue.children=ve}return{$$typeof:d,type:w.type,key:ye,ref:pe,props:ue,_owner:Ne}},me.createContext=function(w){return w={$$typeof:z,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:k,_context:w},w.Consumer=w},me.createElement=ee,me.createFactory=function(w){var _=ee.bind(null,w);return _.type=w,_},me.createRef=function(){return{current:null}},me.forwardRef=function(w){return{$$typeof:L,render:w}},me.isValidElement=ot,me.lazy=function(w){return{$$typeof:$,_payload:{_status:-1,_result:w},_init:fe}},me.memo=function(w,_){return{$$typeof:H,type:w,compare:_===void 0?null:_}},me.startTransition=function(w){var _=A.transition;A.transition={};try{w()}finally{A.transition=_}},me.unstable_act=W,me.useCallback=function(w,_){return De.current.useCallback(w,_)},me.useContext=function(w){return De.current.useContext(w)},me.useDebugValue=function(){},me.useDeferredValue=function(w){return De.current.useDeferredValue(w)},me.useEffect=function(w,_){return De.current.useEffect(w,_)},me.useId=function(){return De.current.useId()},me.useImperativeHandle=function(w,_,Z){return De.current.useImperativeHandle(w,_,Z)},me.useInsertionEffect=function(w,_){return De.current.useInsertionEffect(w,_)},me.useLayoutEffect=function(w,_){return De.current.useLayoutEffect(w,_)},me.useMemo=function(w,_){return De.current.useMemo(w,_)},me.useReducer=function(w,_,Z){return De.current.useReducer(w,_,Z)},me.useRef=function(w){return De.current.useRef(w)},me.useState=function(w){return De.current.useState(w)},me.useSyncExternalStore=function(w,_,Z){return De.current.useSyncExternalStore(w,_,Z)},me.useTransition=function(){return De.current.useTransition()},me.version="18.3.1",me}var mc;function Bi(){return mc||(mc=1,Ti.exports=hf()),Ti.exports}var hc;function yf(){if(hc)return Rl;hc=1;var d=Bi(),h=Symbol.for("react.element"),u=Symbol.for("react.fragment"),P=Object.prototype.hasOwnProperty,y=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k={key:!0,ref:!0,__self:!0,__source:!0};function z(L,U,H){var $,O={},B=null,G=null;H!==void 0&&(B=""+H),U.key!==void 0&&(B=""+U.key),U.ref!==void 0&&(G=U.ref);for($ in U)P.call(U,$)&&!k.hasOwnProperty($)&&(O[$]=U[$]);if(L&&L.defaultProps)for($ in U=L.defaultProps,U)O[$]===void 0&&(O[$]=U[$]);return{$$typeof:h,type:L,key:B,ref:G,props:O,_owner:y.current}}return Rl.Fragment=u,Rl.jsx=z,Rl.jsxs=z,Rl}var yc;function gf(){return yc||(yc=1,bi.exports=yf()),bi.exports}var s=gf(),D=Bi();const wn=mf(D);var Ho={},zi={exports:{}},Et={},Fi={exports:{}},Ii={};var gc;function vf(){return gc||(gc=1,(function(d){function h(A,te){var W=A.length;A.push(te);e:for(;0<W;){var w=W-1>>>1,_=A[w];if(0<y(_,te))A[w]=te,A[W]=_,W=w;else break e}}function u(A){return A.length===0?null:A[0]}function P(A){if(A.length===0)return null;var te=A[0],W=A.pop();if(W!==te){A[0]=W;e:for(var w=0,_=A.length,Z=_>>>1;w<Z;){var ue=2*(w+1)-1,ye=A[ue],pe=ue+1,Ne=A[pe];if(0>y(ye,W))pe<_&&0>y(Ne,ye)?(A[w]=Ne,A[pe]=W,w=pe):(A[w]=ye,A[ue]=W,w=ue);else if(pe<_&&0>y(Ne,W))A[w]=Ne,A[pe]=W,w=pe;else break e}}return te}function y(A,te){var W=A.sortIndex-te.sortIndex;return W!==0?W:A.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var k=performance;d.unstable_now=function(){return k.now()}}else{var z=Date,L=z.now();d.unstable_now=function(){return z.now()-L}}var U=[],H=[],$=1,O=null,B=3,G=!1,se=!1,le=!1,ae=typeof setTimeout=="function"?setTimeout:null,Ee=typeof clearTimeout=="function"?clearTimeout:null,Ue=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function be(A){for(var te=u(H);te!==null;){if(te.callback===null)P(H);else if(te.startTime<=A)P(H),te.sortIndex=te.expirationTime,h(U,te);else break;te=u(H)}}function oe(A){if(le=!1,be(A),!se)if(u(U)!==null)se=!0,fe(_e);else{var te=u(H);te!==null&&De(oe,te.startTime-A)}}function _e(A,te){se=!1,le&&(le=!1,Ee(ee),ee=-1),G=!0;var W=B;try{for(be(te),O=u(U);O!==null&&(!(O.expirationTime>te)||A&&!Re());){var w=O.callback;if(typeof w=="function"){O.callback=null,B=O.priorityLevel;var _=w(O.expirationTime<=te);te=d.unstable_now(),typeof _=="function"?O.callback=_:O===u(U)&&P(U),be(te)}else P(U);O=u(U)}if(O!==null)var Z=!0;else{var ue=u(H);ue!==null&&De(oe,ue.startTime-te),Z=!1}return Z}finally{O=null,B=W,G=!1}}var Te=!1,T=null,ee=-1,de=5,ot=-1;function Re(){return!(d.unstable_now()-ot<de)}function st(){if(T!==null){var A=d.unstable_now();ot=A;var te=!0;try{te=T(!0,A)}finally{te?Ye():(Te=!1,T=null)}}else Te=!1}var Ye;if(typeof Ue=="function")Ye=function(){Ue(st)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,it=Ve.port2;Ve.port1.onmessage=st,Ye=function(){it.postMessage(null)}}else Ye=function(){ae(st,0)};function fe(A){T=A,Te||(Te=!0,Ye())}function De(A,te){ee=ae(function(){A(d.unstable_now())},te)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(A){A.callback=null},d.unstable_continueExecution=function(){se||G||(se=!0,fe(_e))},d.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<A?Math.floor(1e3/A):5},d.unstable_getCurrentPriorityLevel=function(){return B},d.unstable_getFirstCallbackNode=function(){return u(U)},d.unstable_next=function(A){switch(B){case 1:case 2:case 3:var te=3;break;default:te=B}var W=B;B=te;try{return A()}finally{B=W}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(A,te){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var W=B;B=A;try{return te()}finally{B=W}},d.unstable_scheduleCallback=function(A,te,W){var w=d.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?w+W:w):W=w,A){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=W+_,A={id:$++,callback:te,priorityLevel:A,startTime:W,expirationTime:_,sortIndex:-1},W>w?(A.sortIndex=W,h(H,A),u(U)===null&&A===u(H)&&(le?(Ee(ee),ee=-1):le=!0,De(oe,W-w))):(A.sortIndex=_,h(U,A),se||G||(se=!0,fe(_e))),A},d.unstable_shouldYield=Re,d.unstable_wrapCallback=function(A){var te=B;return function(){var W=B;B=te;try{return A.apply(this,arguments)}finally{B=W}}}})(Ii)),Ii}var vc;function xf(){return vc||(vc=1,Fi.exports=vf()),Fi.exports}var xc;function wf(){if(xc)return Et;xc=1;var d=Bi(),h=xf();function u(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var P=new Set,y={};function k(e,t){z(e,t),z(e+"Capture",t)}function z(e,t){for(y[e]=t,e=0;e<t.length;e++)P.add(t[e])}var L=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),U=Object.prototype.hasOwnProperty,H=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$={},O={};function B(e){return U.call(O,e)?!0:U.call($,e)?!1:H.test(e)?O[e]=!0:($[e]=!0,!1)}function G(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function se(e,t,n,r){if(t===null||typeof t>"u"||G(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function le(e,t,n,r,l,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ae[e]=new le(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ae[t]=new le(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ae[e]=new le(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ae[e]=new le(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ae[e]=new le(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){ae[e]=new le(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){ae[e]=new le(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){ae[e]=new le(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){ae[e]=new le(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ee=/[\-:]([a-z])/g;function Ue(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ee,Ue);ae[t]=new le(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ee,Ue);ae[t]=new le(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ee,Ue);ae[t]=new le(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){ae[e]=new le(e,1,!1,e.toLowerCase(),null,!1,!1)}),ae.xlinkHref=new le("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){ae[e]=new le(e,1,!1,e.toLowerCase(),null,!0,!0)});function be(e,t,n,r){var l=ae.hasOwnProperty(t)?ae[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(se(t,n,l,r)&&(n=null),r||l===null?B(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var oe=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_e=Symbol.for("react.element"),Te=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),de=Symbol.for("react.profiler"),ot=Symbol.for("react.provider"),Re=Symbol.for("react.context"),st=Symbol.for("react.forward_ref"),Ye=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),it=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),A=Symbol.iterator;function te(e){return e===null||typeof e!="object"?null:(e=A&&e[A]||e["@@iterator"],typeof e=="function"?e:null)}var W=Object.assign,w;function _(e){if(w===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);w=t&&t[1]||""}return`
`+w+e}var Z=!1;function ue(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(S){var r=S}Reflect.construct(e,[],t)}else{try{t.call()}catch(S){r=S}e.call(t.prototype)}else{try{throw Error()}catch(S){r=S}e()}}catch(S){if(S&&r&&typeof S.stack=="string"){for(var l=S.stack.split(`
`),o=r.stack.split(`
`),i=l.length-1,c=o.length-1;1<=i&&0<=c&&l[i]!==o[c];)c--;for(;1<=i&&0<=c;i--,c--)if(l[i]!==o[c]){if(i!==1||c!==1)do if(i--,c--,0>c||l[i]!==o[c]){var f=`
`+l[i].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=i&&0<=c);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_(e):""}function ye(e){switch(e.tag){case 5:return _(e.type);case 16:return _("Lazy");case 13:return _("Suspense");case 19:return _("SuspenseList");case 0:case 2:case 15:return e=ue(e.type,!1),e;case 11:return e=ue(e.type.render,!1),e;case 1:return e=ue(e.type,!0),e;default:return""}}function pe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case Te:return"Portal";case de:return"Profiler";case ee:return"StrictMode";case Ye:return"Suspense";case Ve:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Re:return(e.displayName||"Context")+".Consumer";case ot:return(e._context.displayName||"Context")+".Provider";case st:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case it:return t=e.displayName||null,t!==null?t:pe(e.type)||"Memo";case fe:t=e._payload,e=e._init;try{return pe(e(t))}catch{}}return null}function Ne(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(t);case 8:return t===ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ve(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function je(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function mt(e){var t=je(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ge(e){e._valueTracker||(e._valueTracker=mt(e))}function zt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=je(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function at(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function pr(e,t){var n=t.checked;return W({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Qn(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ve(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ht(e,t){t=t.checked,t!=null&&be(e,"checked",t,!1)}function mr(e,t){ht(e,t);var n=ve(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Yn(e,t.type,n):t.hasOwnProperty("defaultValue")&&Yn(e,t.type,ve(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Kn(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Yn(e,t,n){(t!=="number"||at(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Je=Array.isArray;function Ft(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ve(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Zt(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(u(91));return W({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function bl(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(u(92));if(Je(n)){if(1<n.length)throw Error(u(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ve(n)}}function Xn(e,t){var n=ve(t.value),r=ve(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function qn(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Br(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sn(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pe,Tl=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Pe=Pe||document.createElement("div"),Pe.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Me(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var en={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zl=["Webkit","ms","Moz","O"];Object.keys(en).forEach(function(e){zl.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]})});function Vr(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function Fl(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=Vr(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var Il=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gn(e,t){if(t){if(Il[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(u(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(u(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(u(61))}if(t.style!=null&&typeof t.style!="object")throw Error(u(62))}}function Jn(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hr=null;function Vt(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var an=null,It=null,Ht=null;function Zn(e){if(e=ml(e)){if(typeof an!="function")throw Error(u(280));var t=e.stateNode;t&&(t=lo(t),an(e.stateNode,e.type,t))}}function yr(e){It?Ht?Ht.push(e):Ht=[e]:It=e}function Hr(){if(It){var e=It,t=Ht;if(Ht=It=null,Zn(e),t)for(e=0;e<t.length;e++)Zn(t[e])}}function gr(e,t){return e(t)}function Wr(){}var Nn=!1;function Ol(e,t,n){if(Nn)return e(t,n);Nn=!0;try{return gr(e,t,n)}finally{Nn=!1,(It!==null||Ht!==null)&&(Wr(),Hr())}}function ke(e,t){var n=e.stateNode;if(n===null)return null;var r=lo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(u(231,t,typeof n));return n}var Qr=!1;if(L)try{var un={};Object.defineProperty(un,"passive",{get:function(){Qr=!0}}),window.addEventListener("test",un,un),window.removeEventListener("test",un,un)}catch{Qr=!1}function Kr(e,t,n,r,l,o,i,c,f){var S=Array.prototype.slice.call(arguments,3);try{t.apply(n,S)}catch(b){this.onError(b)}}var jn=!1,yt=null,vr=!1,_t=null,Ml={onError:function(e){jn=!0,yt=e}};function $l(e,t,n,r,l,o,i,c,f){jn=!1,yt=null,Kr.apply(Ml,arguments)}function kn(e,t,n,r,l,o,i,c,f){if($l.apply(this,arguments),jn){if(jn){var S=yt;jn=!1,yt=null}else throw Error(u(198));vr||(vr=!0,_t=S)}}function cn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Rt(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Al(e){if(cn(e)!==e)throw Error(u(188))}function He(e){var t=e.alternate;if(!t){if(t=cn(e),t===null)throw Error(u(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var o=l.alternate;if(o===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===n)return Al(l),e;if(o===r)return Al(l),t;o=o.sibling}throw Error(u(188))}if(n.return!==r.return)n=l,r=o;else{for(var i=!1,c=l.child;c;){if(c===n){i=!0,n=l,r=o;break}if(c===r){i=!0,r=l,n=o;break}c=c.sibling}if(!i){for(c=o.child;c;){if(c===n){i=!0,n=o,r=l;break}if(c===r){i=!0,r=o,n=l;break}c=c.sibling}if(!i)throw Error(u(189))}}if(n.alternate!==r)throw Error(u(190))}if(n.tag!==3)throw Error(u(188));return n.stateNode.current===n?e:t}function xt(e){return e=He(e),e!==null?Wt(e):null}function Wt(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Wt(e);if(t!==null)return t;e=e.sibling}return null}var er=h.unstable_scheduleCallback,Yr=h.unstable_cancelCallback,Xr=h.unstable_shouldYield,qr=h.unstable_requestPaint,ze=h.unstable_now,Ul=h.unstable_getCurrentPriorityLevel,Qt=h.unstable_ImmediatePriority,Bl=h.unstable_UserBlockingPriority,a=h.unstable_NormalPriority,g=h.unstable_LowPriority,m=h.unstable_IdlePriority,v=null,x=null;function C(e){if(x&&typeof x.onCommitFiberRoot=="function")try{x.onCommitFiberRoot(v,e,void 0,(e.current.flags&128)===128)}catch{}}var E=Math.clz32?Math.clz32:X,Q=Math.log,M=Math.LN2;function X(e){return e>>>=0,e===0?32:31-(Q(e)/M|0)|0}var ge=64,ce=4194304;function he(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function We(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var c=i&~l;c!==0?r=he(c):(o&=i,o!==0&&(r=he(o)))}else i=n&~l,i!==0?r=he(i):o!==0&&(r=he(o));if(r===0)return 0;if(t!==0&&t!==r&&(t&l)===0&&(l=r&-r,o=t&-t,l>=o||l===16&&(o&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-E(t),l=1<<n,r|=e[n],t&=~l;return r}function nt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zo(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-E(o),c=1<<i,f=l[i];f===-1?((c&n)===0||(c&r)!==0)&&(l[i]=nt(c,t)):f<=t&&(e.expiredLanes|=c),o&=~c}}function dn(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hi(){var e=ge;return ge<<=1,(ge&4194240)===0&&(ge=64),e}function es(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-E(t),e[t]=n}function zc(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-E(n),o=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~o}}function ts(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-E(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var Ce=0;function Wi(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Qi,ns,Ki,Yi,Xi,rs=!1,Vl=[],Sn=null,En=null,Cn=null,Jr=new Map,Zr=new Map,Pn=[],Fc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qi(e,t){switch(e){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":Jr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zr.delete(t.pointerId)}}function el(e,t,n,r,l,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[l]},t!==null&&(t=ml(t),t!==null&&ns(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Ic(e,t,n,r,l){switch(t){case"focusin":return Sn=el(Sn,e,t,n,r,l),!0;case"dragenter":return En=el(En,e,t,n,r,l),!0;case"mouseover":return Cn=el(Cn,e,t,n,r,l),!0;case"pointerover":var o=l.pointerId;return Jr.set(o,el(Jr.get(o)||null,e,t,n,r,l)),!0;case"gotpointercapture":return o=l.pointerId,Zr.set(o,el(Zr.get(o)||null,e,t,n,r,l)),!0}return!1}function Gi(e){var t=tr(e.target);if(t!==null){var n=cn(t);if(n!==null){if(t=n.tag,t===13){if(t=Rt(n),t!==null){e.blockedOn=t,Xi(e.priority,function(){Ki(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=os(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);hr=r,n.target.dispatchEvent(r),hr=null}else return t=ml(n),t!==null&&ns(t),e.blockedOn=n,!1;t.shift()}return!0}function Ji(e,t,n){Hl(e)&&n.delete(t)}function Oc(){rs=!1,Sn!==null&&Hl(Sn)&&(Sn=null),En!==null&&Hl(En)&&(En=null),Cn!==null&&Hl(Cn)&&(Cn=null),Jr.forEach(Ji),Zr.forEach(Ji)}function tl(e,t){e.blockedOn===t&&(e.blockedOn=null,rs||(rs=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,Oc)))}function nl(e){function t(l){return tl(l,e)}if(0<Vl.length){tl(Vl[0],e);for(var n=1;n<Vl.length;n++){var r=Vl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Sn!==null&&tl(Sn,e),En!==null&&tl(En,e),Cn!==null&&tl(Cn,e),Jr.forEach(t),Zr.forEach(t),n=0;n<Pn.length;n++)r=Pn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Pn.length&&(n=Pn[0],n.blockedOn===null);)Gi(n),n.blockedOn===null&&Pn.shift()}var xr=oe.ReactCurrentBatchConfig,Wl=!0;function Mc(e,t,n,r){var l=Ce,o=xr.transition;xr.transition=null;try{Ce=1,ls(e,t,n,r)}finally{Ce=l,xr.transition=o}}function $c(e,t,n,r){var l=Ce,o=xr.transition;xr.transition=null;try{Ce=4,ls(e,t,n,r)}finally{Ce=l,xr.transition=o}}function ls(e,t,n,r){if(Wl){var l=os(e,t,n,r);if(l===null)js(e,t,r,Ql,n),qi(e,r);else if(Ic(l,e,t,n,r))r.stopPropagation();else if(qi(e,r),t&4&&-1<Fc.indexOf(e)){for(;l!==null;){var o=ml(l);if(o!==null&&Qi(o),o=os(e,t,n,r),o===null&&js(e,t,r,Ql,n),o===l)break;l=o}l!==null&&r.stopPropagation()}else js(e,t,r,null,n)}}var Ql=null;function os(e,t,n,r){if(Ql=null,e=Vt(r),e=tr(e),e!==null)if(t=cn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Rt(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ql=e,null}function Zi(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ul()){case Qt:return 1;case Bl:return 4;case a:case g:return 16;case m:return 536870912;default:return 16}default:return 16}}var _n=null,ss=null,Kl=null;function ea(){if(Kl)return Kl;var e,t=ss,n=t.length,r,l="value"in _n?_n.value:_n.textContent,o=l.length;for(e=0;e<n&&t[e]===l[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===l[o-r];r++);return Kl=l.slice(e,1<r?1-r:void 0)}function Yl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xl(){return!0}function ta(){return!1}function Dt(e){function t(n,r,l,o,i){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xl:ta,this.isPropagationStopped=ta,this}return W(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xl)},persist:function(){},isPersistent:Xl}),t}var wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},is=Dt(wr),rl=W({},wr,{view:0,detail:0}),Ac=Dt(rl),as,us,ll,ql=W({},rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ds,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ll&&(ll&&e.type==="mousemove"?(as=e.screenX-ll.screenX,us=e.screenY-ll.screenY):us=as=0,ll=e),as)},movementY:function(e){return"movementY"in e?e.movementY:us}}),na=Dt(ql),Uc=W({},ql,{dataTransfer:0}),Bc=Dt(Uc),Vc=W({},rl,{relatedTarget:0}),cs=Dt(Vc),Hc=W({},wr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wc=Dt(Hc),Qc=W({},wr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Kc=Dt(Qc),Yc=W({},wr,{data:0}),ra=Dt(Yc),Xc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jc(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gc[e])?!!t[e]:!1}function ds(){return Jc}var Zc=W({},rl,{key:function(e){if(e.key){var t=Xc[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ds,charCode:function(e){return e.type==="keypress"?Yl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ed=Dt(Zc),td=W({},ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),la=Dt(td),nd=W({},rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ds}),rd=Dt(nd),ld=W({},wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),od=Dt(ld),sd=W({},ql,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),id=Dt(sd),ad=[9,13,27,32],fs=L&&"CompositionEvent"in window,ol=null;L&&"documentMode"in document&&(ol=document.documentMode);var ud=L&&"TextEvent"in window&&!ol,oa=L&&(!fs||ol&&8<ol&&11>=ol),sa=" ",ia=!1;function aa(e,t){switch(e){case"keyup":return ad.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ua(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nr=!1;function cd(e,t){switch(e){case"compositionend":return ua(t);case"keypress":return t.which!==32?null:(ia=!0,sa);case"textInput":return e=t.data,e===sa&&ia?null:e;default:return null}}function dd(e,t){if(Nr)return e==="compositionend"||!fs&&aa(e,t)?(e=ea(),Kl=ss=_n=null,Nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oa&&t.locale!=="ko"?null:t.data;default:return null}}var fd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ca(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!fd[e.type]:t==="textarea"}function da(e,t,n,r){yr(r),t=to(t,"onChange"),0<t.length&&(n=new is("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var sl=null,il=null;function pd(e){Ra(e,0)}function Gl(e){var t=Cr(e);if(zt(t))return e}function md(e,t){if(e==="change")return t}var fa=!1;if(L){var ps;if(L){var ms="oninput"in document;if(!ms){var pa=document.createElement("div");pa.setAttribute("oninput","return;"),ms=typeof pa.oninput=="function"}ps=ms}else ps=!1;fa=ps&&(!document.documentMode||9<document.documentMode)}function ma(){sl&&(sl.detachEvent("onpropertychange",ha),il=sl=null)}function ha(e){if(e.propertyName==="value"&&Gl(il)){var t=[];da(t,il,e,Vt(e)),Ol(pd,t)}}function hd(e,t,n){e==="focusin"?(ma(),sl=t,il=n,sl.attachEvent("onpropertychange",ha)):e==="focusout"&&ma()}function yd(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gl(il)}function gd(e,t){if(e==="click")return Gl(t)}function vd(e,t){if(e==="input"||e==="change")return Gl(t)}function xd(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kt=typeof Object.is=="function"?Object.is:xd;function al(e,t){if(Kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!U.call(t,l)||!Kt(e[l],t[l]))return!1}return!0}function ya(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ga(e,t){var n=ya(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ya(n)}}function va(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?va(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xa(){for(var e=window,t=at();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=at(e.document)}return t}function hs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function wd(e){var t=xa(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&va(n.ownerDocument.documentElement,n)){if(r!==null&&hs(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,o=Math.min(r.start,l);r=r.end===void 0?o:Math.min(r.end,l),!e.extend&&o>r&&(l=r,r=o,o=l),l=ga(n,o);var i=ga(n,r);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Nd=L&&"documentMode"in document&&11>=document.documentMode,jr=null,ys=null,ul=null,gs=!1;function wa(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gs||jr==null||jr!==at(r)||(r=jr,"selectionStart"in r&&hs(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ul&&al(ul,r)||(ul=r,r=to(ys,"onSelect"),0<r.length&&(t=new is("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=jr)))}function Jl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:Jl("Animation","AnimationEnd"),animationiteration:Jl("Animation","AnimationIteration"),animationstart:Jl("Animation","AnimationStart"),transitionend:Jl("Transition","TransitionEnd")},vs={},Na={};L&&(Na=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);function Zl(e){if(vs[e])return vs[e];if(!kr[e])return e;var t=kr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Na)return vs[e]=t[n];return e}var ja=Zl("animationend"),ka=Zl("animationiteration"),Sa=Zl("animationstart"),Ea=Zl("transitionend"),Ca=new Map,Pa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rn(e,t){Ca.set(e,t),k(t,[e])}for(var xs=0;xs<Pa.length;xs++){var ws=Pa[xs],jd=ws.toLowerCase(),kd=ws[0].toUpperCase()+ws.slice(1);Rn(jd,"on"+kd)}Rn(ja,"onAnimationEnd"),Rn(ka,"onAnimationIteration"),Rn(Sa,"onAnimationStart"),Rn("dblclick","onDoubleClick"),Rn("focusin","onFocus"),Rn("focusout","onBlur"),Rn(Ea,"onTransitionEnd"),z("onMouseEnter",["mouseout","mouseover"]),z("onMouseLeave",["mouseout","mouseover"]),z("onPointerEnter",["pointerout","pointerover"]),z("onPointerLeave",["pointerout","pointerover"]),k("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),k("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),k("onBeforeInput",["compositionend","keypress","textInput","paste"]),k("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),k("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),k("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sd=new Set("cancel close invalid load scroll toggle".split(" ").concat(cl));function _a(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,kn(r,t,void 0,e),e.currentTarget=null}function Ra(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var c=r[i],f=c.instance,S=c.currentTarget;if(c=c.listener,f!==o&&l.isPropagationStopped())break e;_a(l,c,S),o=f}else for(i=0;i<r.length;i++){if(c=r[i],f=c.instance,S=c.currentTarget,c=c.listener,f!==o&&l.isPropagationStopped())break e;_a(l,c,S),o=f}}}if(vr)throw e=_t,vr=!1,_t=null,e}function Fe(e,t){var n=t[_s];n===void 0&&(n=t[_s]=new Set);var r=e+"__bubble";n.has(r)||(Da(t,e,2,!1),n.add(r))}function Ns(e,t,n){var r=0;t&&(r|=4),Da(n,e,r,t)}var eo="_reactListening"+Math.random().toString(36).slice(2);function dl(e){if(!e[eo]){e[eo]=!0,P.forEach(function(n){n!=="selectionchange"&&(Sd.has(n)||Ns(n,!1,e),Ns(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[eo]||(t[eo]=!0,Ns("selectionchange",!1,t))}}function Da(e,t,n,r){switch(Zi(t)){case 1:var l=Mc;break;case 4:l=$c;break;default:l=ls}n=l.bind(null,t,n,e),l=void 0,!Qr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function js(e,t,n,r,l){var o=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var c=r.stateNode.containerInfo;if(c===l||c.nodeType===8&&c.parentNode===l)break;if(i===4)for(i=r.return;i!==null;){var f=i.tag;if((f===3||f===4)&&(f=i.stateNode.containerInfo,f===l||f.nodeType===8&&f.parentNode===l))return;i=i.return}for(;c!==null;){if(i=tr(c),i===null)return;if(f=i.tag,f===5||f===6){r=o=i;continue e}c=c.parentNode}}r=r.return}Ol(function(){var S=o,b=Vt(n),F=[];e:{var R=Ca.get(e);if(R!==void 0){var V=is,Y=e;switch(e){case"keypress":if(Yl(n)===0)break e;case"keydown":case"keyup":V=ed;break;case"focusin":Y="focus",V=cs;break;case"focusout":Y="blur",V=cs;break;case"beforeblur":case"afterblur":V=cs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=na;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=Bc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=rd;break;case ja:case ka:case Sa:V=Wc;break;case Ea:V=od;break;case"scroll":V=Ac;break;case"wheel":V=id;break;case"copy":case"cut":case"paste":V=Kc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=la}var q=(t&4)!==0,Qe=!q&&e==="scroll",N=q?R!==null?R+"Capture":null:R;q=[];for(var p=S,j;p!==null;){j=p;var I=j.stateNode;if(j.tag===5&&I!==null&&(j=I,N!==null&&(I=ke(p,N),I!=null&&q.push(fl(p,I,j)))),Qe)break;p=p.return}0<q.length&&(R=new V(R,Y,null,n,b),F.push({event:R,listeners:q}))}}if((t&7)===0){e:{if(R=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",R&&n!==hr&&(Y=n.relatedTarget||n.fromElement)&&(tr(Y)||Y[fn]))break e;if((V||R)&&(R=b.window===b?b:(R=b.ownerDocument)?R.defaultView||R.parentWindow:window,V?(Y=n.relatedTarget||n.toElement,V=S,Y=Y?tr(Y):null,Y!==null&&(Qe=cn(Y),Y!==Qe||Y.tag!==5&&Y.tag!==6)&&(Y=null)):(V=null,Y=S),V!==Y)){if(q=na,I="onMouseLeave",N="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(q=la,I="onPointerLeave",N="onPointerEnter",p="pointer"),Qe=V==null?R:Cr(V),j=Y==null?R:Cr(Y),R=new q(I,p+"leave",V,n,b),R.target=Qe,R.relatedTarget=j,I=null,tr(b)===S&&(q=new q(N,p+"enter",Y,n,b),q.target=j,q.relatedTarget=Qe,I=q),Qe=I,V&&Y)t:{for(q=V,N=Y,p=0,j=q;j;j=Sr(j))p++;for(j=0,I=N;I;I=Sr(I))j++;for(;0<p-j;)q=Sr(q),p--;for(;0<j-p;)N=Sr(N),j--;for(;p--;){if(q===N||N!==null&&q===N.alternate)break t;q=Sr(q),N=Sr(N)}q=null}else q=null;V!==null&&La(F,R,V,q,!1),Y!==null&&Qe!==null&&La(F,Qe,Y,q,!0)}}e:{if(R=S?Cr(S):window,V=R.nodeName&&R.nodeName.toLowerCase(),V==="select"||V==="input"&&R.type==="file")var J=md;else if(ca(R))if(fa)J=vd;else{J=yd;var ne=hd}else(V=R.nodeName)&&V.toLowerCase()==="input"&&(R.type==="checkbox"||R.type==="radio")&&(J=gd);if(J&&(J=J(e,S))){da(F,J,n,b);break e}ne&&ne(e,R,S),e==="focusout"&&(ne=R._wrapperState)&&ne.controlled&&R.type==="number"&&Yn(R,"number",R.value)}switch(ne=S?Cr(S):window,e){case"focusin":(ca(ne)||ne.contentEditable==="true")&&(jr=ne,ys=S,ul=null);break;case"focusout":ul=ys=jr=null;break;case"mousedown":gs=!0;break;case"contextmenu":case"mouseup":case"dragend":gs=!1,wa(F,n,b);break;case"selectionchange":if(Nd)break;case"keydown":case"keyup":wa(F,n,b)}var re;if(fs)e:{switch(e){case"compositionstart":var ie="onCompositionStart";break e;case"compositionend":ie="onCompositionEnd";break e;case"compositionupdate":ie="onCompositionUpdate";break e}ie=void 0}else Nr?aa(e,n)&&(ie="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ie="onCompositionStart");ie&&(oa&&n.locale!=="ko"&&(Nr||ie!=="onCompositionStart"?ie==="onCompositionEnd"&&Nr&&(re=ea()):(_n=b,ss="value"in _n?_n.value:_n.textContent,Nr=!0)),ne=to(S,ie),0<ne.length&&(ie=new ra(ie,e,null,n,b),F.push({event:ie,listeners:ne}),re?ie.data=re:(re=ua(n),re!==null&&(ie.data=re)))),(re=ud?cd(e,n):dd(e,n))&&(S=to(S,"onBeforeInput"),0<S.length&&(b=new ra("onBeforeInput","beforeinput",null,n,b),F.push({event:b,listeners:S}),b.data=re))}Ra(F,t)})}function fl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function to(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,o=l.stateNode;l.tag===5&&o!==null&&(l=o,o=ke(e,n),o!=null&&r.unshift(fl(e,o,l)),o=ke(e,t),o!=null&&r.push(fl(e,o,l))),e=e.return}return r}function Sr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function La(e,t,n,r,l){for(var o=t._reactName,i=[];n!==null&&n!==r;){var c=n,f=c.alternate,S=c.stateNode;if(f!==null&&f===r)break;c.tag===5&&S!==null&&(c=S,l?(f=ke(n,o),f!=null&&i.unshift(fl(n,f,c))):l||(f=ke(n,o),f!=null&&i.push(fl(n,f,c)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Ed=/\r\n?/g,Cd=/\u0000|\uFFFD/g;function ba(e){return(typeof e=="string"?e:""+e).replace(Ed,`
`).replace(Cd,"")}function no(e,t,n){if(t=ba(t),ba(e)!==t&&n)throw Error(u(425))}function ro(){}var ks=null,Ss=null;function Es(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Cs=typeof setTimeout=="function"?setTimeout:void 0,Pd=typeof clearTimeout=="function"?clearTimeout:void 0,Ta=typeof Promise=="function"?Promise:void 0,_d=typeof queueMicrotask=="function"?queueMicrotask:typeof Ta<"u"?function(e){return Ta.resolve(null).then(e).catch(Rd)}:Cs;function Rd(e){setTimeout(function(){throw e})}function Ps(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),nl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);nl(t)}function Dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function za(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Er=Math.random().toString(36).slice(2),tn="__reactFiber$"+Er,pl="__reactProps$"+Er,fn="__reactContainer$"+Er,_s="__reactEvents$"+Er,Dd="__reactListeners$"+Er,Ld="__reactHandles$"+Er;function tr(e){var t=e[tn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fn]||n[tn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=za(e);e!==null;){if(n=e[tn])return n;e=za(e)}return t}e=n,n=e.parentNode}return null}function ml(e){return e=e[tn]||e[fn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Cr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(u(33))}function lo(e){return e[pl]||null}var Rs=[],Pr=-1;function Ln(e){return{current:e}}function Ie(e){0>Pr||(e.current=Rs[Pr],Rs[Pr]=null,Pr--)}function Le(e,t){Pr++,Rs[Pr]=e.current,e.current=t}var bn={},ut=Ln(bn),wt=Ln(!1),nr=bn;function _r(e,t){var n=e.type.contextTypes;if(!n)return bn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},o;for(o in n)l[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Nt(e){return e=e.childContextTypes,e!=null}function oo(){Ie(wt),Ie(ut)}function Fa(e,t,n){if(ut.current!==bn)throw Error(u(168));Le(ut,t),Le(wt,n)}function Ia(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(u(108,Ne(e)||"Unknown",l));return W({},n,r)}function so(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bn,nr=ut.current,Le(ut,e),Le(wt,wt.current),!0}function Oa(e,t,n){var r=e.stateNode;if(!r)throw Error(u(169));n?(e=Ia(e,t,nr),r.__reactInternalMemoizedMergedChildContext=e,Ie(wt),Ie(ut),Le(ut,e)):Ie(wt),Le(wt,n)}var pn=null,io=!1,Ds=!1;function Ma(e){pn===null?pn=[e]:pn.push(e)}function bd(e){io=!0,Ma(e)}function Tn(){if(!Ds&&pn!==null){Ds=!0;var e=0,t=Ce;try{var n=pn;for(Ce=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}pn=null,io=!1}catch(l){throw pn!==null&&(pn=pn.slice(e+1)),er(Qt,Tn),l}finally{Ce=t,Ds=!1}}return null}var Rr=[],Dr=0,ao=null,uo=0,Ot=[],Mt=0,rr=null,mn=1,hn="";function lr(e,t){Rr[Dr++]=uo,Rr[Dr++]=ao,ao=e,uo=t}function $a(e,t,n){Ot[Mt++]=mn,Ot[Mt++]=hn,Ot[Mt++]=rr,rr=e;var r=mn;e=hn;var l=32-E(r)-1;r&=~(1<<l),n+=1;var o=32-E(t)+l;if(30<o){var i=l-l%5;o=(r&(1<<i)-1).toString(32),r>>=i,l-=i,mn=1<<32-E(t)+l|n<<l|r,hn=o+e}else mn=1<<o|n<<l|r,hn=e}function Ls(e){e.return!==null&&(lr(e,1),$a(e,1,0))}function bs(e){for(;e===ao;)ao=Rr[--Dr],Rr[Dr]=null,uo=Rr[--Dr],Rr[Dr]=null;for(;e===rr;)rr=Ot[--Mt],Ot[Mt]=null,hn=Ot[--Mt],Ot[Mt]=null,mn=Ot[--Mt],Ot[Mt]=null}var Lt=null,bt=null,Oe=!1,Yt=null;function Aa(e,t){var n=Bt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ua(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Lt=e,bt=Dn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Lt=e,bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=rr!==null?{id:mn,overflow:hn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Bt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Lt=e,bt=null,!0):!1;default:return!1}}function Ts(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zs(e){if(Oe){var t=bt;if(t){var n=t;if(!Ua(e,t)){if(Ts(e))throw Error(u(418));t=Dn(n.nextSibling);var r=Lt;t&&Ua(e,t)?Aa(r,n):(e.flags=e.flags&-4097|2,Oe=!1,Lt=e)}}else{if(Ts(e))throw Error(u(418));e.flags=e.flags&-4097|2,Oe=!1,Lt=e}}}function Ba(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Lt=e}function co(e){if(e!==Lt)return!1;if(!Oe)return Ba(e),Oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Es(e.type,e.memoizedProps)),t&&(t=bt)){if(Ts(e))throw Va(),Error(u(418));for(;t;)Aa(e,t),t=Dn(t.nextSibling)}if(Ba(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){bt=Dn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}bt=null}}else bt=Lt?Dn(e.stateNode.nextSibling):null;return!0}function Va(){for(var e=bt;e;)e=Dn(e.nextSibling)}function Lr(){bt=Lt=null,Oe=!1}function Fs(e){Yt===null?Yt=[e]:Yt.push(e)}var Td=oe.ReactCurrentBatchConfig;function hl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(u(309));var r=n.stateNode}if(!r)throw Error(u(147,e));var l=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var c=l.refs;i===null?delete c[o]:c[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(u(284));if(!n._owner)throw Error(u(290,e))}return e}function fo(e,t){throw e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ha(e){var t=e._init;return t(e._payload)}function Wa(e){function t(N,p){if(e){var j=N.deletions;j===null?(N.deletions=[p],N.flags|=16):j.push(p)}}function n(N,p){if(!e)return null;for(;p!==null;)t(N,p),p=p.sibling;return null}function r(N,p){for(N=new Map;p!==null;)p.key!==null?N.set(p.key,p):N.set(p.index,p),p=p.sibling;return N}function l(N,p){return N=Un(N,p),N.index=0,N.sibling=null,N}function o(N,p,j){return N.index=j,e?(j=N.alternate,j!==null?(j=j.index,j<p?(N.flags|=2,p):j):(N.flags|=2,p)):(N.flags|=1048576,p)}function i(N){return e&&N.alternate===null&&(N.flags|=2),N}function c(N,p,j,I){return p===null||p.tag!==6?(p=Ci(j,N.mode,I),p.return=N,p):(p=l(p,j),p.return=N,p)}function f(N,p,j,I){var J=j.type;return J===T?b(N,p,j.props.children,I,j.key):p!==null&&(p.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===fe&&Ha(J)===p.type)?(I=l(p,j.props),I.ref=hl(N,p,j),I.return=N,I):(I=Io(j.type,j.key,j.props,null,N.mode,I),I.ref=hl(N,p,j),I.return=N,I)}function S(N,p,j,I){return p===null||p.tag!==4||p.stateNode.containerInfo!==j.containerInfo||p.stateNode.implementation!==j.implementation?(p=Pi(j,N.mode,I),p.return=N,p):(p=l(p,j.children||[]),p.return=N,p)}function b(N,p,j,I,J){return p===null||p.tag!==7?(p=fr(j,N.mode,I,J),p.return=N,p):(p=l(p,j),p.return=N,p)}function F(N,p,j){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Ci(""+p,N.mode,j),p.return=N,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case _e:return j=Io(p.type,p.key,p.props,null,N.mode,j),j.ref=hl(N,null,p),j.return=N,j;case Te:return p=Pi(p,N.mode,j),p.return=N,p;case fe:var I=p._init;return F(N,I(p._payload),j)}if(Je(p)||te(p))return p=fr(p,N.mode,j,null),p.return=N,p;fo(N,p)}return null}function R(N,p,j,I){var J=p!==null?p.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return J!==null?null:c(N,p,""+j,I);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case _e:return j.key===J?f(N,p,j,I):null;case Te:return j.key===J?S(N,p,j,I):null;case fe:return J=j._init,R(N,p,J(j._payload),I)}if(Je(j)||te(j))return J!==null?null:b(N,p,j,I,null);fo(N,j)}return null}function V(N,p,j,I,J){if(typeof I=="string"&&I!==""||typeof I=="number")return N=N.get(j)||null,c(p,N,""+I,J);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case _e:return N=N.get(I.key===null?j:I.key)||null,f(p,N,I,J);case Te:return N=N.get(I.key===null?j:I.key)||null,S(p,N,I,J);case fe:var ne=I._init;return V(N,p,j,ne(I._payload),J)}if(Je(I)||te(I))return N=N.get(j)||null,b(p,N,I,J,null);fo(p,I)}return null}function Y(N,p,j,I){for(var J=null,ne=null,re=p,ie=p=0,tt=null;re!==null&&ie<j.length;ie++){re.index>ie?(tt=re,re=null):tt=re.sibling;var we=R(N,re,j[ie],I);if(we===null){re===null&&(re=tt);break}e&&re&&we.alternate===null&&t(N,re),p=o(we,p,ie),ne===null?J=we:ne.sibling=we,ne=we,re=tt}if(ie===j.length)return n(N,re),Oe&&lr(N,ie),J;if(re===null){for(;ie<j.length;ie++)re=F(N,j[ie],I),re!==null&&(p=o(re,p,ie),ne===null?J=re:ne.sibling=re,ne=re);return Oe&&lr(N,ie),J}for(re=r(N,re);ie<j.length;ie++)tt=V(re,N,ie,j[ie],I),tt!==null&&(e&&tt.alternate!==null&&re.delete(tt.key===null?ie:tt.key),p=o(tt,p,ie),ne===null?J=tt:ne.sibling=tt,ne=tt);return e&&re.forEach(function(Bn){return t(N,Bn)}),Oe&&lr(N,ie),J}function q(N,p,j,I){var J=te(j);if(typeof J!="function")throw Error(u(150));if(j=J.call(j),j==null)throw Error(u(151));for(var ne=J=null,re=p,ie=p=0,tt=null,we=j.next();re!==null&&!we.done;ie++,we=j.next()){re.index>ie?(tt=re,re=null):tt=re.sibling;var Bn=R(N,re,we.value,I);if(Bn===null){re===null&&(re=tt);break}e&&re&&Bn.alternate===null&&t(N,re),p=o(Bn,p,ie),ne===null?J=Bn:ne.sibling=Bn,ne=Bn,re=tt}if(we.done)return n(N,re),Oe&&lr(N,ie),J;if(re===null){for(;!we.done;ie++,we=j.next())we=F(N,we.value,I),we!==null&&(p=o(we,p,ie),ne===null?J=we:ne.sibling=we,ne=we);return Oe&&lr(N,ie),J}for(re=r(N,re);!we.done;ie++,we=j.next())we=V(re,N,ie,we.value,I),we!==null&&(e&&we.alternate!==null&&re.delete(we.key===null?ie:we.key),p=o(we,p,ie),ne===null?J=we:ne.sibling=we,ne=we);return e&&re.forEach(function(pf){return t(N,pf)}),Oe&&lr(N,ie),J}function Qe(N,p,j,I){if(typeof j=="object"&&j!==null&&j.type===T&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case _e:e:{for(var J=j.key,ne=p;ne!==null;){if(ne.key===J){if(J=j.type,J===T){if(ne.tag===7){n(N,ne.sibling),p=l(ne,j.props.children),p.return=N,N=p;break e}}else if(ne.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===fe&&Ha(J)===ne.type){n(N,ne.sibling),p=l(ne,j.props),p.ref=hl(N,ne,j),p.return=N,N=p;break e}n(N,ne);break}else t(N,ne);ne=ne.sibling}j.type===T?(p=fr(j.props.children,N.mode,I,j.key),p.return=N,N=p):(I=Io(j.type,j.key,j.props,null,N.mode,I),I.ref=hl(N,p,j),I.return=N,N=I)}return i(N);case Te:e:{for(ne=j.key;p!==null;){if(p.key===ne)if(p.tag===4&&p.stateNode.containerInfo===j.containerInfo&&p.stateNode.implementation===j.implementation){n(N,p.sibling),p=l(p,j.children||[]),p.return=N,N=p;break e}else{n(N,p);break}else t(N,p);p=p.sibling}p=Pi(j,N.mode,I),p.return=N,N=p}return i(N);case fe:return ne=j._init,Qe(N,p,ne(j._payload),I)}if(Je(j))return Y(N,p,j,I);if(te(j))return q(N,p,j,I);fo(N,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,p!==null&&p.tag===6?(n(N,p.sibling),p=l(p,j),p.return=N,N=p):(n(N,p),p=Ci(j,N.mode,I),p.return=N,N=p),i(N)):n(N,p)}return Qe}var br=Wa(!0),Qa=Wa(!1),po=Ln(null),mo=null,Tr=null,Is=null;function Os(){Is=Tr=mo=null}function Ms(e){var t=po.current;Ie(po),e._currentValue=t}function $s(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function zr(e,t){mo=e,Is=Tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(jt=!0),e.firstContext=null)}function $t(e){var t=e._currentValue;if(Is!==e)if(e={context:e,memoizedValue:t,next:null},Tr===null){if(mo===null)throw Error(u(308));Tr=e,mo.dependencies={lanes:0,firstContext:e}}else Tr=Tr.next=e;return t}var or=null;function As(e){or===null?or=[e]:or.push(e)}function Ka(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,As(t)):(n.next=l.next,l.next=n),t.interleaved=n,yn(e,r)}function yn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var zn=!1;function Us(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ya(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(xe&2)!==0){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,yn(e,n)}return l=r.interleaved,l===null?(t.next=t,As(r)):(t.next=l.next,l.next=t),r.interleaved=t,yn(e,n)}function ho(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ts(e,n)}}function Xa(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?l=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?l=o=t:o=o.next=t}else l=o=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function yo(e,t,n,r){var l=e.updateQueue;zn=!1;var o=l.firstBaseUpdate,i=l.lastBaseUpdate,c=l.shared.pending;if(c!==null){l.shared.pending=null;var f=c,S=f.next;f.next=null,i===null?o=S:i.next=S,i=f;var b=e.alternate;b!==null&&(b=b.updateQueue,c=b.lastBaseUpdate,c!==i&&(c===null?b.firstBaseUpdate=S:c.next=S,b.lastBaseUpdate=f))}if(o!==null){var F=l.baseState;i=0,b=S=f=null,c=o;do{var R=c.lane,V=c.eventTime;if((r&R)===R){b!==null&&(b=b.next={eventTime:V,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var Y=e,q=c;switch(R=t,V=n,q.tag){case 1:if(Y=q.payload,typeof Y=="function"){F=Y.call(V,F,R);break e}F=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=q.payload,R=typeof Y=="function"?Y.call(V,F,R):Y,R==null)break e;F=W({},F,R);break e;case 2:zn=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,R=l.effects,R===null?l.effects=[c]:R.push(c))}else V={eventTime:V,lane:R,tag:c.tag,payload:c.payload,callback:c.callback,next:null},b===null?(S=b=V,f=F):b=b.next=V,i|=R;if(c=c.next,c===null){if(c=l.shared.pending,c===null)break;R=c,c=R.next,R.next=null,l.lastBaseUpdate=R,l.shared.pending=null}}while(!0);if(b===null&&(f=F),l.baseState=f,l.firstBaseUpdate=S,l.lastBaseUpdate=b,t=l.shared.interleaved,t!==null){l=t;do i|=l.lane,l=l.next;while(l!==t)}else o===null&&(l.shared.lanes=0);ar|=i,e.lanes=i,e.memoizedState=F}}function qa(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(u(191,l));l.call(r)}}}var yl={},nn=Ln(yl),gl=Ln(yl),vl=Ln(yl);function sr(e){if(e===yl)throw Error(u(174));return e}function Bs(e,t){switch(Le(vl,t),Le(gl,e),Le(nn,yl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Br(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Br(t,e)}Ie(nn),Le(nn,t)}function Fr(){Ie(nn),Ie(gl),Ie(vl)}function Ga(e){sr(vl.current);var t=sr(nn.current),n=Br(t,e.type);t!==n&&(Le(gl,e),Le(nn,n))}function Vs(e){gl.current===e&&(Ie(nn),Ie(gl))}var $e=Ln(0);function go(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hs=[];function Ws(){for(var e=0;e<Hs.length;e++)Hs[e]._workInProgressVersionPrimary=null;Hs.length=0}var vo=oe.ReactCurrentDispatcher,Qs=oe.ReactCurrentBatchConfig,ir=0,Ae=null,Xe=null,Ze=null,xo=!1,xl=!1,wl=0,zd=0;function ct(){throw Error(u(321))}function Ks(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kt(e[n],t[n]))return!1;return!0}function Ys(e,t,n,r,l,o){if(ir=o,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vo.current=e===null||e.memoizedState===null?Md:$d,e=n(r,l),xl){o=0;do{if(xl=!1,wl=0,25<=o)throw Error(u(301));o+=1,Ze=Xe=null,t.updateQueue=null,vo.current=Ad,e=n(r,l)}while(xl)}if(vo.current=jo,t=Xe!==null&&Xe.next!==null,ir=0,Ze=Xe=Ae=null,xo=!1,t)throw Error(u(300));return e}function Xs(){var e=wl!==0;return wl=0,e}function rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Ae.memoizedState=Ze=e:Ze=Ze.next=e,Ze}function At(){if(Xe===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=Ze===null?Ae.memoizedState:Ze.next;if(t!==null)Ze=t,Xe=e;else{if(e===null)throw Error(u(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},Ze===null?Ae.memoizedState=Ze=e:Ze=Ze.next=e}return Ze}function Nl(e,t){return typeof t=="function"?t(e):t}function qs(e){var t=At(),n=t.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=e;var r=Xe,l=r.baseQueue,o=n.pending;if(o!==null){if(l!==null){var i=l.next;l.next=o.next,o.next=i}r.baseQueue=l=o,n.pending=null}if(l!==null){o=l.next,r=r.baseState;var c=i=null,f=null,S=o;do{var b=S.lane;if((ir&b)===b)f!==null&&(f=f.next={lane:0,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null}),r=S.hasEagerState?S.eagerState:e(r,S.action);else{var F={lane:b,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null};f===null?(c=f=F,i=r):f=f.next=F,Ae.lanes|=b,ar|=b}S=S.next}while(S!==null&&S!==o);f===null?i=r:f.next=c,Kt(r,t.memoizedState)||(jt=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=f,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do o=l.lane,Ae.lanes|=o,ar|=o,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Gs(e){var t=At(),n=t.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,o=t.memoizedState;if(l!==null){n.pending=null;var i=l=l.next;do o=e(o,i.action),i=i.next;while(i!==l);Kt(o,t.memoizedState)||(jt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ja(){}function Za(e,t){var n=Ae,r=At(),l=t(),o=!Kt(r.memoizedState,l);if(o&&(r.memoizedState=l,jt=!0),r=r.queue,Js(nu.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,jl(9,tu.bind(null,n,r,l,t),void 0,null),et===null)throw Error(u(349));(ir&30)!==0||eu(n,t,l)}return l}function eu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function tu(e,t,n,r){t.value=n,t.getSnapshot=r,ru(t)&&lu(e)}function nu(e,t,n){return n(function(){ru(t)&&lu(e)})}function ru(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kt(e,n)}catch{return!0}}function lu(e){var t=yn(e,1);t!==null&&Jt(t,e,1,-1)}function ou(e){var t=rn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nl,lastRenderedState:e},t.queue=e,e=e.dispatch=Od.bind(null,Ae,e),[t.memoizedState,e]}function jl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function su(){return At().memoizedState}function wo(e,t,n,r){var l=rn();Ae.flags|=e,l.memoizedState=jl(1|t,n,void 0,r===void 0?null:r)}function No(e,t,n,r){var l=At();r=r===void 0?null:r;var o=void 0;if(Xe!==null){var i=Xe.memoizedState;if(o=i.destroy,r!==null&&Ks(r,i.deps)){l.memoizedState=jl(t,n,o,r);return}}Ae.flags|=e,l.memoizedState=jl(1|t,n,o,r)}function iu(e,t){return wo(8390656,8,e,t)}function Js(e,t){return No(2048,8,e,t)}function au(e,t){return No(4,2,e,t)}function uu(e,t){return No(4,4,e,t)}function cu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function du(e,t,n){return n=n!=null?n.concat([e]):null,No(4,4,cu.bind(null,t,e),n)}function Zs(){}function fu(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ks(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function pu(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ks(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function mu(e,t,n){return(ir&21)===0?(e.baseState&&(e.baseState=!1,jt=!0),e.memoizedState=n):(Kt(n,t)||(n=Hi(),Ae.lanes|=n,ar|=n,e.baseState=!0),t)}function Fd(e,t){var n=Ce;Ce=n!==0&&4>n?n:4,e(!0);var r=Qs.transition;Qs.transition={};try{e(!1),t()}finally{Ce=n,Qs.transition=r}}function hu(){return At().memoizedState}function Id(e,t,n){var r=$n(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yu(e))gu(t,n);else if(n=Ka(e,t,n,r),n!==null){var l=vt();Jt(n,e,r,l),vu(n,t,r)}}function Od(e,t,n){var r=$n(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yu(e))gu(t,l);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,c=o(i,n);if(l.hasEagerState=!0,l.eagerState=c,Kt(c,i)){var f=t.interleaved;f===null?(l.next=l,As(t)):(l.next=f.next,f.next=l),t.interleaved=l;return}}catch{}n=Ka(e,t,l,r),n!==null&&(l=vt(),Jt(n,e,r,l),vu(n,t,r))}}function yu(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function gu(e,t){xl=xo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function vu(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ts(e,n)}}var jo={readContext:$t,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},Md={readContext:$t,useCallback:function(e,t){return rn().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:iu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,wo(4194308,4,cu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4194308,4,e,t)},useInsertionEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=rn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=rn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Id.bind(null,Ae,e),[r.memoizedState,e]},useRef:function(e){var t=rn();return e={current:e},t.memoizedState=e},useState:ou,useDebugValue:Zs,useDeferredValue:function(e){return rn().memoizedState=e},useTransition:function(){var e=ou(!1),t=e[0];return e=Fd.bind(null,e[1]),rn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ae,l=rn();if(Oe){if(n===void 0)throw Error(u(407));n=n()}else{if(n=t(),et===null)throw Error(u(349));(ir&30)!==0||eu(r,t,n)}l.memoizedState=n;var o={value:n,getSnapshot:t};return l.queue=o,iu(nu.bind(null,r,o,e),[e]),r.flags|=2048,jl(9,tu.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=rn(),t=et.identifierPrefix;if(Oe){var n=hn,r=mn;n=(r&~(1<<32-E(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=wl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=zd++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$d={readContext:$t,useCallback:fu,useContext:$t,useEffect:Js,useImperativeHandle:du,useInsertionEffect:au,useLayoutEffect:uu,useMemo:pu,useReducer:qs,useRef:su,useState:function(){return qs(Nl)},useDebugValue:Zs,useDeferredValue:function(e){var t=At();return mu(t,Xe.memoizedState,e)},useTransition:function(){var e=qs(Nl)[0],t=At().memoizedState;return[e,t]},useMutableSource:Ja,useSyncExternalStore:Za,useId:hu,unstable_isNewReconciler:!1},Ad={readContext:$t,useCallback:fu,useContext:$t,useEffect:Js,useImperativeHandle:du,useInsertionEffect:au,useLayoutEffect:uu,useMemo:pu,useReducer:Gs,useRef:su,useState:function(){return Gs(Nl)},useDebugValue:Zs,useDeferredValue:function(e){var t=At();return Xe===null?t.memoizedState=e:mu(t,Xe.memoizedState,e)},useTransition:function(){var e=Gs(Nl)[0],t=At().memoizedState;return[e,t]},useMutableSource:Ja,useSyncExternalStore:Za,useId:hu,unstable_isNewReconciler:!1};function Xt(e,t){if(e&&e.defaultProps){t=W({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ei(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:W({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ko={isMounted:function(e){return(e=e._reactInternals)?cn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=vt(),l=$n(e),o=gn(r,l);o.payload=t,n!=null&&(o.callback=n),t=Fn(e,o,l),t!==null&&(Jt(t,e,l,r),ho(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=vt(),l=$n(e),o=gn(r,l);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Fn(e,o,l),t!==null&&(Jt(t,e,l,r),ho(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=vt(),r=$n(e),l=gn(n,r);l.tag=2,t!=null&&(l.callback=t),t=Fn(e,l,r),t!==null&&(Jt(t,e,r,n),ho(t,e,r))}};function xu(e,t,n,r,l,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!al(n,r)||!al(l,o):!0}function wu(e,t,n){var r=!1,l=bn,o=t.contextType;return typeof o=="object"&&o!==null?o=$t(o):(l=Nt(t)?nr:ut.current,r=t.contextTypes,o=(r=r!=null)?_r(e,l):bn),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ko,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=o),t}function Nu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ko.enqueueReplaceState(t,t.state,null)}function ti(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},Us(e);var o=t.contextType;typeof o=="object"&&o!==null?l.context=$t(o):(o=Nt(t)?nr:ut.current,l.context=_r(e,o)),l.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(ei(e,t,o,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&ko.enqueueReplaceState(l,l.state,null),yo(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Ir(e,t){try{var n="",r=t;do n+=ye(r),r=r.return;while(r);var l=n}catch(o){l=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:l,digest:null}}function ni(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ri(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ud=typeof WeakMap=="function"?WeakMap:Map;function ju(e,t,n){n=gn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Do||(Do=!0,vi=r),ri(e,t)},n}function ku(e,t,n){n=gn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){ri(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ri(e,t),typeof r!="function"&&(On===null?On=new Set([this]):On.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Su(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Ud;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=tf.bind(null,e,t,n),t.then(e,e))}function Eu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Cu(e,t,n,r,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=gn(-1,1),t.tag=2,Fn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var Bd=oe.ReactCurrentOwner,jt=!1;function gt(e,t,n,r){t.child=e===null?Qa(t,null,n,r):br(t,e.child,n,r)}function Pu(e,t,n,r,l){n=n.render;var o=t.ref;return zr(t,l),r=Ys(e,t,n,r,o,l),n=Xs(),e!==null&&!jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,vn(e,t,l)):(Oe&&n&&Ls(t),t.flags|=1,gt(e,t,r,l),t.child)}function _u(e,t,n,r,l){if(e===null){var o=n.type;return typeof o=="function"&&!Ei(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Ru(e,t,o,r,l)):(e=Io(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,(e.lanes&l)===0){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:al,n(i,r)&&e.ref===t.ref)return vn(e,t,l)}return t.flags|=1,e=Un(o,r),e.ref=t.ref,e.return=t,t.child=e}function Ru(e,t,n,r,l){if(e!==null){var o=e.memoizedProps;if(al(o,r)&&e.ref===t.ref)if(jt=!1,t.pendingProps=r=o,(e.lanes&l)!==0)(e.flags&131072)!==0&&(jt=!0);else return t.lanes=e.lanes,vn(e,t,l)}return li(e,t,n,r,l)}function Du(e,t,n){var r=t.pendingProps,l=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Mr,Tt),Tt|=n;else{if((n&1073741824)===0)return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Le(Mr,Tt),Tt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Le(Mr,Tt),Tt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Le(Mr,Tt),Tt|=r;return gt(e,t,l,n),t.child}function Lu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function li(e,t,n,r,l){var o=Nt(n)?nr:ut.current;return o=_r(t,o),zr(t,l),n=Ys(e,t,n,r,o,l),r=Xs(),e!==null&&!jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,vn(e,t,l)):(Oe&&r&&Ls(t),t.flags|=1,gt(e,t,n,l),t.child)}function bu(e,t,n,r,l){if(Nt(n)){var o=!0;so(t)}else o=!1;if(zr(t,l),t.stateNode===null)Eo(e,t),wu(t,n,r),ti(t,n,r,l),r=!0;else if(e===null){var i=t.stateNode,c=t.memoizedProps;i.props=c;var f=i.context,S=n.contextType;typeof S=="object"&&S!==null?S=$t(S):(S=Nt(n)?nr:ut.current,S=_r(t,S));var b=n.getDerivedStateFromProps,F=typeof b=="function"||typeof i.getSnapshotBeforeUpdate=="function";F||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==r||f!==S)&&Nu(t,i,r,S),zn=!1;var R=t.memoizedState;i.state=R,yo(t,r,i,l),f=t.memoizedState,c!==r||R!==f||wt.current||zn?(typeof b=="function"&&(ei(t,n,b,r),f=t.memoizedState),(c=zn||xu(t,n,c,r,R,f,S))?(F||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=S,r=c):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ya(e,t),c=t.memoizedProps,S=t.type===t.elementType?c:Xt(t.type,c),i.props=S,F=t.pendingProps,R=i.context,f=n.contextType,typeof f=="object"&&f!==null?f=$t(f):(f=Nt(n)?nr:ut.current,f=_r(t,f));var V=n.getDerivedStateFromProps;(b=typeof V=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==F||R!==f)&&Nu(t,i,r,f),zn=!1,R=t.memoizedState,i.state=R,yo(t,r,i,l);var Y=t.memoizedState;c!==F||R!==Y||wt.current||zn?(typeof V=="function"&&(ei(t,n,V,r),Y=t.memoizedState),(S=zn||xu(t,n,S,r,R,Y,f)||!1)?(b||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,Y,f),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,Y,f)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=Y),i.props=r,i.state=Y,i.context=f,r=S):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),r=!1)}return oi(e,t,n,r,o,l)}function oi(e,t,n,r,l,o){Lu(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return l&&Oa(t,n,!1),vn(e,t,o);r=t.stateNode,Bd.current=t;var c=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=br(t,e.child,null,o),t.child=br(t,null,c,o)):gt(e,t,c,o),t.memoizedState=r.state,l&&Oa(t,n,!0),t.child}function Tu(e){var t=e.stateNode;t.pendingContext?Fa(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fa(e,t.context,!1),Bs(e,t.containerInfo)}function zu(e,t,n,r,l){return Lr(),Fs(l),t.flags|=256,gt(e,t,n,r),t.child}var si={dehydrated:null,treeContext:null,retryLane:0};function ii(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r=t.pendingProps,l=$e.current,o=!1,i=(t.flags&128)!==0,c;if((c=i)||(c=e!==null&&e.memoizedState===null?!1:(l&2)!==0),c?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Le($e,l&1),e===null)return zs(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},(r&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Oo(i,r,0,null),e=fr(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ii(n),t.memoizedState=si,e):ai(t,i));if(l=e.memoizedState,l!==null&&(c=l.dehydrated,c!==null))return Vd(e,t,i,r,c,l,n);if(o){o=r.fallback,i=t.mode,l=e.child,c=l.sibling;var f={mode:"hidden",children:r.children};return(i&1)===0&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=f,t.deletions=null):(r=Un(l,f),r.subtreeFlags=l.subtreeFlags&14680064),c!==null?o=Un(c,o):(o=fr(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?ii(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=si,r}return o=e.child,e=o.sibling,r=Un(o,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ai(e,t){return t=Oo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function So(e,t,n,r){return r!==null&&Fs(r),br(t,e.child,null,n),e=ai(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Vd(e,t,n,r,l,o,i){if(n)return t.flags&256?(t.flags&=-257,r=ni(Error(u(422))),So(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,l=t.mode,r=Oo({mode:"visible",children:r.children},l,0,null),o=fr(o,l,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,(t.mode&1)!==0&&br(t,e.child,null,i),t.child.memoizedState=ii(i),t.memoizedState=si,o);if((t.mode&1)===0)return So(e,t,i,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var c=r.dgst;return r=c,o=Error(u(419)),r=ni(o,r,void 0),So(e,t,i,r)}if(c=(i&e.childLanes)!==0,jt||c){if(r=et,r!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(r.suspendedLanes|i))!==0?0:l,l!==0&&l!==o.retryLane&&(o.retryLane=l,yn(e,l),Jt(r,e,l,-1))}return Si(),r=ni(Error(u(421))),So(e,t,i,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=nf.bind(null,e),l._reactRetry=t,null):(e=o.treeContext,bt=Dn(l.nextSibling),Lt=t,Oe=!0,Yt=null,e!==null&&(Ot[Mt++]=mn,Ot[Mt++]=hn,Ot[Mt++]=rr,mn=e.id,hn=e.overflow,rr=t),t=ai(t,r.children),t.flags|=4096,t)}function Iu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),$s(e.return,t,n)}function ui(e,t,n,r,l){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=l)}function Ou(e,t,n){var r=t.pendingProps,l=r.revealOrder,o=r.tail;if(gt(e,t,r.children,n),r=$e.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Iu(e,n,t);else if(e.tag===19)Iu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Le($e,r),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&go(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),ui(t,!1,l,n,o);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&go(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}ui(t,!0,n,null,o);break;case"together":ui(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Eo(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ar|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,n=Un(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Un(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Hd(e,t,n){switch(t.tag){case 3:Tu(t),Lr();break;case 5:Ga(t);break;case 1:Nt(t.type)&&so(t);break;case 4:Bs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;Le(po,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Le($e,$e.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Fu(e,t,n):(Le($e,$e.current&1),e=vn(e,t,n),e!==null?e.sibling:null);Le($e,$e.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Ou(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Le($e,$e.current),r)break;return null;case 22:case 23:return t.lanes=0,Du(e,t,n)}return vn(e,t,n)}var Mu,ci,$u,Au;Mu=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ci=function(){},$u=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,sr(nn.current);var o=null;switch(n){case"input":l=pr(e,l),r=pr(e,r),o=[];break;case"select":l=W({},l,{value:void 0}),r=W({},r,{value:void 0}),o=[];break;case"textarea":l=Zt(e,l),r=Zt(e,r),o=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ro)}Gn(n,r);var i;n=null;for(S in l)if(!r.hasOwnProperty(S)&&l.hasOwnProperty(S)&&l[S]!=null)if(S==="style"){var c=l[S];for(i in c)c.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else S!=="dangerouslySetInnerHTML"&&S!=="children"&&S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(y.hasOwnProperty(S)?o||(o=[]):(o=o||[]).push(S,null));for(S in r){var f=r[S];if(c=l?.[S],r.hasOwnProperty(S)&&f!==c&&(f!=null||c!=null))if(S==="style")if(c){for(i in c)!c.hasOwnProperty(i)||f&&f.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in f)f.hasOwnProperty(i)&&c[i]!==f[i]&&(n||(n={}),n[i]=f[i])}else n||(o||(o=[]),o.push(S,n)),n=f;else S==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,c=c?c.__html:void 0,f!=null&&c!==f&&(o=o||[]).push(S,f)):S==="children"?typeof f!="string"&&typeof f!="number"||(o=o||[]).push(S,""+f):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&(y.hasOwnProperty(S)?(f!=null&&S==="onScroll"&&Fe("scroll",e),o||c===f||(o=[])):(o=o||[]).push(S,f))}n&&(o=o||[]).push("style",n);var S=o;(t.updateQueue=S)&&(t.flags|=4)}},Au=function(e,t,n,r){n!==r&&(t.flags|=4)};function kl(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wd(e,t,n){var r=t.pendingProps;switch(bs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return Nt(t.type)&&oo(),dt(t),null;case 3:return r=t.stateNode,Fr(),Ie(wt),Ie(ut),Ws(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(co(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Yt!==null&&(Ni(Yt),Yt=null))),ci(e,t),dt(t),null;case 5:Vs(t);var l=sr(vl.current);if(n=t.type,e!==null&&t.stateNode!=null)$u(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(u(166));return dt(t),null}if(e=sr(nn.current),co(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[tn]=t,r[pl]=o,e=(t.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(l=0;l<cl.length;l++)Fe(cl[l],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Qn(r,o),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fe("invalid",r);break;case"textarea":bl(r,o),Fe("invalid",r)}Gn(n,o),l=null;for(var i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="children"?typeof c=="string"?r.textContent!==c&&(o.suppressHydrationWarning!==!0&&no(r.textContent,c,e),l=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&no(r.textContent,c,e),l=["children",""+c]):y.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&Fe("scroll",r)}switch(n){case"input":Ge(r),Kn(r,o,!0);break;case"textarea":Ge(r),qn(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=ro)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sn(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[tn]=t,e[pl]=r,Mu(e,t,!1,!1),t.stateNode=e;e:{switch(i=Jn(n,r),n){case"dialog":Fe("cancel",e),Fe("close",e),l=r;break;case"iframe":case"object":case"embed":Fe("load",e),l=r;break;case"video":case"audio":for(l=0;l<cl.length;l++)Fe(cl[l],e);l=r;break;case"source":Fe("error",e),l=r;break;case"img":case"image":case"link":Fe("error",e),Fe("load",e),l=r;break;case"details":Fe("toggle",e),l=r;break;case"input":Qn(e,r),l=pr(e,r),Fe("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=W({},r,{value:void 0}),Fe("invalid",e);break;case"textarea":bl(e,r),l=Zt(e,r),Fe("invalid",e);break;default:l=r}Gn(n,l),c=l;for(o in c)if(c.hasOwnProperty(o)){var f=c[o];o==="style"?Fl(e,f):o==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&Tl(e,f)):o==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&Me(e,f):typeof f=="number"&&Me(e,""+f):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(y.hasOwnProperty(o)?f!=null&&o==="onScroll"&&Fe("scroll",e):f!=null&&be(e,o,f,i))}switch(n){case"input":Ge(e),Kn(e,r,!1);break;case"textarea":Ge(e),qn(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ve(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Ft(e,!!r.multiple,o,!1):r.defaultValue!=null&&Ft(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=ro)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)Au(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(u(166));if(n=sr(vl.current),sr(nn.current),co(t)){if(r=t.stateNode,n=t.memoizedProps,r[tn]=t,(o=r.nodeValue!==n)&&(e=Lt,e!==null))switch(e.tag){case 3:no(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&no(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tn]=t,t.stateNode=r}return dt(t),null;case 13:if(Ie($e),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Oe&&bt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Va(),Lr(),t.flags|=98560,o=!1;else if(o=co(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(u(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(u(317));o[tn]=t}else Lr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;dt(t),o=!1}else Yt!==null&&(Ni(Yt),Yt=null),o=!0;if(!o)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||($e.current&1)!==0?qe===0&&(qe=3):Si())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return Fr(),ci(e,t),e===null&&dl(t.stateNode.containerInfo),dt(t),null;case 10:return Ms(t.type._context),dt(t),null;case 17:return Nt(t.type)&&oo(),dt(t),null;case 19:if(Ie($e),o=t.memoizedState,o===null)return dt(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)kl(o,!1);else{if(qe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=go(e),i!==null){for(t.flags|=128,kl(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Le($e,$e.current&1|2),t.child}e=e.sibling}o.tail!==null&&ze()>$r&&(t.flags|=128,r=!0,kl(o,!1),t.lanes=4194304)}else{if(!r)if(e=go(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),kl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Oe)return dt(t),null}else 2*ze()-o.renderingStartTime>$r&&n!==1073741824&&(t.flags|=128,r=!0,kl(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ze(),t.sibling=null,n=$e.current,Le($e,r?n&1|2:n&1),t):(dt(t),null);case 22:case 23:return ki(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(Tt&1073741824)!==0&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error(u(156,t.tag))}function Qd(e,t){switch(bs(t),t.tag){case 1:return Nt(t.type)&&oo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fr(),Ie(wt),Ie(ut),Ws(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Vs(t),null;case 13:if(Ie($e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));Lr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie($e),null;case 4:return Fr(),null;case 10:return Ms(t.type._context),null;case 22:case 23:return ki(),null;case 24:return null;default:return null}}var Co=!1,ft=!1,Kd=typeof WeakSet=="function"?WeakSet:Set,K=null;function Or(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(e,t,r)}else n.current=null}function di(e,t,n){try{n()}catch(r){Be(e,t,r)}}var Uu=!1;function Yd(e,t){if(ks=Wl,e=xa(),hs(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,c=-1,f=-1,S=0,b=0,F=e,R=null;t:for(;;){for(var V;F!==n||l!==0&&F.nodeType!==3||(c=i+l),F!==o||r!==0&&F.nodeType!==3||(f=i+r),F.nodeType===3&&(i+=F.nodeValue.length),(V=F.firstChild)!==null;)R=F,F=V;for(;;){if(F===e)break t;if(R===n&&++S===l&&(c=i),R===o&&++b===r&&(f=i),(V=F.nextSibling)!==null)break;F=R,R=F.parentNode}F=V}n=c===-1||f===-1?null:{start:c,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ss={focusedElem:e,selectionRange:n},Wl=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var Y=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Y!==null){var q=Y.memoizedProps,Qe=Y.memoizedState,N=t.stateNode,p=N.getSnapshotBeforeUpdate(t.elementType===t.type?q:Xt(t.type,q),Qe);N.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(u(163))}}catch(I){Be(t,t.return,I)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return Y=Uu,Uu=!1,Y}function Sl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var o=l.destroy;l.destroy=void 0,o!==void 0&&di(t,n,o)}l=l.next}while(l!==r)}}function Po(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function fi(e){var t=e.ref;if(t!==null){var n=e.stateNode;e.tag,e=n,typeof t=="function"?t(e):t.current=e}}function Bu(e){var t=e.alternate;t!==null&&(e.alternate=null,Bu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[tn],delete t[pl],delete t[_s],delete t[Dd],delete t[Ld])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Vu(e){return e.tag===5||e.tag===3||e.tag===4}function Hu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ro));else if(r!==4&&(e=e.child,e!==null))for(pi(e,t,n),e=e.sibling;e!==null;)pi(e,t,n),e=e.sibling}function mi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(mi(e,t,n),e=e.sibling;e!==null;)mi(e,t,n),e=e.sibling}var rt=null,qt=!1;function In(e,t,n){for(n=n.child;n!==null;)Wu(e,t,n),n=n.sibling}function Wu(e,t,n){if(x&&typeof x.onCommitFiberUnmount=="function")try{x.onCommitFiberUnmount(v,n)}catch{}switch(n.tag){case 5:ft||Or(n,t);case 6:var r=rt,l=qt;rt=null,In(e,t,n),rt=r,qt=l,rt!==null&&(qt?(e=rt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(qt?(e=rt,n=n.stateNode,e.nodeType===8?Ps(e.parentNode,n):e.nodeType===1&&Ps(e,n),nl(e)):Ps(rt,n.stateNode));break;case 4:r=rt,l=qt,rt=n.stateNode.containerInfo,qt=!0,In(e,t,n),rt=r,qt=l;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var o=l,i=o.destroy;o=o.tag,i!==void 0&&((o&2)!==0||(o&4)!==0)&&di(n,t,i),l=l.next}while(l!==r)}In(e,t,n);break;case 1:if(!ft&&(Or(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Be(n,t,c)}In(e,t,n);break;case 21:In(e,t,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,In(e,t,n),ft=r):In(e,t,n);break;default:In(e,t,n)}}function Qu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Kd),t.forEach(function(r){var l=rf.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function Gt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var o=e,i=t,c=i;e:for(;c!==null;){switch(c.tag){case 5:rt=c.stateNode,qt=!1;break e;case 3:rt=c.stateNode.containerInfo,qt=!0;break e;case 4:rt=c.stateNode.containerInfo,qt=!0;break e}c=c.return}if(rt===null)throw Error(u(160));Wu(o,i,l),rt=null,qt=!1;var f=l.alternate;f!==null&&(f.return=null),l.return=null}catch(S){Be(l,t,S)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ku(t,e),t=t.sibling}function Ku(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gt(t,e),ln(e),r&4){try{Sl(3,e,e.return),Po(3,e)}catch(q){Be(e,e.return,q)}try{Sl(5,e,e.return)}catch(q){Be(e,e.return,q)}}break;case 1:Gt(t,e),ln(e),r&512&&n!==null&&Or(n,n.return);break;case 5:if(Gt(t,e),ln(e),r&512&&n!==null&&Or(n,n.return),e.flags&32){var l=e.stateNode;try{Me(l,"")}catch(q){Be(e,e.return,q)}}if(r&4&&(l=e.stateNode,l!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,c=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&ht(l,o),Jn(c,i);var S=Jn(c,o);for(i=0;i<f.length;i+=2){var b=f[i],F=f[i+1];b==="style"?Fl(l,F):b==="dangerouslySetInnerHTML"?Tl(l,F):b==="children"?Me(l,F):be(l,b,F,S)}switch(c){case"input":mr(l,o);break;case"textarea":Xn(l,o);break;case"select":var R=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!o.multiple;var V=o.value;V!=null?Ft(l,!!o.multiple,V,!1):R!==!!o.multiple&&(o.defaultValue!=null?Ft(l,!!o.multiple,o.defaultValue,!0):Ft(l,!!o.multiple,o.multiple?[]:"",!1))}l[pl]=o}catch(q){Be(e,e.return,q)}}break;case 6:if(Gt(t,e),ln(e),r&4){if(e.stateNode===null)throw Error(u(162));l=e.stateNode,o=e.memoizedProps;try{l.nodeValue=o}catch(q){Be(e,e.return,q)}}break;case 3:if(Gt(t,e),ln(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{nl(t.containerInfo)}catch(q){Be(e,e.return,q)}break;case 4:Gt(t,e),ln(e);break;case 13:Gt(t,e),ln(e),l=e.child,l.flags&8192&&(o=l.memoizedState!==null,l.stateNode.isHidden=o,!o||l.alternate!==null&&l.alternate.memoizedState!==null||(gi=ze())),r&4&&Qu(e);break;case 22:if(b=n!==null&&n.memoizedState!==null,e.mode&1?(ft=(S=ft)||b,Gt(t,e),ft=S):Gt(t,e),ln(e),r&8192){if(S=e.memoizedState!==null,(e.stateNode.isHidden=S)&&!b&&(e.mode&1)!==0)for(K=e,b=e.child;b!==null;){for(F=K=b;K!==null;){switch(R=K,V=R.child,R.tag){case 0:case 11:case 14:case 15:Sl(4,R,R.return);break;case 1:Or(R,R.return);var Y=R.stateNode;if(typeof Y.componentWillUnmount=="function"){r=R,n=R.return;try{t=r,Y.props=t.memoizedProps,Y.state=t.memoizedState,Y.componentWillUnmount()}catch(q){Be(r,n,q)}}break;case 5:Or(R,R.return);break;case 22:if(R.memoizedState!==null){qu(F);continue}}V!==null?(V.return=R,K=V):qu(F)}b=b.sibling}e:for(b=null,F=e;;){if(F.tag===5){if(b===null){b=F;try{l=F.stateNode,S?(o=l.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=F.stateNode,f=F.memoizedProps.style,i=f!=null&&f.hasOwnProperty("display")?f.display:null,c.style.display=Vr("display",i))}catch(q){Be(e,e.return,q)}}}else if(F.tag===6){if(b===null)try{F.stateNode.nodeValue=S?"":F.memoizedProps}catch(q){Be(e,e.return,q)}}else if((F.tag!==22&&F.tag!==23||F.memoizedState===null||F===e)&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===e)break e;for(;F.sibling===null;){if(F.return===null||F.return===e)break e;b===F&&(b=null),F=F.return}b===F&&(b=null),F.sibling.return=F.return,F=F.sibling}}break;case 19:Gt(t,e),ln(e),r&4&&Qu(e);break;case 21:break;default:Gt(t,e),ln(e)}}function ln(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Vu(n)){var r=n;break e}n=n.return}throw Error(u(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(Me(l,""),r.flags&=-33);var o=Hu(e);mi(e,o,l);break;case 3:case 4:var i=r.stateNode.containerInfo,c=Hu(e);pi(e,c,i);break;default:throw Error(u(161))}}catch(f){Be(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Xd(e,t,n){K=e,Yu(e)}function Yu(e,t,n){for(var r=(e.mode&1)!==0;K!==null;){var l=K,o=l.child;if(l.tag===22&&r){var i=l.memoizedState!==null||Co;if(!i){var c=l.alternate,f=c!==null&&c.memoizedState!==null||ft;c=Co;var S=ft;if(Co=i,(ft=f)&&!S)for(K=l;K!==null;)i=K,f=i.child,i.tag===22&&i.memoizedState!==null?Gu(l):f!==null?(f.return=i,K=f):Gu(l);for(;o!==null;)K=o,Yu(o),o=o.sibling;K=l,Co=c,ft=S}Xu(e)}else(l.subtreeFlags&8772)!==0&&o!==null?(o.return=l,K=o):Xu(e)}}function Xu(e){for(;K!==null;){var t=K;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:ft||Po(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ft)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:Xt(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&qa(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}qa(t,i,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var S=t.alternate;if(S!==null){var b=S.memoizedState;if(b!==null){var F=b.dehydrated;F!==null&&nl(F)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(u(163))}ft||t.flags&512&&fi(t)}catch(R){Be(t,t.return,R)}}if(t===e){K=null;break}if(n=t.sibling,n!==null){n.return=t.return,K=n;break}K=t.return}}function qu(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var n=t.sibling;if(n!==null){n.return=t.return,K=n;break}K=t.return}}function Gu(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Po(4,t)}catch(f){Be(t,n,f)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(f){Be(t,l,f)}}var o=t.return;try{fi(t)}catch(f){Be(t,o,f)}break;case 5:var i=t.return;try{fi(t)}catch(f){Be(t,i,f)}}}catch(f){Be(t,t.return,f)}if(t===e){K=null;break}var c=t.sibling;if(c!==null){c.return=t.return,K=c;break}K=t.return}}var qd=Math.ceil,_o=oe.ReactCurrentDispatcher,hi=oe.ReactCurrentOwner,Ut=oe.ReactCurrentBatchConfig,xe=0,et=null,Ke=null,lt=0,Tt=0,Mr=Ln(0),qe=0,El=null,ar=0,Ro=0,yi=0,Cl=null,kt=null,gi=0,$r=1/0,xn=null,Do=!1,vi=null,On=null,Lo=!1,Mn=null,bo=0,Pl=0,xi=null,To=-1,zo=0;function vt(){return(xe&6)!==0?ze():To!==-1?To:To=ze()}function $n(e){return(e.mode&1)===0?1:(xe&2)!==0&&lt!==0?lt&-lt:Td.transition!==null?(zo===0&&(zo=Hi()),zo):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:Zi(e.type)),e)}function Jt(e,t,n,r){if(50<Pl)throw Pl=0,xi=null,Error(u(185));Gr(e,n,r),((xe&2)===0||e!==et)&&(e===et&&((xe&2)===0&&(Ro|=n),qe===4&&An(e,lt)),St(e,r),n===1&&xe===0&&(t.mode&1)===0&&($r=ze()+500,io&&Tn()))}function St(e,t){var n=e.callbackNode;Zo(e,t);var r=We(e,e===et?lt:0);if(r===0)n!==null&&Yr(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Yr(n),t===1)e.tag===0?bd(Zu.bind(null,e)):Ma(Zu.bind(null,e)),_d(function(){(xe&6)===0&&Tn()}),n=null;else{switch(Wi(r)){case 1:n=Qt;break;case 4:n=Bl;break;case 16:n=a;break;case 536870912:n=m;break;default:n=a}n=ic(n,Ju.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ju(e,t){if(To=-1,zo=0,(xe&6)!==0)throw Error(u(327));var n=e.callbackNode;if(Ar()&&e.callbackNode!==n)return null;var r=We(e,e===et?lt:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=Fo(e,r);else{t=r;var l=xe;xe|=2;var o=tc();(et!==e||lt!==t)&&(xn=null,$r=ze()+500,cr(e,t));do try{Zd();break}catch(c){ec(e,c)}while(!0);Os(),_o.current=o,xe=l,Ke!==null?t=0:(et=null,lt=0,t=qe)}if(t!==0){if(t===2&&(l=dn(e),l!==0&&(r=l,t=wi(e,l))),t===1)throw n=El,cr(e,0),An(e,r),St(e,ze()),n;if(t===6)An(e,r);else{if(l=e.current.alternate,(r&30)===0&&!Gd(l)&&(t=Fo(e,r),t===2&&(o=dn(e),o!==0&&(r=o,t=wi(e,o))),t===1))throw n=El,cr(e,0),An(e,r),St(e,ze()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(u(345));case 2:dr(e,kt,xn);break;case 3:if(An(e,r),(r&130023424)===r&&(t=gi+500-ze(),10<t)){if(We(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){vt(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Cs(dr.bind(null,e,kt,xn),t);break}dr(e,kt,xn);break;case 4:if(An(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var i=31-E(r);o=1<<i,i=t[i],i>l&&(l=i),r&=~o}if(r=l,r=ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qd(r/1960))-r,10<r){e.timeoutHandle=Cs(dr.bind(null,e,kt,xn),r);break}dr(e,kt,xn);break;case 5:dr(e,kt,xn);break;default:throw Error(u(329))}}}return St(e,ze()),e.callbackNode===n?Ju.bind(null,e):null}function wi(e,t){var n=Cl;return e.current.memoizedState.isDehydrated&&(cr(e,t).flags|=256),e=Fo(e,t),e!==2&&(t=kt,kt=n,t!==null&&Ni(t)),e}function Ni(e){kt===null?kt=e:kt.push.apply(kt,e)}function Gd(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],o=l.getSnapshot;l=l.value;try{if(!Kt(o(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function An(e,t){for(t&=~yi,t&=~Ro,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-E(t),r=1<<n;e[n]=-1,t&=~r}}function Zu(e){if((xe&6)!==0)throw Error(u(327));Ar();var t=We(e,0);if((t&1)===0)return St(e,ze()),null;var n=Fo(e,t);if(e.tag!==0&&n===2){var r=dn(e);r!==0&&(t=r,n=wi(e,r))}if(n===1)throw n=El,cr(e,0),An(e,t),St(e,ze()),n;if(n===6)throw Error(u(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,dr(e,kt,xn),St(e,ze()),null}function ji(e,t){var n=xe;xe|=1;try{return e(t)}finally{xe=n,xe===0&&($r=ze()+500,io&&Tn())}}function ur(e){Mn!==null&&Mn.tag===0&&(xe&6)===0&&Ar();var t=xe;xe|=1;var n=Ut.transition,r=Ce;try{if(Ut.transition=null,Ce=1,e)return e()}finally{Ce=r,Ut.transition=n,xe=t,(xe&6)===0&&Tn()}}function ki(){Tt=Mr.current,Ie(Mr)}function cr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Pd(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(bs(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oo();break;case 3:Fr(),Ie(wt),Ie(ut),Ws();break;case 5:Vs(r);break;case 4:Fr();break;case 13:Ie($e);break;case 19:Ie($e);break;case 10:Ms(r.type._context);break;case 22:case 23:ki()}n=n.return}if(et=e,Ke=e=Un(e.current,null),lt=Tt=t,qe=0,El=null,yi=Ro=ar=0,kt=Cl=null,or!==null){for(t=0;t<or.length;t++)if(n=or[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=l,r.next=i}n.pending=r}or=null}return e}function ec(e,t){do{var n=Ke;try{if(Os(),vo.current=jo,xo){for(var r=Ae.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}xo=!1}if(ir=0,Ze=Xe=Ae=null,xl=!1,wl=0,hi.current=null,n===null||n.return===null){qe=1,El=t,Ke=null;break}e:{var o=e,i=n.return,c=n,f=t;if(t=lt,c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var S=f,b=c,F=b.tag;if((b.mode&1)===0&&(F===0||F===11||F===15)){var R=b.alternate;R?(b.updateQueue=R.updateQueue,b.memoizedState=R.memoizedState,b.lanes=R.lanes):(b.updateQueue=null,b.memoizedState=null)}var V=Eu(i);if(V!==null){V.flags&=-257,Cu(V,i,c,o,t),V.mode&1&&Su(o,S,t),t=V,f=S;var Y=t.updateQueue;if(Y===null){var q=new Set;q.add(f),t.updateQueue=q}else Y.add(f);break e}else{if((t&1)===0){Su(o,S,t),Si();break e}f=Error(u(426))}}else if(Oe&&c.mode&1){var Qe=Eu(i);if(Qe!==null){(Qe.flags&65536)===0&&(Qe.flags|=256),Cu(Qe,i,c,o,t),Fs(Ir(f,c));break e}}o=f=Ir(f,c),qe!==4&&(qe=2),Cl===null?Cl=[o]:Cl.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var N=ju(o,f,t);Xa(o,N);break e;case 1:c=f;var p=o.type,j=o.stateNode;if((o.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(On===null||!On.has(j)))){o.flags|=65536,t&=-t,o.lanes|=t;var I=ku(o,c,t);Xa(o,I);break e}}o=o.return}while(o!==null)}rc(n)}catch(J){t=J,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function tc(){var e=_o.current;return _o.current=jo,e===null?jo:e}function Si(){(qe===0||qe===3||qe===2)&&(qe=4),et===null||(ar&268435455)===0&&(Ro&268435455)===0||An(et,lt)}function Fo(e,t){var n=xe;xe|=2;var r=tc();(et!==e||lt!==t)&&(xn=null,cr(e,t));do try{Jd();break}catch(l){ec(e,l)}while(!0);if(Os(),xe=n,_o.current=r,Ke!==null)throw Error(u(261));return et=null,lt=0,qe}function Jd(){for(;Ke!==null;)nc(Ke)}function Zd(){for(;Ke!==null&&!Xr();)nc(Ke)}function nc(e){var t=sc(e.alternate,e,Tt);e.memoizedProps=e.pendingProps,t===null?rc(e):Ke=t,hi.current=null}function rc(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Wd(n,t,Tt),n!==null){Ke=n;return}}else{if(n=Qd(n,t),n!==null){n.flags&=32767,Ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Ke=null;return}}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);qe===0&&(qe=5)}function dr(e,t,n){var r=Ce,l=Ut.transition;try{Ut.transition=null,Ce=1,ef(e,t,n,r)}finally{Ut.transition=l,Ce=r}return null}function ef(e,t,n,r){do Ar();while(Mn!==null);if((xe&6)!==0)throw Error(u(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(u(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(zc(e,o),e===et&&(Ke=et=null,lt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Lo||(Lo=!0,ic(a,function(){return Ar(),null})),o=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||o){o=Ut.transition,Ut.transition=null;var i=Ce;Ce=1;var c=xe;xe|=4,hi.current=null,Yd(e,n),Ku(n,e),wd(Ss),Wl=!!ks,Ss=ks=null,e.current=n,Xd(n),qr(),xe=c,Ce=i,Ut.transition=o}else e.current=n;if(Lo&&(Lo=!1,Mn=e,bo=l),o=e.pendingLanes,o===0&&(On=null),C(n.stateNode),St(e,ze()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(Do)throw Do=!1,e=vi,vi=null,e;return(bo&1)!==0&&e.tag!==0&&Ar(),o=e.pendingLanes,(o&1)!==0?e===xi?Pl++:(Pl=0,xi=e):Pl=0,Tn(),null}function Ar(){if(Mn!==null){var e=Wi(bo),t=Ut.transition,n=Ce;try{if(Ut.transition=null,Ce=16>e?16:e,Mn===null)var r=!1;else{if(e=Mn,Mn=null,bo=0,(xe&6)!==0)throw Error(u(331));var l=xe;for(xe|=4,K=e.current;K!==null;){var o=K,i=o.child;if((K.flags&16)!==0){var c=o.deletions;if(c!==null){for(var f=0;f<c.length;f++){var S=c[f];for(K=S;K!==null;){var b=K;switch(b.tag){case 0:case 11:case 15:Sl(8,b,o)}var F=b.child;if(F!==null)F.return=b,K=F;else for(;K!==null;){b=K;var R=b.sibling,V=b.return;if(Bu(b),b===S){K=null;break}if(R!==null){R.return=V,K=R;break}K=V}}}var Y=o.alternate;if(Y!==null){var q=Y.child;if(q!==null){Y.child=null;do{var Qe=q.sibling;q.sibling=null,q=Qe}while(q!==null)}}K=o}}if((o.subtreeFlags&2064)!==0&&i!==null)i.return=o,K=i;else e:for(;K!==null;){if(o=K,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:Sl(9,o,o.return)}var N=o.sibling;if(N!==null){N.return=o.return,K=N;break e}K=o.return}}var p=e.current;for(K=p;K!==null;){i=K;var j=i.child;if((i.subtreeFlags&2064)!==0&&j!==null)j.return=i,K=j;else e:for(i=p;K!==null;){if(c=K,(c.flags&2048)!==0)try{switch(c.tag){case 0:case 11:case 15:Po(9,c)}}catch(J){Be(c,c.return,J)}if(c===i){K=null;break e}var I=c.sibling;if(I!==null){I.return=c.return,K=I;break e}K=c.return}}if(xe=l,Tn(),x&&typeof x.onPostCommitFiberRoot=="function")try{x.onPostCommitFiberRoot(v,e)}catch{}r=!0}return r}finally{Ce=n,Ut.transition=t}}return!1}function lc(e,t,n){t=Ir(n,t),t=ju(e,t,1),e=Fn(e,t,1),t=vt(),e!==null&&(Gr(e,1,t),St(e,t))}function Be(e,t,n){if(e.tag===3)lc(e,e,n);else for(;t!==null;){if(t.tag===3){lc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(On===null||!On.has(r))){e=Ir(n,e),e=ku(t,e,1),t=Fn(t,e,1),e=vt(),t!==null&&(Gr(t,1,e),St(t,e));break}}t=t.return}}function tf(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=vt(),e.pingedLanes|=e.suspendedLanes&n,et===e&&(lt&n)===n&&(qe===4||qe===3&&(lt&130023424)===lt&&500>ze()-gi?cr(e,0):yi|=n),St(e,t)}function oc(e,t){t===0&&((e.mode&1)===0?t=1:(t=ce,ce<<=1,(ce&130023424)===0&&(ce=4194304)));var n=vt();e=yn(e,t),e!==null&&(Gr(e,t,n),St(e,n))}function nf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),oc(e,n)}function rf(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(u(314))}r!==null&&r.delete(t),oc(e,n)}var sc;sc=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||wt.current)jt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return jt=!1,Hd(e,t,n);jt=(e.flags&131072)!==0}else jt=!1,Oe&&(t.flags&1048576)!==0&&$a(t,uo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Eo(e,t),e=t.pendingProps;var l=_r(t,ut.current);zr(t,n),l=Ys(null,t,r,e,l,n);var o=Xs();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nt(r)?(o=!0,so(t)):o=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Us(t),l.updater=ko,t.stateNode=l,l._reactInternals=t,ti(t,r,e,n),t=oi(null,t,r,!0,o,n)):(t.tag=0,Oe&&o&&Ls(t),gt(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Eo(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=of(r),e=Xt(r,e),l){case 0:t=li(null,t,r,e,n);break e;case 1:t=bu(null,t,r,e,n);break e;case 11:t=Pu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,Xt(r.type,e),n);break e}throw Error(u(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Xt(r,l),li(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Xt(r,l),bu(e,t,r,l,n);case 3:e:{if(Tu(t),e===null)throw Error(u(387));r=t.pendingProps,o=t.memoizedState,l=o.element,Ya(e,t),yo(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){l=Ir(Error(u(423)),t),t=zu(e,t,r,n,l);break e}else if(r!==l){l=Ir(Error(u(424)),t),t=zu(e,t,r,n,l);break e}else for(bt=Dn(t.stateNode.containerInfo.firstChild),Lt=t,Oe=!0,Yt=null,n=Qa(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lr(),r===l){t=vn(e,t,n);break e}gt(e,t,r,n)}t=t.child}return t;case 5:return Ga(t),e===null&&zs(t),r=t.type,l=t.pendingProps,o=e!==null?e.memoizedProps:null,i=l.children,Es(r,l)?i=null:o!==null&&Es(r,o)&&(t.flags|=32),Lu(e,t),gt(e,t,i,n),t.child;case 6:return e===null&&zs(t),null;case 13:return Fu(e,t,n);case 4:return Bs(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=br(t,null,r,n):gt(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Xt(r,l),Pu(e,t,r,l,n);case 7:return gt(e,t,t.pendingProps,n),t.child;case 8:return gt(e,t,t.pendingProps.children,n),t.child;case 12:return gt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,o=t.memoizedProps,i=l.value,Le(po,r._currentValue),r._currentValue=i,o!==null)if(Kt(o.value,i)){if(o.children===l.children&&!wt.current){t=vn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var c=o.dependencies;if(c!==null){i=o.child;for(var f=c.firstContext;f!==null;){if(f.context===r){if(o.tag===1){f=gn(-1,n&-n),f.tag=2;var S=o.updateQueue;if(S!==null){S=S.shared;var b=S.pending;b===null?f.next=f:(f.next=b.next,b.next=f),S.pending=f}}o.lanes|=n,f=o.alternate,f!==null&&(f.lanes|=n),$s(o.return,n,t),c.lanes|=n;break}f=f.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(u(341));i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),$s(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}gt(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,zr(t,n),l=$t(l),r=r(l),t.flags|=1,gt(e,t,r,n),t.child;case 14:return r=t.type,l=Xt(r,t.pendingProps),l=Xt(r.type,l),_u(e,t,r,l,n);case 15:return Ru(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Xt(r,l),Eo(e,t),t.tag=1,Nt(r)?(e=!0,so(t)):e=!1,zr(t,n),wu(t,r,l),ti(t,r,l,n),oi(null,t,r,!0,e,n);case 19:return Ou(e,t,n);case 22:return Du(e,t,n)}throw Error(u(156,t.tag))};function ic(e,t){return er(e,t)}function lf(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(e,t,n,r){return new lf(e,t,n,r)}function Ei(e){return e=e.prototype,!(!e||!e.isReactComponent)}function of(e){if(typeof e=="function")return Ei(e)?1:0;if(e!=null){if(e=e.$$typeof,e===st)return 11;if(e===it)return 14}return 2}function Un(e,t){var n=e.alternate;return n===null?(n=Bt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Io(e,t,n,r,l,o){var i=2;if(r=e,typeof e=="function")Ei(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case T:return fr(n.children,l,o,t);case ee:i=8,l|=8;break;case de:return e=Bt(12,n,t,l|2),e.elementType=de,e.lanes=o,e;case Ye:return e=Bt(13,n,t,l),e.elementType=Ye,e.lanes=o,e;case Ve:return e=Bt(19,n,t,l),e.elementType=Ve,e.lanes=o,e;case De:return Oo(n,l,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ot:i=10;break e;case Re:i=9;break e;case st:i=11;break e;case it:i=14;break e;case fe:i=16,r=null;break e}throw Error(u(130,e==null?e:typeof e,""))}return t=Bt(i,n,t,l),t.elementType=e,t.type=r,t.lanes=o,t}function fr(e,t,n,r){return e=Bt(7,e,r,t),e.lanes=n,e}function Oo(e,t,n,r){return e=Bt(22,e,r,t),e.elementType=De,e.lanes=n,e.stateNode={isHidden:!1},e}function Ci(e,t,n){return e=Bt(6,e,null,t),e.lanes=n,e}function Pi(e,t,n){return t=Bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function sf(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=es(0),this.expirationTimes=es(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=es(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function _i(e,t,n,r,l,o,i,c,f){return e=new sf(e,t,n,c,f),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Bt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Us(o),e}function af(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Te,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ac(e){if(!e)return bn;e=e._reactInternals;e:{if(cn(e)!==e||e.tag!==1)throw Error(u(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(u(171))}if(e.tag===1){var n=e.type;if(Nt(n))return Ia(e,n,t)}return t}function uc(e,t,n,r,l,o,i,c,f){return e=_i(n,r,!0,e,l,o,i,c,f),e.context=ac(null),n=e.current,r=vt(),l=$n(n),o=gn(r,l),o.callback=t??null,Fn(n,o,l),e.current.lanes=l,Gr(e,l,r),St(e,r),e}function Mo(e,t,n,r){var l=t.current,o=vt(),i=$n(l);return n=ac(n),t.context===null?t.context=n:t.pendingContext=n,t=gn(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Fn(l,t,i),e!==null&&(Jt(e,l,i,o),ho(e,l,i)),i}function $o(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function cc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ri(e,t){cc(e,t),(e=e.alternate)&&cc(e,t)}function uf(){return null}var dc=typeof reportError=="function"?reportError:function(e){console.error(e)};function Di(e){this._internalRoot=e}Ao.prototype.render=Di.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));Mo(e,t,null,null)},Ao.prototype.unmount=Di.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ur(function(){Mo(null,e,null,null)}),t[fn]=null}};function Ao(e){this._internalRoot=e}Ao.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yi();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pn.length&&t!==0&&t<Pn[n].priority;n++);Pn.splice(n,0,e),n===0&&Gi(e)}};function Li(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Uo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fc(){}function cf(e,t,n,r,l){if(l){if(typeof r=="function"){var o=r;r=function(){var S=$o(i);o.call(S)}}var i=uc(t,r,e,0,null,!1,!1,"",fc);return e._reactRootContainer=i,e[fn]=i.current,dl(e.nodeType===8?e.parentNode:e),ur(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var c=r;r=function(){var S=$o(f);c.call(S)}}var f=_i(e,0,!1,null,null,!1,!1,"",fc);return e._reactRootContainer=f,e[fn]=f.current,dl(e.nodeType===8?e.parentNode:e),ur(function(){Mo(t,f,n,r)}),f}function Bo(e,t,n,r,l){var o=n._reactRootContainer;if(o){var i=o;if(typeof l=="function"){var c=l;l=function(){var f=$o(i);c.call(f)}}Mo(t,i,e,l)}else i=cf(n,t,e,l,r);return $o(i)}Qi=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=he(t.pendingLanes);n!==0&&(ts(t,n|1),St(t,ze()),(xe&6)===0&&($r=ze()+500,Tn()))}break;case 13:ur(function(){var r=yn(e,1);if(r!==null){var l=vt();Jt(r,e,1,l)}}),Ri(e,1)}},ns=function(e){if(e.tag===13){var t=yn(e,134217728);if(t!==null){var n=vt();Jt(t,e,134217728,n)}Ri(e,134217728)}},Ki=function(e){if(e.tag===13){var t=$n(e),n=yn(e,t);if(n!==null){var r=vt();Jt(n,e,t,r)}Ri(e,t)}},Yi=function(){return Ce},Xi=function(e,t){var n=Ce;try{return Ce=e,t()}finally{Ce=n}},an=function(e,t,n){switch(t){case"input":if(mr(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=lo(r);if(!l)throw Error(u(90));zt(r),mr(r,l)}}}break;case"textarea":Xn(e,n);break;case"select":t=n.value,t!=null&&Ft(e,!!n.multiple,t,!1)}},gr=ji,Wr=ur;var df={usingClientEntryPoint:!1,Events:[ml,Cr,lo,yr,Hr,ji]},_l={findFiberByHostInstance:tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ff={bundleType:_l.bundleType,version:_l.version,rendererPackageName:_l.rendererPackageName,rendererConfig:_l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xt(e),e===null?null:e.stateNode},findFiberByHostInstance:_l.findFiberByHostInstance||uf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vo.isDisabled&&Vo.supportsFiber)try{v=Vo.inject(ff),x=Vo}catch{}}return Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=df,Et.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Li(t))throw Error(u(200));return af(e,t,null,n)},Et.createRoot=function(e,t){if(!Li(e))throw Error(u(299));var n=!1,r="",l=dc;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=_i(e,1,!1,null,null,n,!1,r,l),e[fn]=t.current,dl(e.nodeType===8?e.parentNode:e),new Di(t)},Et.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=xt(t),e=e===null?null:e.stateNode,e},Et.flushSync=function(e){return ur(e)},Et.hydrate=function(e,t,n){if(!Uo(t))throw Error(u(200));return Bo(null,e,t,!0,n)},Et.hydrateRoot=function(e,t,n){if(!Li(e))throw Error(u(405));var r=n!=null&&n.hydratedSources||null,l=!1,o="",i=dc;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=uc(t,null,e,1,n??null,l,!1,o,i),e[fn]=t.current,dl(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new Ao(t)},Et.render=function(e,t,n){if(!Uo(t))throw Error(u(200));return Bo(null,e,t,!1,n)},Et.unmountComponentAtNode=function(e){if(!Uo(e))throw Error(u(40));return e._reactRootContainer?(ur(function(){Bo(null,null,e,!1,function(){e._reactRootContainer=null,e[fn]=null})}),!0):!1},Et.unstable_batchedUpdates=ji,Et.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Uo(n))throw Error(u(200));if(e==null||e._reactInternals===void 0)throw Error(u(38));return Bo(e,t,n,!1,r)},Et.version="18.3.1-next-f1338f8080-20240426",Et}var wc;function Nf(){if(wc)return zi.exports;wc=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(h){console.error(h)}}return d(),zi.exports=wf(),zi.exports}var Nc;function jf(){if(Nc)return Ho;Nc=1;var d=Nf();return Ho.createRoot=d.createRoot,Ho.hydrateRoot=d.hydrateRoot,Ho}var kf=jf();const Se={get(d){try{return localStorage.getItem(d)}catch(h){return console.warn("safeLocalStorage.get failed",h),null}},set(d,h){try{if(localStorage.setItem(d,h),localStorage.getItem(d)!==h)throw new Error("Failed to verify localStorage write")}catch(u){throw console.error("safeLocalStorage.set failed",u),u}},remove(d){try{localStorage.removeItem(d)}catch(h){console.warn("safeLocalStorage.remove failed",h)}}},Sf="narrative-covers",Ef=1,Wn="covers",Ct="metadata";let Wo=null;async function qo(){return Wo||new Promise((d,h)=>{const u=indexedDB.open(Sf,Ef);u.onerror=()=>h(u.error),u.onsuccess=()=>{Wo=u.result,d(Wo)},u.onupgradeneeded=P=>{const y=P.target.result;y.objectStoreNames.contains(Wn)||y.createObjectStore(Wn,{keyPath:"coverKey"}),y.objectStoreNames.contains(Ct)||y.createObjectStore(Ct,{keyPath:"projectId"}).createIndex("lastUsed","lastUsed",{unique:!1})}})}async function Cf(d,h,u=120,P=90){const y=await qo(),k=`cover-${d}-${Date.now()}`,z=h.size,L=y.transaction([Wn],"readwrite").objectStore(Wn).put({coverKey:k,blob:h});await new Promise(($,O)=>{L.onsuccess=()=>$(),L.onerror=()=>O(L.error)});const U={projectId:d,coverKey:k,lastUsed:Date.now(),width:u,height:P,sizeBytes:z},H=y.transaction([Ct],"readwrite").objectStore(Ct).put(U);return await new Promise(($,O)=>{H.onsuccess=()=>$(),H.onerror=()=>O(H.error)}),k}async function Pf(d){const h=await qo(),u=h.transaction([Ct],"readonly").objectStore(Ct).get(d),P=await new Promise((L,U)=>{u.onsuccess=()=>L(u.result),u.onerror=()=>U(u.error)});if(!P)return null;const y=h.transaction([Ct],"readwrite").objectStore(Ct).put({...P,lastUsed:Date.now()});await new Promise((L,U)=>{y.onsuccess=()=>L(),y.onerror=()=>U(y.error)});const k=h.transaction([Wn],"readonly").objectStore(Wn).get(P.coverKey);return(await new Promise((L,U)=>{k.onsuccess=()=>L(k.result),k.onerror=()=>U(k.error)}))?.blob||null}async function _f(d){const h=await Pf(d);return h?URL.createObjectURL(h):null}async function Rf(d){const h=await qo(),u=h.transaction([Ct],"readonly").objectStore(Ct).get(d),P=await new Promise((z,L)=>{u.onsuccess=()=>z(u.result),u.onerror=()=>L(u.error)});if(!P)return;const y=h.transaction([Wn],"readwrite").objectStore(Wn).delete(P.coverKey);await new Promise((z,L)=>{y.onsuccess=()=>z(),y.onerror=()=>L(y.error)});const k=h.transaction([Ct],"readwrite").objectStore(Ct).delete(d);await new Promise((z,L)=>{k.onsuccess=()=>z(),k.onerror=()=>L(k.error)})}async function Df(){const h=(await qo()).transaction([Ct],"readonly").objectStore(Ct).index("lastUsed");return await new Promise((P,y)=>{const k=h.getAll();k.onsuccess=()=>P(k.result),k.onerror=()=>y(k.error)})}async function Lf(d=10){const h=await Df(),u=[];if(h.length>d){const P=h.slice(0,h.length-d);for(const y of P)await Rf(y.projectId),u.push(y.projectId)}return u}var bf={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Tf=d=>d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Pt=(d,h)=>{const u=D.forwardRef(({color:P="currentColor",size:y=24,strokeWidth:k=2,absoluteStrokeWidth:z,children:L,...U},H)=>D.createElement("svg",{ref:H,...bf,width:y,height:y,stroke:P,strokeWidth:z?Number(k)*24/Number(y):k,className:`lucide lucide-${Tf(d)}`,...U},[...h.map(([$,O])=>D.createElement($,O)),...(Array.isArray(L)?L:[L])||[]]));return u.displayName=`${d}`,u},zf=Pt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Ff=Pt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),If=Pt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Of=Pt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Mf=Pt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),$i=Pt("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),Ai=Pt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Ko=Pt("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),Oi=Pt("Pencil",[["line",{x1:"18",x2:"22",y1:"2",y2:"6",key:"1e96e7"}],["path",{d:"M7.5 20.5 19 9l-4-4L3.5 16.5 2 22z",key:"12iwkt"}]]),$f=Pt("Plus",[["line",{x1:"12",x2:"12",y1:"5",y2:"19",key:"pwfkuu"}],["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}]]),Af=Pt("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13",key:"19mnr4"}]]),Mi=Pt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Uf=Pt("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]),Hn=Pt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Bf=/^(?:day|d)[\s_-]?(\d{1,2})(?:[^\d]|$)/i,Vf=/(\d{4})-(\d{2})-(\d{2})/,Hf=/(\d{4})_(\d{2})_(\d{2})/,Wf=/^(\d{1,2})[\s_-]/;function jc(d,h){try{const u=new Date(d),P=h?new Date(h):u;if(isNaN(u.getTime())||isNaN(P.getTime()))return null;const y=u.getTime()-P.getTime();return Math.floor(y/(1e3*60*60*24))+1}catch{return null}}function _c(d,h){const u=d.match(Bf);if(u){const k=parseInt(u[1],10);if(k>=1&&k<=31)return{day:k,pattern:"day_prefix",confidence:"high"}}let P=d.match(Vf);if(P){const k=`${P[1]}-${P[2]}-${P[3]}`,z=jc(k,h);if(z!==null)return{day:z,pattern:"iso_date",confidence:h?"high":"medium"}}if(P=d.match(Hf),P){const k=`${P[1]}-${P[2]}-${P[3]}`,z=jc(k,h);if(z!==null)return{day:z,pattern:"iso_date",confidence:h?"high":"medium"}}const y=d.match(Wf);if(y){const k=parseInt(y[1],10);if(k>=1&&k<=31)return{day:k,pattern:"numeric_prefix",confidence:"medium"}}return null}function Qf(d,h){return _c(d,h)?.day??null}function kc(d){return d===null?"Unsorted":`Day ${String(d).padStart(2,"0")}`}function Kf(d){return[/^\..*/,/^unsorted$/i,/^inbox$/i,/^miscellaneous$/i,/^metadata$/i,/^_meta$/i].some(u=>u.test(d))}function Yf(d,h){const{photoCountMap:u=new Map,projectName:P="",tripStart:y}=h||{},k=[];for(const z of d){if(Kf(z)||P&&z.toLowerCase()===P.toLowerCase())continue;const L=u.get(z)||0,U=_c(z,y);U?k.push({folder:z,folderPath:z,detectedDay:U.day,confidence:U.confidence,patternMatched:U.pattern,suggestedName:kc(U.day),manual:!1,photoCount:L}):k.push({folder:z,folderPath:z,detectedDay:null,confidence:"undetected",patternMatched:"none",suggestedName:kc(null),manual:!1,photoCount:L})}return k.sort((z,L)=>z.detectedDay===null&&L.detectedDay===null?z.folder.localeCompare(L.folder):z.detectedDay===null?1:L.detectedDay===null?-1:z.detectedDay-L.detectedDay),k}function Rc({isOpen:d,onClose:h,onComplete:u,recentProjects:P=[],onSelectRecent:y}){const[k,z]=D.useState("select"),[L,U]=D.useState(""),[H,$]=D.useState(""),[O,B]=D.useState(null),[G,se]=D.useState(null),[le,ae]=D.useState([]),[Ee,Ue]=D.useState(!1),be=wn.useRef(null),oe=D.useCallback(async()=>{if(!L.trim()){B("Please enter a project name");return}if(!G){B("Please choose a folder");return}B(null),Ue(!0);try{const T=new Map,ee=[];for await(const[Re,st]of G.entries()){if(st.kind!=="directory")continue;ee.push(Re);let Ye=0;for await(const[,Ve]of st.entries()){if(Ve.kind!=="file")continue;const it=Ve.name.split(".").pop()?.toLowerCase()||"";["jpg","jpeg","png","heic","webp"].includes(it)&&(Ye+=1)}T.set(Re,Ye)}const ot=Yf(ee,{photoCountMap:T,projectName:L}).map(Re=>({...Re,skip:Re.confidence==="undetected"?!0:Re.skip??!1}));ae(ot),z("preview")}catch(T){B(T instanceof Error?T.message:"Failed to detect folder structure")}finally{Ue(!1)}},[G,L]),_e=D.useCallback((T,ee,de)=>{ae(ot=>{const Re=[...ot];return ee==="detectedDay"?(Re[T].detectedDay=de===""?null:parseInt(de,10),Re[T].manual=!0):ee==="skip"?Re[T].skip=de:Re[T][ee]=de,Re})},[]),Te=D.useCallback(()=>{if(!L.trim()){B("Please enter a project name");return}if(!G){B("Please choose a folder");return}const T=H.trim()||G.name,ee=P.find(de=>de.rootPath.toLowerCase()===T.toLowerCase());if(ee){B(`This folder is already being used by project "${ee.projectName}". Opening the same folder twice could cause conflicts. Open the existing project instead or choose a different folder.`);return}B(null),u({projectName:L.trim(),rootPath:T,dirHandle:G,mappings:le}),h()},[G,le,h,u,L,H,P]);return d?s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-start justify-center z-50 pt-12",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full mx-6 max-h-[88vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-8 py-6 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-extrabold text-gray-900",children:k==="select"?"Create Project":"Review Folder Structure"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:k==="select"?"Add a project name and choose the folder that contains your photos.":"Confirm how your existing folders map to days."})]}),s.jsx("button",{onClick:h,className:"text-gray-600 hover:text-gray-800 rounded-md px-2 py-1","aria-label":"Close",children:s.jsx(Hn,{size:20})})]}),s.jsxs("div",{className:"px-8 py-6 space-y-6",children:[O&&s.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-sm text-red-800",children:O}),k==="select"&&P.length>0&&s.jsxs("div",{className:"space-y-3 rounded-lg border border-gray-200 bg-gray-50 p-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Recent Projects"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Open a recent project instead of creating a new one."})]}),s.jsx("div",{className:"space-y-2",children:P.map(T=>s.jsxs("button",{onClick:()=>{y?.(T.projectId),h()},className:"w-full text-left rounded-lg border border-gray-200 bg-white px-3 py-2 hover:border-blue-300 hover:bg-blue-50",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.projectName}),s.jsx("div",{className:"text-xs text-gray-600 truncate",children:T.rootPath})]},T.projectId))})]}),k==="select"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),s.jsx("input",{type:"text",value:L,onChange:T=>U(T.target.value),placeholder:"e.g., Mexico 2025",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder:text-gray-600 text-gray-900"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Folder Path"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:H,onChange:T=>$(T.target.value),placeholder:"/Users/you/trips/mexico",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder:text-gray-600 text-gray-900"}),s.jsx("input",{ref:be,type:"file",webkitdirectory:"true",directory:"true",mozdirectory:"true",className:"hidden",onChange:T=>{const ee=T.currentTarget.files;if(!ee||ee.length===0)return;const de=ee[0],Re=(de.webkitRelativePath||de.name).split("/")[0];$(Re),se(null),T.currentTarget.value=""}}),s.jsxs("button",{onClick:async()=>{if("showDirectoryPicker"in window){const T=await window.showDirectoryPicker();se(T),$(T?.name||"");return}be.current?.click()},className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 flex items-center gap-2",children:[s.jsx($i,{size:18}),"Browse"]})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Use the folder picker to grant access. If the picker is unavailable, paste the full path (the app will ask again on first open)."})]})]}),k==="preview"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Review the detected folders and adjust the day numbers if needed."}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[s.jsx("th",{className:"text-left px-3 py-2 font-medium text-gray-700",children:"Folder"}),s.jsx("th",{className:"text-center px-3 py-2 font-medium text-gray-700",children:"Day #"}),s.jsx("th",{className:"text-center px-3 py-2 font-medium text-gray-700",children:"Photos"}),s.jsx("th",{className:"text-center px-3 py-2 font-medium text-gray-700",children:"Action"})]})}),s.jsxs("tbody",{children:[le.map((T,ee)=>s.jsxs("tr",{className:`border-b border-gray-200 ${T.skip?"bg-gray-100 opacity-60":"hover:bg-blue-50"}`,children:[s.jsx("td",{className:"px-3 py-3 text-gray-900",children:T.folder}),s.jsx("td",{className:"px-3 py-3 text-center",children:s.jsx("input",{type:"number",min:"1",max:"31",value:T.detectedDay??"",onChange:de=>_e(ee,"detectedDay",de.target.value),disabled:T.skip,className:"w-12 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:""})}),s.jsx("td",{className:"px-3 py-3 text-center text-gray-600",children:T.photoCount}),s.jsx("td",{className:"px-3 py-3 text-center",children:s.jsx("button",{onClick:()=>_e(ee,"skip",!T.skip),className:`px-3 py-1 rounded text-sm font-medium ${T.skip?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:T.skip?"Skip":"Map"})})]},T.folder)),le.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-3 py-4 text-sm text-gray-600 text-center",children:"No subfolders detected. You can still continue and sort manually."})})]})]})})]})]}),s.jsx("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex justify-between gap-3",children:k==="select"?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:h,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 font-medium",children:"Cancel"}),s.jsx("button",{onClick:oe,disabled:!L.trim()||!G||Ee,"aria-disabled":!L.trim()||!G||Ee,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:bg-gray-200 disabled:text-gray-500 disabled:cursor-not-allowed",children:Ee?"Detecting":"Next"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>z("select"),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 font-medium",children:"Back"}),s.jsx("button",{onClick:Te,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Create Project"})]})})]})}):null}function Xf({project:d,onOpen:h}){const[u,P]=D.useState(null);return D.useEffect(()=>(d.coverKey?_f(d.projectId).then(y=>P(y)).catch(y=>{console.warn(`Failed to load cover for ${d.projectId}:`,y),d.coverUrl&&P(d.coverUrl)}):d.coverUrl&&P(d.coverUrl),()=>{u&&u.startsWith("blob:")&&URL.revokeObjectURL(u)}),[d,d.coverKey,d.coverUrl]),s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-800 bg-gray-950 hover:border-blue-500 transition-colors group cursor-pointer",children:[s.jsx("button",{onClick:()=>h(d.projectId),className:"w-full block text-left","aria-label":`Open project ${d.projectName}`,children:s.jsx("div",{className:"aspect-video overflow-hidden bg-gray-900 relative",children:u?s.jsx("img",{src:u,alt:d.projectName,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}):s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center text-sm text-gray-400",children:s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-xs font-medium text-gray-500",children:"No cover"})})})})}),s.jsxs("div",{className:"p-3 space-y-1",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-200 truncate",children:d.projectName}),typeof d.totalPhotos=="number"&&s.jsx("div",{className:"text-xs text-gray-500",children:`${d.totalPhotos} ${d.totalPhotos===1?"photo":"photos"}`}),s.jsx("div",{className:"text-xs text-gray-600 truncate",children:d.rootPath})]})]})}const qf="1.9.0";class Ur{static instance;version;constructor(){this.version=qf}static getInstance(){return Ur.instance||(Ur.instance=new Ur),Ur.instance}getVersion(){return this.version}getDisplayVersion(){return`v${this.version}`}isValidVersion(h){return/^\d+\.\d+\.\d+$/.test(h)}isCurrentVersionValid(){return this.isValidVersion(this.version)}getVersionComponents(){const[h,u,P]=this.version.split(".").map(Number);return{major:h,minor:u,patch:P}}compareVersions(h,u){const P=h.split(".").map(Number),y=u.split(".").map(Number);for(let k=0;k<3;k++){if(P[k]<y[k])return-1;if(P[k]>y[k])return 1}return 0}async fetchRuntimeVersion(){try{return null}catch(h){return console.warn("Error fetching runtime version:",h),null}}async getCurrentVersion(){return this.version}}const Yo=Ur.getInstance();function Gf({isOpen:d,onClose:h,onCreateComplete:u,onOpenProject:P,recentProjects:y=[],canClose:k=!1,errorMessage:z=null}){const[L,U]=D.useState(!1),[H,$]=D.useState(Yo.getDisplayVersion());D.useEffect(()=>{(async()=>{try{const le=await Yo.getCurrentVersion();$(`v${le}`)}catch(le){console.warn("Failed to fetch runtime version:",le)}})()},[]);const O=typeof globalThis<"u"&&(globalThis.vitest||globalThis.__APP_VERSION__==="0.0.0"),B="showDirectoryPicker"in window,G="indexedDB"in window;return!O&&(!B||!G)?s.jsx("div",{className:"h-screen bg-gray-950 text-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"max-w-md mx-auto text-center p-6",children:[s.jsx("div",{className:"text-red-400 text-6xl mb-4",children:""}),s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Browser Not Supported"}),s.jsx("p",{className:"text-gray-400 mb-4",children:"This app requires a modern browser with support for the File System Access API and IndexedDB."}),s.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[!B&&s.jsx("div",{children:" File System Access API not available"}),!G&&s.jsx("div",{children:" IndexedDB not available"})]}),s.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Please use a recent version of Chrome, Edge, or another supported browser."})]})}):s.jsxs("div",{className:"h-screen bg-gray-950 text-gray-100 flex flex-col",children:[s.jsx("div",{className:"border-b border-gray-800 bg-gray-900/50 backdrop-blur-sm",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:"/Narrative/assets/Narrative_icon.png",alt:"Narrative",className:"w-8 h-8 rounded"}),s.jsx("h1",{className:"text-xl font-bold",children:"Narrative"})]}),s.jsx("div",{className:"px-3 py-1 bg-gray-800 text-gray-300 rounded-md text-xs font-medium tracking-wide",children:s.jsx("span",{className:"uppercase",children:H})})]})}),s.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:s.jsxs("div",{className:"w-full max-w-7xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Projects"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Create a new project or open a recent one"})]}),z&&s.jsx("div",{className:"rounded-lg border border-red-800 bg-red-950/60 px-4 py-3 text-sm text-red-200 mb-6",children:z}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 auto-rows-max",children:[s.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 border-dashed border-gray-700 bg-gray-950 hover:border-blue-500 transition-colors group cursor-pointer",children:[s.jsx("button",{onClick:()=>U(!0),className:"w-full block text-left","aria-label":"Create new project",children:s.jsx("div",{className:"aspect-video overflow-hidden bg-gray-900 relative",children:s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center group-hover:from-gray-700 group-hover:to-gray-800 transition-colors",children:s.jsx("div",{className:"w-14 h-14 rounded-full bg-gray-700 group-hover:bg-blue-500/20 flex items-center justify-center mb-2 transition-colors",children:s.jsx($f,{className:"w-7 h-7 text-blue-400"})})})})}),s.jsxs("div",{className:"p-3 space-y-1",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-200",children:"New Project"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Start organizing photos"})]})]}),y.map(se=>s.jsx(Xf,{project:se,onOpen:P},se.projectId))]}),y.length===0&&s.jsx("div",{className:"text-center py-12 text-gray-500",children:s.jsx("p",{className:"text-sm",children:"No recent projects. Create one to get started."})})]})}),s.jsx(Rc,{isOpen:L,onClose:()=>U(!1),onComplete:se=>{U(!1),u(se)},recentProjects:y,onSelectRecent:P})]})}function Jf({isOpen:d,title:h="Loading Project",message:u="Please wait while we load your project...",progress:P=0,showProgressBar:y=!0}){const[k,z]=D.useState(0);return D.useEffect(()=>{if(P!==k){const L=setTimeout(()=>{z(P)},100);return()=>clearTimeout(L)}},[P,k]),d?s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-900 rounded-lg shadow-2xl p-8 max-w-md w-full mx-4 border border-gray-800",children:[s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-full blur-lg opacity-20"}),s.jsx(Ko,{className:"w-12 h-12 text-blue-400 animate-spin relative"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:h}),s.jsx("p",{className:"text-gray-400 text-sm",children:u})]})]}),y&&s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-400",children:"Progress"}),s.jsxs("span",{className:"text-xs font-bold text-blue-400",children:[Math.round(k),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2 overflow-hidden",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 h-full rounded-full transition-all duration-300 ease-out",style:{width:`${k}%`}})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:k===100?"Almost done...":"Loading..."})})]})}):null}const Zf=({photo:d,filteredPhotos:h,onClose:u,onNavigate:P,onToggleFavorite:y,onAssignBucket:k,onAssignDay:z,selectedBucket:L,selectedDay:U,buckets:H,dayLabels:$={}})=>{const[O,B]=D.useState(h.findIndex(T=>T.id===d.id)),[G,se]=D.useState(null),[le,ae]=D.useState(!1),[Ee,Ue]=D.useState(null),be=D.useRef(null);D.useEffect(()=>{const T=h.findIndex(ee=>ee.id===d.id);T!==-1&&T!==O&&B(T)},[h,d.id,O]);const oe=h[O]||d;D.useEffect(()=>(se(null),ae(!0),Ue(null),be.current=null,(async()=>{try{if(oe.fileHandle){const ee=await oe.fileHandle.getFile(),de=URL.createObjectURL(ee);be.current=de,se(de)}else oe.thumbnail?se(oe.thumbnail):Ue("No image data available")}catch(ee){console.error("Failed to load full resolution image:",ee),oe.thumbnail?se(oe.thumbnail):Ue("Failed to load image")}finally{ae(!1)}})(),()=>{if(be.current&&be.current.startsWith("blob:"))try{URL.revokeObjectURL(be.current)}catch{}}),[oe.id,oe.fileHandle,oe.thumbnail]);const _e=D.useCallback(T=>{let ee=O;T==="next"?ee=Math.min(O+1,h.length-1):ee=Math.max(O-1,0),ee!==O&&(B(ee),P(h[ee].id))},[O,h,P]),Te=D.useCallback(T=>{T.key==="Escape"?(T.preventDefault(),u()):T.key==="ArrowRight"?(T.preventDefault(),_e("next")):T.key==="ArrowLeft"?(T.preventDefault(),_e("prev")):(T.key==="f"||T.key==="F")&&(T.preventDefault(),y(oe.id))},[oe.id,u,_e,y]);return D.useEffect(()=>(window.addEventListener("keydown",Te),()=>window.removeEventListener("keydown",Te)),[Te]),s.jsxs("div",{className:"fixed inset-0 bg-black z-40 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-100",children:"Inspect Mode"}),s.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-800 rounded-lg transition-colors","aria-label":"Close inspect mode",children:s.jsx(Hn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"flex-1 flex items-center justify-center bg-gray-950 overflow-auto relative group pb-4",children:[le&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/50 z-10",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ko,{className:"w-8 h-8 animate-spin text-blue-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Loading image..."})]})}),Ee&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/50 z-10",children:s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-sm text-red-400",children:Ee})})}),G&&s.jsx(s.Fragment,{children:oe.mimeType?.startsWith("video/")?s.jsx("video",{src:G,className:"max-w-full max-h-full object-contain",controls:!0,muted:!0}):s.jsx("img",{src:G,alt:oe.currentName,className:"max-w-full max-h-full object-contain"})}),O>0&&s.jsx("button",{onClick:()=>_e("prev"),className:"absolute left-4 p-2 bg-black/60 hover:bg-black/80 rounded-lg text-white opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Previous photo",children:s.jsx(If,{className:"w-6 h-6"})}),O<h.length-1&&s.jsx("button",{onClick:()=>_e("next"),className:"absolute right-4 p-2 bg-black/60 hover:bg-black/80 rounded-lg text-white opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Next photo",children:s.jsx(Of,{className:"w-6 h-6"})}),s.jsxs("div",{className:"absolute bottom-4 left-4 text-sm text-gray-400",children:[O+1," / ",h.length]})]}),s.jsxs("div",{className:"w-80 border-l border-gray-800 bg-gray-900 overflow-y-auto flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b border-gray-800",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-100 mb-2",children:"Photo Details"}),s.jsx("p",{className:"text-xs text-gray-400 break-words",children:oe.currentName}),oe.filePath&&s.jsx("p",{className:"text-xs text-gray-500 mt-1 break-words",children:oe.filePath})]}),s.jsxs("div",{className:"p-4 space-y-4 flex-1",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase mb-2 block",children:"MECE Category"}),s.jsx("div",{className:"space-y-1",children:H.map(T=>s.jsx("button",{onClick:ee=>{const de=oe.bucket===T.key?null:T.key;k(oe.id,de||""),ee.shiftKey&&_e("next")},className:`w-full px-3 py-2 rounded text-sm text-left transition-colors ${oe.bucket===T.key?`${T.color} text-white font-semibold`:"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-bold",children:T.key}),s.jsx("span",{children:T.label})]})},T.key))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase mb-2 block",children:"Day"}),s.jsxs("select",{value:oe.day??"",onChange:T=>{const ee=T.target.value?Number.parseInt(T.target.value,10):null;z(oe.id,ee)},className:"w-full px-3 py-2 rounded bg-gray-800 border border-gray-700 text-gray-100 text-sm",children:[s.jsx("option",{value:"",children:"Unassigned"}),Array.from({length:31},(T,ee)=>ee+1).map(T=>s.jsx("option",{value:T,children:$[T]||`Day ${String(T).padStart(2,"0")}`},T))]})]}),s.jsxs("button",{onClick:()=>y(oe.id),className:`w-full px-3 py-2 rounded text-sm font-semibold transition-colors flex items-center gap-2 ${oe.favorite?"bg-yellow-600 text-white hover:bg-yellow-700":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:[s.jsx(Ai,{className:`w-4 h-4 ${oe.favorite?"fill-current":""}`}),oe.favorite?"Favorited":"Mark as Favorite"]})]}),s.jsxs("div",{className:"px-4 py-3 border-t border-gray-800 bg-gray-950 space-y-1 text-xs text-gray-400",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Navigate"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"F"}),s.jsx("span",{children:"Toggle Favorite"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Esc"}),s.jsx("span",{children:"Close"})]})]})]})]})]})},ep="modulepreload",tp=function(d){return"/Narrative/"+d},Sc={},np=function(h,u,P){let y=Promise.resolve();if(u&&u.length>0){let U=function(H){return Promise.all(H.map($=>Promise.resolve($).then(O=>({status:"fulfilled",value:O}),O=>({status:"rejected",reason:O}))))};document.getElementsByTagName("link");const z=document.querySelector("meta[property=csp-nonce]"),L=z?.nonce||z?.getAttribute("nonce");y=U(u.map(H=>{if(H=tp(H),H in Sc)return;Sc[H]=!0;const $=H.endsWith(".css"),O=$?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${H}"]${O}`))return;const B=document.createElement("link");if(B.rel=$?"stylesheet":ep,$||(B.as="script"),B.crossOrigin="",B.href=H,L&&B.setAttribute("nonce",L),document.head.appendChild(B),$)return new Promise((G,se)=>{B.addEventListener("load",G),B.addEventListener("error",()=>se(new Error(`Unable to preload CSS for ${H}`)))})}))}function k(z){const L=new Event("vite:preloadError",{cancelable:!0});if(L.payload=z,window.dispatchEvent(L),!L.defaultPrevented)throw z}return y.then(z=>{for(const L of z||[])L.status==="rejected"&&k(L.reason);return h().catch(k)})},rp=["jpg","jpeg","png","heic","webp","mp4","mov","webm","avi","mkv"],Go="narrative:projectState:",lp="narrative:handles",on="projects",Xo={autoDay:!0,folderStructure:{daysFolder:"01_DAYS",archiveFolder:"98_ARCHIVE",favoritesFolder:"FAV",metaFolder:"_meta"}};function Dc(){return`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`}async function Jo(){if(!window.indexedDB)throw new Error("IndexedDB is not available in this environment.");return new Promise((d,h)=>{const u=indexedDB.open(lp,1);u.onupgradeneeded=()=>{const P=u.result;P.objectStoreNames.contains(on)||P.createObjectStore(on)},u.onsuccess=()=>d(u.result),u.onerror=()=>h(u.error)})}async function Ui(d,h){const u=await Jo();return new Promise((P,y)=>{const k=u.transaction(on,"readwrite");k.objectStore(on).put(h,d),k.oncomplete=()=>P(),k.onerror=()=>y(k.error)})}async function Qo(d){const h=await Jo();return new Promise((u,P)=>{const k=h.transaction(on,"readonly").objectStore(on).get(d);k.onsuccess=()=>u(k.result||null),k.onerror=()=>P(k.error)})}async function op(d){const h=await Jo();return new Promise((u,P)=>{const y=h.transaction(on,"readwrite");y.objectStore(on).delete(d),y.oncomplete=()=>u(),y.onerror=()=>P(y.error)})}function sp(d){const h=d.split(".").pop()?.toLowerCase()||"";return rp.includes(h)}function ip(d){const h=d.toLowerCase();return d.startsWith(".")||d.startsWith("._")||h==="thumbs.db"||h==="desktop.ini"}async function Lc(d,h=""){const u=[];for await(const[P,y]of d.entries())if(y.kind==="directory"){if(P.startsWith("."))continue;const k=await Lc(y,h?`${h}/${P}`:P);u.push(...k)}else if(y.kind==="file"){if(ip(P)||!sp(P))continue;const k=h?`${h}/${P}`:P;u.push({handle:y,path:k})}return u}async function ap(d){try{if(typeof createImageBitmap<"u")return(await createImageBitmap(d)).close(),d}catch{}try{const P=(await np(async()=>{const{default:y}=await import("./heic2any-DQ9OOmik.js").then(k=>k.h);return{default:y}},[])).default;try{return await P({blob:d,toType:"image/jpeg",quality:.8})}catch(y){if(y?.message?.includes("already browser readable")||y?.message?.includes("ERR_USER")||y?.code===1)return d;console.warn(`heic2any conversion failed for ${d.name}:`,y)}}catch{console.warn("heic2any library not available, trying fallbacks")}const h=document.createElement("canvas"),u=h.getContext("2d");if(!u)return new Blob([""],{type:"image/jpeg"});try{if(typeof createImageBitmap<"u")try{const P=await createImageBitmap(d);h.width=P.width||400,h.height=P.height||300;try{u.drawImage(P,0,0)}catch{}return new Promise((y,k)=>{try{if(typeof h.toBlob=="function")h.toBlob(z=>{if(z){y(z);return}try{const U=h.toDataURL("image/jpeg",.8).split(","),H=U[0].match(/:(.*?);/),$=U[1];let O;if(typeof atob=="function"){const B=atob($);let G=B.length;for(O=new Uint8Array(G);G--;)O[G]=B.charCodeAt(G)}else if(typeof Buffer<"u"){const B=Buffer.from($,"base64");O=new Uint8Array(B.buffer,B.byteOffset,B.byteLength)}else throw new Error("No base64 decoder available");y(new Blob([O],{type:H&&H[1]||"image/jpeg"}))}catch{y(new Blob([""],{type:"image/jpeg"}))}},"image/jpeg",.8);else{const L=h.toDataURL("image/jpeg",.8).split(","),U=L[0].match(/:(.*?);/),H=L[1];let $;if(typeof atob=="function"){const O=atob(H);let B=O.length;for($=new Uint8Array(B);B--;)$[B]=O.charCodeAt(B)}else if(typeof Buffer<"u"){const O=Buffer.from(H,"base64");$=new Uint8Array(O.buffer,O.byteOffset,O.byteLength)}else return y(new Blob([""],{type:"image/jpeg"}));y(new Blob([$],{type:U&&U[1]||"image/jpeg"}))}}catch{y(new Blob([""],{type:"image/jpeg"}))}})}catch{}try{const P=new Image,y=URL.createObjectURL(d);return P.crossOrigin="Anonymous",await new Promise((k,z)=>{P.onload=()=>k(),P.onerror=()=>z(new Error("Image load failed")),P.src=y}),h.width=P.naturalWidth||P.width||400,h.height=P.naturalHeight||P.height||300,u.drawImage(P,0,0),URL.revokeObjectURL(y),new Promise((k,z)=>{h.toBlob(L=>{if(L){k(L);return}try{const H=h.toDataURL("image/jpeg",.8).split(","),$=H[0].match(/:(.*?);/),O=H[1];let B;if(typeof atob=="function"){const G=atob(O);let se=G.length;for(B=new Uint8Array(se);se--;)B[se]=G.charCodeAt(se)}else if(typeof Buffer<"u"){const G=Buffer.from(O,"base64");B=new Uint8Array(G.buffer,G.byteOffset,G.byteLength)}else{k(new Blob([""],{type:"image/jpeg"}));return}k(new Blob([B],{type:$&&$[1]||"image/jpeg"}))}catch{k(new Blob([""],{type:"image/jpeg"}))}},"image/jpeg",.8)})}catch{}return h.width=400,h.height=300,u.fillStyle="#e5e5e5",u.fillRect(0,0,400,300),u.fillStyle="#666666",u.font="bold 16px sans-serif",u.textAlign="center",u.textBaseline="middle",u.fillText("HEIC",200,140),u.font="12px sans-serif",u.fillText("Preview not available",200,165),new Promise(P=>{h.toBlob(y=>{if(y){P(y);return}P(new Blob([""],{type:"image/jpeg"}))},"image/jpeg",.8)})}catch{return new Blob([""],{type:"image/jpeg"})}}async function Vi(d,h){const u=await Lc(d),P=[],y=new Set;for(let k=0;k<u.length;k++){const z=u[k],L=Math.round((k+1)/u.length*100);h?.(L,`Processing ${z.handle.name}...`);const U=await z.handle.getFile(),H=U.lastModified,$=U.name,O=`${$}|${H}|${U.size}`;if(y.has(O))continue;y.add(O);const B=Dc(),G=U.name.split(".").pop()?.toLowerCase()||"",se=G==="heic"||G==="heif"||U.type.toLowerCase().includes("heic");let le="";if(se)try{const ae=await ap(U);ae&&(le=URL.createObjectURL(ae))}catch(ae){console.warn(`Failed to generate preview for ${$}:`,ae)}else try{le=URL.createObjectURL(U)}catch(ae){console.warn(`Failed to create object URL for ${$}:`,ae)}P.push({id:B,originalName:$,currentName:$,timestamp:H,day:null,bucket:null,sequence:null,favorite:!1,rating:0,archived:!1,thumbnail:le,mimeType:U.type||(se?"image/heic":""),fileHandle:z.handle,filePath:z.path})}return P.sort((k,z)=>k.timestamp-z.timestamp)}function up(d){const h={};if(d.length===0)return h;let u=1,P=d[0].timestamp;const y=360*60*1e3;return h[u]=[],d.forEach(k=>{k.timestamp-P>y&&(u+=1,h[u]=[]),h[u].push(k.id),P=k.timestamp}),h}function bc(d){const h=d.photos.map(u=>({filePath:u.filePath,day:u.day,bucket:u.bucket,sequence:u.sequence,favorite:u.favorite,rating:u.rating,archived:u.archived,currentName:u.currentName}));return{projectName:d.projectName,rootPath:d.rootPath,settings:d.settings,dayLabels:d.dayLabels||{},dayContainers:d.dayContainers||[],lastModified:d.lastModified??Date.now(),edits:h}}function cp(d,h){const u=d.toLowerCase(),P=u.replace(/[^a-z0-9]+/g," ").trim(),y=h.toLowerCase();return!!(y&&u===y||u==="archive"||u==="archives"||u.endsWith("_archive")||u.endsWith("-archive")||u.includes("archive")||P.includes("archive"))}function Tc(d,h){return h?d.map(u=>u.filePath&&u.filePath.split(/[\\/]/).filter(Boolean).some(y=>cp(y,h))?{...u,archived:!0,bucket:"X"}:u):d}async function dp(d){const{dirHandle:h,projectName:u,rootLabel:P,onProgress:y}=d;if(!("requestPermission"in h))throw new Error("File System Access API is not available or supported in this environment.");let k;try{k=await h.requestPermission({mode:"read"})}catch($){throw console.warn("Permission request failed:",$),new Error("Unable to request folder access. Please try again.")}if(k!=="granted")throw new Error("Folder access was not granted. Please allow access to create the project.");y?.(5,"Scanning folder structure...");const z=Dc();y?.(10,"Collecting image files...");const L=Tc(await Vi(h,($,O)=>{const B=10+$*.6;y?.(B,O)}),Xo.folderStructure.archiveFolder);y?.(75,"Analyzing photo timestamps...");const U=up(L);y?.(85,"Saving project data...");const H={projectName:u?.trim()||h.name,rootPath:P||h.name,photos:L,settings:Xo,lastModified:Date.now()};return await Ui(z,h),Se.set(`${Go}${z}`,JSON.stringify(bc(H))),y?.(95,"Project initialized successfully"),{projectId:z,photos:L,suggestedDays:U}}async function Ec(d){const h=await Qo(d);if(!h)throw new Error("Project folder access not available. Please reselect the folder.");if(!("requestPermission"in h))throw new Error("File System Access API is not available or supported in this environment.");let u;try{u=await h.requestPermission({mode:"read"})}catch(H){throw console.warn("Permission request failed, removing stale handle:",H),await op(d),new Error("Project folder access has expired. Please click the project again to reselect the folder.")}if(u!=="granted")throw new Error("Folder access was not granted. Please allow access to continue.");const P=Se.get(`${Go}${d}`),y=P?JSON.parse(P):{},k=await Vi(h);if(k.length===0)throw new Error("Project folder access is no longer available. Please reselect the folder.");let z=k;if(y.edits){const H=new Map;y.edits.forEach($=>{$?.filePath&&H.set($.filePath,$)}),z=k.map($=>{const O=$.filePath?H.get($.filePath):null;return O?{...$,day:O.day,bucket:O.bucket,sequence:O.sequence,favorite:O.favorite,rating:O.rating,archived:O.archived,currentName:O.currentName}:$})}const L=y.settings||Xo,U=Tc(z,L.folderStructure?.archiveFolder||Xo.folderStructure.archiveFolder);return{projectName:y.projectName||h.name,rootPath:y.rootPath||h.name,photos:U,settings:L,dayLabels:y.dayLabels||{},dayContainers:y.dayContainers||[],lastModified:y.lastModified}}async function Cc(d,h){Se.set(`${Go}${d}`,JSON.stringify(bc(h)))}async function fp(d){try{Se.remove(`${Go}${d}`)}catch{}try{const h=await Jo();await new Promise((u,P)=>{const y=h.transaction(on,"readwrite");y.objectStore(on).delete(d),y.oncomplete=()=>u(),y.onerror=()=>P(y.error)})}catch{}}const Dl=[{key:"A",label:"Establishing",color:"bg-blue-500",description:"Wide shots, landscapes"},{key:"B",label:"People",color:"bg-purple-500",description:"Portraits, groups"},{key:"C",label:"Culture/Detail",color:"bg-green-500",description:"Local life, close-ups"},{key:"D",label:"Action/Moment",color:"bg-orange-500",description:"Events, activities"},{key:"E",label:"Transition",color:"bg-yellow-500",description:"Travel, movement"},{key:"M",label:"Mood/Food",color:"bg-indigo-500",description:"Food, mood"},{key:"X",label:"Archive",color:"bg-gray-500",description:"Unwanted shots"}],pt="narrative:recentProjects",Vn="narrative:activeProject",Ll={autoDay:!0,folderStructure:{daysFolder:"01_DAYS",archiveFolder:"98_ARCHIVE",favoritesFolder:"FAV",metaFolder:"_meta"}};function pp(){const[d,h]=D.useState([]),[u,P]=D.useState("folders"),[y,k]=D.useState(new Set),[z,L]=D.useState(null),[U,H]=D.useState(null),$=D.useRef(null),[O,B]=D.useState(null),[G,se]=D.useState(null),[le,ae]=D.useState([]),[Ee,Ue]=D.useState(-1),be=D.useRef([]),[oe,_e]=D.useState(!1),[Te,T]=D.useState(!1),[ee,de]=D.useState(()=>!Se.get(Vn)),[ot,Re]=D.useState(!1),[st,Ye]=D.useState(""),[Ve,it]=D.useState("No Project"),[fe,De]=D.useState(null),[A,te]=D.useState(null),[W,w]=D.useState(Yo.getDisplayVersion()),_=!1,[Z,ue]=D.useState({}),[ye,pe]=D.useState(null),[Ne,ve]=D.useState(""),[je,mt]=D.useState([]),[Ge,zt]=D.useState(null),[at,pr]=D.useState(Ll),[Qn,ht]=D.useState([]),[mr,Kn]=D.useState(!1),[Yn,Je]=D.useState(null),[Ft,Zt]=D.useState(null),[bl,Xn]=D.useState(null),[qn,sn]=D.useState(!1),[Br,Pe]=D.useState(0),[Tl,Me]=D.useState("Loading project..."),[en,zl]=D.useState(!1),[Vr,Fl]=D.useState(""),[Il,Gn]=D.useState("idle"),[Jn,hr]=D.useState(null),[Vt,an]=D.useState(!1),[It,Ht]=D.useState(()=>Se.get("narrative:viewMode")||"gallery"),Zn=D.useRef(null),yr=D.useRef({selectedRootFolder:null,selectedDay:null}),Hr=D.useCallback(a=>{const g=a.split(/[/\\]/).filter(Boolean);return g[g.length-1]||"Untitled Project"},[]);D.useCallback(async(a,g=800,m=600,v=.65)=>{try{const x=await global.createImageBitmap?.(a);if(x){let{width:C,height:E}=x;const Q=C/E;C>g&&(C=g,E=Math.round(C/Q)),E>m&&(E=m,C=Math.round(E*Q));const M=document.createElement("canvas");M.width=C,M.height=E;const X=M.getContext("2d");if(!X)throw new Error("Canvas is not supported");return X.drawImage(x,0,0,C,E),M.toDataURL("image/jpeg",v)}}catch{}return await new Promise((x,C)=>{const E=new FileReader;E.onload=()=>{typeof E.result=="string"?x(E.result):C(new Error("Failed to read image"))},E.onerror=()=>C(E.error||new Error("Failed to read image")),E.readAsDataURL(a)})},[]);const gr=D.useCallback((a,g)=>{if(!g)return a;const m=new Map;return Object.entries(g).forEach(([v,x])=>{const C=Number.parseInt(v,10);Number.isNaN(C)||x.forEach(E=>m.set(E,C))}),a.map(v=>({...v,day:m.get(v.id)??v.day}))},[]),Wr=D.useCallback(a=>{try{const g=(a.photos||[]).map(m=>m.thumbnail).filter(Boolean);be.current.forEach(m=>{if(m&&!g.includes(m)&&m.startsWith("blob:"))try{URL.revokeObjectURL(m)}catch{}}),be.current=g}catch{}h(a.photos||[]),it(a.projectName||"No Project"),te(a.rootPath||null),pr(a.settings||Ll),ue(a.dayLabels||{}),mt(a.dayContainers||[])},[]),Nn=D.useCallback(a=>{try{const g=Se.get(pt),v=(g?JSON.parse(g):[]).map(X=>({...X,projectId:X.projectId||X.rootPath}));let x=v.findIndex(X=>X.projectId===a.projectId);x===-1&&(x=v.findIndex(X=>X.rootPath===a.rootPath));const E={...x!==-1?v[x]:{},...a},Q=v.filter((X,ge)=>ge!==x),M=[E,...Q].slice(0,20);Se.set(pt,JSON.stringify(M)),ht(M)}catch(g){if(g instanceof Error&&g.name==="QuotaExceededError")try{const m=[merged,...filtered].map((v,x)=>{if(x>=3&&v.coverUrl){const{coverUrl:C,...E}=v;return E}return v}).slice(0,20);Se.set(pt,JSON.stringify(m)),ht(m),ke("Storage limit reached. Kept covers for 3 most recent projects.","info")}catch{try{const v=[merged,...filtered.slice(0,9)].map((x,C)=>{if(C>0&&x.coverUrl){const{coverUrl:E,...Q}=x;return Q}return x});Se.set(pt,JSON.stringify(v)),ht(v),ke("Storage critically low. Removed older project covers.","error")}catch{try{const x=[{...merged,coverUrl:void 0}];Se.set(pt,JSON.stringify(x)),ht(x),ke("Storage full. Reset to current project only.","error")}catch{Se.remove(pt),ht([]),ke("Storage exhausted. Unable to save projects.","error")}}}else ke("Failed to persist recent project updates. Changes may not be saved.","error")}},[]);D.useCallback((a,g)=>{try{const m=Se.get(pt),x=(m?JSON.parse(m):[]).map(E=>({...E,projectId:E.projectId||E.rootPath}));let C=x.findIndex(E=>E.projectId===a);if(C===-1&&(C=x.findIndex(E=>E.rootPath===a)),C!==-1){const E=[...x];E[C]={...E[C],...g},Se.set(pt,JSON.stringify(E)),ht(E)}else console.warn("Project not found for update:",a)}catch(m){if(m instanceof Error&&m.name==="QuotaExceededError")try{const v=normalized.map((x,C)=>{if(C>2&&x.coverUrl){const{coverUrl:E,...Q}=x;return Q}return x});projectIndex!==-1&&(v[projectIndex]={...v[projectIndex],...g}),Se.set(pt,JSON.stringify(v)),ht(v),ke("Storage limit reached. Removed older covers.","info")}catch(v){throw ke("Storage full. Cover photo could not be saved.","error"),v}else ke("Failed to persist recent project updates. Changes may not be saved.","error")}},[]);const Ol=D.useCallback(()=>{const a=[],g={A:"Establishing",B:"People",C:"Culture-Detail",D:"Action-Moment",E:"Transition",M:"Mood-Food"},m={},v=[],x=[];d.forEach(M=>{if(M.archived)v.push(M);else if(M.bucket){const X=M.day;m[X]||(m[X]={}),m[X][M.bucket]||(m[X][M.bucket]=[]),m[X][M.bucket].push(M)}else x.push(M)});const C=at.folderStructure.daysFolder,E=at.folderStructure.archiveFolder;a.push("#!/usr/bin/env bash"),a.push("set -e"),a.push(""),a.push("# Export script with dry-run first, then safe execution with preview and confirmation."),a.push("# Usage: Paste this script into terminal (after cd'ing to your project root)"),a.push("# It will show a preview first, then ask for confirmation before copying any files."),a.push(""),a.push(`DAYS_FOLDER="${C}"`),a.push(`ARCHIVE_FOLDER="${E}"`),a.push('CURRENT_DIR="$(pwd)"'),a.push('TARGET_DAYS_DIR="${CURRENT_DIR}/${DAYS_FOLDER}"'),a.push('TARGET_ARCHIVE_DIR="${CURRENT_DIR}/${ARCHIVE_FOLDER}"'),a.push(""),a.push("# Color codes for output"),a.push("RED='\\033[0;31m'"),a.push("GREEN='\\033[0;32m'"),a.push("YELLOW='\\033[1;33m'"),a.push("BLUE='\\033[0;34m'"),a.push("NC='\\033[0m' # No Color"),a.push(""),a.push('echo "\\${BLUE}\\${NC}"'),a.push('echo "\\${BLUE}       EXPORT SCRIPT - DRY RUN PREVIEW\\${NC}"'),a.push('echo "\\${BLUE}\\${NC}"'),a.push("echo"),a.push('echo "\\${YELLOW}Current directory:\\${NC} \\${CURRENT_DIR}"'),a.push('echo "\\${YELLOW}Target days folder:\\${NC} \\${TARGET_DAYS_DIR}"'),a.push('echo "\\${YELLOW}Target archive folder:\\${NC} \\${TARGET_ARCHIVE_DIR}"'),a.push("echo"),a.push('echo "\\${GREEN}This is a DRY RUN - no files will be copied yet.\\${NC}"'),a.push('echo "\\${GREEN}You will be asked to confirm before any files are moved.\\${NC}"'),a.push("echo"),x.length>0&&(a.push('echo "\\${YELLOW}Root files (\\${NC}'+x.length+'):\\${NC}"'),x.forEach(M=>{M.filePath&&a.push(`echo "  cp \\"${M.filePath}\\"  \\"${M.currentName}\\""`)}),a.push(""));let Q=x.length+v.length;return Object.keys(m).forEach(M=>{Object.keys(m[parseInt(M)]).forEach(X=>{Q+=m[parseInt(M)][X].length})}),a.push('echo "\\${YELLOW}Days with organized photos:\\${NC}"'),Object.keys(m).map(Number).sort((M,X)=>M-X).forEach(M=>{const X=Z[M]||`Day ${String(M).padStart(2,"0")}`,ge=m[M],ce=Object.values(ge).reduce((he,We)=>he+We.length,0);a.push(`echo "  ${X} (${ce} photos)"`),Object.keys(ge).sort().forEach(he=>{const We=g[he]||he,nt=ge[he];a.push(`echo "     ${he}_${We} (${nt.length})"`)})}),v.length>0&&a.push(`echo "  \\${YELLOW}Archive (${v.length})\\${NC}"`),a.push(""),a.push('echo "\\${YELLOW}Total files to copy:\\${NC} '+Q+'"'),a.push("echo"),a.push('echo "\\${YELLOW}\\${NC}"'),a.push('echo "\\${YELLOW}Ready to proceed?\\${NC}"'),a.push('echo "\\${RED}WARNING: This will copy files to your project directory.\\${NC}"'),a.push('echo "\\${YELLOW}\\${NC}"'),a.push("echo"),a.push('read -r -p "\\${YELLOW}Type \\"yes\\" to confirm and copy files (or press Ctrl+C to abort):\\${NC} " confirm'),a.push('if [ "$confirm" != "yes" ]; then'),a.push('  echo "\\${RED}Aborted - no files were copied.\\${NC}"'),a.push("  exit 0"),a.push("fi"),a.push(""),a.push('echo "\\${GREEN}\\${NC}"'),a.push('echo "\\${GREEN}Starting file copy operation...\\${NC}"'),a.push('echo "\\${GREEN}\\${NC}"'),a.push("echo"),x.length>0&&(x.forEach(M=>{M.filePath&&a.push(`if [ -e "${M.currentName}" ]; then echo "Skipping existing: ${M.currentName}"; else cp "${M.filePath}" "${M.currentName}"; fi`)}),a.push("")),a.push('mkdir -p "${DAYS_FOLDER}"'),Object.keys(m).map(Number).sort((M,X)=>M-X).forEach(M=>{const X=Z[M]||`Day ${String(M).padStart(2,"0")}`,ge=`${C}/${X}`,ce=m[M];Object.keys(ce).sort().forEach(he=>{const We=g[he]||he,nt=`${ge}/${he}_${We}`,Zo=ce[he];a.push(`mkdir -p "${nt}"`),Zo.forEach(dn=>{dn.filePath&&a.push(`if [ -e "${nt}/${dn.currentName}" ]; then echo "Skipping existing: ${nt}/${dn.currentName}"; else cp "${dn.filePath}" "${nt}/${dn.currentName}"; fi`)})})}),v.length>0&&(a.push('mkdir -p "${ARCHIVE_FOLDER}"'),v.forEach(M=>{M.filePath&&a.push(`if [ -e "${E}/${M.currentName}" ]; then echo "Skipping existing: ${E}/${M.currentName}"; else cp "${M.filePath}" "${E}/${M.currentName}"; fi`)})),a.push(""),a.push('echo "\\${GREEN}\\${NC}"'),a.push('echo "\\${GREEN} Copy operation complete!\\${NC}"'),a.push('echo "\\${GREEN}\\${NC}"'),a.join(`
`)},[d,Z,at]),ke=D.useCallback((a,g="info")=>{hr({message:a,tone:g}),Zn.current&&window.clearTimeout(Zn.current),Zn.current=window.setTimeout(()=>{hr(null),Zn.current=null},2500)},[]),Qr=D.useCallback(async()=>{if(!fe)return;if(y.size===0){ke("Select a photo to set as cover.");return}if(y.size>1){ke("Select a single photo to set as cover.");return}const a=Array.from(y)[0];await un(a)},[d,fe,y,ke]),un=D.useCallback(async a=>{if(!fe)return;const g=d.find(m=>m.id===a);if(!g){ke("Selected photo is no longer available.","error");return}try{let m;if(g.fileHandle)m=await g.fileHandle.getFile();else if(g.thumbnail)m=await(await fetch(g.thumbnail)).blob();else{ke("Cannot create cover from this photo.","error");return}const v=m,x=`original (${(v.size/1024).toFixed(1)}KB)`;await Lf(10);const C=await Cf(fe,v,0,0),E=Se.get(pt),M=(E?JSON.parse(E):[]).map(ce=>({...ce,projectId:ce.projectId||ce.rootPath}));let X=M.findIndex(ce=>ce.projectId===fe);X===-1&&(X=M.findIndex(ce=>ce.rootPath===fe));const ge=M.map((ce,he)=>he===X?{...ce,coverKey:C,lastOpened:Date.now()}:ce);X===-1&&ge.unshift({projectName:Ve||"Untitled Project",projectId:fe,rootPath:A||fe,lastOpened:Date.now(),totalPhotos:d.length,coverKey:C}),Se.set(pt,JSON.stringify(ge.slice(0,20))),ht(ge.slice(0,20)),console.log(`Cover saved to IndexedDB (${x}):`,fe),ke("Cover photo updated.")}catch(m){console.error("Failed to set cover photo:",m),ke("Failed to set cover photo.","error")}},[d,fe,Ve,A,ke]),Kr=D.useCallback((a,g)=>{const m=new Map;return g.forEach(v=>m.set(v.folder,v)),a.map(v=>{if(!v.filePath)return v;const x=v.filePath.split("/");if(x.length>1){const M=x[1].match(/^D(\d{1,2})/i);if(M){const X=parseInt(M[1],10);if(!Number.isNaN(X))return{...v,day:X}}}const C=x[0],E=m.get(C);return E&&E.detectedDay!=null&&!E.skip?{...v,day:E.detectedDay}:{...v,day:null}})},[]),jn=D.useCallback((a,g)=>{const m=new Map;return g.forEach((v,x)=>{const C=Qf(v);C!=null&&m.set(v,C)}),a.map(v=>{if(!v.filePath)return v;const x=v.filePath.split("/"),C=x[0],E=m.get(C);if(E!=null)return{...v,day:E};if(x.length>1){const M=x[1].match(/^D(\d{1,2})/i);if(M){const X=parseInt(M[1],10);if(!Number.isNaN(X))return{...v,day:X}}}return v})},[]),yt=D.useCallback(async(a,g)=>{sn(!0),Pe(0),Me("Loading project..."),Je(null);try{Pe(25),Me("Reading project data...");const m=await Ec(a);Pe(50),Me("Processing photos...");const v=jn(m.photos,m.dayContainers||[]),x={...m,photos:v};if(Pe(75),Me("Initializing view..."),Wr(x),De(a),T(!1),de(!1),Se.set(Vn,a),Pe(90),g?.addRecent!==!1){const C=Se.get(pt),Q=(C?JSON.parse(C):[]).map(ge=>({...ge,projectId:ge.projectId||ge.rootPath}));let M=Q.find(ge=>ge.projectId===a);M||(M=Q.find(ge=>ge.rootPath===a));const X=M?.coverUrl;Nn({projectName:m.projectName||"Untitled Project",projectId:a,rootPath:m.rootPath||"Unknown location",lastOpened:Date.now(),totalPhotos:m.photos?.length||0,...X&&{coverUrl:X}})}Pe(100),Zt(null)}catch(m){const v=m instanceof Error?m.message:"Failed to load project";console.error("Failed to load project:",m),Je(v),(v.includes("access")&&!v.includes("no longer available")||v.includes("permission")||v.includes("granted"))&&Zt(a),ke(v,"error"),Se.remove(Vn),de(!0)}finally{sn(!1),Pe(0)}},[Ec,jn,Wr,ke,Nn]),vr=D.useCallback(async()=>{if(Ft){sn(!0),Pe(0),Me("Requesting folder access..."),Je(null);try{const a=await Qo(Ft);if(a){if(Pe(25),Me("Re-requesting permissions..."),await a.requestPermission({mode:"read"})==="granted"){Pe(50),Me("Loading project..."),await yt(Ft,{addRecent:!1}),Zt(null);return}}else throw new Error("Project folder access is no longer available. Please reselect the folder from the start screen.");throw new Error("Folder access was not granted.")}catch(a){const g=a instanceof Error?a.message:"Failed to retry permission";console.error("Failed to retry permission:",a),Je(g),ke(g,"error"),de(!0),Zt(null)}finally{sn(!1),Pe(0)}}},[Ft,yt,ke]);D.useEffect(()=>{(async()=>{try{const g=await Yo.getCurrentVersion();w(`v${g}`)}catch{}})()},[_]),D.useEffect(()=>{try{const m=Se.get(pt);if(m)try{const v=JSON.parse(m),x=Array.isArray(v)?v.map(Q=>({...Q,projectId:Q.projectId||Q.rootPath})):[],C=new Map;x.forEach(Q=>{Q.projectId&&!C.has(Q.projectId)&&C.set(Q.projectId,Q)});const E=Array.from(C.values());JSON.stringify(E)!==JSON.stringify(v)&&Se.set(pt,JSON.stringify(E)),console.log("Loaded recent projects:",E.map(Q=>({id:Q.projectId,cover:Q.coverUrl?"has cover":"no cover"}))),ht(E)}catch(v){console.warn("Failed to parse recent projects from storage",v),ht([])}}catch{ht([])}const a=Se.get(Vn),g=typeof globalThis<"u"&&(globalThis.vitest||globalThis.__APP_VERSION__==="0.0.0");a&&(g||"showDirectoryPicker"in window)?g?(yt(a,{addRecent:!1}),de(!1)):(async()=>{try{await Qo(a)&&(Zt(a),Je('Project needs permission to access its folder. Click "Try Again" to grant access.')),de(!0)}catch(m){console.warn("Error checking stored handle on startup:",m),de(!0)}})():de(!0)},[yt]),D.useEffect(()=>{Se.set("narrative:viewMode",It)},[It]);const _t=wn.useMemo(()=>{const a=new Map;return d.forEach(g=>{g.day&&(a.has(g.day)||a.set(g.day,[]),a.get(g.day).push(g))}),Array.from(a.entries()).sort((g,m)=>g[0]-m[0])},[d]),Ml=wn.useMemo(()=>_t.filter(([a])=>Z[a]!=null),[_t,Z]),$l=/^(?:day|d)[\s_-]?(\d{1,2})/i,kn=D.useCallback((a,g)=>{const m=(je||[]).includes(a),v=g.some(ce=>ce.day!==null),x=g.some(ce=>{const he=(ce.filePath||ce.originalName||"").split("/");return he.length>1&&/^D\d{1,2}/i.test(he[1])}),C=_t.some(([ce])=>(Z[ce]||`Day ${String(ce).padStart(2,"0")}`)===a),E=a===at?.folderStructure?.daysFolder,Q=$l.test(a)||a.toLowerCase().startsWith("day"),M=v||x||C||E||Q;let X=null;if(v){const ce={};g.forEach(he=>{he.day!=null&&(ce[he.day]=(ce[he.day]||0)+1)}),Object.keys(ce).length&&(X=Number(Object.entries(ce).sort((he,We)=>We[1]-he[1])[0][0]))}if(X==null){const ce=a.match($l);if(ce){const he=parseInt(ce[1],10);Number.isNaN(he)||(X=he)}}const ge=X!=null?Z[X]||`Day ${String(X).padStart(2,"0")}`:a;return{isSelected:m,isDayLike:M,dayNumber:X,displayName:ge}},[je,Z,_t,at]),cn=D.useCallback(a=>{const g=a.map(([C,E])=>{const Q=kn(C,E);return{folder:C,items:E,...Q}}),m=g.filter(C=>C.isSelected),v=g.filter(C=>!C.isSelected&&!C.isDayLike),x=g.filter(C=>!C.isSelected&&C.isDayLike);return m.sort((C,E)=>(C.dayNumber??999)-(E.dayNumber??999)),v.sort((C,E)=>C.folder.localeCompare(E.folder)),x.sort((C,E)=>C.folder.localeCompare(E.folder)),{selected:m,nonDay:v,dayLike:x}},[kn]),Rt=wn.useMemo(()=>{const a=new Map;for(const g of d){if(g.archived)continue;const m=(g.filePath||g.originalName||"").split("/"),v=m.length>1?m[0]:"(root)";a.has(v)||a.set(v,[]),a.get(v).push(g)}return Array.from(a.entries()).sort((g,m)=>g[0].localeCompare(m[0]))},[d]),Al=wn.useMemo(()=>{new Set(_t.map(([m])=>Z[m]||`Day ${String(m).padStart(2,"0")}`)),at?.folderStructure?.daysFolder;const a=new Set;for(const m of d){const v=(m.filePath||m.originalName||"").split("/");v.length>1&&/^D\d{2}/i.test(v[1])&&a.add(v[0])}const g=new Map(Rt);return(je||[]).forEach(m=>{g.has(m)||g.set(m,[])}),Array.from(g.entries())},[Rt,_t,Z,at]);wn.useEffect(()=>{},[_,_t,Rt,je,at,Z,d,kn]);const He=wn.useMemo(()=>{switch(u){case"days":return G!==null?d.filter(a=>!a.archived&&a.day===G):d.filter(a=>a.day!==null&&!a.archived);case"folders":return Ge!==null?d.filter(a=>{if(a.archived)return!1;const g=(a.filePath||a.originalName||"").split("/");return(g.length>1?g[0]:"(root)")===Ge}):G!==null?d.filter(a=>!a.archived&&a.day===G):[];case"root":return Ge!==null?d.filter(a=>!a.archived&&((a.filePath||a.originalName).split("/")[0]||"(root)")===Ge):[];case"favorites":return d.filter(a=>a.favorite&&!a.archived);case"archive":return d.filter(a=>a.archived);case"review":return d.filter(a=>a.bucket&&!a.archived);default:return d}},[d,u,G,Ge,je,at]);D.useEffect(()=>{if(fe&&d.length>0&&Ge===null&&G===null&&u==="folders"){const a=Rt[0]?.[0];a&&zt(a)}},[fe,d.length,Ge,G,u,Rt]);const xt=D.useCallback(a=>{if(!fe)return;Cc(fe,{projectName:Ve,rootPath:A||fe,photos:a??d,settings:at,dayLabels:Z}).catch(()=>{})},[fe,Ve,A,d,at,Z]),Wt=D.useCallback(a=>{const g=d.map(x=>({id:x.id,filePath:x.filePath,day:x.day,bucket:x.bucket,sequence:x.sequence,favorite:x.favorite,rating:x.rating,archived:x.archived,currentName:x.currentName,originalName:x.originalName,timestamp:x.timestamp})),m=le.slice(0,Ee+1);m.push(g);const v=m.slice(-30);ae(v),Ue(v.length-1);try{const x=a.map(C=>C.thumbnail).filter(Boolean);be.current.forEach(C=>{if(C&&!x.includes(C)&&C.startsWith("blob:"))try{URL.revokeObjectURL(C)}catch{}}),be.current=x}catch{}h(a),xt(a)},[le,Ee,d,xt]),er=D.useCallback((a,g,m=null)=>{const v=Array.isArray(a)?a:[a],x={},C=d.map(E=>{if(v.includes(E.id)){const Q=m||E.day||G||Math.ceil(new Date(E.timestamp).getDate()/1),M=`${Q}_${g}`,X=d.filter(he=>he.day===Q&&he.bucket===g).length,ge=(x[M]||X)+1;x[M]=ge;const ce=g==="X"?E.originalName:`D${String(Q).padStart(2,"0")}_${g}_${String(ge).padStart(3,"0")}__${E.originalName}`;return{...E,bucket:g,day:Q,sequence:ge,currentName:ce,archived:g==="X"}}return E});Wt(C)},[d,Wt,G]),Yr=D.useCallback(a=>{const g=Array.isArray(a)?a:[a],m=d.map(v=>g.includes(v.id)?{...v,day:null}:v);Wt(m)},[d,Wt]),Xr=D.useCallback(a=>{const g=Array.isArray(a)?a:[a],m=d.map(v=>g.includes(v.id)?{...v,favorite:!v.favorite}:v);Wt(m)},[d,Wt]),qr=D.useCallback(()=>{if(Ee>0){const a=le[Ee-1],g=d.map(m=>{const v=a.find(x=>x.id===m.id);return v?{...m,...v}:m});Ue(Ee-1),h(g),xt(g)}},[le,Ee,xt]),ze=D.useCallback(()=>{if(Ee<le.length-1){const a=le[Ee+1],g=d.map(m=>{const v=a.find(x=>x.id===m.id);return v?{...m,...v}:m});Ue(Ee+1),h(g),xt(g)}},[le,Ee,xt]),Ul=D.useCallback(async(a,g)=>{sn(!0),Pe(0),Me("Initializing project..."),Je(null);try{if(g){Pe(25),Me("Saving folder access..."),await Ui(g,a.dirHandle),Pe(50),Me("Loading project..."),yt(g);return}Pe(5),Me("Requesting folder access...");const m=await dp({dirHandle:a.dirHandle,projectName:a.projectName,rootLabel:a.rootPath,onProgress:(M,X)=>{const ge=5+M*.789;Pe(ge),Me(X)}});Pe(80),Me("Processing photo organization...");const v=a.mappings?.length?Kr(m.photos,a.mappings):gr(m.photos,m.suggestedDays),x=(a.mappings||[]).filter(M=>!M.skip).map(M=>M.folder),C=a.projectName?.trim()||Hr(a.rootPath);let E,Q;if(g){E=g,Pe(80),Me("Loading existing project data...");const M=Se.get(`${STATE_PREFIX}${g}`),X=M?JSON.parse(M):{},ge=await Vi(a.dirHandle);let ce=ge;if(X.edits){const he=new Map;X.edits.forEach(We=>{We?.filePath&&he.set(We.filePath,We)}),ce=ge.map(We=>{const nt=We.filePath?he.get(We.filePath):null;return nt?{...We,day:nt.day,bucket:nt.bucket,sequence:nt.sequence,favorite:nt.favorite,rating:nt.rating,archived:nt.archived,currentName:nt.currentName}:We})}Q={projectName:X.projectName||C,rootPath:a.rootPath||a.dirHandle.name,photos:ce,settings:X.settings||Ll,dayContainers:X.dayContainers||x,dayLabels:X.dayLabels,lastModified:Date.now()}}else{E=m.projectId;const M=a.mappings?.length?Kr(m.photos,a.mappings):gr(m.photos,m.suggestedDays);Q={projectName:C,rootPath:a.rootPath||a.dirHandle.name,photos:M,settings:Ll,dayContainers:x}}Pe(90),Me("Saving project state..."),h(v),it(C),De(E),te(a.rootPath||a.dirHandle.name),pr(Ll),ae([]),Ue(-1),k(new Set),L(null),H(null),$.current=null,se(null),zt(null),P("folders"),T(!1),de(!1),Se.set(Vn,E),Pe(95),Me("Updating recent projects..."),Nn({projectName:C,projectId:E,rootPath:a.rootPath||a.dirHandle.name,lastOpened:Date.now(),totalPhotos:v.length}),Pe(98),Me("Finalizing project..."),await Cc(E,Q),de(!1),Pe(100),Zt(null)}catch(m){Je(m instanceof Error?m.message:"Failed to initialize project"),T(!0),de(!0)}finally{sn(!1),Pe(0)}},[Kr,gr,Hr,Nn,_]);D.useEffect(()=>{const a=g=>{const m=g.target;if(ee||Te||en||m&&(m.tagName==="INPUT"||m.tagName==="TEXTAREA"||m.tagName==="SELECT"||m.isContentEditable))return;if(oe){(g.key==="Escape"||g.key==="?")&&_e(!1);return}if(Vt&&g.key==="Escape"){an(!1),ke("Cover selection cancelled.");return}if(g.key==="?"){_e(!0);return}const v=z||(y.size===1?Array.from(y)[0]:null);if(!v)return;if(g.key.toLowerCase()==="f"&&!g.shiftKey&&!g.metaKey&&!g.ctrlKey&&!g.altKey){const E=y.size>0?Array.from(y):[v];Xr(E);return}let x=g.key.toUpperCase();const C=Dl.find(E=>E.key===x);if(C&&C.key!=="F"){const E=y.size>0?Array.from(y):[v];er(E,C.key);const Q=He.findIndex(M=>M.id===v);if(Q<He.length-1){const M=He[Q+1].id;L(M),k(new Set([M])),H(Q+1),$.current=Q+1}return}if(g.key==="ArrowRight"){const E=He.findIndex(Q=>Q.id===v);if(E<He.length-1){const Q=He[E+1].id;L(Q),k(new Set([Q])),H(E+1)}}else if(g.key==="ArrowLeft"){const E=He.findIndex(Q=>Q.id===v);if(E>0){const Q=He[E-1].id;L(Q),k(new Set([Q])),H(E-1),$.current=E-1}}else g.key==="Enter"||g.key===" "?(g.preventDefault(),B(v)):g.key==="Escape"?O?B(null):(k(new Set),L(null),H(null),$.current=null):g.key==="z"&&(g.metaKey||g.ctrlKey)&&(g.preventDefault(),g.shiftKey?ze():qr())};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[y,z,He,er,Yr,Xr,qr,ze,oe,O,ee,Te,en,Vt]);const Qt=wn.useMemo(()=>({total:d.length,sorted:d.filter(a=>a.bucket&&!a.archived).length,unsorted:d.filter(a=>!a.bucket&&!a.archived).length,archived:d.filter(a=>a.archived).length,favorites:d.filter(a=>a.favorite).length,root:d.filter(a=>a.day===null&&!a.archived).length}),[d]),Bl=D.useCallback(async(a,g,m)=>{if(a.shiftKey&&$.current!==null&&$.current!==void 0){const v=Math.min($.current,m),x=Math.max($.current,m),C=He.slice(v,x+1).map(E=>E.id);k(new Set(C)),L(g),H(m),$.current=m;return}if(a.metaKey||a.ctrlKey){const v=new Set(y);v.has(g)?v.delete(g):v.add(g),k(v),L(g),H(m),$.current=m;return}k(new Set([g])),L(g),H(m),$.current=m,Vt&&(await un(g),an(!1))},[y,U,He,Vt,un]);return s.jsxs("div",{className:"h-screen flex flex-col bg-gray-950 text-gray-100",children:[!ee&&s.jsxs("header",{className:"border-b border-gray-800 bg-gray-900",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-3",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:"/Narrative/assets/Narrative_icon.png",alt:"Narrative",className:"w-8 h-8 rounded"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-lg font-semibold text-gray-100",children:Ve}),s.jsxs("p",{className:"text-xs text-gray-400",children:[Qt.sorted," sorted  ",Qt.root," root  ",Qt.favorites," favorites"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:W}),s.jsx("button",{onClick:()=>{Kn(!1),T(!1),Je(null),de(!0),Se.remove(Vn)},className:"px-3 py-1 bg-gray-800 hover:bg-gray-700 rounded text-sm font-medium",title:"Back to the main menu",children:"Main Menu"}),fe&&s.jsx("button",{onClick:()=>{an(!0),ke("Select a photo to set as cover. Click a photo to set, or press Esc to cancel.","info")},className:`px-3 py-1 rounded text-sm font-medium ${Vt?"bg-yellow-200 text-yellow-900":"bg-gray-800 hover:bg-gray-700 text-gray-100"}`,title:"Set cover from selected photo",children:Vt?"Selecting":"Set Cover"}),Vt&&s.jsxs("div",{className:"px-3 py-1 bg-yellow-50 text-yellow-900 rounded text-sm flex items-center gap-3",children:[s.jsx("span",{children:"Select a photo to set as cover"}),y.size===1&&s.jsx("button",{onClick:async()=>{await Qr(),an(!1)},className:"underline",children:"Use selection"}),s.jsx("button",{onClick:()=>{an(!1),ke("Cover selection cancelled.")},className:"underline",children:"Cancel"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>Kn(a=>!a),className:"px-3 py-1 bg-gray-800 hover:bg-gray-700 rounded text-sm font-medium flex items-center gap-1",title:"Open recent projects","aria-expanded":mr,children:["Projects",s.jsx(Ff,{className:"w-4 h-4"})]}),mr&&s.jsxs("div",{className:"absolute right-0 mt-2 w-72 rounded-lg border border-gray-800 bg-gray-900 shadow-xl z-20",children:[s.jsx("div",{className:"px-3 py-2 text-xs uppercase tracking-wide text-gray-400 border-b border-gray-800",children:"Recent Projects"}),Qn.length===0?s.jsx("div",{className:"px-3 py-3 text-sm text-gray-400",children:"No recent projects yet."}):s.jsx("div",{className:"max-h-64 overflow-y-auto",children:Qn.map(a=>s.jsxs("button",{onClick:()=>{Kn(!1),yt(a.projectId)},className:"w-full text-left px-3 py-2 hover:bg-gray-800",children:[s.jsx("div",{className:"text-sm text-gray-100",children:a.projectName}),s.jsx("div",{className:"text-xs text-gray-500 truncate",children:a.rootPath})]},a.projectId))}),s.jsx("div",{className:"border-t border-gray-800",children:s.jsx("button",{onClick:()=>{Kn(!1),T(!0)},className:"w-full text-left px-3 py-2 text-sm text-blue-300 hover:bg-gray-800",children:"Open Project"})})]})]}),fe&&s.jsx("button",{onClick:async()=>{if(!(!fe||!window.confirm(`Delete project '${Ve}'? This will remove local state and stored folder access. This cannot be undone.`))){try{await fp(fe)}catch{ke("Failed to delete project.","error");return}try{const g=Se.get(pt),v=(g?JSON.parse(g):[]).filter(x=>x.projectId!==fe);Se.set(pt,JSON.stringify(v)),ht(v)}catch{}Se.remove(Vn),h([]),De(null),it("No Project"),de(!0),ke("Project deleted.")}},className:"px-3 py-1 bg-red-700 hover:bg-red-800 rounded text-sm font-medium",title:"Delete project",children:"Delete"}),s.jsxs("button",{onClick:()=>{Je(null),T(!0)},className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm font-medium flex items-center gap-1",title:"Import existing trip folder",disabled:qn,children:[qn?s.jsx(Ko,{className:"w-4 h-4 animate-spin"}):s.jsx(Mf,{className:"w-4 h-4"}),"Import Trip"]}),s.jsx("button",{onClick:()=>{Fl(Ol()),Gn("idle"),zl(!0)},className:"px-3 py-1 bg-gray-800 hover:bg-gray-700 rounded text-sm font-medium",title:"Export rename script",disabled:d.length===0,children:"Export Script"}),s.jsx("button",{onClick:qr,disabled:Ee<=0,className:"p-2 hover:bg-gray-800 rounded disabled:opacity-30",title:"Undo (Cmd+Z)",children:s.jsx(Uf,{className:"w-4 h-4"})}),s.jsx("button",{onClick:ze,disabled:Ee>=le.length-1,className:"p-2 hover:bg-gray-800 rounded disabled:opacity-30",title:"Redo (Cmd+Shift+Z)",children:s.jsx(Af,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>_e(!0),className:"p-2 hover:bg-gray-800 rounded",title:"Show shortcuts (?)",children:"?"})]})]}),s.jsx("div",{className:"flex items-center gap-3 px-6 py-2",children:(()=>{const a=en?"export":u==="review"?"review":"organize",g=a==="export"?3:a==="review"?2:1,m=["Import","Organize","Review","Export"];return s.jsx("nav",{"aria-label":"Progress",className:"flex items-center w-full",children:m.map((v,x)=>s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsxs("div",{className:"flex flex-col items-center w-full",children:[s.jsx("div",{"aria-hidden":"true",className:`w-6 h-6 flex items-center justify-center rounded-full text-xs font-bold ${x<g?"bg-green-600 text-white":x===g?"bg-blue-700 text-white":"border border-gray-700 text-gray-400 bg-transparent"}`,children:x+1}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:v})]}),x<m.length-1&&s.jsx("div",{"aria-hidden":"true",className:"flex-1 h-px bg-gray-800 mx-3"})]},v))})})()}),s.jsx("div",{className:"flex gap-1 px-6 pb-2",children:[{id:"folders",label:"Folders",count:Qt.root},{id:"favorites",label:"Favorites",count:Qt.favorites},{id:"archive",label:"Archive",count:Qt.archived},{id:"review",label:"Review",count:Qt.sorted}].map(a=>s.jsxs("button",{onClick:()=>{u==="folders"&&(yr.current={selectedRootFolder:Ge,selectedDay:G}),P(a.id),a.id==="folders"?(zt(yr.current.selectedRootFolder),se(yr.current.selectedDay)):se(null)},className:`px-4 py-2 rounded-t text-sm font-medium transition-colors ${u===a.id?"bg-gray-950 text-blue-400":"text-gray-400 hover:text-gray-200"}`,children:[a.label," ",a.count>0&&s.jsxs("span",{className:"text-xs opacity-60",children:["(",a.count,")"]})]},a.id))}),s.jsxs("div",{className:"flex gap-2 px-6 pb-3",children:[s.jsx("button",{onClick:()=>Ht("gallery"),disabled:He.length===0,className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${He.length===0?"bg-gray-800 text-gray-500 cursor-not-allowed opacity-50":It==="gallery"?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:"Gallery"}),s.jsx("button",{onClick:()=>{if(He.length>0&&(Ht("inspect"),!z||!He.find(a=>a.id===z))){const a=He[0];a&&(L(a.id),k(new Set([a.id])))}},disabled:He.length===0,className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${He.length===0?"bg-gray-800 text-gray-500 cursor-not-allowed opacity-50":It==="inspect"?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:"Inspect"})]}),Yn&&s.jsx("div",{className:"mx-6 mb-3 rounded-lg border border-red-800 bg-red-950/60 px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-red-200",children:Yn}),Ft&&s.jsx("button",{onClick:vr,className:"ml-3 px-3 py-1 bg-red-700 hover:bg-red-600 text-white text-xs rounded transition-colors",children:"Try Again"})]})})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[u==="days"&&s.jsx("aside",{className:"w-48 border-r border-gray-800 bg-gray-900 overflow-y-auto",children:s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase mb-3",children:"Days"}),s.jsx("div",{className:"space-y-1",children:Ml.map(([a,g],m)=>s.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{zt(null),se(a)},onKeyDown:v=>{v.key==="Enter"&&(zt(null),se(a))},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${G===a?"bg-blue-600 text-white":"hover:bg-gray-800 text-gray-300"}`,children:[s.jsx("div",{className:"flex items-center justify-between",children:ye===a?s.jsxs("div",{className:"flex items-center gap-2 w-full",children:[s.jsx("input",{value:Ne,onChange:v=>ve(v.target.value),className:"w-full px-2 py-1 rounded bg-gray-800 text-sm text-gray-100"}),s.jsx("button",{onClick:v=>{v.stopPropagation(),ue(x=>({...x,[a]:Ne})),xt(d),pe(null)},className:"p-1 bg-green-600 rounded","aria-label":"Save day name",children:s.jsx(Mi,{className:"w-4 h-4"})}),s.jsx("button",{onClick:v=>{v.stopPropagation(),pe(null)},className:"p-1 bg-gray-800 rounded","aria-label":"Cancel",children:s.jsx(Hn,{className:"w-4 h-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"font-medium",children:Z[a]||`Day ${String(a).padStart(2,"0")}`}),s.jsx("button",{onClick:v=>{v.stopPropagation(),pe(a),ve(Z[a]||`Day ${String(a).padStart(2,"0")}`)},className:"p-1 ml-2","aria-label":`Edit day ${a}`,children:s.jsx(Oi,{className:"w-4 h-4 text-gray-400"})})]})}),s.jsxs("div",{className:"text-xs opacity-70",children:[g.length," photos"]})]},a))})]})}),u==="folders"&&s.jsx("aside",{className:"w-48 border-r border-gray-800 bg-gray-900 overflow-y-auto",children:s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase mb-3",children:"Days"}),s.jsx("div",{className:"space-y-1 mb-4",children:(()=>{const a=new Map;Ml.forEach(([x,C])=>{a.set(x,{dayNumber:x,photos:C,folderName:null})});const g=je||[];g.forEach(x=>{const C=Rt.find(([Q])=>Q===x)?.[1]||[],E=kn(x,C);E.dayNumber!==null&&!a.has(E.dayNumber)&&a.set(E.dayNumber,{dayNumber:E.dayNumber,photos:C,folderName:x})}),Rt.forEach(([x,C])=>{const E=kn(x,C);if(E.isDayLike&&E.dayNumber!==null&&!a.has(E.dayNumber)){const Q=C.filter(M=>M.day===E.dayNumber||M.day===null);a.set(E.dayNumber,{dayNumber:E.dayNumber,photos:Q,folderName:x})}});const m=Array.from(a.values()).sort((x,C)=>x.dayNumber-C.dayNumber),v=g.filter(x=>{const C=Rt.find(([Q])=>Q===x)?.[1]||[];return kn(x,C).dayNumber===null});return s.jsxs(s.Fragment,{children:[m.map(x=>s.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{zt(null),se(x.dayNumber)},onKeyDown:C=>{C.key==="Enter"&&(zt(null),se(x.dayNumber))},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${G===x.dayNumber?"bg-blue-600 text-white":"hover:bg-gray-800 text-gray-300"}`,children:[s.jsx("div",{className:"flex items-center justify-between",children:ye===x.dayNumber?s.jsxs("div",{className:"flex items-center gap-2 w-full",children:[s.jsx("input",{value:Ne,onChange:C=>ve(C.target.value),className:"w-full px-2 py-1 rounded bg-gray-800 text-sm text-gray-100"}),s.jsx("button",{onClick:C=>{C.stopPropagation(),ue(E=>({...E,[x.dayNumber]:Ne})),xt(d),pe(null)},className:"p-1 bg-green-600 rounded","aria-label":"Save day name",children:s.jsx(Mi,{className:"w-4 h-4"})}),s.jsx("button",{onClick:C=>{C.stopPropagation(),pe(null)},className:"p-1 bg-gray-800 rounded","aria-label":"Cancel",children:s.jsx(Hn,{className:"w-4 h-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"font-medium",children:Z[x.dayNumber]||`Day ${String(x.dayNumber).padStart(2,"0")}`}),s.jsx("button",{onClick:C=>{C.stopPropagation(),pe(x.dayNumber),ve(Z[x.dayNumber]||`Day ${String(x.dayNumber).padStart(2,"0")}`)},className:"p-1 ml-2","aria-label":`Edit day ${x.dayNumber}`,children:s.jsx(Oi,{className:"w-4 h-4 text-gray-400"})})]})}),s.jsxs("div",{className:"text-xs opacity-70",children:[x.photos.length," photos"]})]},`day-${x.dayNumber}`)),v.map(x=>s.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{zt(x),se(null)},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${Ge===x?"bg-blue-600 text-white":"hover:bg-gray-800 text-gray-300"}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"font-medium",children:x}),s.jsx("div",{className:"text-xs px-2 py-0.5 rounded bg-gray-700 text-gray-300",children:"Container"})]}),s.jsxs("div",{className:"text-xs opacity-70",children:[Rt.find(([C])=>C===x)?.[1].length||0," ","photos"]})]},`container-${x}`))]})})()}),s.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase mb-3",children:"Other"}),s.jsx("div",{className:"space-y-1",children:(()=>{const{selected:a,nonDay:g,dayLike:m}=cn(Al),v=g;return s.jsxs(s.Fragment,{children:[v.map(x=>s.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{zt(x.folder),se(null)},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${Ge===x.folder?"bg-blue-600 text-white":"hover:bg-gray-800 text-gray-300"}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"font-medium",children:x.folder}),s.jsx("div",{className:"flex gap-2"})]}),s.jsxs("div",{className:"text-xs opacity-70",children:[x.items.length," photos (",x.items.filter(C=>C.day===null).length," ","unsorted)"]})]},x.folder)),v.length===0&&s.jsx("div",{className:"text-xs text-gray-400",children:"No other folders"})]})})()})]})}),s.jsx("main",{className:"flex-1 overflow-y-auto",children:s.jsx("div",{className:"p-6",children:qn?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ko,{className:"w-12 h-12 mx-auto mb-4 animate-spin text-blue-400"}),s.jsx("p",{className:"text-gray-400",children:"Loading project..."})]})}):u==="days"&&G===null?s.jsx("div",{className:"flex items-center justify-center h-96 text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(zf,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Select a day to view photos"})]})}):u==="folders"&&Ge===null&&G===null?s.jsx("div",{className:"flex items-center justify-center h-96 text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx($i,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Select a folder to view photos"})]})}):(()=>{const a=u==="folders"&&Ge?(Rt.find(m=>m[0]===Ge)?.[1]||[]).filter(m=>!m.archived):null,g=a!==null?a:He;if(g.length===0)return s.jsx("div",{className:"flex items-center justify-center h-96 text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx($i,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No photos in this view"})]})});if(It==="inspect"&&z){const m=g.find(v=>v.id===z);if(m)return s.jsx(Zf,{photo:m,filteredPhotos:g,onClose:()=>{Ht("gallery"),z&&!g.find(v=>v.id===z)&&(L(null),k(new Set))},onNavigate:v=>{L(v),k(new Set([v]))},onToggleFavorite:v=>{h(x=>x.map(C=>C.id===v?{...C,favorite:!C.favorite}:C)),xt(d.map(x=>x.id===v?{...x,favorite:!x.favorite}:x))},onAssignBucket:(v,x)=>{let C=null;if(x==="X"&&z===v){const E=g.findIndex(Q=>Q.id===v);if(E!==-1)if(E<g.length-1)C=g[E+1].id;else if(E>0)C=g[E-1].id;else{Ht("gallery"),L(null);return}}er(v,x),C&&(L(C),k(new Set([C])))},onAssignDay:(v,x)=>{h(C=>C.map(E=>E.id===v?{...E,day:x}:E)),xt(d.map(C=>C.id===v?{...C,day:x}:C))},selectedBucket:m.bucket,selectedDay:m.day,buckets:Dl,dayLabels:Z})}return s.jsx("div",{className:"grid grid-cols-4 gap-4",children:g.map((m,v)=>s.jsxs("div",{onClick:x=>Bl(x,m.id,v),"data-testid":`photo-${m.id}`,className:`relative group cursor-pointer rounded-lg overflow-hidden transition-all ${y.has(m.id)?"ring-4 ring-blue-500 scale-105":!m.bucket&&!m.archived?"ring-2 ring-blue-400/40 hover:ring-blue-400/70":"hover:ring-2 hover:ring-gray-600"} ${m.bucket||m.archived?"opacity-60 saturate-50":""}`,children:[m.thumbnail?m.mimeType?.startsWith("video/")?s.jsx("video",{src:m.thumbnail,className:"w-full aspect-[4/3] object-cover",muted:!0,preload:"metadata"}):s.jsx("img",{src:m.thumbnail,alt:m.currentName,className:"w-full aspect-[4/3] object-cover"}):s.jsx("div",{className:"w-full aspect-[4/3] bg-gray-900 flex items-center justify-center text-xs text-gray-400 px-2 text-center",children:m.currentName}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:s.jsx("p",{className:"text-xs font-mono truncate",children:m.currentName})})}),m.bucket&&s.jsx("div",{className:`absolute top-2 left-2 px-2 py-1 rounded text-xs font-bold ${Dl.find(x=>x.key===m.bucket)?.color} text-white shadow-lg`,children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{children:m.bucket}),m.favorite&&s.jsx(Ai,{className:"w-3.5 h-3.5 fill-current"})]})})]},m.id))})})()})}),y.size>0&&!O&&s.jsx("aside",{className:"w-80 border-l border-gray-800 bg-gray-900 overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"mb-6",children:y.size===1?s.jsxs(s.Fragment,{children:[(()=>{const a=d.find(g=>g.id===Array.from(y)[0]);return a?a.mimeType?.startsWith("video/")?s.jsx("video",{src:a.thumbnail,className:"w-full rounded-lg",controls:!0}):s.jsx("img",{src:a.thumbnail,alt:"Selected",className:"w-full rounded-lg"}):null})(),s.jsx("div",{className:"mt-2 text-xs text-gray-400 font-mono break-all",children:ot?s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{value:st,onChange:a=>Ye(a.target.value),className:"w-full px-2 py-1 rounded bg-gray-800 text-sm text-gray-100"}),s.jsx("button",{onClick:()=>{const a=Array.from(y)[0],g=d.map(m=>m.id===a?{...m,currentName:st}:m);Wt(g),Re(!1)},className:"p-1 bg-green-600 rounded","aria-label":"Save name",children:s.jsx(Mi,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Re(!1),className:"p-1 bg-gray-800 rounded","aria-label":"Cancel edit name",children:s.jsx(Hn,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:d.find(a=>a.id===Array.from(y)[0])?.currentName}),s.jsx("button",{onClick:()=>{const a=Array.from(y)[0],g=d.find(m=>m.id===a);Ye(g?.currentName||g?.originalName||""),Re(!0)},className:"p-1 ml-2","aria-label":"Edit name",children:s.jsx(Oi,{className:"w-4 h-4 text-gray-400"})})]})})]}):s.jsxs("div",{className:"text-sm text-gray-300",children:[y.size," selected"]})}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Assign Day"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("select",{"aria-label":"Assign to...",onChange:a=>{const g=a.target.value;if(!g)return;const m=g==="new"?Math.max(0,..._t.map(C=>C[0]))+1:Number(g),v=Array.from(y),x=d.map(C=>v.includes(C.id)?{...C,day:m}:C);Wt(x),g==="new"&&(ue(C=>({...C,[m]:`Day ${String(m).padStart(2,"0")}`})),xt(x)),se(m),P("days"),k(new Set)},className:"px-3 py-2 rounded bg-gray-800",defaultValue:"",children:[s.jsx("option",{value:"",children:"Assign to..."}),_t.map(([a])=>s.jsx("option",{value:a,children:`Day ${String(a).padStart(2,"0")}`},a)),s.jsx("option",{value:"new",children:"Create new day"})]}),s.jsx("div",{className:"text-xs text-gray-400",children:"Assign selected photos to a day folder"})]}),s.jsx("button",{onClick:()=>{Yr(Array.from(y)),k(new Set)},className:"w-full px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm font-medium transition-colors",children:"Remove Day Assignment"})]}),s.jsxs("div",{className:"space-y-2 mb-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Assign Category"}),Dl.map(a=>s.jsxs("button",{onClick:()=>er(Array.from(y),a.key),className:`w-full text-left px-4 py-3 rounded-lg transition-all ${a.color} hover:brightness-110 text-white`,children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-lg",children:a.key}),s.jsx("span",{className:"ml-3 font-medium",children:a.label})]})}),s.jsx("p",{className:"text-xs mt-1 opacity-80",children:a.description})]},a.key))]}),s.jsx("div",{className:"space-y-3 pt-6 border-t border-gray-800",children:s.jsxs("button",{onClick:()=>Xr(Array.from(y)),className:`w-full px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${y.size===1&&d.find(a=>a.id===Array.from(y)[0])?.favorite?"bg-yellow-600 hover:bg-yellow-700":"bg-gray-800 hover:bg-gray-700"}`,children:[s.jsx(Ai,{className:`w-4 h-4 ${y.size===1&&d.find(a=>a.id===Array.from(y)[0])?.favorite?"fill-current":""}`}),"Toggle Favorite (F)"]})})]})})]}),O&&s.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex items-center justify-center",children:[s.jsx("button",{onClick:()=>B(null),className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black/70 rounded-full transition-colors",children:s.jsx(Hn,{className:"w-6 h-6"})}),(()=>{const a=d.find(g=>g.id===O);return a?a.mimeType?.startsWith("video/")?s.jsx("video",{src:a.thumbnail,controls:!0,className:"max-w-full max-h-full object-contain",autoPlay:!1}):s.jsx("img",{src:a.thumbnail,alt:"Fullscreen",className:"max-w-full max-h-full object-contain"}):null})(),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-6",children:[s.jsx("p",{className:"text-center text-sm font-mono",children:d.find(a=>a.id===O)?.currentName}),s.jsx("p",{className:"text-center text-xs text-gray-400 mt-2",children:"Press ESC to close  Arrow keys to navigate"})]})]}),en&&s.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-6",children:s.jsxs("div",{className:"bg-gray-900 rounded-lg max-w-2xl w-full overflow-hidden border border-gray-800",children:[s.jsxs("div",{className:"px-5 py-4 border-b border-gray-800 flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-100",children:"Export Script"}),s.jsx("button",{onClick:()=>zl(!1),className:"p-2 hover:bg-gray-800 rounded","aria-label":"Close export script dialog",children:s.jsx(Hn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"px-5 py-4 space-y-3",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Copy these commands and run them in your terminal from the project root directory. They create organized day folders and copy your photos with the current bucket naming. Originals are preserved."}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(Vr),Gn("copied")}catch{Gn("failed")}},className:"px-3 py-2 rounded-lg bg-gray-800 text-gray-100 hover:bg-gray-700 text-sm",children:"Copy Script"}),Il==="copied"&&s.jsx("span",{className:"text-xs text-green-400",children:"Copied."}),Il==="failed"&&s.jsx("span",{className:"text-xs text-red-400",children:"Copy failed. Select and copy below."})]}),s.jsx("textarea",{readOnly:!0,value:Vr,className:"w-full h-64 rounded-lg border border-gray-800 bg-gray-950 px-3 py-2 text-xs text-gray-100 font-mono"})]})]})}),oe&&s.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-6",children:s.jsx("div",{className:"bg-gray-900 rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Keyboard Shortcuts"}),s.jsx("button",{onClick:()=>_e(!1),className:"p-2 hover:bg-gray-800 rounded",children:s.jsx(Hn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-blue-400 mb-3",children:"MECE Categories"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Dl.map(a=>s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx("kbd",{className:`px-2 py-1 rounded ${a.color} text-white font-bold`,children:a.key==="F"?"M":a.key}),s.jsx("span",{children:a.label})]},a.key))}),s.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"Keyboard shortcuts: AE, X, M (Mood/Food). F is reserved for Favorite."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-blue-400 mb-3",children:"Navigation"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:""}),s.jsx("span",{children:"Previous / Next photo"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"Enter"}),s.jsx("span",{children:"Fullscreen view"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"Esc"}),s.jsx("span",{children:"Close / Deselect"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-blue-400 mb-3",children:"Actions"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"F"}),s.jsx("span",{children:"Toggle favorite"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"Z"}),s.jsx("span",{children:"Undo"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"Z"}),s.jsx("span",{children:"Redo"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"?"}),s.jsx("span",{children:"Show this help"})]})]})]})]})]})})}),Jn&&s.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:s.jsx("div",{className:`px-4 py-2 rounded-lg text-sm shadow-lg ${Jn.tone==="error"?"bg-red-600 text-white":"bg-gray-800 text-gray-100"}`,role:"status","aria-live":"polite",children:Jn.message})}),ee&&s.jsx(Gf,{isOpen:ee,onClose:()=>{fe&&(de(!1),Se.set(Vn,fe))},onCreateComplete:Ul,onOpenProject:async a=>{Je(null);const g=typeof globalThis<"u"&&(globalThis.vitest||globalThis.__APP_VERSION__==="0.0.0");if(!g&&!("showDirectoryPicker"in window)){Je("This app requires the File System Access API, which is not available in this browser environment. Please use a compatible browser like Chrome or Edge.");return}if(g){yt(a);return}try{if(!await Qo(a))try{const v=await window.showDirectoryPicker();await Ui(a,v),yt(a);return}catch(v){console.warn("Folder re-selection cancelled or failed:",v),Xn(a),T(!0);return}yt(a)}catch(m){console.warn("Error checking stored handle on project open:",m),Xn(a),T(!0)}},recentProjects:Qn,canClose:!!fe,errorMessage:Yn}),s.jsx(Rc,{isOpen:Te,onClose:()=>{T(!1),Xn(null)},onComplete:a=>Ul(a,bl),recentProjects:Qn,onSelectRecent:a=>{Je(null),Xn(null),T(!1),yt(a)}}),s.jsx(Jf,{isOpen:qn,title:"Loading Project",message:Tl,progress:Br,showProgressBar:!0})]})}const Pc=document.getElementById("root");Pc&&kf.createRoot(Pc).render(s.jsx(wn.StrictMode,{children:s.jsx(pp,{})}));export{mf as g};
