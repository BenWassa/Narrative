(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))p(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const x of m.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&p(x)}).observe(document,{childList:!0,subtree:!0});function a(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function p(d){if(d.ep)return;d.ep=!0;const m=a(d);fetch(d.href,m)}})();function kf(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var xi={exports:{}},nl={},wi={exports:{}},Ce={};var uc;function Sf(){if(uc)return Ce;uc=1;var u=Symbol.for("react.element"),c=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),x=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),b=Symbol.iterator;function T(h){return h===null||typeof h!="object"?null:(h=b&&h[b]||h["@@iterator"],typeof h=="function"?h:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,F={};function I(h,_,ie){this.props=h,this.context=_,this.refs=F,this.updater=ie||A}I.prototype.isReactComponent={},I.prototype.setState=function(h,_){if(typeof h!="object"&&typeof h!="function"&&h!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,h,_,"setState")},I.prototype.forceUpdate=function(h){this.updater.enqueueForceUpdate(this,h,"forceUpdate")};function U(){}U.prototype=I.prototype;function Q(h,_,ie){this.props=h,this.context=_,this.refs=F,this.updater=ie||A}var ne=Q.prototype=new U;ne.constructor=Q,w(ne,I.prototype),ne.isPureReactComponent=!0;var z=Array.isArray,V=Object.prototype.hasOwnProperty,S={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function O(h,_,ie){var oe,ae={},fe=null,Se=null;if(_!=null)for(oe in _.ref!==void 0&&(Se=_.ref),_.key!==void 0&&(fe=""+_.key),_)V.call(_,oe)&&!M.hasOwnProperty(oe)&&(ae[oe]=_[oe]);var Ne=arguments.length-2;if(Ne===1)ae.children=ie;else if(1<Ne){for(var J=Array(Ne),xe=0;xe<Ne;xe++)J[xe]=arguments[xe+2];ae.children=J}if(h&&h.defaultProps)for(oe in Ne=h.defaultProps,Ne)ae[oe]===void 0&&(ae[oe]=Ne[oe]);return{$$typeof:u,type:h,key:fe,ref:Se,props:ae,_owner:S.current}}function ee(h,_){return{$$typeof:u,type:h.type,key:_,ref:h.ref,props:h.props,_owner:h._owner}}function $(h){return typeof h=="object"&&h!==null&&h.$$typeof===u}function me(h){var _={"=":"=0",":":"=2"};return"$"+h.replace(/[=:]/g,function(ie){return _[ie]})}var q=/\/+/g;function K(h,_){return typeof h=="object"&&h!==null&&h.key!=null?me(""+h.key):_.toString(36)}function Y(h,_,ie,oe,ae){var fe=typeof h;(fe==="undefined"||fe==="boolean")&&(h=null);var Se=!1;if(h===null)Se=!0;else switch(fe){case"string":case"number":Se=!0;break;case"object":switch(h.$$typeof){case u:case c:Se=!0}}if(Se)return Se=h,ae=ae(Se),h=oe===""?"."+K(Se,0):oe,z(ae)?(ie="",h!=null&&(ie=h.replace(q,"$&/")+"/"),Y(ae,_,ie,"",function(xe){return xe})):ae!=null&&($(ae)&&(ae=ee(ae,ie+(!ae.key||Se&&Se.key===ae.key?"":(""+ae.key).replace(q,"$&/")+"/")+h)),_.push(ae)),1;if(Se=0,oe=oe===""?".":oe+":",z(h))for(var Ne=0;Ne<h.length;Ne++){fe=h[Ne];var J=oe+K(fe,Ne);Se+=Y(fe,_,ie,J,ae)}else if(J=T(h),typeof J=="function")for(h=J.call(h),Ne=0;!(fe=h.next()).done;)fe=fe.value,J=oe+K(fe,Ne++),Se+=Y(fe,_,ie,J,ae);else if(fe==="object")throw _=String(h),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return Se}function B(h,_,ie){if(h==null)return h;var oe=[],ae=0;return Y(h,oe,"","",function(fe){return _.call(ie,fe,ae++)}),oe}function le(h){if(h._status===-1){var _=h._result;_=_(),_.then(function(ie){(h._status===0||h._status===-1)&&(h._status=1,h._result=ie)},function(ie){(h._status===0||h._status===-1)&&(h._status=2,h._result=ie)}),h._status===-1&&(h._status=0,h._result=_)}if(h._status===1)return h._result.default;throw h._result}var te={current:null},j={transition:null},X={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:j,ReactCurrentOwner:S};function R(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:B,forEach:function(h,_,ie){B(h,function(){_.apply(this,arguments)},ie)},count:function(h){var _=0;return B(h,function(){_++}),_},toArray:function(h){return B(h,function(_){return _})||[]},only:function(h){if(!$(h))throw Error("React.Children.only expected to receive a single React element child.");return h}},Ce.Component=I,Ce.Fragment=a,Ce.Profiler=d,Ce.PureComponent=Q,Ce.StrictMode=p,Ce.Suspense=C,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Ce.act=R,Ce.cloneElement=function(h,_,ie){if(h==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+h+".");var oe=w({},h.props),ae=h.key,fe=h.ref,Se=h._owner;if(_!=null){if(_.ref!==void 0&&(fe=_.ref,Se=S.current),_.key!==void 0&&(ae=""+_.key),h.type&&h.type.defaultProps)var Ne=h.type.defaultProps;for(J in _)V.call(_,J)&&!M.hasOwnProperty(J)&&(oe[J]=_[J]===void 0&&Ne!==void 0?Ne[J]:_[J])}var J=arguments.length-2;if(J===1)oe.children=ie;else if(1<J){Ne=Array(J);for(var xe=0;xe<J;xe++)Ne[xe]=arguments[xe+2];oe.children=Ne}return{$$typeof:u,type:h.type,key:ae,ref:fe,props:oe,_owner:Se}},Ce.createContext=function(h){return h={$$typeof:x,_currentValue:h,_currentValue2:h,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},h.Provider={$$typeof:m,_context:h},h.Consumer=h},Ce.createElement=O,Ce.createFactory=function(h){var _=O.bind(null,h);return _.type=h,_},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(h){return{$$typeof:v,render:h}},Ce.isValidElement=$,Ce.lazy=function(h){return{$$typeof:D,_payload:{_status:-1,_result:h},_init:le}},Ce.memo=function(h,_){return{$$typeof:E,type:h,compare:_===void 0?null:_}},Ce.startTransition=function(h){var _=j.transition;j.transition={};try{h()}finally{j.transition=_}},Ce.unstable_act=R,Ce.useCallback=function(h,_){return te.current.useCallback(h,_)},Ce.useContext=function(h){return te.current.useContext(h)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(h){return te.current.useDeferredValue(h)},Ce.useEffect=function(h,_){return te.current.useEffect(h,_)},Ce.useId=function(){return te.current.useId()},Ce.useImperativeHandle=function(h,_,ie){return te.current.useImperativeHandle(h,_,ie)},Ce.useInsertionEffect=function(h,_){return te.current.useInsertionEffect(h,_)},Ce.useLayoutEffect=function(h,_){return te.current.useLayoutEffect(h,_)},Ce.useMemo=function(h,_){return te.current.useMemo(h,_)},Ce.useReducer=function(h,_,ie){return te.current.useReducer(h,_,ie)},Ce.useRef=function(h){return te.current.useRef(h)},Ce.useState=function(h){return te.current.useState(h)},Ce.useSyncExternalStore=function(h,_,ie){return te.current.useSyncExternalStore(h,_,ie)},Ce.useTransition=function(){return te.current.useTransition()},Ce.version="18.3.1",Ce}var cc;function Di(){return cc||(cc=1,wi.exports=Sf()),wi.exports}var dc;function jf(){if(dc)return nl;dc=1;var u=Di(),c=Symbol.for("react.element"),a=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,d=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function x(v,C,E){var D,b={},T=null,A=null;E!==void 0&&(T=""+E),C.key!==void 0&&(T=""+C.key),C.ref!==void 0&&(A=C.ref);for(D in C)p.call(C,D)&&!m.hasOwnProperty(D)&&(b[D]=C[D]);if(v&&v.defaultProps)for(D in C=v.defaultProps,C)b[D]===void 0&&(b[D]=C[D]);return{$$typeof:c,type:v,key:T,ref:A,props:b,_owner:d.current}}return nl.Fragment=a,nl.jsx=x,nl.jsxs=x,nl}var fc;function Cf(){return fc||(fc=1,xi.exports=jf()),xi.exports}var o=Cf(),L=Di();const Li=kf(L);var ks={},Ni={exports:{}},ft={},ki={exports:{}},Si={};var pc;function Ef(){return pc||(pc=1,(function(u){function c(j,X){var R=j.length;j.push(X);e:for(;0<R;){var h=R-1>>>1,_=j[h];if(0<d(_,X))j[h]=X,j[R]=_,R=h;else break e}}function a(j){return j.length===0?null:j[0]}function p(j){if(j.length===0)return null;var X=j[0],R=j.pop();if(R!==X){j[0]=R;e:for(var h=0,_=j.length,ie=_>>>1;h<ie;){var oe=2*(h+1)-1,ae=j[oe],fe=oe+1,Se=j[fe];if(0>d(ae,R))fe<_&&0>d(Se,ae)?(j[h]=Se,j[fe]=R,h=fe):(j[h]=ae,j[oe]=R,h=oe);else if(fe<_&&0>d(Se,R))j[h]=Se,j[fe]=R,h=fe;else break e}}return X}function d(j,X){var R=j.sortIndex-X.sortIndex;return R!==0?R:j.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;u.unstable_now=function(){return m.now()}}else{var x=Date,v=x.now();u.unstable_now=function(){return x.now()-v}}var C=[],E=[],D=1,b=null,T=3,A=!1,w=!1,F=!1,I=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ne(j){for(var X=a(E);X!==null;){if(X.callback===null)p(E);else if(X.startTime<=j)p(E),X.sortIndex=X.expirationTime,c(C,X);else break;X=a(E)}}function z(j){if(F=!1,ne(j),!w)if(a(C)!==null)w=!0,le(V);else{var X=a(E);X!==null&&te(z,X.startTime-j)}}function V(j,X){w=!1,F&&(F=!1,U(O),O=-1),A=!0;var R=T;try{for(ne(X),b=a(C);b!==null&&(!(b.expirationTime>X)||j&&!me());){var h=b.callback;if(typeof h=="function"){b.callback=null,T=b.priorityLevel;var _=h(b.expirationTime<=X);X=u.unstable_now(),typeof _=="function"?b.callback=_:b===a(C)&&p(C),ne(X)}else p(C);b=a(C)}if(b!==null)var ie=!0;else{var oe=a(E);oe!==null&&te(z,oe.startTime-X),ie=!1}return ie}finally{b=null,T=R,A=!1}}var S=!1,M=null,O=-1,ee=5,$=-1;function me(){return!(u.unstable_now()-$<ee)}function q(){if(M!==null){var j=u.unstable_now();$=j;var X=!0;try{X=M(!0,j)}finally{X?K():(S=!1,M=null)}}else S=!1}var K;if(typeof Q=="function")K=function(){Q(q)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,B=Y.port2;Y.port1.onmessage=q,K=function(){B.postMessage(null)}}else K=function(){I(q,0)};function le(j){M=j,S||(S=!0,K())}function te(j,X){O=I(function(){j(u.unstable_now())},X)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(j){j.callback=null},u.unstable_continueExecution=function(){w||A||(w=!0,le(V))},u.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<j?Math.floor(1e3/j):5},u.unstable_getCurrentPriorityLevel=function(){return T},u.unstable_getFirstCallbackNode=function(){return a(C)},u.unstable_next=function(j){switch(T){case 1:case 2:case 3:var X=3;break;default:X=T}var R=T;T=X;try{return j()}finally{T=R}},u.unstable_pauseExecution=function(){},u.unstable_requestPaint=function(){},u.unstable_runWithPriority=function(j,X){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var R=T;T=j;try{return X()}finally{T=R}},u.unstable_scheduleCallback=function(j,X,R){var h=u.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?h+R:h):R=h,j){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=R+_,j={id:D++,callback:X,priorityLevel:j,startTime:R,expirationTime:_,sortIndex:-1},R>h?(j.sortIndex=R,c(E,j),a(C)===null&&j===a(E)&&(F?(U(O),O=-1):F=!0,te(z,R-h))):(j.sortIndex=_,c(C,j),w||A||(w=!0,le(V))),j},u.unstable_shouldYield=me,u.unstable_wrapCallback=function(j){var X=T;return function(){var R=T;T=X;try{return j.apply(this,arguments)}finally{T=R}}}})(Si)),Si}var mc;function Pf(){return mc||(mc=1,ki.exports=Ef()),ki.exports}var hc;function bf(){if(hc)return ft;hc=1;var u=Di(),c=Pf();function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=new Set,d={};function m(e,t){x(e,t),x(e+"Capture",t)}function x(e,t){for(d[e]=t,e=0;e<t.length;e++)p.add(t[e])}var v=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D={},b={};function T(e){return C.call(b,e)?!0:C.call(D,e)?!1:E.test(e)?b[e]=!0:(D[e]=!0,!1)}function A(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function w(e,t,n,r){if(t===null||typeof t>"u"||A(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function F(e,t,n,r,l,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){I[e]=new F(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];I[t]=new F(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){I[e]=new F(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){I[e]=new F(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){I[e]=new F(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){I[e]=new F(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){I[e]=new F(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){I[e]=new F(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){I[e]=new F(e,5,!1,e.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function Q(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(U,Q);I[t]=new F(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(U,Q);I[t]=new F(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(U,Q);I[t]=new F(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){I[e]=new F(e,1,!1,e.toLowerCase(),null,!1,!1)}),I.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){I[e]=new F(e,1,!1,e.toLowerCase(),null,!0,!0)});function ne(e,t,n,r){var l=I.hasOwnProperty(t)?I[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(w(t,n,l,r)&&(n=null),r||l===null?T(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var z=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),S=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),me=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),j=Symbol.iterator;function X(e){return e===null||typeof e!="object"?null:(e=j&&e[j]||e["@@iterator"],typeof e=="function"?e:null)}var R=Object.assign,h;function _(e){if(h===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);h=t&&t[1]||""}return`
`+h+e}var ie=!1;function oe(e,t){if(!e||ie)return"";ie=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(P){var r=P}Reflect.construct(e,[],t)}else{try{t.call()}catch(P){r=P}e.call(t.prototype)}else{try{throw Error()}catch(P){r=P}e()}}catch(P){if(P&&r&&typeof P.stack=="string"){for(var l=P.stack.split(`
`),s=r.stack.split(`
`),i=l.length-1,f=s.length-1;1<=i&&0<=f&&l[i]!==s[f];)f--;for(;1<=i&&0<=f;i--,f--)if(l[i]!==s[f]){if(i!==1||f!==1)do if(i--,f--,0>f||l[i]!==s[f]){var g=`
`+l[i].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=i&&0<=f);break}}}finally{ie=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_(e):""}function ae(e){switch(e.tag){case 5:return _(e.type);case 16:return _("Lazy");case 13:return _("Suspense");case 19:return _("SuspenseList");case 0:case 2:case 15:return e=oe(e.type,!1),e;case 11:return e=oe(e.type.render,!1),e;case 1:return e=oe(e.type,!0),e;default:return""}}function fe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case M:return"Fragment";case S:return"Portal";case ee:return"Profiler";case O:return"StrictMode";case K:return"Suspense";case Y:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case me:return(e.displayName||"Context")+".Consumer";case $:return(e._context.displayName||"Context")+".Provider";case q:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case B:return t=e.displayName||null,t!==null?t:fe(e.type)||"Memo";case le:t=e._payload,e=e._init;try{return fe(e(t))}catch{}}return null}function Se(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(t);case 8:return t===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ne(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function J(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function xe(e){var t=J(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ge(e){e._valueTracker||(e._valueTracker=xe(e))}function re(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=J(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ke(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ee(e,t){var n=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Pe(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ne(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function je(e,t){t=t.checked,t!=null&&ne(e,"checked",t,!1)}function Re(e,t){je(e,t);var n=Ne(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Oe(e,t.type,n):t.hasOwnProperty("defaultValue")&&Oe(e,t.type,Ne(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function De(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Oe(e,t,n){(t!=="number"||ke(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ht=Array.isArray;function gt(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ne(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function ot(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(a(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function yt(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(a(92));if(ht(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ne(n)}}function yr(e,t){var n=Ne(t.value),r=Ne(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function sl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ol(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vr(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ol(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Wn,il=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Wn=Wn||document.createElement("div"),Wn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Wn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function en(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ts=["Webkit","ms","Moz","O"];Object.keys(Ht).forEach(function(e){Ts.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ht[t]=Ht[e]})});function al(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ht.hasOwnProperty(e)&&Ht[e]?(""+t).trim():t+"px"}function ul(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=al(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var Os=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xr(e,t){if(t){if(Os[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(a(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(a(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(t.style!=null&&typeof t.style!="object")throw Error(a(62))}}function Cn(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wr=null;function En(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Nr=null,tn=null,nn=null;function cl(e){if(e=Ur(e)){if(typeof Nr!="function")throw Error(a(280));var t=e.stateNode;t&&(t=Il(t),Nr(e.stateNode,e.type,t))}}function dl(e){tn?nn?nn.push(e):nn=[e]:tn=e}function fl(){if(tn){var e=tn,t=nn;if(nn=tn=null,cl(e),t)for(e=0;e<t.length;e++)cl(t[e])}}function pl(e,t){return e(t)}function Vt(){}var Pn=!1;function ml(e,t,n){if(Pn)return e(t,n);Pn=!0;try{return pl(e,t,n)}finally{Pn=!1,(tn!==null||nn!==null)&&(Vt(),fl())}}function bn(e,t){var n=e.stateNode;if(n===null)return null;var r=Il(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(a(231,t,typeof n));return n}var kr=!1;if(v)try{var _n={};Object.defineProperty(_n,"passive",{get:function(){kr=!0}}),window.addEventListener("test",_n,_n),window.removeEventListener("test",_n,_n)}catch{kr=!1}function zs(e,t,n,r,l,s,i,f,g){var P=Array.prototype.slice.call(arguments,3);try{t.apply(n,P)}catch(W){this.onError(W)}}var Rn=!1,Dn=null,Kn=!1,Ln=null,Fs={onError:function(e){Rn=!0,Dn=e}};function hl(e,t,n,r,l,s,i,f,g){Rn=!1,Dn=null,zs.apply(Fs,arguments)}function Is(e,t,n,r,l,s,i,f,g){if(hl.apply(this,arguments),Rn){if(Rn){var P=Dn;Rn=!1,Dn=null}else throw Error(a(198));Kn||(Kn=!0,Ln=P)}}function he(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Te(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qe(e){if(he(e)!==e)throw Error(a(188))}function St(e){var t=e.alternate;if(!t){if(t=he(e),t===null)throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var s=l.alternate;if(s===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===s.child){for(s=l.child;s;){if(s===n)return qe(l),e;if(s===r)return qe(l),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=l,r=s;else{for(var i=!1,f=l.child;f;){if(f===n){i=!0,n=l,r=s;break}if(f===r){i=!0,r=l,n=s;break}f=f.sibling}if(!i){for(f=s.child;f;){if(f===n){i=!0,n=s,r=l;break}if(f===r){i=!0,r=s,n=l;break}f=f.sibling}if(!i)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(n.tag!==3)throw Error(a(188));return n.stateNode.current===n?e:t}function gl(e){return e=St(e),e!==null?zi(e):null}function zi(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=zi(e);if(t!==null)return t;e=e.sibling}return null}var Fi=c.unstable_scheduleCallback,Ii=c.unstable_cancelCallback,Lc=c.unstable_shouldYield,Tc=c.unstable_requestPaint,He=c.unstable_now,Oc=c.unstable_getCurrentPriorityLevel,Ms=c.unstable_ImmediatePriority,Mi=c.unstable_UserBlockingPriority,yl=c.unstable_NormalPriority,zc=c.unstable_LowPriority,$i=c.unstable_IdlePriority,vl=null,It=null;function Fc(e){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(vl,e,void 0,(e.current.flags&128)===128)}catch{}}var Rt=Math.clz32?Math.clz32:$c,Ic=Math.log,Mc=Math.LN2;function $c(e){return e>>>=0,e===0?32:31-(Ic(e)/Mc|0)|0}var xl=64,wl=4194304;function Sr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Nl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var f=i&~l;f!==0?r=Sr(f):(s&=i,s!==0&&(r=Sr(s)))}else i=n&~l,i!==0?r=Sr(i):s!==0&&(r=Sr(s));if(r===0)return 0;if(t!==0&&t!==r&&(t&l)===0&&(l=r&-r,s=t&-t,l>=s||l===16&&(s&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Rt(t),l=1<<n,r|=e[n],t&=~l;return r}function Ac(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-Rt(s),f=1<<i,g=l[i];g===-1?((f&n)===0||(f&r)!==0)&&(l[i]=Ac(f,t)):g<=t&&(e.expiredLanes|=f),s&=~f}}function $s(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ai(){var e=xl;return xl<<=1,(xl&4194240)===0&&(xl=64),e}function As(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function jr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Rt(t),e[t]=n}function Bc(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-Rt(n),s=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~s}}function Us(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Rt(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var Le=0;function Ui(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Bi,Bs,Hi,Vi,Wi,Hs=!1,kl=[],rn=null,ln=null,sn=null,Cr=new Map,Er=new Map,on=[],Hc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ki(e,t){switch(e){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":sn=null;break;case"pointerover":case"pointerout":Cr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Er.delete(t.pointerId)}}function Pr(e,t,n,r,l,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[l]},t!==null&&(t=Ur(t),t!==null&&Bs(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Vc(e,t,n,r,l){switch(t){case"focusin":return rn=Pr(rn,e,t,n,r,l),!0;case"dragenter":return ln=Pr(ln,e,t,n,r,l),!0;case"mouseover":return sn=Pr(sn,e,t,n,r,l),!0;case"pointerover":var s=l.pointerId;return Cr.set(s,Pr(Cr.get(s)||null,e,t,n,r,l)),!0;case"gotpointercapture":return s=l.pointerId,Er.set(s,Pr(Er.get(s)||null,e,t,n,r,l)),!0}return!1}function Qi(e){var t=Tn(e.target);if(t!==null){var n=he(t);if(n!==null){if(t=n.tag,t===13){if(t=Te(n),t!==null){e.blockedOn=t,Wi(e.priority,function(){Hi(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ws(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);wr=r,n.target.dispatchEvent(r),wr=null}else return t=Ur(n),t!==null&&Bs(t),e.blockedOn=n,!1;t.shift()}return!0}function Yi(e,t,n){Sl(e)&&n.delete(t)}function Wc(){Hs=!1,rn!==null&&Sl(rn)&&(rn=null),ln!==null&&Sl(ln)&&(ln=null),sn!==null&&Sl(sn)&&(sn=null),Cr.forEach(Yi),Er.forEach(Yi)}function br(e,t){e.blockedOn===t&&(e.blockedOn=null,Hs||(Hs=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,Wc)))}function _r(e){function t(l){return br(l,e)}if(0<kl.length){br(kl[0],e);for(var n=1;n<kl.length;n++){var r=kl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(rn!==null&&br(rn,e),ln!==null&&br(ln,e),sn!==null&&br(sn,e),Cr.forEach(t),Er.forEach(t),n=0;n<on.length;n++)r=on[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<on.length&&(n=on[0],n.blockedOn===null);)Qi(n),n.blockedOn===null&&on.shift()}var Qn=z.ReactCurrentBatchConfig,jl=!0;function Kc(e,t,n,r){var l=Le,s=Qn.transition;Qn.transition=null;try{Le=1,Vs(e,t,n,r)}finally{Le=l,Qn.transition=s}}function Qc(e,t,n,r){var l=Le,s=Qn.transition;Qn.transition=null;try{Le=4,Vs(e,t,n,r)}finally{Le=l,Qn.transition=s}}function Vs(e,t,n,r){if(jl){var l=Ws(e,t,n,r);if(l===null)ao(e,t,r,Cl,n),Ki(e,r);else if(Vc(l,e,t,n,r))r.stopPropagation();else if(Ki(e,r),t&4&&-1<Hc.indexOf(e)){for(;l!==null;){var s=Ur(l);if(s!==null&&Bi(s),s=Ws(e,t,n,r),s===null&&ao(e,t,r,Cl,n),s===l)break;l=s}l!==null&&r.stopPropagation()}else ao(e,t,r,null,n)}}var Cl=null;function Ws(e,t,n,r){if(Cl=null,e=En(r),e=Tn(e),e!==null)if(t=he(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Te(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Cl=e,null}function Gi(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Oc()){case Ms:return 1;case Mi:return 4;case yl:case zc:return 16;case $i:return 536870912;default:return 16}default:return 16}}var an=null,Ks=null,El=null;function Xi(){if(El)return El;var e,t=Ks,n=t.length,r,l="value"in an?an.value:an.textContent,s=l.length;for(e=0;e<n&&t[e]===l[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===l[s-r];r++);return El=l.slice(e,1<r?1-r:void 0)}function Pl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bl(){return!0}function qi(){return!1}function vt(e){function t(n,r,l,s,i){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(n=e[f],this[f]=n?n(s):s[f]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?bl:qi,this.isPropagationStopped=qi,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bl)},persist:function(){},isPersistent:bl}),t}var Yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qs=vt(Yn),Rr=R({},Yn,{view:0,detail:0}),Yc=vt(Rr),Ys,Gs,Dr,_l=R({},Rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Dr&&(Dr&&e.type==="mousemove"?(Ys=e.screenX-Dr.screenX,Gs=e.screenY-Dr.screenY):Gs=Ys=0,Dr=e),Ys)},movementY:function(e){return"movementY"in e?e.movementY:Gs}}),Ji=vt(_l),Gc=R({},_l,{dataTransfer:0}),Xc=vt(Gc),qc=R({},Rr,{relatedTarget:0}),Xs=vt(qc),Jc=R({},Yn,{animationName:0,elapsedTime:0,pseudoElement:0}),Zc=vt(Jc),ed=R({},Yn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),td=vt(ed),nd=R({},Yn,{data:0}),Zi=vt(nd),rd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ld={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function od(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sd[e])?!!t[e]:!1}function qs(){return od}var id=R({},Rr,{key:function(e){if(e.key){var t=rd[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Pl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ld[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qs,charCode:function(e){return e.type==="keypress"?Pl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Pl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ad=vt(id),ud=R({},_l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ea=vt(ud),cd=R({},Rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qs}),dd=vt(cd),fd=R({},Yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),pd=vt(fd),md=R({},_l,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hd=vt(md),gd=[9,13,27,32],Js=v&&"CompositionEvent"in window,Lr=null;v&&"documentMode"in document&&(Lr=document.documentMode);var yd=v&&"TextEvent"in window&&!Lr,ta=v&&(!Js||Lr&&8<Lr&&11>=Lr),na=" ",ra=!1;function la(e,t){switch(e){case"keyup":return gd.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gn=!1;function vd(e,t){switch(e){case"compositionend":return sa(t);case"keypress":return t.which!==32?null:(ra=!0,na);case"textInput":return e=t.data,e===na&&ra?null:e;default:return null}}function xd(e,t){if(Gn)return e==="compositionend"||!Js&&la(e,t)?(e=Xi(),El=Ks=an=null,Gn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ta&&t.locale!=="ko"?null:t.data;default:return null}}var wd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wd[e.type]:t==="textarea"}function ia(e,t,n,r){dl(r),t=Ol(t,"onChange"),0<t.length&&(n=new Qs("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Tr=null,Or=null;function Nd(e){Ca(e,0)}function Rl(e){var t=er(e);if(re(t))return e}function kd(e,t){if(e==="change")return t}var aa=!1;if(v){var Zs;if(v){var eo="oninput"in document;if(!eo){var ua=document.createElement("div");ua.setAttribute("oninput","return;"),eo=typeof ua.oninput=="function"}Zs=eo}else Zs=!1;aa=Zs&&(!document.documentMode||9<document.documentMode)}function ca(){Tr&&(Tr.detachEvent("onpropertychange",da),Or=Tr=null)}function da(e){if(e.propertyName==="value"&&Rl(Or)){var t=[];ia(t,Or,e,En(e)),ml(Nd,t)}}function Sd(e,t,n){e==="focusin"?(ca(),Tr=t,Or=n,Tr.attachEvent("onpropertychange",da)):e==="focusout"&&ca()}function jd(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rl(Or)}function Cd(e,t){if(e==="click")return Rl(t)}function Ed(e,t){if(e==="input"||e==="change")return Rl(t)}function Pd(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dt=typeof Object.is=="function"?Object.is:Pd;function zr(e,t){if(Dt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!C.call(t,l)||!Dt(e[l],t[l]))return!1}return!0}function fa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pa(e,t){var n=fa(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fa(n)}}function ma(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ma(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ha(){for(var e=window,t=ke();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ke(e.document)}return t}function to(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bd(e){var t=ha(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ma(n.ownerDocument.documentElement,n)){if(r!==null&&to(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,s=Math.min(r.start,l);r=r.end===void 0?s:Math.min(r.end,l),!e.extend&&s>r&&(l=r,r=s,s=l),l=pa(n,s);var i=pa(n,r);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _d=v&&"documentMode"in document&&11>=document.documentMode,Xn=null,no=null,Fr=null,ro=!1;function ga(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ro||Xn==null||Xn!==ke(r)||(r=Xn,"selectionStart"in r&&to(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fr&&zr(Fr,r)||(Fr=r,r=Ol(no,"onSelect"),0<r.length&&(t=new Qs("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Xn)))}function Dl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qn={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},lo={},ya={};v&&(ya=document.createElement("div").style,"AnimationEvent"in window||(delete qn.animationend.animation,delete qn.animationiteration.animation,delete qn.animationstart.animation),"TransitionEvent"in window||delete qn.transitionend.transition);function Ll(e){if(lo[e])return lo[e];if(!qn[e])return e;var t=qn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ya)return lo[e]=t[n];return e}var va=Ll("animationend"),xa=Ll("animationiteration"),wa=Ll("animationstart"),Na=Ll("transitionend"),ka=new Map,Sa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function un(e,t){ka.set(e,t),m(t,[e])}for(var so=0;so<Sa.length;so++){var oo=Sa[so],Rd=oo.toLowerCase(),Dd=oo[0].toUpperCase()+oo.slice(1);un(Rd,"on"+Dd)}un(va,"onAnimationEnd"),un(xa,"onAnimationIteration"),un(wa,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(Na,"onTransitionEnd"),x("onMouseEnter",["mouseout","mouseover"]),x("onMouseLeave",["mouseout","mouseover"]),x("onPointerEnter",["pointerout","pointerover"]),x("onPointerLeave",["pointerout","pointerover"]),m("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),m("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),m("onBeforeInput",["compositionend","keypress","textInput","paste"]),m("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ld=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function ja(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Is(r,t,void 0,e),e.currentTarget=null}function Ca(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var f=r[i],g=f.instance,P=f.currentTarget;if(f=f.listener,g!==s&&l.isPropagationStopped())break e;ja(l,f,P),s=g}else for(i=0;i<r.length;i++){if(f=r[i],g=f.instance,P=f.currentTarget,f=f.listener,g!==s&&l.isPropagationStopped())break e;ja(l,f,P),s=g}}}if(Kn)throw e=Ln,Kn=!1,Ln=null,e}function Ie(e,t){var n=t[ho];n===void 0&&(n=t[ho]=new Set);var r=e+"__bubble";n.has(r)||(Ea(t,e,2,!1),n.add(r))}function io(e,t,n){var r=0;t&&(r|=4),Ea(n,e,r,t)}var Tl="_reactListening"+Math.random().toString(36).slice(2);function Mr(e){if(!e[Tl]){e[Tl]=!0,p.forEach(function(n){n!=="selectionchange"&&(Ld.has(n)||io(n,!1,e),io(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Tl]||(t[Tl]=!0,io("selectionchange",!1,t))}}function Ea(e,t,n,r){switch(Gi(t)){case 1:var l=Kc;break;case 4:l=Qc;break;default:l=Vs}n=l.bind(null,t,n,e),l=void 0,!kr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function ao(e,t,n,r,l){var s=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var f=r.stateNode.containerInfo;if(f===l||f.nodeType===8&&f.parentNode===l)break;if(i===4)for(i=r.return;i!==null;){var g=i.tag;if((g===3||g===4)&&(g=i.stateNode.containerInfo,g===l||g.nodeType===8&&g.parentNode===l))return;i=i.return}for(;f!==null;){if(i=Tn(f),i===null)return;if(g=i.tag,g===5||g===6){r=s=i;continue e}f=f.parentNode}}r=r.return}ml(function(){var P=s,W=En(n),G=[];e:{var H=ka.get(e);if(H!==void 0){var se=Qs,ce=e;switch(e){case"keypress":if(Pl(n)===0)break e;case"keydown":case"keyup":se=ad;break;case"focusin":ce="focus",se=Xs;break;case"focusout":ce="blur",se=Xs;break;case"beforeblur":case"afterblur":se=Xs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Ji;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Xc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=dd;break;case va:case xa:case wa:se=Zc;break;case Na:se=pd;break;case"scroll":se=Yc;break;case"wheel":se=hd;break;case"copy":case"cut":case"paste":se=td;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=ea}var de=(t&4)!==0,Ve=!de&&e==="scroll",N=de?H!==null?H+"Capture":null:H;de=[];for(var y=P,k;y!==null;){k=y;var Z=k.stateNode;if(k.tag===5&&Z!==null&&(k=Z,N!==null&&(Z=bn(y,N),Z!=null&&de.push($r(y,Z,k)))),Ve)break;y=y.return}0<de.length&&(H=new se(H,ce,null,n,W),G.push({event:H,listeners:de}))}}if((t&7)===0){e:{if(H=e==="mouseover"||e==="pointerover",se=e==="mouseout"||e==="pointerout",H&&n!==wr&&(ce=n.relatedTarget||n.fromElement)&&(Tn(ce)||ce[Wt]))break e;if((se||H)&&(H=W.window===W?W:(H=W.ownerDocument)?H.defaultView||H.parentWindow:window,se?(ce=n.relatedTarget||n.toElement,se=P,ce=ce?Tn(ce):null,ce!==null&&(Ve=he(ce),ce!==Ve||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(se=null,ce=P),se!==ce)){if(de=Ji,Z="onMouseLeave",N="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(de=ea,Z="onPointerLeave",N="onPointerEnter",y="pointer"),Ve=se==null?H:er(se),k=ce==null?H:er(ce),H=new de(Z,y+"leave",se,n,W),H.target=Ve,H.relatedTarget=k,Z=null,Tn(W)===P&&(de=new de(N,y+"enter",ce,n,W),de.target=k,de.relatedTarget=Ve,Z=de),Ve=Z,se&&ce)t:{for(de=se,N=ce,y=0,k=de;k;k=Jn(k))y++;for(k=0,Z=N;Z;Z=Jn(Z))k++;for(;0<y-k;)de=Jn(de),y--;for(;0<k-y;)N=Jn(N),k--;for(;y--;){if(de===N||N!==null&&de===N.alternate)break t;de=Jn(de),N=Jn(N)}de=null}else de=null;se!==null&&Pa(G,H,se,de,!1),ce!==null&&Ve!==null&&Pa(G,Ve,ce,de,!0)}}e:{if(H=P?er(P):window,se=H.nodeName&&H.nodeName.toLowerCase(),se==="select"||se==="input"&&H.type==="file")var pe=kd;else if(oa(H))if(aa)pe=Ed;else{pe=jd;var ye=Sd}else(se=H.nodeName)&&se.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(pe=Cd);if(pe&&(pe=pe(e,P))){ia(G,pe,n,W);break e}ye&&ye(e,H,P),e==="focusout"&&(ye=H._wrapperState)&&ye.controlled&&H.type==="number"&&Oe(H,"number",H.value)}switch(ye=P?er(P):window,e){case"focusin":(oa(ye)||ye.contentEditable==="true")&&(Xn=ye,no=P,Fr=null);break;case"focusout":Fr=no=Xn=null;break;case"mousedown":ro=!0;break;case"contextmenu":case"mouseup":case"dragend":ro=!1,ga(G,n,W);break;case"selectionchange":if(_d)break;case"keydown":case"keyup":ga(G,n,W)}var ve;if(Js)e:{switch(e){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Gn?la(e,n)&&(we="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(we="onCompositionStart");we&&(ta&&n.locale!=="ko"&&(Gn||we!=="onCompositionStart"?we==="onCompositionEnd"&&Gn&&(ve=Xi()):(an=W,Ks="value"in an?an.value:an.textContent,Gn=!0)),ye=Ol(P,we),0<ye.length&&(we=new Zi(we,e,null,n,W),G.push({event:we,listeners:ye}),ve?we.data=ve:(ve=sa(n),ve!==null&&(we.data=ve)))),(ve=yd?vd(e,n):xd(e,n))&&(P=Ol(P,"onBeforeInput"),0<P.length&&(W=new Zi("onBeforeInput","beforeinput",null,n,W),G.push({event:W,listeners:P}),W.data=ve))}Ca(G,t)})}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ol(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,s=l.stateNode;l.tag===5&&s!==null&&(l=s,s=bn(e,n),s!=null&&r.unshift($r(e,s,l)),s=bn(e,t),s!=null&&r.push($r(e,s,l))),e=e.return}return r}function Jn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pa(e,t,n,r,l){for(var s=t._reactName,i=[];n!==null&&n!==r;){var f=n,g=f.alternate,P=f.stateNode;if(g!==null&&g===r)break;f.tag===5&&P!==null&&(f=P,l?(g=bn(n,s),g!=null&&i.unshift($r(n,g,f))):l||(g=bn(n,s),g!=null&&i.push($r(n,g,f)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Td=/\r\n?/g,Od=/\u0000|\uFFFD/g;function ba(e){return(typeof e=="string"?e:""+e).replace(Td,`
`).replace(Od,"")}function zl(e,t,n){if(t=ba(t),ba(e)!==t&&n)throw Error(a(425))}function Fl(){}var uo=null,co=null;function fo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var po=typeof setTimeout=="function"?setTimeout:void 0,zd=typeof clearTimeout=="function"?clearTimeout:void 0,_a=typeof Promise=="function"?Promise:void 0,Fd=typeof queueMicrotask=="function"?queueMicrotask:typeof _a<"u"?function(e){return _a.resolve(null).then(e).catch(Id)}:po;function Id(e){setTimeout(function(){throw e})}function mo(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),_r(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);_r(t)}function cn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ra(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Zn=Math.random().toString(36).slice(2),Mt="__reactFiber$"+Zn,Ar="__reactProps$"+Zn,Wt="__reactContainer$"+Zn,ho="__reactEvents$"+Zn,Md="__reactListeners$"+Zn,$d="__reactHandles$"+Zn;function Tn(e){var t=e[Mt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Wt]||n[Mt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ra(e);e!==null;){if(n=e[Mt])return n;e=Ra(e)}return t}e=n,n=e.parentNode}return null}function Ur(e){return e=e[Mt]||e[Wt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function er(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(a(33))}function Il(e){return e[Ar]||null}var go=[],tr=-1;function dn(e){return{current:e}}function Me(e){0>tr||(e.current=go[tr],go[tr]=null,tr--)}function ze(e,t){tr++,go[tr]=e.current,e.current=t}var fn={},et=dn(fn),it=dn(!1),On=fn;function nr(e,t){var n=e.type.contextTypes;if(!n)return fn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},s;for(s in n)l[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function at(e){return e=e.childContextTypes,e!=null}function Ml(){Me(it),Me(et)}function Da(e,t,n){if(et.current!==fn)throw Error(a(168));ze(et,t),ze(it,n)}function La(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(a(108,Se(e)||"Unknown",l));return R({},n,r)}function $l(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fn,On=et.current,ze(et,e),ze(it,it.current),!0}function Ta(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=La(e,t,On),r.__reactInternalMemoizedMergedChildContext=e,Me(it),Me(et),ze(et,e)):Me(it),ze(it,n)}var Kt=null,Al=!1,yo=!1;function Oa(e){Kt===null?Kt=[e]:Kt.push(e)}function Ad(e){Al=!0,Oa(e)}function pn(){if(!yo&&Kt!==null){yo=!0;var e=0,t=Le;try{var n=Kt;for(Le=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Kt=null,Al=!1}catch(l){throw Kt!==null&&(Kt=Kt.slice(e+1)),Fi(Ms,pn),l}finally{Le=t,yo=!1}}return null}var rr=[],lr=0,Ul=null,Bl=0,jt=[],Ct=0,zn=null,Qt=1,Yt="";function Fn(e,t){rr[lr++]=Bl,rr[lr++]=Ul,Ul=e,Bl=t}function za(e,t,n){jt[Ct++]=Qt,jt[Ct++]=Yt,jt[Ct++]=zn,zn=e;var r=Qt;e=Yt;var l=32-Rt(r)-1;r&=~(1<<l),n+=1;var s=32-Rt(t)+l;if(30<s){var i=l-l%5;s=(r&(1<<i)-1).toString(32),r>>=i,l-=i,Qt=1<<32-Rt(t)+l|n<<l|r,Yt=s+e}else Qt=1<<s|n<<l|r,Yt=e}function vo(e){e.return!==null&&(Fn(e,1),za(e,1,0))}function xo(e){for(;e===Ul;)Ul=rr[--lr],rr[lr]=null,Bl=rr[--lr],rr[lr]=null;for(;e===zn;)zn=jt[--Ct],jt[Ct]=null,Yt=jt[--Ct],jt[Ct]=null,Qt=jt[--Ct],jt[Ct]=null}var xt=null,wt=null,$e=!1,Lt=null;function Fa(e,t){var n=_t(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ia(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xt=e,wt=cn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xt=e,wt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=zn!==null?{id:Qt,overflow:Yt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=_t(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,xt=e,wt=null,!0):!1;default:return!1}}function wo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function No(e){if($e){var t=wt;if(t){var n=t;if(!Ia(e,t)){if(wo(e))throw Error(a(418));t=cn(n.nextSibling);var r=xt;t&&Ia(e,t)?Fa(r,n):(e.flags=e.flags&-4097|2,$e=!1,xt=e)}}else{if(wo(e))throw Error(a(418));e.flags=e.flags&-4097|2,$e=!1,xt=e}}}function Ma(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xt=e}function Hl(e){if(e!==xt)return!1;if(!$e)return Ma(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fo(e.type,e.memoizedProps)),t&&(t=wt)){if(wo(e))throw $a(),Error(a(418));for(;t;)Fa(e,t),t=cn(t.nextSibling)}if(Ma(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){wt=cn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}wt=null}}else wt=xt?cn(e.stateNode.nextSibling):null;return!0}function $a(){for(var e=wt;e;)e=cn(e.nextSibling)}function sr(){wt=xt=null,$e=!1}function ko(e){Lt===null?Lt=[e]:Lt.push(e)}var Ud=z.ReactCurrentBatchConfig;function Br(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var l=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var f=l.refs;i===null?delete f[s]:f[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Vl(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Aa(e){var t=e._init;return t(e._payload)}function Ua(e){function t(N,y){if(e){var k=N.deletions;k===null?(N.deletions=[y],N.flags|=16):k.push(y)}}function n(N,y){if(!e)return null;for(;y!==null;)t(N,y),y=y.sibling;return null}function r(N,y){for(N=new Map;y!==null;)y.key!==null?N.set(y.key,y):N.set(y.index,y),y=y.sibling;return N}function l(N,y){return N=Nn(N,y),N.index=0,N.sibling=null,N}function s(N,y,k){return N.index=k,e?(k=N.alternate,k!==null?(k=k.index,k<y?(N.flags|=2,y):k):(N.flags|=2,y)):(N.flags|=1048576,y)}function i(N){return e&&N.alternate===null&&(N.flags|=2),N}function f(N,y,k,Z){return y===null||y.tag!==6?(y=pi(k,N.mode,Z),y.return=N,y):(y=l(y,k),y.return=N,y)}function g(N,y,k,Z){var pe=k.type;return pe===M?W(N,y,k.props.children,Z,k.key):y!==null&&(y.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===le&&Aa(pe)===y.type)?(Z=l(y,k.props),Z.ref=Br(N,y,k),Z.return=N,Z):(Z=ms(k.type,k.key,k.props,null,N.mode,Z),Z.ref=Br(N,y,k),Z.return=N,Z)}function P(N,y,k,Z){return y===null||y.tag!==4||y.stateNode.containerInfo!==k.containerInfo||y.stateNode.implementation!==k.implementation?(y=mi(k,N.mode,Z),y.return=N,y):(y=l(y,k.children||[]),y.return=N,y)}function W(N,y,k,Z,pe){return y===null||y.tag!==7?(y=Vn(k,N.mode,Z,pe),y.return=N,y):(y=l(y,k),y.return=N,y)}function G(N,y,k){if(typeof y=="string"&&y!==""||typeof y=="number")return y=pi(""+y,N.mode,k),y.return=N,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case V:return k=ms(y.type,y.key,y.props,null,N.mode,k),k.ref=Br(N,null,y),k.return=N,k;case S:return y=mi(y,N.mode,k),y.return=N,y;case le:var Z=y._init;return G(N,Z(y._payload),k)}if(ht(y)||X(y))return y=Vn(y,N.mode,k,null),y.return=N,y;Vl(N,y)}return null}function H(N,y,k,Z){var pe=y!==null?y.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return pe!==null?null:f(N,y,""+k,Z);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case V:return k.key===pe?g(N,y,k,Z):null;case S:return k.key===pe?P(N,y,k,Z):null;case le:return pe=k._init,H(N,y,pe(k._payload),Z)}if(ht(k)||X(k))return pe!==null?null:W(N,y,k,Z,null);Vl(N,k)}return null}function se(N,y,k,Z,pe){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return N=N.get(k)||null,f(y,N,""+Z,pe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case V:return N=N.get(Z.key===null?k:Z.key)||null,g(y,N,Z,pe);case S:return N=N.get(Z.key===null?k:Z.key)||null,P(y,N,Z,pe);case le:var ye=Z._init;return se(N,y,k,ye(Z._payload),pe)}if(ht(Z)||X(Z))return N=N.get(k)||null,W(y,N,Z,pe,null);Vl(y,Z)}return null}function ce(N,y,k,Z){for(var pe=null,ye=null,ve=y,we=y=0,Xe=null;ve!==null&&we<k.length;we++){ve.index>we?(Xe=ve,ve=null):Xe=ve.sibling;var _e=H(N,ve,k[we],Z);if(_e===null){ve===null&&(ve=Xe);break}e&&ve&&_e.alternate===null&&t(N,ve),y=s(_e,y,we),ye===null?pe=_e:ye.sibling=_e,ye=_e,ve=Xe}if(we===k.length)return n(N,ve),$e&&Fn(N,we),pe;if(ve===null){for(;we<k.length;we++)ve=G(N,k[we],Z),ve!==null&&(y=s(ve,y,we),ye===null?pe=ve:ye.sibling=ve,ye=ve);return $e&&Fn(N,we),pe}for(ve=r(N,ve);we<k.length;we++)Xe=se(ve,N,we,k[we],Z),Xe!==null&&(e&&Xe.alternate!==null&&ve.delete(Xe.key===null?we:Xe.key),y=s(Xe,y,we),ye===null?pe=Xe:ye.sibling=Xe,ye=Xe);return e&&ve.forEach(function(kn){return t(N,kn)}),$e&&Fn(N,we),pe}function de(N,y,k,Z){var pe=X(k);if(typeof pe!="function")throw Error(a(150));if(k=pe.call(k),k==null)throw Error(a(151));for(var ye=pe=null,ve=y,we=y=0,Xe=null,_e=k.next();ve!==null&&!_e.done;we++,_e=k.next()){ve.index>we?(Xe=ve,ve=null):Xe=ve.sibling;var kn=H(N,ve,_e.value,Z);if(kn===null){ve===null&&(ve=Xe);break}e&&ve&&kn.alternate===null&&t(N,ve),y=s(kn,y,we),ye===null?pe=kn:ye.sibling=kn,ye=kn,ve=Xe}if(_e.done)return n(N,ve),$e&&Fn(N,we),pe;if(ve===null){for(;!_e.done;we++,_e=k.next())_e=G(N,_e.value,Z),_e!==null&&(y=s(_e,y,we),ye===null?pe=_e:ye.sibling=_e,ye=_e);return $e&&Fn(N,we),pe}for(ve=r(N,ve);!_e.done;we++,_e=k.next())_e=se(ve,N,we,_e.value,Z),_e!==null&&(e&&_e.alternate!==null&&ve.delete(_e.key===null?we:_e.key),y=s(_e,y,we),ye===null?pe=_e:ye.sibling=_e,ye=_e);return e&&ve.forEach(function(Nf){return t(N,Nf)}),$e&&Fn(N,we),pe}function Ve(N,y,k,Z){if(typeof k=="object"&&k!==null&&k.type===M&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case V:e:{for(var pe=k.key,ye=y;ye!==null;){if(ye.key===pe){if(pe=k.type,pe===M){if(ye.tag===7){n(N,ye.sibling),y=l(ye,k.props.children),y.return=N,N=y;break e}}else if(ye.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===le&&Aa(pe)===ye.type){n(N,ye.sibling),y=l(ye,k.props),y.ref=Br(N,ye,k),y.return=N,N=y;break e}n(N,ye);break}else t(N,ye);ye=ye.sibling}k.type===M?(y=Vn(k.props.children,N.mode,Z,k.key),y.return=N,N=y):(Z=ms(k.type,k.key,k.props,null,N.mode,Z),Z.ref=Br(N,y,k),Z.return=N,N=Z)}return i(N);case S:e:{for(ye=k.key;y!==null;){if(y.key===ye)if(y.tag===4&&y.stateNode.containerInfo===k.containerInfo&&y.stateNode.implementation===k.implementation){n(N,y.sibling),y=l(y,k.children||[]),y.return=N,N=y;break e}else{n(N,y);break}else t(N,y);y=y.sibling}y=mi(k,N.mode,Z),y.return=N,N=y}return i(N);case le:return ye=k._init,Ve(N,y,ye(k._payload),Z)}if(ht(k))return ce(N,y,k,Z);if(X(k))return de(N,y,k,Z);Vl(N,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,y!==null&&y.tag===6?(n(N,y.sibling),y=l(y,k),y.return=N,N=y):(n(N,y),y=pi(k,N.mode,Z),y.return=N,N=y),i(N)):n(N,y)}return Ve}var or=Ua(!0),Ba=Ua(!1),Wl=dn(null),Kl=null,ir=null,So=null;function jo(){So=ir=Kl=null}function Co(e){var t=Wl.current;Me(Wl),e._currentValue=t}function Eo(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ar(e,t){Kl=e,So=ir=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ut=!0),e.firstContext=null)}function Et(e){var t=e._currentValue;if(So!==e)if(e={context:e,memoizedValue:t,next:null},ir===null){if(Kl===null)throw Error(a(308));ir=e,Kl.dependencies={lanes:0,firstContext:e}}else ir=ir.next=e;return t}var In=null;function Po(e){In===null?In=[e]:In.push(e)}function Ha(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,Po(t)):(n.next=l.next,l.next=n),t.interleaved=n,Gt(e,r)}function Gt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var mn=!1;function bo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Va(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(be&2)!==0){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,Gt(e,n)}return l=r.interleaved,l===null?(t.next=t,Po(r)):(t.next=l.next,l.next=t),r.interleaved=t,Gt(e,n)}function Ql(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Us(e,n)}}function Wa(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?l=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?l=s=t:s=s.next=t}else l=s=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Yl(e,t,n,r){var l=e.updateQueue;mn=!1;var s=l.firstBaseUpdate,i=l.lastBaseUpdate,f=l.shared.pending;if(f!==null){l.shared.pending=null;var g=f,P=g.next;g.next=null,i===null?s=P:i.next=P,i=g;var W=e.alternate;W!==null&&(W=W.updateQueue,f=W.lastBaseUpdate,f!==i&&(f===null?W.firstBaseUpdate=P:f.next=P,W.lastBaseUpdate=g))}if(s!==null){var G=l.baseState;i=0,W=P=g=null,f=s;do{var H=f.lane,se=f.eventTime;if((r&H)===H){W!==null&&(W=W.next={eventTime:se,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var ce=e,de=f;switch(H=t,se=n,de.tag){case 1:if(ce=de.payload,typeof ce=="function"){G=ce.call(se,G,H);break e}G=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=de.payload,H=typeof ce=="function"?ce.call(se,G,H):ce,H==null)break e;G=R({},G,H);break e;case 2:mn=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,H=l.effects,H===null?l.effects=[f]:H.push(f))}else se={eventTime:se,lane:H,tag:f.tag,payload:f.payload,callback:f.callback,next:null},W===null?(P=W=se,g=G):W=W.next=se,i|=H;if(f=f.next,f===null){if(f=l.shared.pending,f===null)break;H=f,f=H.next,H.next=null,l.lastBaseUpdate=H,l.shared.pending=null}}while(!0);if(W===null&&(g=G),l.baseState=g,l.firstBaseUpdate=P,l.lastBaseUpdate=W,t=l.shared.interleaved,t!==null){l=t;do i|=l.lane,l=l.next;while(l!==t)}else s===null&&(l.shared.lanes=0);An|=i,e.lanes=i,e.memoizedState=G}}function Ka(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(a(191,l));l.call(r)}}}var Hr={},$t=dn(Hr),Vr=dn(Hr),Wr=dn(Hr);function Mn(e){if(e===Hr)throw Error(a(174));return e}function _o(e,t){switch(ze(Wr,t),ze(Vr,e),ze($t,Hr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:vr(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=vr(t,e)}Me($t),ze($t,t)}function ur(){Me($t),Me(Vr),Me(Wr)}function Qa(e){Mn(Wr.current);var t=Mn($t.current),n=vr(t,e.type);t!==n&&(ze(Vr,e),ze($t,n))}function Ro(e){Vr.current===e&&(Me($t),Me(Vr))}var Ae=dn(0);function Gl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Do=[];function Lo(){for(var e=0;e<Do.length;e++)Do[e]._workInProgressVersionPrimary=null;Do.length=0}var Xl=z.ReactCurrentDispatcher,To=z.ReactCurrentBatchConfig,$n=0,Ue=null,Ke=null,Ye=null,ql=!1,Kr=!1,Qr=0,Bd=0;function tt(){throw Error(a(321))}function Oo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Dt(e[n],t[n]))return!1;return!0}function zo(e,t,n,r,l,s){if($n=s,Ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xl.current=e===null||e.memoizedState===null?Kd:Qd,e=n(r,l),Kr){s=0;do{if(Kr=!1,Qr=0,25<=s)throw Error(a(301));s+=1,Ye=Ke=null,t.updateQueue=null,Xl.current=Yd,e=n(r,l)}while(Kr)}if(Xl.current=es,t=Ke!==null&&Ke.next!==null,$n=0,Ye=Ke=Ue=null,ql=!1,t)throw Error(a(300));return e}function Fo(){var e=Qr!==0;return Qr=0,e}function At(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Ue.memoizedState=Ye=e:Ye=Ye.next=e,Ye}function Pt(){if(Ke===null){var e=Ue.alternate;e=e!==null?e.memoizedState:null}else e=Ke.next;var t=Ye===null?Ue.memoizedState:Ye.next;if(t!==null)Ye=t,Ke=e;else{if(e===null)throw Error(a(310));Ke=e,e={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Ye===null?Ue.memoizedState=Ye=e:Ye=Ye.next=e}return Ye}function Yr(e,t){return typeof t=="function"?t(e):t}function Io(e){var t=Pt(),n=t.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=e;var r=Ke,l=r.baseQueue,s=n.pending;if(s!==null){if(l!==null){var i=l.next;l.next=s.next,s.next=i}r.baseQueue=l=s,n.pending=null}if(l!==null){s=l.next,r=r.baseState;var f=i=null,g=null,P=s;do{var W=P.lane;if(($n&W)===W)g!==null&&(g=g.next={lane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),r=P.hasEagerState?P.eagerState:e(r,P.action);else{var G={lane:W,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null};g===null?(f=g=G,i=r):g=g.next=G,Ue.lanes|=W,An|=W}P=P.next}while(P!==null&&P!==s);g===null?i=r:g.next=f,Dt(r,t.memoizedState)||(ut=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=g,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do s=l.lane,Ue.lanes|=s,An|=s,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Mo(e){var t=Pt(),n=t.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,s=t.memoizedState;if(l!==null){n.pending=null;var i=l=l.next;do s=e(s,i.action),i=i.next;while(i!==l);Dt(s,t.memoizedState)||(ut=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ya(){}function Ga(e,t){var n=Ue,r=Pt(),l=t(),s=!Dt(r.memoizedState,l);if(s&&(r.memoizedState=l,ut=!0),r=r.queue,$o(Ja.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,Gr(9,qa.bind(null,n,r,l,t),void 0,null),Ge===null)throw Error(a(349));($n&30)!==0||Xa(n,t,l)}return l}function Xa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qa(e,t,n,r){t.value=n,t.getSnapshot=r,Za(t)&&eu(e)}function Ja(e,t,n){return n(function(){Za(t)&&eu(e)})}function Za(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Dt(e,n)}catch{return!0}}function eu(e){var t=Gt(e,1);t!==null&&Ft(t,e,1,-1)}function tu(e){var t=At();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yr,lastRenderedState:e},t.queue=e,e=e.dispatch=Wd.bind(null,Ue,e),[t.memoizedState,e]}function Gr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function nu(){return Pt().memoizedState}function Jl(e,t,n,r){var l=At();Ue.flags|=e,l.memoizedState=Gr(1|t,n,void 0,r===void 0?null:r)}function Zl(e,t,n,r){var l=Pt();r=r===void 0?null:r;var s=void 0;if(Ke!==null){var i=Ke.memoizedState;if(s=i.destroy,r!==null&&Oo(r,i.deps)){l.memoizedState=Gr(t,n,s,r);return}}Ue.flags|=e,l.memoizedState=Gr(1|t,n,s,r)}function ru(e,t){return Jl(8390656,8,e,t)}function $o(e,t){return Zl(2048,8,e,t)}function lu(e,t){return Zl(4,2,e,t)}function su(e,t){return Zl(4,4,e,t)}function ou(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function iu(e,t,n){return n=n!=null?n.concat([e]):null,Zl(4,4,ou.bind(null,t,e),n)}function Ao(){}function au(e,t){var n=Pt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Oo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function uu(e,t){var n=Pt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Oo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function cu(e,t,n){return($n&21)===0?(e.baseState&&(e.baseState=!1,ut=!0),e.memoizedState=n):(Dt(n,t)||(n=Ai(),Ue.lanes|=n,An|=n,e.baseState=!0),t)}function Hd(e,t){var n=Le;Le=n!==0&&4>n?n:4,e(!0);var r=To.transition;To.transition={};try{e(!1),t()}finally{Le=n,To.transition=r}}function du(){return Pt().memoizedState}function Vd(e,t,n){var r=xn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fu(e))pu(t,n);else if(n=Ha(e,t,n,r),n!==null){var l=st();Ft(n,e,r,l),mu(n,t,r)}}function Wd(e,t,n){var r=xn(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fu(e))pu(t,l);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,f=s(i,n);if(l.hasEagerState=!0,l.eagerState=f,Dt(f,i)){var g=t.interleaved;g===null?(l.next=l,Po(t)):(l.next=g.next,g.next=l),t.interleaved=l;return}}catch{}n=Ha(e,t,l,r),n!==null&&(l=st(),Ft(n,e,r,l),mu(n,t,r))}}function fu(e){var t=e.alternate;return e===Ue||t!==null&&t===Ue}function pu(e,t){Kr=ql=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mu(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Us(e,n)}}var es={readContext:Et,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},Kd={readContext:Et,useCallback:function(e,t){return At().memoizedState=[e,t===void 0?null:t],e},useContext:Et,useEffect:ru,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Jl(4194308,4,ou.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Jl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Jl(4,2,e,t)},useMemo:function(e,t){var n=At();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=At();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Vd.bind(null,Ue,e),[r.memoizedState,e]},useRef:function(e){var t=At();return e={current:e},t.memoizedState=e},useState:tu,useDebugValue:Ao,useDeferredValue:function(e){return At().memoizedState=e},useTransition:function(){var e=tu(!1),t=e[0];return e=Hd.bind(null,e[1]),At().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ue,l=At();if($e){if(n===void 0)throw Error(a(407));n=n()}else{if(n=t(),Ge===null)throw Error(a(349));($n&30)!==0||Xa(r,t,n)}l.memoizedState=n;var s={value:n,getSnapshot:t};return l.queue=s,ru(Ja.bind(null,r,s,e),[e]),r.flags|=2048,Gr(9,qa.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=At(),t=Ge.identifierPrefix;if($e){var n=Yt,r=Qt;n=(r&~(1<<32-Rt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Qr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Bd++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Qd={readContext:Et,useCallback:au,useContext:Et,useEffect:$o,useImperativeHandle:iu,useInsertionEffect:lu,useLayoutEffect:su,useMemo:uu,useReducer:Io,useRef:nu,useState:function(){return Io(Yr)},useDebugValue:Ao,useDeferredValue:function(e){var t=Pt();return cu(t,Ke.memoizedState,e)},useTransition:function(){var e=Io(Yr)[0],t=Pt().memoizedState;return[e,t]},useMutableSource:Ya,useSyncExternalStore:Ga,useId:du,unstable_isNewReconciler:!1},Yd={readContext:Et,useCallback:au,useContext:Et,useEffect:$o,useImperativeHandle:iu,useInsertionEffect:lu,useLayoutEffect:su,useMemo:uu,useReducer:Mo,useRef:nu,useState:function(){return Mo(Yr)},useDebugValue:Ao,useDeferredValue:function(e){var t=Pt();return Ke===null?t.memoizedState=e:cu(t,Ke.memoizedState,e)},useTransition:function(){var e=Mo(Yr)[0],t=Pt().memoizedState;return[e,t]},useMutableSource:Ya,useSyncExternalStore:Ga,useId:du,unstable_isNewReconciler:!1};function Tt(e,t){if(e&&e.defaultProps){t=R({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Uo(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:R({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ts={isMounted:function(e){return(e=e._reactInternals)?he(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=st(),l=xn(e),s=Xt(r,l);s.payload=t,n!=null&&(s.callback=n),t=hn(e,s,l),t!==null&&(Ft(t,e,l,r),Ql(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=st(),l=xn(e),s=Xt(r,l);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=hn(e,s,l),t!==null&&(Ft(t,e,l,r),Ql(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=st(),r=xn(e),l=Xt(n,r);l.tag=2,t!=null&&(l.callback=t),t=hn(e,l,r),t!==null&&(Ft(t,e,r,n),Ql(t,e,r))}};function hu(e,t,n,r,l,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!zr(n,r)||!zr(l,s):!0}function gu(e,t,n){var r=!1,l=fn,s=t.contextType;return typeof s=="object"&&s!==null?s=Et(s):(l=at(t)?On:et.current,r=t.contextTypes,s=(r=r!=null)?nr(e,l):fn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ts,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=s),t}function yu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ts.enqueueReplaceState(t,t.state,null)}function Bo(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},bo(e);var s=t.contextType;typeof s=="object"&&s!==null?l.context=Et(s):(s=at(t)?On:et.current,l.context=nr(e,s)),l.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Uo(e,t,s,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&ts.enqueueReplaceState(l,l.state,null),Yl(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function cr(e,t){try{var n="",r=t;do n+=ae(r),r=r.return;while(r);var l=n}catch(s){l=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:l,digest:null}}function Ho(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Vo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Gd=typeof WeakMap=="function"?WeakMap:Map;function vu(e,t,n){n=Xt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){as||(as=!0,si=r),Vo(e,t)},n}function xu(e,t,n){n=Xt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){Vo(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Vo(e,t),typeof r!="function"&&(yn===null?yn=new Set([this]):yn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function wu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Gd;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=cf.bind(null,e,t,n),t.then(e,e))}function Nu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ku(e,t,n,r,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Xt(-1,1),t.tag=2,hn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var Xd=z.ReactCurrentOwner,ut=!1;function lt(e,t,n,r){t.child=e===null?Ba(t,null,n,r):or(t,e.child,n,r)}function Su(e,t,n,r,l){n=n.render;var s=t.ref;return ar(t,l),r=zo(e,t,n,r,s,l),n=Fo(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,qt(e,t,l)):($e&&n&&vo(t),t.flags|=1,lt(e,t,r,l),t.child)}function ju(e,t,n,r,l){if(e===null){var s=n.type;return typeof s=="function"&&!fi(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Cu(e,t,s,r,l)):(e=ms(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&l)===0){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:zr,n(i,r)&&e.ref===t.ref)return qt(e,t,l)}return t.flags|=1,e=Nn(s,r),e.ref=t.ref,e.return=t,t.child=e}function Cu(e,t,n,r,l){if(e!==null){var s=e.memoizedProps;if(zr(s,r)&&e.ref===t.ref)if(ut=!1,t.pendingProps=r=s,(e.lanes&l)!==0)(e.flags&131072)!==0&&(ut=!0);else return t.lanes=e.lanes,qt(e,t,l)}return Wo(e,t,n,r,l)}function Eu(e,t,n){var r=t.pendingProps,l=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(fr,Nt),Nt|=n;else{if((n&1073741824)===0)return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(fr,Nt),Nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ze(fr,Nt),Nt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ze(fr,Nt),Nt|=r;return lt(e,t,l,n),t.child}function Pu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Wo(e,t,n,r,l){var s=at(n)?On:et.current;return s=nr(t,s),ar(t,l),n=zo(e,t,n,r,s,l),r=Fo(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,qt(e,t,l)):($e&&r&&vo(t),t.flags|=1,lt(e,t,n,l),t.child)}function bu(e,t,n,r,l){if(at(n)){var s=!0;$l(t)}else s=!1;if(ar(t,l),t.stateNode===null)rs(e,t),gu(t,n,r),Bo(t,n,r,l),r=!0;else if(e===null){var i=t.stateNode,f=t.memoizedProps;i.props=f;var g=i.context,P=n.contextType;typeof P=="object"&&P!==null?P=Et(P):(P=at(n)?On:et.current,P=nr(t,P));var W=n.getDerivedStateFromProps,G=typeof W=="function"||typeof i.getSnapshotBeforeUpdate=="function";G||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(f!==r||g!==P)&&yu(t,i,r,P),mn=!1;var H=t.memoizedState;i.state=H,Yl(t,r,i,l),g=t.memoizedState,f!==r||H!==g||it.current||mn?(typeof W=="function"&&(Uo(t,n,W,r),g=t.memoizedState),(f=mn||hu(t,n,f,r,H,g,P))?(G||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=g),i.props=r,i.state=g,i.context=P,r=f):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Va(e,t),f=t.memoizedProps,P=t.type===t.elementType?f:Tt(t.type,f),i.props=P,G=t.pendingProps,H=i.context,g=n.contextType,typeof g=="object"&&g!==null?g=Et(g):(g=at(n)?On:et.current,g=nr(t,g));var se=n.getDerivedStateFromProps;(W=typeof se=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(f!==G||H!==g)&&yu(t,i,r,g),mn=!1,H=t.memoizedState,i.state=H,Yl(t,r,i,l);var ce=t.memoizedState;f!==G||H!==ce||it.current||mn?(typeof se=="function"&&(Uo(t,n,se,r),ce=t.memoizedState),(P=mn||hu(t,n,P,r,H,ce,g)||!1)?(W||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,ce,g),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,ce,g)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||f===e.memoizedProps&&H===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&H===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=ce),i.props=r,i.state=ce,i.context=g,r=P):(typeof i.componentDidUpdate!="function"||f===e.memoizedProps&&H===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&H===e.memoizedState||(t.flags|=1024),r=!1)}return Ko(e,t,n,r,s,l)}function Ko(e,t,n,r,l,s){Pu(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return l&&Ta(t,n,!1),qt(e,t,s);r=t.stateNode,Xd.current=t;var f=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=or(t,e.child,null,s),t.child=or(t,null,f,s)):lt(e,t,f,s),t.memoizedState=r.state,l&&Ta(t,n,!0),t.child}function _u(e){var t=e.stateNode;t.pendingContext?Da(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Da(e,t.context,!1),_o(e,t.containerInfo)}function Ru(e,t,n,r,l){return sr(),ko(l),t.flags|=256,lt(e,t,n,r),t.child}var Qo={dehydrated:null,treeContext:null,retryLane:0};function Yo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Du(e,t,n){var r=t.pendingProps,l=Ae.current,s=!1,i=(t.flags&128)!==0,f;if((f=i)||(f=e!==null&&e.memoizedState===null?!1:(l&2)!==0),f?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),ze(Ae,l&1),e===null)return No(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=i):s=hs(i,r,0,null),e=Vn(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Yo(n),t.memoizedState=Qo,e):Go(t,i));if(l=e.memoizedState,l!==null&&(f=l.dehydrated,f!==null))return qd(e,t,i,r,f,l,n);if(s){s=r.fallback,i=t.mode,l=e.child,f=l.sibling;var g={mode:"hidden",children:r.children};return(i&1)===0&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=g,t.deletions=null):(r=Nn(l,g),r.subtreeFlags=l.subtreeFlags&14680064),f!==null?s=Nn(f,s):(s=Vn(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?Yo(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=Qo,r}return s=e.child,e=s.sibling,r=Nn(s,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Go(e,t){return t=hs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ns(e,t,n,r){return r!==null&&ko(r),or(t,e.child,null,n),e=Go(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function qd(e,t,n,r,l,s,i){if(n)return t.flags&256?(t.flags&=-257,r=Ho(Error(a(422))),ns(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,l=t.mode,r=hs({mode:"visible",children:r.children},l,0,null),s=Vn(s,l,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,(t.mode&1)!==0&&or(t,e.child,null,i),t.child.memoizedState=Yo(i),t.memoizedState=Qo,s);if((t.mode&1)===0)return ns(e,t,i,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var f=r.dgst;return r=f,s=Error(a(419)),r=Ho(s,r,void 0),ns(e,t,i,r)}if(f=(i&e.childLanes)!==0,ut||f){if(r=Ge,r!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(r.suspendedLanes|i))!==0?0:l,l!==0&&l!==s.retryLane&&(s.retryLane=l,Gt(e,l),Ft(r,e,l,-1))}return di(),r=Ho(Error(a(421))),ns(e,t,i,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=df.bind(null,e),l._reactRetry=t,null):(e=s.treeContext,wt=cn(l.nextSibling),xt=t,$e=!0,Lt=null,e!==null&&(jt[Ct++]=Qt,jt[Ct++]=Yt,jt[Ct++]=zn,Qt=e.id,Yt=e.overflow,zn=t),t=Go(t,r.children),t.flags|=4096,t)}function Lu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Eo(e.return,t,n)}function Xo(e,t,n,r,l){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=l)}function Tu(e,t,n){var r=t.pendingProps,l=r.revealOrder,s=r.tail;if(lt(e,t,r.children,n),r=Ae.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lu(e,n,t);else if(e.tag===19)Lu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ze(Ae,r),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Gl(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Xo(t,!1,l,n,s);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Gl(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}Xo(t,!0,n,null,s);break;case"together":Xo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rs(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),An|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,n=Nn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Nn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Jd(e,t,n){switch(t.tag){case 3:_u(t),sr();break;case 5:Qa(t);break;case 1:at(t.type)&&$l(t);break;case 4:_o(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;ze(Wl,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ze(Ae,Ae.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Du(e,t,n):(ze(Ae,Ae.current&1),e=qt(e,t,n),e!==null?e.sibling:null);ze(Ae,Ae.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Tu(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),ze(Ae,Ae.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return qt(e,t,n)}var Ou,qo,zu,Fu;Ou=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},qo=function(){},zu=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,Mn($t.current);var s=null;switch(n){case"input":l=Ee(e,l),r=Ee(e,r),s=[];break;case"select":l=R({},l,{value:void 0}),r=R({},r,{value:void 0}),s=[];break;case"textarea":l=ot(e,l),r=ot(e,r),s=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Fl)}xr(n,r);var i;n=null;for(P in l)if(!r.hasOwnProperty(P)&&l.hasOwnProperty(P)&&l[P]!=null)if(P==="style"){var f=l[P];for(i in f)f.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else P!=="dangerouslySetInnerHTML"&&P!=="children"&&P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(d.hasOwnProperty(P)?s||(s=[]):(s=s||[]).push(P,null));for(P in r){var g=r[P];if(f=l?.[P],r.hasOwnProperty(P)&&g!==f&&(g!=null||f!=null))if(P==="style")if(f){for(i in f)!f.hasOwnProperty(i)||g&&g.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in g)g.hasOwnProperty(i)&&f[i]!==g[i]&&(n||(n={}),n[i]=g[i])}else n||(s||(s=[]),s.push(P,n)),n=g;else P==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,f=f?f.__html:void 0,g!=null&&f!==g&&(s=s||[]).push(P,g)):P==="children"?typeof g!="string"&&typeof g!="number"||(s=s||[]).push(P,""+g):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&(d.hasOwnProperty(P)?(g!=null&&P==="onScroll"&&Ie("scroll",e),s||f===g||(s=[])):(s=s||[]).push(P,g))}n&&(s=s||[]).push("style",n);var P=s;(t.updateQueue=P)&&(t.flags|=4)}},Fu=function(e,t,n,r){n!==r&&(t.flags|=4)};function Xr(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Zd(e,t,n){var r=t.pendingProps;switch(xo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return at(t.type)&&Ml(),nt(t),null;case 3:return r=t.stateNode,ur(),Me(it),Me(et),Lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Hl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Lt!==null&&(ai(Lt),Lt=null))),qo(e,t),nt(t),null;case 5:Ro(t);var l=Mn(Wr.current);if(n=t.type,e!==null&&t.stateNode!=null)zu(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(a(166));return nt(t),null}if(e=Mn($t.current),Hl(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Mt]=t,r[Ar]=s,e=(t.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(l=0;l<Ir.length;l++)Ie(Ir[l],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":Pe(r,s),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ie("invalid",r);break;case"textarea":yt(r,s),Ie("invalid",r)}xr(n,s),l=null;for(var i in s)if(s.hasOwnProperty(i)){var f=s[i];i==="children"?typeof f=="string"?r.textContent!==f&&(s.suppressHydrationWarning!==!0&&zl(r.textContent,f,e),l=["children",f]):typeof f=="number"&&r.textContent!==""+f&&(s.suppressHydrationWarning!==!0&&zl(r.textContent,f,e),l=["children",""+f]):d.hasOwnProperty(i)&&f!=null&&i==="onScroll"&&Ie("scroll",r)}switch(n){case"input":ge(r),De(r,s,!0);break;case"textarea":ge(r),sl(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Fl)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ol(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Mt]=t,e[Ar]=r,Ou(e,t,!1,!1),t.stateNode=e;e:{switch(i=Cn(n,r),n){case"dialog":Ie("cancel",e),Ie("close",e),l=r;break;case"iframe":case"object":case"embed":Ie("load",e),l=r;break;case"video":case"audio":for(l=0;l<Ir.length;l++)Ie(Ir[l],e);l=r;break;case"source":Ie("error",e),l=r;break;case"img":case"image":case"link":Ie("error",e),Ie("load",e),l=r;break;case"details":Ie("toggle",e),l=r;break;case"input":Pe(e,r),l=Ee(e,r),Ie("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=R({},r,{value:void 0}),Ie("invalid",e);break;case"textarea":yt(e,r),l=ot(e,r),Ie("invalid",e);break;default:l=r}xr(n,l),f=l;for(s in f)if(f.hasOwnProperty(s)){var g=f[s];s==="style"?ul(e,g):s==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&il(e,g)):s==="children"?typeof g=="string"?(n!=="textarea"||g!=="")&&en(e,g):typeof g=="number"&&en(e,""+g):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(d.hasOwnProperty(s)?g!=null&&s==="onScroll"&&Ie("scroll",e):g!=null&&ne(e,s,g,i))}switch(n){case"input":ge(e),De(e,r,!1);break;case"textarea":ge(e),sl(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ne(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?gt(e,!!r.multiple,s,!1):r.defaultValue!=null&&gt(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Fl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return nt(t),null;case 6:if(e&&t.stateNode!=null)Fu(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(a(166));if(n=Mn(Wr.current),Mn($t.current),Hl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Mt]=t,(s=r.nodeValue!==n)&&(e=xt,e!==null))switch(e.tag){case 3:zl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zl(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mt]=t,t.stateNode=r}return nt(t),null;case 13:if(Me(Ae),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&wt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)$a(),sr(),t.flags|=98560,s=!1;else if(s=Hl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(a(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(a(317));s[Mt]=t}else sr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nt(t),s=!1}else Lt!==null&&(ai(Lt),Lt=null),s=!0;if(!s)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ae.current&1)!==0?Qe===0&&(Qe=3):di())),t.updateQueue!==null&&(t.flags|=4),nt(t),null);case 4:return ur(),qo(e,t),e===null&&Mr(t.stateNode.containerInfo),nt(t),null;case 10:return Co(t.type._context),nt(t),null;case 17:return at(t.type)&&Ml(),nt(t),null;case 19:if(Me(Ae),s=t.memoizedState,s===null)return nt(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)Xr(s,!1);else{if(Qe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=Gl(e),i!==null){for(t.flags|=128,Xr(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ze(Ae,Ae.current&1|2),t.child}e=e.sibling}s.tail!==null&&He()>pr&&(t.flags|=128,r=!0,Xr(s,!1),t.lanes=4194304)}else{if(!r)if(e=Gl(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Xr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!$e)return nt(t),null}else 2*He()-s.renderingStartTime>pr&&n!==1073741824&&(t.flags|=128,r=!0,Xr(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=He(),t.sibling=null,n=Ae.current,ze(Ae,r?n&1|2:n&1),t):(nt(t),null);case 22:case 23:return ci(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(Nt&1073741824)!==0&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),null;case 24:return null;case 25:return null}throw Error(a(156,t.tag))}function ef(e,t){switch(xo(t),t.tag){case 1:return at(t.type)&&Ml(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ur(),Me(it),Me(et),Lo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Ro(t),null;case 13:if(Me(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));sr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Me(Ae),null;case 4:return ur(),null;case 10:return Co(t.type._context),null;case 22:case 23:return ci(),null;case 24:return null;default:return null}}var ls=!1,rt=!1,tf=typeof WeakSet=="function"?WeakSet:Set,ue=null;function dr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(e,t,r)}else n.current=null}function Jo(e,t,n){try{n()}catch(r){Be(e,t,r)}}var Iu=!1;function nf(e,t){if(uo=jl,e=ha(),to(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,f=-1,g=-1,P=0,W=0,G=e,H=null;t:for(;;){for(var se;G!==n||l!==0&&G.nodeType!==3||(f=i+l),G!==s||r!==0&&G.nodeType!==3||(g=i+r),G.nodeType===3&&(i+=G.nodeValue.length),(se=G.firstChild)!==null;)H=G,G=se;for(;;){if(G===e)break t;if(H===n&&++P===l&&(f=i),H===s&&++W===r&&(g=i),(se=G.nextSibling)!==null)break;G=H,H=G.parentNode}G=se}n=f===-1||g===-1?null:{start:f,end:g}}else n=null}n=n||{start:0,end:0}}else n=null;for(co={focusedElem:e,selectionRange:n},jl=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var ce=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var de=ce.memoizedProps,Ve=ce.memoizedState,N=t.stateNode,y=N.getSnapshotBeforeUpdate(t.elementType===t.type?de:Tt(t.type,de),Ve);N.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Z){Be(t,t.return,Z)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return ce=Iu,Iu=!1,ce}function qr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var s=l.destroy;l.destroy=void 0,s!==void 0&&Jo(t,n,s)}l=l.next}while(l!==r)}}function ss(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Zo(e){var t=e.ref;if(t!==null){var n=e.stateNode;e.tag,e=n,typeof t=="function"?t(e):t.current=e}}function Mu(e){var t=e.alternate;t!==null&&(e.alternate=null,Mu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Mt],delete t[Ar],delete t[ho],delete t[Md],delete t[$d])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $u(e){return e.tag===5||e.tag===3||e.tag===4}function Au(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$u(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ei(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Fl));else if(r!==4&&(e=e.child,e!==null))for(ei(e,t,n),e=e.sibling;e!==null;)ei(e,t,n),e=e.sibling}function ti(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ti(e,t,n),e=e.sibling;e!==null;)ti(e,t,n),e=e.sibling}var Je=null,Ot=!1;function gn(e,t,n){for(n=n.child;n!==null;)Uu(e,t,n),n=n.sibling}function Uu(e,t,n){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(vl,n)}catch{}switch(n.tag){case 5:rt||dr(n,t);case 6:var r=Je,l=Ot;Je=null,gn(e,t,n),Je=r,Ot=l,Je!==null&&(Ot?(e=Je,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Ot?(e=Je,n=n.stateNode,e.nodeType===8?mo(e.parentNode,n):e.nodeType===1&&mo(e,n),_r(e)):mo(Je,n.stateNode));break;case 4:r=Je,l=Ot,Je=n.stateNode.containerInfo,Ot=!0,gn(e,t,n),Je=r,Ot=l;break;case 0:case 11:case 14:case 15:if(!rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var s=l,i=s.destroy;s=s.tag,i!==void 0&&((s&2)!==0||(s&4)!==0)&&Jo(n,t,i),l=l.next}while(l!==r)}gn(e,t,n);break;case 1:if(!rt&&(dr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(f){Be(n,t,f)}gn(e,t,n);break;case 21:gn(e,t,n);break;case 22:n.mode&1?(rt=(r=rt)||n.memoizedState!==null,gn(e,t,n),rt=r):gn(e,t,n);break;default:gn(e,t,n)}}function Bu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new tf),t.forEach(function(r){var l=ff.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function zt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var s=e,i=t,f=i;e:for(;f!==null;){switch(f.tag){case 5:Je=f.stateNode,Ot=!1;break e;case 3:Je=f.stateNode.containerInfo,Ot=!0;break e;case 4:Je=f.stateNode.containerInfo,Ot=!0;break e}f=f.return}if(Je===null)throw Error(a(160));Uu(s,i,l),Je=null,Ot=!1;var g=l.alternate;g!==null&&(g.return=null),l.return=null}catch(P){Be(l,t,P)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Hu(t,e),t=t.sibling}function Hu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zt(t,e),Ut(e),r&4){try{qr(3,e,e.return),ss(3,e)}catch(de){Be(e,e.return,de)}try{qr(5,e,e.return)}catch(de){Be(e,e.return,de)}}break;case 1:zt(t,e),Ut(e),r&512&&n!==null&&dr(n,n.return);break;case 5:if(zt(t,e),Ut(e),r&512&&n!==null&&dr(n,n.return),e.flags&32){var l=e.stateNode;try{en(l,"")}catch(de){Be(e,e.return,de)}}if(r&4&&(l=e.stateNode,l!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,f=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{f==="input"&&s.type==="radio"&&s.name!=null&&je(l,s),Cn(f,i);var P=Cn(f,s);for(i=0;i<g.length;i+=2){var W=g[i],G=g[i+1];W==="style"?ul(l,G):W==="dangerouslySetInnerHTML"?il(l,G):W==="children"?en(l,G):ne(l,W,G,P)}switch(f){case"input":Re(l,s);break;case"textarea":yr(l,s);break;case"select":var H=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!s.multiple;var se=s.value;se!=null?gt(l,!!s.multiple,se,!1):H!==!!s.multiple&&(s.defaultValue!=null?gt(l,!!s.multiple,s.defaultValue,!0):gt(l,!!s.multiple,s.multiple?[]:"",!1))}l[Ar]=s}catch(de){Be(e,e.return,de)}}break;case 6:if(zt(t,e),Ut(e),r&4){if(e.stateNode===null)throw Error(a(162));l=e.stateNode,s=e.memoizedProps;try{l.nodeValue=s}catch(de){Be(e,e.return,de)}}break;case 3:if(zt(t,e),Ut(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_r(t.containerInfo)}catch(de){Be(e,e.return,de)}break;case 4:zt(t,e),Ut(e);break;case 13:zt(t,e),Ut(e),l=e.child,l.flags&8192&&(s=l.memoizedState!==null,l.stateNode.isHidden=s,!s||l.alternate!==null&&l.alternate.memoizedState!==null||(li=He())),r&4&&Bu(e);break;case 22:if(W=n!==null&&n.memoizedState!==null,e.mode&1?(rt=(P=rt)||W,zt(t,e),rt=P):zt(t,e),Ut(e),r&8192){if(P=e.memoizedState!==null,(e.stateNode.isHidden=P)&&!W&&(e.mode&1)!==0)for(ue=e,W=e.child;W!==null;){for(G=ue=W;ue!==null;){switch(H=ue,se=H.child,H.tag){case 0:case 11:case 14:case 15:qr(4,H,H.return);break;case 1:dr(H,H.return);var ce=H.stateNode;if(typeof ce.componentWillUnmount=="function"){r=H,n=H.return;try{t=r,ce.props=t.memoizedProps,ce.state=t.memoizedState,ce.componentWillUnmount()}catch(de){Be(r,n,de)}}break;case 5:dr(H,H.return);break;case 22:if(H.memoizedState!==null){Ku(G);continue}}se!==null?(se.return=H,ue=se):Ku(G)}W=W.sibling}e:for(W=null,G=e;;){if(G.tag===5){if(W===null){W=G;try{l=G.stateNode,P?(s=l.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(f=G.stateNode,g=G.memoizedProps.style,i=g!=null&&g.hasOwnProperty("display")?g.display:null,f.style.display=al("display",i))}catch(de){Be(e,e.return,de)}}}else if(G.tag===6){if(W===null)try{G.stateNode.nodeValue=P?"":G.memoizedProps}catch(de){Be(e,e.return,de)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===e)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===e)break e;for(;G.sibling===null;){if(G.return===null||G.return===e)break e;W===G&&(W=null),G=G.return}W===G&&(W=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:zt(t,e),Ut(e),r&4&&Bu(e);break;case 21:break;default:zt(t,e),Ut(e)}}function Ut(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if($u(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(en(l,""),r.flags&=-33);var s=Au(e);ti(e,s,l);break;case 3:case 4:var i=r.stateNode.containerInfo,f=Au(e);ei(e,f,i);break;default:throw Error(a(161))}}catch(g){Be(e,e.return,g)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rf(e,t,n){ue=e,Vu(e)}function Vu(e,t,n){for(var r=(e.mode&1)!==0;ue!==null;){var l=ue,s=l.child;if(l.tag===22&&r){var i=l.memoizedState!==null||ls;if(!i){var f=l.alternate,g=f!==null&&f.memoizedState!==null||rt;f=ls;var P=rt;if(ls=i,(rt=g)&&!P)for(ue=l;ue!==null;)i=ue,g=i.child,i.tag===22&&i.memoizedState!==null?Qu(l):g!==null?(g.return=i,ue=g):Qu(l);for(;s!==null;)ue=s,Vu(s),s=s.sibling;ue=l,ls=f,rt=P}Wu(e)}else(l.subtreeFlags&8772)!==0&&s!==null?(s.return=l,ue=s):Wu(e)}}function Wu(e){for(;ue!==null;){var t=ue;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:rt||ss(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!rt)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:Tt(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Ka(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ka(t,i,n)}break;case 5:var f=t.stateNode;if(n===null&&t.flags&4){n=f;var g=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&n.focus();break;case"img":g.src&&(n.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var P=t.alternate;if(P!==null){var W=P.memoizedState;if(W!==null){var G=W.dehydrated;G!==null&&_r(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}rt||t.flags&512&&Zo(t)}catch(H){Be(t,t.return,H)}}if(t===e){ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Ku(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Qu(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ss(4,t)}catch(g){Be(t,n,g)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(g){Be(t,l,g)}}var s=t.return;try{Zo(t)}catch(g){Be(t,s,g)}break;case 5:var i=t.return;try{Zo(t)}catch(g){Be(t,i,g)}}}catch(g){Be(t,t.return,g)}if(t===e){ue=null;break}var f=t.sibling;if(f!==null){f.return=t.return,ue=f;break}ue=t.return}}var lf=Math.ceil,os=z.ReactCurrentDispatcher,ni=z.ReactCurrentOwner,bt=z.ReactCurrentBatchConfig,be=0,Ge=null,We=null,Ze=0,Nt=0,fr=dn(0),Qe=0,Jr=null,An=0,is=0,ri=0,Zr=null,ct=null,li=0,pr=1/0,Jt=null,as=!1,si=null,yn=null,us=!1,vn=null,cs=0,el=0,oi=null,ds=-1,fs=0;function st(){return(be&6)!==0?He():ds!==-1?ds:ds=He()}function xn(e){return(e.mode&1)===0?1:(be&2)!==0&&Ze!==0?Ze&-Ze:Ud.transition!==null?(fs===0&&(fs=Ai()),fs):(e=Le,e!==0||(e=window.event,e=e===void 0?16:Gi(e.type)),e)}function Ft(e,t,n,r){if(50<el)throw el=0,oi=null,Error(a(185));jr(e,n,r),((be&2)===0||e!==Ge)&&(e===Ge&&((be&2)===0&&(is|=n),Qe===4&&wn(e,Ze)),dt(e,r),n===1&&be===0&&(t.mode&1)===0&&(pr=He()+500,Al&&pn()))}function dt(e,t){var n=e.callbackNode;Uc(e,t);var r=Nl(e,e===Ge?Ze:0);if(r===0)n!==null&&Ii(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ii(n),t===1)e.tag===0?Ad(Gu.bind(null,e)):Oa(Gu.bind(null,e)),Fd(function(){(be&6)===0&&pn()}),n=null;else{switch(Ui(r)){case 1:n=Ms;break;case 4:n=Mi;break;case 16:n=yl;break;case 536870912:n=$i;break;default:n=yl}n=rc(n,Yu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Yu(e,t){if(ds=-1,fs=0,(be&6)!==0)throw Error(a(327));var n=e.callbackNode;if(mr()&&e.callbackNode!==n)return null;var r=Nl(e,e===Ge?Ze:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=ps(e,r);else{t=r;var l=be;be|=2;var s=qu();(Ge!==e||Ze!==t)&&(Jt=null,pr=He()+500,Bn(e,t));do try{af();break}catch(f){Xu(e,f)}while(!0);jo(),os.current=s,be=l,We!==null?t=0:(Ge=null,Ze=0,t=Qe)}if(t!==0){if(t===2&&(l=$s(e),l!==0&&(r=l,t=ii(e,l))),t===1)throw n=Jr,Bn(e,0),wn(e,r),dt(e,He()),n;if(t===6)wn(e,r);else{if(l=e.current.alternate,(r&30)===0&&!sf(l)&&(t=ps(e,r),t===2&&(s=$s(e),s!==0&&(r=s,t=ii(e,s))),t===1))throw n=Jr,Bn(e,0),wn(e,r),dt(e,He()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:Hn(e,ct,Jt);break;case 3:if(wn(e,r),(r&130023424)===r&&(t=li+500-He(),10<t)){if(Nl(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){st(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=po(Hn.bind(null,e,ct,Jt),t);break}Hn(e,ct,Jt);break;case 4:if(wn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var i=31-Rt(r);s=1<<i,i=t[i],i>l&&(l=i),r&=~s}if(r=l,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lf(r/1960))-r,10<r){e.timeoutHandle=po(Hn.bind(null,e,ct,Jt),r);break}Hn(e,ct,Jt);break;case 5:Hn(e,ct,Jt);break;default:throw Error(a(329))}}}return dt(e,He()),e.callbackNode===n?Yu.bind(null,e):null}function ii(e,t){var n=Zr;return e.current.memoizedState.isDehydrated&&(Bn(e,t).flags|=256),e=ps(e,t),e!==2&&(t=ct,ct=n,t!==null&&ai(t)),e}function ai(e){ct===null?ct=e:ct.push.apply(ct,e)}function sf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],s=l.getSnapshot;l=l.value;try{if(!Dt(s(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wn(e,t){for(t&=~ri,t&=~is,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Rt(t),r=1<<n;e[n]=-1,t&=~r}}function Gu(e){if((be&6)!==0)throw Error(a(327));mr();var t=Nl(e,0);if((t&1)===0)return dt(e,He()),null;var n=ps(e,t);if(e.tag!==0&&n===2){var r=$s(e);r!==0&&(t=r,n=ii(e,r))}if(n===1)throw n=Jr,Bn(e,0),wn(e,t),dt(e,He()),n;if(n===6)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hn(e,ct,Jt),dt(e,He()),null}function ui(e,t){var n=be;be|=1;try{return e(t)}finally{be=n,be===0&&(pr=He()+500,Al&&pn())}}function Un(e){vn!==null&&vn.tag===0&&(be&6)===0&&mr();var t=be;be|=1;var n=bt.transition,r=Le;try{if(bt.transition=null,Le=1,e)return e()}finally{Le=r,bt.transition=n,be=t,(be&6)===0&&pn()}}function ci(){Nt=fr.current,Me(fr)}function Bn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,zd(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(xo(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ml();break;case 3:ur(),Me(it),Me(et),Lo();break;case 5:Ro(r);break;case 4:ur();break;case 13:Me(Ae);break;case 19:Me(Ae);break;case 10:Co(r.type._context);break;case 22:case 23:ci()}n=n.return}if(Ge=e,We=e=Nn(e.current,null),Ze=Nt=t,Qe=0,Jr=null,ri=is=An=0,ct=Zr=null,In!==null){for(t=0;t<In.length;t++)if(n=In[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=l,r.next=i}n.pending=r}In=null}return e}function Xu(e,t){do{var n=We;try{if(jo(),Xl.current=es,ql){for(var r=Ue.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}ql=!1}if($n=0,Ye=Ke=Ue=null,Kr=!1,Qr=0,ni.current=null,n===null||n.return===null){Qe=1,Jr=t,We=null;break}e:{var s=e,i=n.return,f=n,g=t;if(t=Ze,f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var P=g,W=f,G=W.tag;if((W.mode&1)===0&&(G===0||G===11||G===15)){var H=W.alternate;H?(W.updateQueue=H.updateQueue,W.memoizedState=H.memoizedState,W.lanes=H.lanes):(W.updateQueue=null,W.memoizedState=null)}var se=Nu(i);if(se!==null){se.flags&=-257,ku(se,i,f,s,t),se.mode&1&&wu(s,P,t),t=se,g=P;var ce=t.updateQueue;if(ce===null){var de=new Set;de.add(g),t.updateQueue=de}else ce.add(g);break e}else{if((t&1)===0){wu(s,P,t),di();break e}g=Error(a(426))}}else if($e&&f.mode&1){var Ve=Nu(i);if(Ve!==null){(Ve.flags&65536)===0&&(Ve.flags|=256),ku(Ve,i,f,s,t),ko(cr(g,f));break e}}s=g=cr(g,f),Qe!==4&&(Qe=2),Zr===null?Zr=[s]:Zr.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var N=vu(s,g,t);Wa(s,N);break e;case 1:f=g;var y=s.type,k=s.stateNode;if((s.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(yn===null||!yn.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t;var Z=xu(s,f,t);Wa(s,Z);break e}}s=s.return}while(s!==null)}Zu(n)}catch(pe){t=pe,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function qu(){var e=os.current;return os.current=es,e===null?es:e}function di(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),Ge===null||(An&268435455)===0&&(is&268435455)===0||wn(Ge,Ze)}function ps(e,t){var n=be;be|=2;var r=qu();(Ge!==e||Ze!==t)&&(Jt=null,Bn(e,t));do try{of();break}catch(l){Xu(e,l)}while(!0);if(jo(),be=n,os.current=r,We!==null)throw Error(a(261));return Ge=null,Ze=0,Qe}function of(){for(;We!==null;)Ju(We)}function af(){for(;We!==null&&!Lc();)Ju(We)}function Ju(e){var t=nc(e.alternate,e,Nt);e.memoizedProps=e.pendingProps,t===null?Zu(e):We=t,ni.current=null}function Zu(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Zd(n,t,Nt),n!==null){We=n;return}}else{if(n=ef(n,t),n!==null){n.flags&=32767,We=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qe=6,We=null;return}}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Qe===0&&(Qe=5)}function Hn(e,t,n){var r=Le,l=bt.transition;try{bt.transition=null,Le=1,uf(e,t,n,r)}finally{bt.transition=l,Le=r}return null}function uf(e,t,n,r){do mr();while(vn!==null);if((be&6)!==0)throw Error(a(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Bc(e,s),e===Ge&&(We=Ge=null,Ze=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||us||(us=!0,rc(yl,function(){return mr(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=bt.transition,bt.transition=null;var i=Le;Le=1;var f=be;be|=4,ni.current=null,nf(e,n),Hu(n,e),bd(co),jl=!!uo,co=uo=null,e.current=n,rf(n),Tc(),be=f,Le=i,bt.transition=s}else e.current=n;if(us&&(us=!1,vn=e,cs=l),s=e.pendingLanes,s===0&&(yn=null),Fc(n.stateNode),dt(e,He()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(as)throw as=!1,e=si,si=null,e;return(cs&1)!==0&&e.tag!==0&&mr(),s=e.pendingLanes,(s&1)!==0?e===oi?el++:(el=0,oi=e):el=0,pn(),null}function mr(){if(vn!==null){var e=Ui(cs),t=bt.transition,n=Le;try{if(bt.transition=null,Le=16>e?16:e,vn===null)var r=!1;else{if(e=vn,vn=null,cs=0,(be&6)!==0)throw Error(a(331));var l=be;for(be|=4,ue=e.current;ue!==null;){var s=ue,i=s.child;if((ue.flags&16)!==0){var f=s.deletions;if(f!==null){for(var g=0;g<f.length;g++){var P=f[g];for(ue=P;ue!==null;){var W=ue;switch(W.tag){case 0:case 11:case 15:qr(8,W,s)}var G=W.child;if(G!==null)G.return=W,ue=G;else for(;ue!==null;){W=ue;var H=W.sibling,se=W.return;if(Mu(W),W===P){ue=null;break}if(H!==null){H.return=se,ue=H;break}ue=se}}}var ce=s.alternate;if(ce!==null){var de=ce.child;if(de!==null){ce.child=null;do{var Ve=de.sibling;de.sibling=null,de=Ve}while(de!==null)}}ue=s}}if((s.subtreeFlags&2064)!==0&&i!==null)i.return=s,ue=i;else e:for(;ue!==null;){if(s=ue,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:qr(9,s,s.return)}var N=s.sibling;if(N!==null){N.return=s.return,ue=N;break e}ue=s.return}}var y=e.current;for(ue=y;ue!==null;){i=ue;var k=i.child;if((i.subtreeFlags&2064)!==0&&k!==null)k.return=i,ue=k;else e:for(i=y;ue!==null;){if(f=ue,(f.flags&2048)!==0)try{switch(f.tag){case 0:case 11:case 15:ss(9,f)}}catch(pe){Be(f,f.return,pe)}if(f===i){ue=null;break e}var Z=f.sibling;if(Z!==null){Z.return=f.return,ue=Z;break e}ue=f.return}}if(be=l,pn(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(vl,e)}catch{}r=!0}return r}finally{Le=n,bt.transition=t}}return!1}function ec(e,t,n){t=cr(n,t),t=vu(e,t,1),e=hn(e,t,1),t=st(),e!==null&&(jr(e,1,t),dt(e,t))}function Be(e,t,n){if(e.tag===3)ec(e,e,n);else for(;t!==null;){if(t.tag===3){ec(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yn===null||!yn.has(r))){e=cr(n,e),e=xu(t,e,1),t=hn(t,e,1),e=st(),t!==null&&(jr(t,1,e),dt(t,e));break}}t=t.return}}function cf(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=st(),e.pingedLanes|=e.suspendedLanes&n,Ge===e&&(Ze&n)===n&&(Qe===4||Qe===3&&(Ze&130023424)===Ze&&500>He()-li?Bn(e,0):ri|=n),dt(e,t)}function tc(e,t){t===0&&((e.mode&1)===0?t=1:(t=wl,wl<<=1,(wl&130023424)===0&&(wl=4194304)));var n=st();e=Gt(e,t),e!==null&&(jr(e,t,n),dt(e,n))}function df(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),tc(e,n)}function ff(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}r!==null&&r.delete(t),tc(e,n)}var nc;nc=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||it.current)ut=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return ut=!1,Jd(e,t,n);ut=(e.flags&131072)!==0}else ut=!1,$e&&(t.flags&1048576)!==0&&za(t,Bl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;rs(e,t),e=t.pendingProps;var l=nr(t,et.current);ar(t,n),l=zo(null,t,r,e,l,n);var s=Fo();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,at(r)?(s=!0,$l(t)):s=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,bo(t),l.updater=ts,t.stateNode=l,l._reactInternals=t,Bo(t,r,e,n),t=Ko(null,t,r,!0,s,n)):(t.tag=0,$e&&s&&vo(t),lt(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(rs(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=mf(r),e=Tt(r,e),l){case 0:t=Wo(null,t,r,e,n);break e;case 1:t=bu(null,t,r,e,n);break e;case 11:t=Su(null,t,r,e,n);break e;case 14:t=ju(null,t,r,Tt(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Tt(r,l),Wo(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Tt(r,l),bu(e,t,r,l,n);case 3:e:{if(_u(t),e===null)throw Error(a(387));r=t.pendingProps,s=t.memoizedState,l=s.element,Va(e,t),Yl(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){l=cr(Error(a(423)),t),t=Ru(e,t,r,n,l);break e}else if(r!==l){l=cr(Error(a(424)),t),t=Ru(e,t,r,n,l);break e}else for(wt=cn(t.stateNode.containerInfo.firstChild),xt=t,$e=!0,Lt=null,n=Ba(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sr(),r===l){t=qt(e,t,n);break e}lt(e,t,r,n)}t=t.child}return t;case 5:return Qa(t),e===null&&No(t),r=t.type,l=t.pendingProps,s=e!==null?e.memoizedProps:null,i=l.children,fo(r,l)?i=null:s!==null&&fo(r,s)&&(t.flags|=32),Pu(e,t),lt(e,t,i,n),t.child;case 6:return e===null&&No(t),null;case 13:return Du(e,t,n);case 4:return _o(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=or(t,null,r,n):lt(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Tt(r,l),Su(e,t,r,l,n);case 7:return lt(e,t,t.pendingProps,n),t.child;case 8:return lt(e,t,t.pendingProps.children,n),t.child;case 12:return lt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,s=t.memoizedProps,i=l.value,ze(Wl,r._currentValue),r._currentValue=i,s!==null)if(Dt(s.value,i)){if(s.children===l.children&&!it.current){t=qt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var f=s.dependencies;if(f!==null){i=s.child;for(var g=f.firstContext;g!==null;){if(g.context===r){if(s.tag===1){g=Xt(-1,n&-n),g.tag=2;var P=s.updateQueue;if(P!==null){P=P.shared;var W=P.pending;W===null?g.next=g:(g.next=W.next,W.next=g),P.pending=g}}s.lanes|=n,g=s.alternate,g!==null&&(g.lanes|=n),Eo(s.return,n,t),f.lanes|=n;break}g=g.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(a(341));i.lanes|=n,f=i.alternate,f!==null&&(f.lanes|=n),Eo(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}lt(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,ar(t,n),l=Et(l),r=r(l),t.flags|=1,lt(e,t,r,n),t.child;case 14:return r=t.type,l=Tt(r,t.pendingProps),l=Tt(r.type,l),ju(e,t,r,l,n);case 15:return Cu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Tt(r,l),rs(e,t),t.tag=1,at(r)?(e=!0,$l(t)):e=!1,ar(t,n),gu(t,r,l),Bo(t,r,l,n),Ko(null,t,r,!0,e,n);case 19:return Tu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};function rc(e,t){return Fi(e,t)}function pf(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(e,t,n,r){return new pf(e,t,n,r)}function fi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mf(e){if(typeof e=="function")return fi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===q)return 11;if(e===B)return 14}return 2}function Nn(e,t){var n=e.alternate;return n===null?(n=_t(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ms(e,t,n,r,l,s){var i=2;if(r=e,typeof e=="function")fi(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case M:return Vn(n.children,l,s,t);case O:i=8,l|=8;break;case ee:return e=_t(12,n,t,l|2),e.elementType=ee,e.lanes=s,e;case K:return e=_t(13,n,t,l),e.elementType=K,e.lanes=s,e;case Y:return e=_t(19,n,t,l),e.elementType=Y,e.lanes=s,e;case te:return hs(n,l,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $:i=10;break e;case me:i=9;break e;case q:i=11;break e;case B:i=14;break e;case le:i=16,r=null;break e}throw Error(a(130,e==null?e:typeof e,""))}return t=_t(i,n,t,l),t.elementType=e,t.type=r,t.lanes=s,t}function Vn(e,t,n,r){return e=_t(7,e,r,t),e.lanes=n,e}function hs(e,t,n,r){return e=_t(22,e,r,t),e.elementType=te,e.lanes=n,e.stateNode={isHidden:!1},e}function pi(e,t,n){return e=_t(6,e,null,t),e.lanes=n,e}function mi(e,t,n){return t=_t(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hf(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=As(0),this.expirationTimes=As(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=As(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function hi(e,t,n,r,l,s,i,f,g){return e=new hf(e,t,n,f,g),t===1?(t=1,s===!0&&(t|=8)):t=0,s=_t(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bo(s),e}function gf(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:S,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function lc(e){if(!e)return fn;e=e._reactInternals;e:{if(he(e)!==e||e.tag!==1)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(at(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(a(171))}if(e.tag===1){var n=e.type;if(at(n))return La(e,n,t)}return t}function sc(e,t,n,r,l,s,i,f,g){return e=hi(n,r,!0,e,l,s,i,f,g),e.context=lc(null),n=e.current,r=st(),l=xn(n),s=Xt(r,l),s.callback=t??null,hn(n,s,l),e.current.lanes=l,jr(e,l,r),dt(e,r),e}function gs(e,t,n,r){var l=t.current,s=st(),i=xn(l);return n=lc(n),t.context===null?t.context=n:t.pendingContext=n,t=Xt(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=hn(l,t,i),e!==null&&(Ft(e,l,i,s),Ql(e,l,i)),i}function ys(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function oc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function gi(e,t){oc(e,t),(e=e.alternate)&&oc(e,t)}function yf(){return null}var ic=typeof reportError=="function"?reportError:function(e){console.error(e)};function yi(e){this._internalRoot=e}vs.prototype.render=yi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));gs(e,t,null,null)},vs.prototype.unmount=yi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Un(function(){gs(null,e,null,null)}),t[Wt]=null}};function vs(e){this._internalRoot=e}vs.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vi();e={blockedOn:null,target:e,priority:t};for(var n=0;n<on.length&&t!==0&&t<on[n].priority;n++);on.splice(n,0,e),n===0&&Qi(e)}};function vi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xs(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ac(){}function vf(e,t,n,r,l){if(l){if(typeof r=="function"){var s=r;r=function(){var P=ys(i);s.call(P)}}var i=sc(t,r,e,0,null,!1,!1,"",ac);return e._reactRootContainer=i,e[Wt]=i.current,Mr(e.nodeType===8?e.parentNode:e),Un(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var f=r;r=function(){var P=ys(g);f.call(P)}}var g=hi(e,0,!1,null,null,!1,!1,"",ac);return e._reactRootContainer=g,e[Wt]=g.current,Mr(e.nodeType===8?e.parentNode:e),Un(function(){gs(t,g,n,r)}),g}function ws(e,t,n,r,l){var s=n._reactRootContainer;if(s){var i=s;if(typeof l=="function"){var f=l;l=function(){var g=ys(i);f.call(g)}}gs(t,i,e,l)}else i=vf(n,t,e,l,r);return ys(i)}Bi=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Sr(t.pendingLanes);n!==0&&(Us(t,n|1),dt(t,He()),(be&6)===0&&(pr=He()+500,pn()))}break;case 13:Un(function(){var r=Gt(e,1);if(r!==null){var l=st();Ft(r,e,1,l)}}),gi(e,1)}},Bs=function(e){if(e.tag===13){var t=Gt(e,134217728);if(t!==null){var n=st();Ft(t,e,134217728,n)}gi(e,134217728)}},Hi=function(e){if(e.tag===13){var t=xn(e),n=Gt(e,t);if(n!==null){var r=st();Ft(n,e,t,r)}gi(e,t)}},Vi=function(){return Le},Wi=function(e,t){var n=Le;try{return Le=e,t()}finally{Le=n}},Nr=function(e,t,n){switch(t){case"input":if(Re(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=Il(r);if(!l)throw Error(a(90));re(r),Re(r,l)}}}break;case"textarea":yr(e,n);break;case"select":t=n.value,t!=null&&gt(e,!!n.multiple,t,!1)}},pl=ui,Vt=Un;var xf={usingClientEntryPoint:!1,Events:[Ur,er,Il,dl,fl,ui]},tl={findFiberByHostInstance:Tn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wf={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gl(e),e===null?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||yf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ns=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ns.isDisabled&&Ns.supportsFiber)try{vl=Ns.inject(wf),It=Ns}catch{}}return ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xf,ft.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vi(t))throw Error(a(200));return gf(e,t,null,n)},ft.createRoot=function(e,t){if(!vi(e))throw Error(a(299));var n=!1,r="",l=ic;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=hi(e,1,!1,null,null,n,!1,r,l),e[Wt]=t.current,Mr(e.nodeType===8?e.parentNode:e),new yi(t)},ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=gl(t),e=e===null?null:e.stateNode,e},ft.flushSync=function(e){return Un(e)},ft.hydrate=function(e,t,n){if(!xs(t))throw Error(a(200));return ws(null,e,t,!0,n)},ft.hydrateRoot=function(e,t,n){if(!vi(e))throw Error(a(405));var r=n!=null&&n.hydratedSources||null,l=!1,s="",i=ic;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=sc(t,null,e,1,n??null,l,!1,s,i),e[Wt]=t.current,Mr(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new vs(t)},ft.render=function(e,t,n){if(!xs(t))throw Error(a(200));return ws(null,e,t,!1,n)},ft.unmountComponentAtNode=function(e){if(!xs(e))throw Error(a(40));return e._reactRootContainer?(Un(function(){ws(null,null,e,!1,function(){e._reactRootContainer=null,e[Wt]=null})}),!0):!1},ft.unstable_batchedUpdates=ui,ft.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!xs(n))throw Error(a(200));if(e==null||e._reactInternals===void 0)throw Error(a(38));return ws(e,t,n,!1,r)},ft.version="18.3.1-next-f1338f8080-20240426",ft}var gc;function _f(){if(gc)return Ni.exports;gc=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(c){console.error(c)}}return u(),Ni.exports=bf(),Ni.exports}var yc;function Rf(){if(yc)return ks;yc=1;var u=_f();return ks.createRoot=u.createRoot,ks.hydrateRoot=u.hydrateRoot,ks}var Df=Rf();const Fe={get(u){try{return localStorage.getItem(u)}catch(c){return console.warn("safeLocalStorage.get failed",c),null}},set(u,c){try{if(localStorage.setItem(u,c),localStorage.getItem(u)!==c)throw new Error("Failed to verify localStorage write")}catch(a){throw console.error("safeLocalStorage.set failed",a),a}},remove(u){try{localStorage.removeItem(u)}catch(c){console.warn("safeLocalStorage.remove failed",c)}}};var Lf={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Tf=u=>u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mt=(u,c)=>{const a=L.forwardRef(({color:p="currentColor",size:d=24,strokeWidth:m=2,absoluteStrokeWidth:x,children:v,...C},E)=>L.createElement("svg",{ref:E,...Lf,width:d,height:d,stroke:p,strokeWidth:x?Number(m)*24/Number(d):m,className:`lucide lucide-${Tf(u)}`,...C},[...c.map(([D,b])=>L.createElement(D,b)),...(Array.isArray(v)?v:[v])||[]]));return a.displayName=`${u}`,a},Of=mt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Ci=mt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Ei=mt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),zf=mt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),vc=mt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Ff=mt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Pi=mt("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),js=mt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),_s=mt("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),bi=mt("Pencil",[["line",{x1:"18",x2:"22",y1:"2",y2:"6",key:"1e96e7"}],["path",{d:"M7.5 20.5 19 9l-4-4L3.5 16.5 2 22z",key:"12iwkt"}]]),If=mt("Plus",[["line",{x1:"12",x2:"12",y1:"5",y2:"19",key:"pwfkuu"}],["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}]]),_i=mt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Mf=mt("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),Zt=mt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$f=/^(?:day|d)[\s_-]?(\d{1,2})(?:[^\d]|$)/i,Af=/(\d{4})-(\d{2})-(\d{2})/,Uf=/(\d{4})_(\d{2})_(\d{2})/,Bf=/^(\d{1,2})[\s_-]/,Hf=/^([A-M])(?:[\s_-]+)(Establishing|People|Culture(?:[-_\s]?Detail)?|Detail|Action|Moment|Transition|Mood|Food)$/i,Vf=/^([A-M])$/i,Wf=/^([A-M])(?:[\s_-]+)(.+)$/i,Kf=/^(0[1-6])$/,xc={"01":"A","02":"B","03":"C","04":"D","05":"E","06":"M"};function wc(u,c){try{const a=new Date(u),p=c?new Date(c):a;if(isNaN(a.getTime())||isNaN(p.getTime()))return null;const d=a.getTime()-p.getTime();return Math.floor(d/(1e3*60*60*24))+1}catch{return null}}function Cs(u,c){const a=u.match($f);if(a){const m=parseInt(a[1],10);if(m>=1&&m<=31)return{day:m,pattern:"day_prefix",confidence:"high"}}let p=u.match(Af);if(p){const m=`${p[1]}-${p[2]}-${p[3]}`,x=wc(m,c);if(x!==null)return{day:x,pattern:"iso_date",confidence:c?"high":"medium"}}if(p=u.match(Uf),p){const m=`${p[1]}-${p[2]}-${p[3]}`,x=wc(m,c);if(x!==null)return{day:x,pattern:"iso_date",confidence:c?"high":"medium"}}const d=u.match(Bf);if(d){const m=parseInt(d[1],10);if(m>=1&&m<=31)return{day:m,pattern:"numeric_prefix",confidence:"medium"}}return null}function gr(u,c){return Cs(u,c)?.day??null}function Ri(u){const c=u.match(Hf);if(c)return{bucket:c[1].toUpperCase(),confidence:"high",pattern:"standard"};const a=u.match(Vf);if(a)return{bucket:a[1].toUpperCase(),confidence:"high",pattern:"letter"};const p=u.match(Wf);if(p)return{bucket:p[1].toUpperCase(),confidence:"medium",pattern:"custom"};const d=u.match(Kf);return d&&xc[d[1]]?{bucket:xc[d[1]],confidence:"low",pattern:"numeric"}:null}function Qf(u,c){const a="01_DAYS",p=u.split(/[\\/]/).filter(Boolean),d=p.length>0?p.slice(0,-1):[];let m=null,x=null,v="none",C="none";const E=d.findIndex(T=>{const A=T.toLowerCase();return A===a.toLowerCase()||A==="01_days"||A==="days"});if(E!==-1&&E<d.length-1){const T=d[E+1],A=Cs(T);if(A&&(m=A.day,v=A.confidence,E+2<d.length)){const w=d[E+2],F=Ri(w);F&&(x=F.bucket,C=F.confidence)}}else for(let T=0;T<d.length;T++){const A=d[T],w=Cs(A);if(w){if(m=w.day,v=w.confidence==="high"?"medium":"low",T+1<d.length){const F=d[T+1],I=Ri(F);I&&(x=I.bucket,C=I.confidence)}break}}const D=m!==null&&x!==null;let b="none";return D?v==="high"&&C==="high"?b="high":v!=="none"&&C!=="none"?b="medium":b="low":m!==null&&(b=v),{detectedDay:m,detectedBucket:x,isPreOrganized:D,confidence:b,pathSegments:d}}async function Nc(u){const c=[],a=["jpg","jpeg","png","heic","webp","mp4","mov","webm","avi","mkv"];try{for await(const[p,d]of u.entries()){if(d.kind!=="directory")continue;const m=Ri(p);if(!m)continue;let x=0;for await(const[v,C]of d.entries()){if(C.kind!=="file")continue;const E=v.split(".").pop()?.toLowerCase()||"";a.includes(E)&&(x+=1)}c.push({bucketLetter:m.bucket,folderName:p,photoCount:x,confidence:m.confidence,patternMatched:m.pattern})}}catch(p){console.warn("Failed to scan for buckets:",p)}return c.sort((p,d)=>p.bucketLetter.localeCompare(d.bucketLetter))}function kc(u){return u===null?"Unsorted":`Day ${String(u).padStart(2,"0")}`}function Yf(u){return[/^\..*/,/^unsorted$/i,/^inbox$/i,/^miscellaneous$/i,/^metadata$/i,/^_meta$/i].some(a=>a.test(u))}function Sc(u,c){const{photoCountMap:a=new Map,projectName:p="",tripStart:d}=c||{},m=[];for(const x of u){if(Yf(x)||p&&x.toLowerCase()===p.toLowerCase())continue;const v=a.get(x)||0,C=Cs(x,d);C?m.push({folder:x,folderPath:x,detectedDay:C.day,confidence:C.confidence,patternMatched:C.pattern,suggestedName:kc(C.day),manual:!1,photoCount:v}):m.push({folder:x,folderPath:x,detectedDay:null,confidence:"undetected",patternMatched:"none",suggestedName:kc(null),manual:!1,photoCount:v})}return m.sort((x,v)=>x.detectedDay===null&&v.detectedDay===null?x.folder.localeCompare(v.folder):x.detectedDay===null?1:v.detectedDay===null?-1:x.detectedDay-v.detectedDay),m}function Cc({isOpen:u,onClose:c,onComplete:a,recentProjects:p=[],onSelectRecent:d}){const[m,x]=L.useState("select"),[v,C]=L.useState(""),[E,D]=L.useState(""),[b,T]=L.useState(null),[A,w]=L.useState(null),[F,I]=L.useState([]),[U,Q]=L.useState(!1),ne=Li.useRef(null),z=L.useCallback(async()=>{if(!v.trim()){T("Please enter a project name");return}if(!A){T("Please choose a folder");return}T(null),Q(!0);try{const M=["jpg","jpeg","png","heic","webp","mp4","mov","webm","avi","mkv"],O=te=>{const j=te.toLowerCase().replace(/[^a-z0-9]+/g,"");return j==="01days"||j==="days"},ee=async te=>{let j=0;for await(const[,X]of te.entries())if(X.kind==="directory")j+=await ee(X);else if(X.kind==="file"){const R=X.name.split(".").pop()?.toLowerCase()||"";M.includes(R)&&(j+=1)}return j},$=new Map,me=[],q=new Map;for await(const[te,j]of A.entries()){if(j.kind!=="directory")continue;me.push(te),q.set(te,j);let X=0;for await(const[,R]of j.entries()){if(R.kind!=="file")continue;const h=R.name.split(".").pop()?.toLowerCase()||"";M.includes(h)&&(X+=1)}$.set(te,X)}const K=me.find(te=>O(te))||null;if(K){const te=q.get(K);if(te){const j=[],X=new Map,R=new Map;for await(const[oe,ae]of te.entries()){if(ae.kind!=="directory")continue;j.push(oe),X.set(oe,ae);const fe=await ee(ae);R.set(oe,fe)}const h=Sc(j,{photoCountMap:R,projectName:v}).map(oe=>({...oe,folderPath:`${K}/${oe.folder}`})),ie=(await Promise.all(h.map(async oe=>{const ae=X.get(oe.folder);if(!ae||oe.confidence==="undetected")return oe;const fe=await Nc(ae);return{...oe,detectedBuckets:fe,isOrganizedStructure:fe.length>0,bucketConfidence:fe.length>0?fe.every(Se=>Se.confidence==="high")?"high":"medium":"none"}}))).map(oe=>({...oe,skip:oe.confidence==="undetected"?!0:oe.skip??!1}));I(ie),x("preview");return}}const Y=Sc(me,{photoCountMap:$,projectName:v}),le=(await Promise.all(Y.map(async te=>{const j=q.get(te.folder);if(!j||te.confidence==="undetected")return te;const X=await Nc(j);return{...te,detectedBuckets:X,isOrganizedStructure:X.length>0,bucketConfidence:X.length>0?X.every(R=>R.confidence==="high")?"high":"medium":"none"}}))).map(te=>({...te,skip:te.confidence==="undetected"?!0:te.skip??!1}));I(le),x("preview")}catch(M){T(M instanceof Error?M.message:"Failed to detect folder structure")}finally{Q(!1)}},[A,v]),V=L.useCallback((M,O,ee)=>{I($=>{const me=[...$];return O==="detectedDay"?(me[M].detectedDay=ee===""?null:parseInt(ee,10),me[M].manual=!0):O==="skip"?me[M].skip=ee:me[M][O]=ee,me})},[]),S=L.useCallback(()=>{if(!v.trim()){T("Please enter a project name");return}if(!A){T("Please choose a folder");return}const M=E.trim()||A.name,O=p.find(ee=>ee.rootPath.toLowerCase()===M.toLowerCase());if(O){T(`This folder is already being used by project "${O.projectName}". Opening the same folder twice could cause conflicts. Open the existing project instead or choose a different folder.`);return}T(null),a({projectName:v.trim(),rootPath:M,dirHandle:A,mappings:F}),c()},[A,F,c,a,v,E,p]);return u?o.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-start justify-center z-50 pt-12",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full mx-6 max-h-[88vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-8 py-6 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-extrabold text-gray-900",children:m==="select"?"Create Project":"Review Folder Structure"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:m==="select"?"Add a project name and choose the folder that contains your photos.":"Confirm how your existing folders map to days."})]}),o.jsx("button",{onClick:c,className:"text-gray-600 hover:text-gray-800 rounded-md px-2 py-1","aria-label":"Close",children:o.jsx(Zt,{size:20})})]}),o.jsxs("div",{className:"px-8 py-6 space-y-6",children:[b&&o.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-sm text-red-800",children:b}),m==="select"&&p.length>0&&o.jsxs("div",{className:"space-y-3 rounded-lg border border-gray-200 bg-gray-50 p-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Recent Projects"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Open a recent project instead of creating a new one."})]}),o.jsx("div",{className:"space-y-2",children:p.map(M=>o.jsxs("button",{onClick:()=>{d?.(M.projectId),c()},className:"w-full text-left rounded-lg border border-gray-200 bg-white px-3 py-2 hover:border-blue-300 hover:bg-blue-50",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.projectName}),o.jsx("div",{className:"text-xs text-gray-600 truncate",children:M.rootPath})]},M.projectId))})]}),m==="select"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),o.jsx("input",{type:"text",value:v,onChange:M=>C(M.target.value),placeholder:"e.g., Mexico 2025",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder:text-gray-600 text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Folder Path"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:E,onChange:M=>D(M.target.value),placeholder:"/Users/you/trips/mexico",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder:text-gray-600 text-gray-900"}),o.jsx("input",{ref:ne,type:"file",webkitdirectory:"true",as:!0,any:!0,directory:"true",mozdirectory:"true",className:"hidden",onChange:M=>{const O=M.currentTarget.files;if(!O||O.length===0)return;const ee=O[0],me=(ee.webkitRelativePath||ee.name).split("/")[0];D(me),w(null),M.currentTarget.value=""}}),o.jsxs("button",{onClick:async()=>{if("showDirectoryPicker"in window){const M=await window.showDirectoryPicker();w(M),D(M?.name||"");return}ne.current?.click()},className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 flex items-center gap-2",children:[o.jsx(Pi,{size:18}),"Browse"]})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Use the folder picker to grant access. If the picker is unavailable, paste the full path (the app will ask again on first open)."})]})]}),m==="preview"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Review the detected folders and adjust the day numbers if needed."}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[o.jsx("th",{className:"text-left px-3 py-2 font-medium text-gray-700",children:"Folder"}),o.jsx("th",{className:"text-center px-3 py-2 font-medium text-gray-700",children:"Day #"}),o.jsx("th",{className:"text-left px-3 py-2 font-medium text-gray-700",children:"Buckets"}),o.jsx("th",{className:"text-center px-3 py-2 font-medium text-gray-700",children:"Photos"}),o.jsx("th",{className:"text-center px-3 py-2 font-medium text-gray-700",children:"Action"})]})}),o.jsxs("tbody",{children:[F.map((M,O)=>o.jsxs("tr",{className:`border-b border-gray-200 ${M.skip?"bg-gray-100 opacity-60":"hover:bg-blue-50"}`,children:[o.jsx("td",{className:"px-3 py-3 text-gray-900",children:M.folder}),o.jsx("td",{className:"px-3 py-3 text-center",children:o.jsx("input",{type:"number",min:"1",max:"31",value:M.detectedDay??"",onChange:ee=>V(O,"detectedDay",ee.target.value),disabled:M.skip,className:"w-12 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:""})}),o.jsx("td",{className:"px-3 py-3",children:M.detectedBuckets&&M.detectedBuckets.length>0?o.jsx("div",{className:"flex flex-wrap gap-1",children:M.detectedBuckets.map(ee=>o.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",title:`${ee.folderName} (${ee.photoCount} photos)`,children:[ee.bucketLetter,o.jsxs("span",{className:"ml-1 text-green-600",children:["(",ee.photoCount,")"]})]},ee.bucketLetter))}):o.jsx("span",{className:"text-xs text-gray-400 italic",children:"None detected"})}),o.jsx("td",{className:"px-3 py-3 text-center text-gray-600",children:M.photoCount}),o.jsx("td",{className:"px-3 py-3 text-center",children:o.jsx("button",{onClick:()=>V(O,"skip",!M.skip),className:`px-3 py-1 rounded text-sm font-medium ${M.skip?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:M.skip?"Skip":"Map"})})]},M.folder)),F.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"px-3 py-4 text-sm text-gray-600 text-center",children:"No subfolders detected. You can still continue and sort manually."})})]})]})})]})]}),o.jsx("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex justify-between gap-3",children:m==="select"?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:c,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 font-medium",children:"Cancel"}),o.jsx("button",{onClick:z,disabled:!v.trim()||!A||U,"aria-disabled":!v.trim()||!A||U,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:bg-gray-200 disabled:text-gray-500 disabled:cursor-not-allowed",children:U?"Detecting":"Next"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>x("select"),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 font-medium",children:"Back"}),o.jsx("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Create Project"})]})})]})}):null}const Gf="narrative-covers",Xf=1,jn="covers",pt="metadata";let Ss=null;async function Rs(){return Ss||new Promise((u,c)=>{const a=indexedDB.open(Gf,Xf);a.onerror=()=>c(a.error),a.onsuccess=()=>{Ss=a.result,u(Ss)},a.onupgradeneeded=p=>{const d=p.target.result;d.objectStoreNames.contains(jn)||d.createObjectStore(jn,{keyPath:"coverKey"}),d.objectStoreNames.contains(pt)||d.createObjectStore(pt,{keyPath:"projectId"}).createIndex("lastUsed","lastUsed",{unique:!1})}})}async function qf(u,c,a=120,p=90){const d=await Rs(),m=`cover-${u}-${Date.now()}`,x=c.size,v=d.transaction([jn],"readwrite").objectStore(jn).put({coverKey:m,blob:c});await new Promise((D,b)=>{v.onsuccess=()=>D(),v.onerror=()=>b(v.error)});const C={projectId:u,coverKey:m,lastUsed:Date.now(),width:a,height:p,sizeBytes:x},E=d.transaction([pt],"readwrite").objectStore(pt).put(C);return await new Promise((D,b)=>{E.onsuccess=()=>D(),E.onerror=()=>b(E.error)}),m}async function Jf(u){const c=await Rs(),a=c.transaction([pt],"readonly").objectStore(pt).get(u),p=await new Promise((v,C)=>{a.onsuccess=()=>v(a.result),a.onerror=()=>C(a.error)});if(!p)return null;const d=c.transaction([pt],"readwrite").objectStore(pt).put({...p,lastUsed:Date.now()});await new Promise((v,C)=>{d.onsuccess=()=>v(),d.onerror=()=>C(d.error)});const m=c.transaction([jn],"readonly").objectStore(jn).get(p.coverKey);return(await new Promise((v,C)=>{m.onsuccess=()=>v(m.result),m.onerror=()=>C(m.error)}))?.blob||null}async function Zf(u){const c=await Jf(u);return c?URL.createObjectURL(c):null}async function ep(u){const c=await Rs(),a=c.transaction([pt],"readonly").objectStore(pt).get(u),p=await new Promise((x,v)=>{a.onsuccess=()=>x(a.result),a.onerror=()=>v(a.error)});if(!p)return;const d=c.transaction([jn],"readwrite").objectStore(jn).delete(p.coverKey);await new Promise((x,v)=>{d.onsuccess=()=>x(),d.onerror=()=>v(d.error)});const m=c.transaction([pt],"readwrite").objectStore(pt).delete(u);await new Promise((x,v)=>{m.onsuccess=()=>x(),m.onerror=()=>v(m.error)})}async function tp(){const c=(await Rs()).transaction([pt],"readonly").objectStore(pt).index("lastUsed");return await new Promise((p,d)=>{const m=c.getAll();m.onsuccess=()=>p(m.result),m.onerror=()=>d(m.error)})}async function np(u=10){const c=await tp(),a=[];if(c.length>u){const p=c.slice(0,c.length-u);for(const d of p)await ep(d.projectId),a.push(d.projectId)}return a}function rp({project:u,onOpen:c}){const[a,p]=L.useState(null);return L.useEffect(()=>(u.coverKey?Zf(u.projectId).then(d=>p(d)).catch(d=>{console.warn(`Failed to load cover for ${u.projectId}:`,d),u.coverUrl&&p(u.coverUrl)}):u.coverUrl&&p(u.coverUrl),()=>{a&&a.startsWith("blob:")&&URL.revokeObjectURL(a)}),[u,u.coverKey,u.coverUrl]),o.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-800 bg-gray-950 hover:border-blue-500 transition-colors group cursor-pointer",children:[o.jsx("button",{onClick:()=>c(u.projectId),className:"w-full block text-left","aria-label":`Open project ${u.projectName}`,children:o.jsx("div",{className:"aspect-video overflow-hidden bg-gray-900 relative",children:a?o.jsx("img",{src:a,alt:u.projectName,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}):o.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center text-sm text-gray-400",children:o.jsx("div",{className:"text-center",children:o.jsx("div",{className:"text-xs font-medium text-gray-500",children:"No cover"})})})})}),o.jsxs("div",{className:"p-3 space-y-1",children:[o.jsx("div",{className:"text-sm font-semibold text-gray-200 truncate",children:u.projectName}),typeof u.totalPhotos=="number"&&o.jsx("div",{className:"text-xs text-gray-500",children:`${u.totalPhotos} ${u.totalPhotos===1?"photo":"photos"}`}),o.jsx("div",{className:"text-xs text-gray-600 truncate",children:u.rootPath})]})]})}const lp="4.0.2";class hr{static instance;version;constructor(){this.version=lp}static getInstance(){return hr.instance||(hr.instance=new hr),hr.instance}getVersion(){return this.version}getDisplayVersion(){return`v${this.version}`}isValidVersion(c){return/^\d+\.\d+\.\d+$/.test(c)}isCurrentVersionValid(){return this.isValidVersion(this.version)}getVersionComponents(){const[c,a,p]=this.version.split(".").map(Number);return{major:c,minor:a,patch:p}}compareVersions(c,a){const p=c.split(".").map(Number),d=a.split(".").map(Number);for(let m=0;m<3;m++){if(p[m]<d[m])return-1;if(p[m]>d[m])return 1}return 0}async fetchRuntimeVersion(){try{return null}catch(c){return console.warn("Error fetching runtime version:",c),null}}async getCurrentVersion(){return this.version}}const Es=hr.getInstance();function sp({isOpen:u,onClose:c,onCreateComplete:a,onOpenProject:p,recentProjects:d=[],canClose:m=!1,errorMessage:x=null}){const[v,C]=L.useState(!1),[E,D]=L.useState(Es.getDisplayVersion());L.useEffect(()=>{(async()=>{try{const F=await Es.getCurrentVersion();D(`v${F}`)}catch(F){console.warn("Failed to fetch runtime version:",F)}})()},[]);const b=typeof globalThis<"u"&&(globalThis.vitest||globalThis.__APP_VERSION__==="0.0.0"),T="showDirectoryPicker"in window,A="indexedDB"in window;return!b&&(!T||!A)?o.jsx("div",{className:"h-screen bg-gray-950 text-gray-100 flex items-center justify-center",children:o.jsxs("div",{className:"max-w-md mx-auto text-center p-6",children:[o.jsx("div",{className:"text-red-400 text-6xl mb-4",children:""}),o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Browser Not Supported"}),o.jsx("p",{className:"text-gray-400 mb-4",children:"This app requires a modern browser with support for the File System Access API and IndexedDB."}),o.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[!T&&o.jsx("div",{children:" File System Access API not available"}),!A&&o.jsx("div",{children:" IndexedDB not available"})]}),o.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Please use a recent version of Chrome, Edge, or another supported browser."})]})}):o.jsxs("div",{className:"h-screen bg-gray-950 text-gray-100 flex flex-col",children:[o.jsx("div",{className:"border-b border-gray-800 bg-gray-900/50 backdrop-blur-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("img",{src:"/Narrative/assets/Narrative_icon.png",alt:"Narrative",className:"w-8 h-8 rounded"}),o.jsx("h1",{className:"text-xl font-bold",children:"Narrative"})]}),o.jsx("div",{className:"px-3 py-1 bg-gray-800 text-gray-300 rounded-md text-xs font-medium tracking-wide",children:o.jsx("span",{className:"uppercase",children:E})})]})}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:o.jsxs("div",{className:"w-full max-w-7xl",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Projects"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Create a new project or open a recent one"})]}),x&&o.jsx("div",{className:"rounded-lg border border-red-800 bg-red-950/60 px-4 py-3 text-sm text-red-200 mb-6",children:x}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 auto-rows-max",children:[o.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 border-dashed border-gray-700 bg-gray-950 hover:border-blue-500 transition-colors group cursor-pointer",children:[o.jsx("button",{onClick:()=>C(!0),className:"w-full block text-left","aria-label":"Create new project",children:o.jsx("div",{className:"aspect-video overflow-hidden bg-gray-900 relative",children:o.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center group-hover:from-gray-700 group-hover:to-gray-800 transition-colors",children:o.jsx("div",{className:"w-14 h-14 rounded-full bg-gray-700 group-hover:bg-blue-500/20 flex items-center justify-center mb-2 transition-colors",children:o.jsx(If,{className:"w-7 h-7 text-blue-400"})})})})}),o.jsxs("div",{className:"p-3 space-y-1",children:[o.jsx("div",{className:"text-sm font-semibold text-gray-200",children:"New Project"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Start organizing photos"})]})]}),d.map(w=>o.jsx(rp,{project:w,onOpen:p},w.projectId))]}),d.length===0&&o.jsx("div",{className:"text-center py-12 text-gray-500",children:o.jsx("p",{className:"text-sm",children:"No recent projects. Create one to get started."})})]})}),o.jsx(Cc,{isOpen:v,onClose:()=>C(!1),onComplete:w=>{C(!1),a(w)},recentProjects:d,onSelectRecent:p})]})}function op({isOpen:u,title:c="Loading Project",message:a="Please wait while we load your project...",progress:p=0,showProgressBar:d=!0}){const[m,x]=L.useState(0);return L.useEffect(()=>{if(p!==m){const v=setTimeout(()=>{x(p)},100);return()=>clearTimeout(v)}},[p,m]),u?o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-lg shadow-2xl p-8 max-w-md w-full mx-4 border border-gray-800",children:[o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-full blur-lg opacity-20"}),o.jsx(_s,{className:"w-12 h-12 text-blue-400 animate-spin relative"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:c}),o.jsx("p",{className:"text-gray-400 text-sm",children:a})]})]}),d&&o.jsxs("div",{className:"mt-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-xs font-medium text-gray-400",children:"Progress"}),o.jsxs("span",{className:"text-xs font-bold text-blue-400",children:[Math.round(m),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2 overflow-hidden",children:o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 h-full rounded-full transition-all duration-300 ease-out",style:{width:`${m}%`}})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:m===100?"Almost done...":"Loading..."})})]})}):null}const ip="modulepreload",ap=function(u){return"/Narrative/"+u},jc={},up=function(c,a,p){let d=Promise.resolve();if(a&&a.length>0){let C=function(E){return Promise.all(E.map(D=>Promise.resolve(D).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),v=x?.nonce||x?.getAttribute("nonce");d=C(a.map(E=>{if(E=ap(E),E in jc)return;jc[E]=!0;const D=E.endsWith(".css"),b=D?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${E}"]${b}`))return;const T=document.createElement("link");if(T.rel=D?"stylesheet":ip,D||(T.as="script"),T.crossOrigin="",T.href=E,v&&T.setAttribute("nonce",v),document.head.appendChild(T),D)return new Promise((A,w)=>{T.addEventListener("load",A),T.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${E}`)))})}))}function m(x){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=x,window.dispatchEvent(v),!v.defaultPrevented)throw x}return d.then(x=>{for(const v of x||[])v.status==="rejected"&&m(v.reason);return c().catch(m)})},cp=["jpg","jpeg","png","heic","webp","mp4","mov","webm","avi","mkv"],Ds="narrative:projectState:",dp="narrative:handles",Bt="projects",Ps={autoDay:!0,folderStructure:{daysFolder:"01_DAYS",archiveFolder:"98_ARCHIVE",favoritesFolder:"FAV",metaFolder:"_meta"}};function Ec(){return`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`}const fp=1e4;async function Ls(){if(!window.indexedDB)throw new Error("IndexedDB is not available in this environment.");return new Promise((u,c)=>{let a=!1;const p=x=>{a||(a=!0,x())},d=window.setTimeout(()=>{p(()=>c(new Error("IndexedDB open timed out.")))},fp),m=indexedDB.open(dp,1);m.onupgradeneeded=()=>{const x=m.result;x.objectStoreNames.contains(Bt)||x.createObjectStore(Bt)},m.onsuccess=()=>{window.clearTimeout(d),p(()=>u(m.result))},m.onerror=()=>{window.clearTimeout(d),p(()=>c(m.error))},m.onblocked=()=>{window.clearTimeout(d),p(()=>c(new Error("IndexedDB open was blocked. Please close other Narrative tabs and retry.")))}})}async function Ti(u,c){const a=await Ls();return new Promise((p,d)=>{const m=a.transaction(Bt,"readwrite");m.objectStore(Bt).put(c,u),m.oncomplete=()=>p(),m.onerror=()=>d(m.error)})}async function bs(u){const c=await Ls();return new Promise((a,p)=>{const m=c.transaction(Bt,"readonly").objectStore(Bt).get(u);m.onsuccess=()=>a(m.result||null),m.onerror=()=>p(m.error)})}async function pp(u){const c=await Ls();return new Promise((a,p)=>{const d=c.transaction(Bt,"readwrite");d.objectStore(Bt).delete(u),d.oncomplete=()=>a(),d.onerror=()=>p(d.error)})}function mp(u){const c=u.split(".").pop()?.toLowerCase()||"";return cp.includes(c)}function hp(u){const c=u.toLowerCase();return u.startsWith(".")||u.startsWith("._")||c==="thumbs.db"||c==="desktop.ini"}async function Pc(u,c=""){const a=[];for await(const[p,d]of u.entries())if(d.kind==="directory"){if(p.startsWith("."))continue;const m=await Pc(d,c?`${c}/${p}`:p);a.push(...m)}else if(d.kind==="file"){if(hp(p)||!mp(p))continue;const m=c?`${c}/${p}`:p;a.push({handle:d,path:m})}return a}async function gp(u){try{if(typeof createImageBitmap<"u")return(await createImageBitmap(u)).close(),u}catch{}try{const p=(await up(async()=>{const{default:d}=await import("./heic2any-CqRmvf5D.js").then(m=>m.h);return{default:d}},[])).default;try{return await p({blob:u,toType:"image/jpeg",quality:.8})}catch(d){if(d?.message?.includes("already browser readable")||d?.message?.includes("ERR_USER")||d?.code===1)return u;console.warn(`heic2any conversion failed for ${u.name}:`,d)}}catch{console.warn("heic2any library not available, trying fallbacks")}const c=document.createElement("canvas"),a=c.getContext("2d");if(!a)return new Blob([""],{type:"image/jpeg"});try{if(typeof createImageBitmap<"u")try{const p=await createImageBitmap(u);c.width=p.width||400,c.height=p.height||300;try{a.drawImage(p,0,0)}catch{}return new Promise((d,m)=>{try{if(typeof c.toBlob=="function")c.toBlob(x=>{if(x){d(x);return}try{const C=c.toDataURL("image/jpeg",.8).split(","),E=C[0].match(/:(.*?);/),D=C[1];let b;if(typeof atob=="function"){const T=atob(D);let A=T.length;for(b=new Uint8Array(A);A--;)b[A]=T.charCodeAt(A)}else if(typeof Buffer<"u"){const T=Buffer.from(D,"base64");b=new Uint8Array(T.buffer,T.byteOffset,T.byteLength)}else throw new Error("No base64 decoder available");d(new Blob([b],{type:E&&E[1]||"image/jpeg"}))}catch{d(new Blob([""],{type:"image/jpeg"}))}},"image/jpeg",.8);else{const v=c.toDataURL("image/jpeg",.8).split(","),C=v[0].match(/:(.*?);/),E=v[1];let D;if(typeof atob=="function"){const b=atob(E);let T=b.length;for(D=new Uint8Array(T);T--;)D[T]=b.charCodeAt(T)}else if(typeof Buffer<"u"){const b=Buffer.from(E,"base64");D=new Uint8Array(b.buffer,b.byteOffset,b.byteLength)}else return d(new Blob([""],{type:"image/jpeg"}));d(new Blob([D],{type:C&&C[1]||"image/jpeg"}))}}catch{d(new Blob([""],{type:"image/jpeg"}))}})}catch{}try{const p=new Image,d=URL.createObjectURL(u);return p.crossOrigin="Anonymous",await new Promise((m,x)=>{p.onload=()=>m(),p.onerror=()=>x(new Error("Image load failed")),p.src=d}),c.width=p.naturalWidth||p.width||400,c.height=p.naturalHeight||p.height||300,a.drawImage(p,0,0),URL.revokeObjectURL(d),new Promise((m,x)=>{c.toBlob(v=>{if(v){m(v);return}try{const E=c.toDataURL("image/jpeg",.8).split(","),D=E[0].match(/:(.*?);/),b=E[1];let T;if(typeof atob=="function"){const A=atob(b);let w=A.length;for(T=new Uint8Array(w);w--;)T[w]=A.charCodeAt(w)}else if(typeof Buffer<"u"){const A=Buffer.from(b,"base64");T=new Uint8Array(A.buffer,A.byteOffset,A.byteLength)}else{m(new Blob([""],{type:"image/jpeg"}));return}m(new Blob([T],{type:D&&D[1]||"image/jpeg"}))}catch{m(new Blob([""],{type:"image/jpeg"}))}},"image/jpeg",.8)})}catch{}return c.width=400,c.height=300,a.fillStyle="#e5e5e5",a.fillRect(0,0,400,300),a.fillStyle="#666666",a.font="bold 16px sans-serif",a.textAlign="center",a.textBaseline="middle",a.fillText("HEIC",200,140),a.font="12px sans-serif",a.fillText("Preview not available",200,165),new Promise(p=>{c.toBlob(d=>{if(d){p(d);return}p(new Blob([""],{type:"image/jpeg"}))},"image/jpeg",.8)})}catch{return new Blob([""],{type:"image/jpeg"})}}async function Oi(u,c){const a=await Pc(u),p=[],d=new Set;for(let m=0;m<a.length;m++){const x=a[m],v=Math.round((m+1)/a.length*100);c?.(v,`Processing ${x.handle.name}...`);const C=await x.handle.getFile(),E=C.lastModified,D=C.name,b=`${D}|${E}|${C.size}`;if(d.has(b))continue;d.add(b);const T=Ec(),A=C.name.split(".").pop()?.toLowerCase()||"",w=A==="heic"||A==="heif"||C.type.toLowerCase().includes("heic");let F="";if(w)try{const S=await gp(C);S&&(F=URL.createObjectURL(S))}catch(S){console.warn(`Failed to generate preview for ${D}:`,S)}else try{F=URL.createObjectURL(C)}catch(S){console.warn(`Failed to create object URL for ${D}:`,S)}const I=Qf(x.path),U=x.path.split(/[\\/]/).filter(Boolean),Q=U.length>1?U.slice(0,-1):[],ne=Q[Q.length-1]||"root";let z=null,V=null;I.isPreOrganized&&I.confidence==="high"&&(z=I.detectedDay,V=I.detectedBucket),p.push({id:T,originalName:D,currentName:D,timestamp:E,day:z,bucket:V,sequence:null,favorite:!1,rating:0,archived:!1,thumbnail:F,mimeType:C.type||(w?"image/heic":""),fileHandle:x.handle,filePath:x.path,sourceFolder:ne,folderHierarchy:Q,detectedDay:I.detectedDay,detectedBucket:I.detectedBucket,isPreOrganized:I.isPreOrganized,organizationConfidence:I.confidence})}return p.sort((m,x)=>m.timestamp-x.timestamp)}function yp(u){const c={};if(u.length===0)return c;let a=1,p=u[0].timestamp;const d=360*60*1e3;return c[a]=[],u.forEach(m=>{m.timestamp-p>d&&(a+=1,c[a]=[]),c[a].push(m.id),p=m.timestamp}),c}function bc(u){const c=u.photos.map(a=>({filePath:a.filePath,day:a.day,bucket:a.bucket,sequence:a.sequence,favorite:a.favorite,rating:a.rating,archived:a.archived,currentName:a.currentName,sourceFolder:a.sourceFolder,folderHierarchy:a.folderHierarchy,detectedDay:a.detectedDay,detectedBucket:a.detectedBucket,isPreOrganized:a.isPreOrganized,organizationConfidence:a.organizationConfidence,subfolderOverride:a.subfolderOverride}));return{projectName:u.projectName,rootPath:u.rootPath,settings:u.settings,dayLabels:u.dayLabels||{},dayContainers:u.dayContainers||[],lastModified:u.lastModified??Date.now(),edits:c}}function vp(u,c){const a=u.toLowerCase(),p=a.replace(/[^a-z0-9]+/g," ").trim(),d=c.toLowerCase();return!!(d&&a===d||a==="archive"||a==="archives"||a.endsWith("_archive")||a.endsWith("-archive")||a.includes("archive")||p.includes("archive"))}function _c(u,c){return c?u.map(a=>a.filePath&&a.filePath.split(/[\\/]/).filter(Boolean).some(d=>vp(d,c))?{...a,archived:!0,bucket:"X"}:a):u}async function xp(u){const{dirHandle:c,projectName:a,rootLabel:p,onProgress:d}=u;if(!("requestPermission"in c))throw new Error("File System Access API is not available or supported in this environment.");let m;try{m=await c.requestPermission({mode:"read"})}catch(D){throw console.warn("Permission request failed:",D),new Error("Unable to request folder access. Please try again.")}if(m!=="granted")throw new Error("Folder access was not granted. Please allow access to create the project.");d?.(5,"Scanning folder structure...");const x=Ec();d?.(10,"Collecting image files...");const v=_c(await Oi(c,(D,b)=>{const T=10+D*.6;d?.(T,b)}),Ps.folderStructure.archiveFolder);d?.(75,"Analyzing photo timestamps...");const C=yp(v);d?.(85,"Saving project data...");const E={projectName:a?.trim()||c.name,rootPath:p||c.name,photos:v,settings:Ps,lastModified:Date.now()};return await Ti(x,c),Fe.set(`${Ds}${x}`,JSON.stringify(bc(E))),d?.(95,"Project initialized successfully"),{projectId:x,photos:v,suggestedDays:C}}async function wp(u){const c=await bs(u);if(!c)throw new Error("Project folder access not available. Please reselect the folder.");if(!("requestPermission"in c))throw new Error("File System Access API is not available or supported in this environment.");let a;try{a=await c.requestPermission({mode:"read"})}catch(E){throw console.warn("Permission request failed, removing stale handle:",E),await pp(u),new Error("Project folder access has expired. Please click the project again to reselect the folder.")}if(a!=="granted")throw new Error("Folder access was not granted. Please allow access to continue.");const p=Fe.get(`${Ds}${u}`),d=p?JSON.parse(p):{},m=await Oi(c);if(m.length===0)throw new Error("Project folder access is no longer available. Please reselect the folder.");let x=m;if(d.edits){const E=new Map;d.edits.forEach(D=>{D?.filePath&&E.set(D.filePath,D)}),x=m.map(D=>{const b=D.filePath?E.get(D.filePath):null;return b?{...D,day:b.day,bucket:b.bucket,sequence:b.sequence,favorite:b.favorite,rating:b.rating,archived:b.archived,currentName:b.currentName,subfolderOverride:b.subfolderOverride}:D})}const v=d.settings||Ps,C=_c(x,v.folderStructure?.archiveFolder||Ps.folderStructure.archiveFolder);return{projectName:d.projectName||c.name,rootPath:d.rootPath||c.name,photos:C,settings:v,dayLabels:d.dayLabels||{},dayContainers:d.dayContainers||[],lastModified:d.lastModified}}async function Rc(u,c){Fe.set(`${Ds}${u}`,JSON.stringify(bc(c)))}async function Np(u){try{Fe.remove(`${Ds}${u}`)}catch{}try{const c=await Ls();await new Promise((a,p)=>{const d=c.transaction(Bt,"readwrite");d.objectStore(Bt).delete(u),d.oncomplete=()=>a(),d.onerror=()=>p(d.error)})}catch{}}const kt="narrative:recentProjects",Sn="narrative:activeProject";function kp({photos:u,setPhotos:c,projectRootPath:a,projectName:p,projectFolderLabel:d,projectSettings:m,dayLabels:x,prevThumbnailsRef:v}){const[C,E]=L.useState([]),[D,b]=L.useState(-1),T=L.useCallback(I=>{if(!a)return;Rc(a,{projectName:p,rootPath:d||a,photos:I??u,settings:m,dayLabels:x}).catch(()=>{})},[a,p,d,u,m,x]),A=L.useCallback(I=>{const U=u.map(z=>({id:z.id,filePath:z.filePath,day:z.day,bucket:z.bucket,sequence:z.sequence,favorite:z.favorite,rating:z.rating,archived:z.archived,currentName:z.currentName,originalName:z.originalName,timestamp:z.timestamp,subfolderOverride:z.subfolderOverride})),Q=C.slice(0,D+1);Q.push(U);const ne=Q.slice(-30);E(ne),b(ne.length-1);try{const z=I.map(V=>V.thumbnail).filter(Boolean);v.current.forEach(V=>{if(V&&!z.includes(V)&&V.startsWith("blob:"))try{URL.revokeObjectURL(V)}catch{}}),v.current=z}catch{}c(I),T(I)},[C,D,u,T,v,c]),w=L.useCallback(()=>{if(D>0){const I=C[D-1],U=u.map(Q=>{const ne=I.find(z=>z.id===Q.id);return ne?{...Q,...ne}:Q});b(D-1),c(U),T(U)}},[C,D,T,u,c]),F=L.useCallback(()=>{if(D<C.length-1){const I=C[D+1],U=u.map(Q=>{const ne=I.find(z=>z.id===Q.id);return ne?{...Q,...ne}:Q});b(D+1),c(U),T(U)}},[C,D,T,u,c]);return{history:C,historyIndex:D,setHistory:E,setHistoryIndex:b,persistState:T,saveToHistory:A,undo:w,redo:F}}function Sp({filteredPhotos:u,coverSelectionMode:c,setCoverForPhotoId:a,setCoverSelectionMode:p}){const[d,m]=L.useState(new Set),[x,v]=L.useState(null),[C,E]=L.useState(null),D=L.useRef(null),b=L.useCallback(()=>{m(new Set),v(null),E(null),D.current=null},[]),T=L.useCallback(async(A,w,F,I=u)=>{if(A.shiftKey&&D.current!==null&&D.current!==void 0){const U=Math.min(D.current,F),Q=Math.max(D.current,F),ne=I.slice(U,Q+1).map(z=>z.id);m(new Set(ne)),v(w),E(F),D.current=F;return}if(A.metaKey||A.ctrlKey){const U=new Set(d);U.has(w)?U.delete(w):U.add(w),m(U),v(w),E(F),D.current=F;return}m(new Set([w])),v(w),E(F),D.current=F,c&&(await a(w),p(!1))},[c,u,d,a,p]);return{selectedPhotos:d,setSelectedPhotos:m,focusedPhoto:x,setFocusedPhoto:v,lastSelectedIndex:C,setLastSelectedIndex:E,lastSelectedIndexRef:D,resetSelection:b,handleSelectPhoto:T}}const rl={autoDay:!0,folderStructure:{daysFolder:"01_DAYS",archiveFolder:"98_ARCHIVE",favoritesFolder:"FAV",metaFolder:"_meta"}},jp="narrative:projectState:";function Cp({debugEnabled:u,showToast:c,prevThumbnailsRef:a}){const[p,d]=L.useState([]),[m,x]=L.useState("No Project"),[v,C]=L.useState(null),[E,D]=L.useState(null),[b,T]=L.useState(rl),[A,w]=L.useState([]),[F,I]=L.useState(!1),[U,Q]=L.useState(()=>!Fe.get(Sn)),[ne,z]=L.useState(null),[V,S]=L.useState(null),[M,O]=L.useState(null),[ee,$]=L.useState(!1),[me,q]=L.useState(0),[K,Y]=L.useState("Loading project..."),[B,le]=L.useState({}),[te,j]=L.useState([]),X=L.useRef(!1),R=L.useCallback(J=>{const xe=J.split(/[/\\]/).filter(Boolean);return xe[xe.length-1]||"Untitled Project"},[]),h=L.useCallback((J,xe)=>{if(!xe)return J;const ge=new Map;return Object.entries(xe).forEach(([re,ke])=>{const Ee=Number.parseInt(re,10);Number.isNaN(Ee)||ke.forEach(Pe=>ge.set(Pe,Ee))}),J.map(re=>({...re,day:ge.get(re.id)??re.day}))},[]),_=L.useCallback(J=>{try{const xe=(J.photos||[]).map(ge=>ge.thumbnail).filter(Boolean);a.current.forEach(ge=>{if(ge&&!xe.includes(ge)&&ge.startsWith("blob:"))try{URL.revokeObjectURL(ge)}catch{}}),a.current=xe}catch{}d(J.photos||[]),x(J.projectName||"No Project"),D(J.rootPath||null),T(J.settings||rl),le(J.dayLabels||{}),j(J.dayContainers||[])},[a]),ie=L.useCallback(J=>{try{const xe=Fe.get(kt),re=(xe?JSON.parse(xe):[]).map(De=>({...De,projectId:De.projectId||De.rootPath}));let ke=re.findIndex(De=>De.projectId===J.projectId);ke===-1&&(ke=re.findIndex(De=>De.rootPath===J.rootPath));const Pe={...ke!==-1?re[ke]:{},...J},je=re.filter((De,Oe)=>Oe!==ke),Re=[Pe,...je].slice(0,20);Fe.set(kt,JSON.stringify(Re)),w(Re)}catch(xe){if(xe instanceof Error&&xe.name==="QuotaExceededError")try{const ge=[J,...A].map((re,ke)=>{if(ke>=3&&re.coverUrl){const{coverUrl:Ee,...Pe}=re;return Pe}return re}).slice(0,20);Fe.set(kt,JSON.stringify(ge)),w(ge),c("Storage limit reached. Kept covers for 3 most recent projects.","info")}catch{try{const re=[J,...A.slice(0,9)].map((ke,Ee)=>{if(Ee>0&&ke.coverUrl){const{coverUrl:Pe,...je}=ke;return je}return ke});Fe.set(kt,JSON.stringify(re)),w(re),c("Storage critically low. Removed older project covers.","error")}catch{try{const ke=[{...J,coverUrl:void 0}];Fe.set(kt,JSON.stringify(ke)),w(ke),c("Storage full. Reset to current project only.","error")}catch{Fe.remove(kt),w([]),c("Storage exhausted. Unable to save projects.","error")}}}else c("Failed to persist recent project updates. Changes may not be saved.","error")}},[A,c]),oe=L.useCallback((J,xe)=>{const ge=new Map;return xe.forEach(re=>ge.set(re.folderPath||re.folder,re)),J.map(re=>{if(!re.filePath||re.isPreOrganized&&re.day!=null&&re.bucket!=null)return re;const ke=re.filePath.split(/[\\/]/),Ee=ke.join("/");if(ke.length>1){const je=ke[1].match(/^D(\d{1,2})/i);if(je){const Re=parseInt(je[1],10);if(!Number.isNaN(Re))return{...re,day:Re}}}for(const[Pe,je]of ge.entries()){if(!je||je.skip||je.detectedDay==null)continue;const Re=Pe.split(/[\\/]/).join("/");if(Ee===Re||Ee.startsWith(`${Re}/`))return{...re,day:je.detectedDay}}return re.day!=null?re:{...re,day:null}})},[]),ae=L.useCallback((J,xe)=>{const ge=new Map;return xe.forEach((re,ke)=>{const Ee=gr(re);Ee!=null&&ge.set(re,Ee)}),J.map(re=>{if(!re.filePath||re.isPreOrganized&&re.day!=null)return re;const ke=re.filePath.split(/[\\/]/),Ee=ke.join("/"),Pe=ke[0],je=ge.get(Pe);if(je!=null)return{...re,day:je};for(const[Re,De]of ge.entries()){const Oe=Re.split(/[\\/]/).join("/");if(Ee===Oe||Ee.startsWith(`${Oe}/`))return{...re,day:De}}if(ke.length>1){const De=ke[1].match(/^D(\d{1,2})/i);if(De){const Oe=parseInt(De[1],10);if(!Number.isNaN(Oe))return{...re,day:Oe}}}return re})},[]),fe=L.useCallback(async(J,xe)=>{$(!0),q(0),Y("Loading project..."),z(null);try{q(25),Y("Reading project data...");const ge=await wp(J);q(50),Y("Processing photos...");const re=ae(ge.photos,ge.dayContainers||[]),ke={...ge,photos:re};if(q(75),Y("Initializing view..."),_(ke),C(J),I(!1),Q(!1),Fe.set(Sn,J),q(90),xe?.addRecent!==!1){const Ee=Fe.get(kt),je=(Ee?JSON.parse(Ee):[]).map(Oe=>({...Oe,projectId:Oe.projectId||Oe.rootPath}));let Re=je.find(Oe=>Oe.projectId===J);Re||(Re=je.find(Oe=>Oe.rootPath===J));const De=Re?.coverUrl;ie({projectName:ge.projectName||"Untitled Project",projectId:J,rootPath:ge.rootPath||"Unknown location",lastOpened:Date.now(),totalPhotos:ge.photos?.length||0,...De&&{coverUrl:De}})}q(100),S(null)}catch(ge){const re=ge instanceof Error?ge.message:"Failed to load project";console.error("Failed to load project:",ge),z(re),(re.includes("access")&&!re.includes("no longer available")||re.includes("permission")||re.includes("granted"))&&S(J),c(re,"error"),Fe.remove(Sn),Q(!0)}finally{$(!1),q(0)}},[ae,_,c,ie]),Se=L.useCallback(async()=>{if(V){$(!0),q(0),Y("Requesting folder access..."),z(null);try{const J=await bs(V);if(J){if(q(25),Y("Re-requesting permissions..."),await J.requestPermission({mode:"read"})==="granted"){q(50),Y("Loading project..."),await fe(V,{addRecent:!1}),S(null);return}}else throw new Error("Project folder access is no longer available. Please reselect the folder from the start screen.");throw new Error("Folder access was not granted.")}catch(J){const xe=J instanceof Error?J.message:"Failed to retry permission";console.error("Failed to retry permission:",J),z(xe),c(xe,"error"),Q(!0),S(null)}finally{$(!1),q(0)}}},[V,fe,c]),Ne=L.useCallback(async(J,xe)=>{$(!0),q(0),Y("Initializing project..."),z(null);try{if(xe)return q(25),Y("Saving folder access..."),await Ti(xe,J.dirHandle),q(50),Y("Loading project..."),fe(xe),!0;q(5),Y("Requesting folder access...");const ge=await xp({dirHandle:J.dirHandle,projectName:J.projectName,rootLabel:J.rootPath,onProgress:(Re,De)=>{const Oe=5+Re*.789;q(Oe),Y(De)}});q(80),Y("Processing photo organization...");const re=J.mappings?.length?oe(ge.photos,J.mappings):h(ge.photos,ge.suggestedDays),ke=(J.mappings||[]).filter(Re=>!Re.skip).map(Re=>Re.folderPath||Re.folder),Ee=J.projectName?.trim()||R(J.rootPath);let Pe,je;if(xe){Pe=xe,q(80),Y("Loading existing project data...");const Re=Fe.get(`${jp}${xe}`),De=Re?JSON.parse(Re):{},Oe=await Oi(J.dirHandle);let ht=Oe;if(De.edits){const gt=new Map;De.edits.forEach(ot=>{ot?.filePath&&gt.set(ot.filePath,ot)}),ht=Oe.map(ot=>{const yt=ot.filePath?gt.get(ot.filePath):null;return yt?{...ot,day:yt.day,bucket:yt.bucket,sequence:yt.sequence,favorite:yt.favorite,rating:yt.rating,archived:yt.archived,currentName:yt.currentName}:ot})}je={projectName:De.projectName||Ee,rootPath:J.rootPath||J.dirHandle.name,photos:ht,settings:De.settings||rl,dayContainers:De.dayContainers||ke,dayLabels:De.dayLabels,lastModified:Date.now()}}else Pe=ge.projectId,je={projectName:Ee,rootPath:J.rootPath||J.dirHandle.name,photos:re,settings:rl,dayContainers:ke};return q(90),Y("Saving project state..."),d(re),x(Ee),C(Pe),D(J.rootPath||J.dirHandle.name),T(rl),I(!1),Q(!1),Fe.set(Sn,Pe),q(95),Y("Updating recent projects..."),ie({projectName:Ee,projectId:Pe,rootPath:J.rootPath||J.dirHandle.name,lastOpened:Date.now(),totalPhotos:re.length}),q(98),Y("Finalizing project..."),await Rc(Pe,je),Q(!1),q(100),S(null),!0}catch(ge){return z(ge instanceof Error?ge.message:"Failed to initialize project"),I(!0),Q(!0),!1}finally{$(!1),q(0)}},[oe,h,u,R,fe,ie]);return L.useEffect(()=>{if(X.current)return;X.current=!0;try{const ge=Fe.get(kt);if(ge)try{const re=JSON.parse(ge),ke=Array.isArray(re)?re.map(je=>({...je,projectId:je.projectId||je.rootPath})):[],Ee=new Map;ke.forEach(je=>{je.projectId&&!Ee.has(je.projectId)&&Ee.set(je.projectId,je)});const Pe=Array.from(Ee.values());JSON.stringify(Pe)!==JSON.stringify(re)&&Fe.set(kt,JSON.stringify(Pe)),console.log("Loaded recent projects:",Pe.map(je=>({id:je.projectId,cover:je.coverUrl?"has cover":"no cover"}))),w(Pe)}catch(re){console.warn("Failed to parse recent projects from storage",re),w([])}}catch{w([])}const J=Fe.get(Sn),xe=typeof globalThis<"u"&&(globalThis.vitest||globalThis.__APP_VERSION__==="0.0.0");J&&(xe||"showDirectoryPicker"in window)?xe?Q(!1):(async()=>{try{await bs(J)&&(S(J),z('Project needs permission to access its folder. Click "Try Again" to grant access.')),Q(!0)}catch(ge){console.warn("Error checking stored handle on startup:",ge),Q(!0)}})():Q(!0)},[]),{photos:p,setPhotos:d,projectName:m,setProjectName:x,projectRootPath:v,setProjectRootPath:C,projectFolderLabel:E,setProjectFolderLabel:D,projectSettings:b,setProjectSettings:T,recentProjects:A,setRecentProjects:w,showOnboarding:F,setShowOnboarding:I,showWelcome:U,setShowWelcome:Q,projectError:ne,setProjectError:z,permissionRetryProjectId:V,setPermissionRetryProjectId:S,projectNeedingReselection:M,setProjectNeedingReselection:O,loadingProject:ee,loadingProgress:me,loadingMessage:K,dayLabels:B,setDayLabels:le,dayContainers:te,setDayContainers:j,loadProject:fe,retryProjectPermission:Se,handleOnboardingComplete:Ne,updateRecentProjects:ie,applySuggestedDays:h,applyFolderMappings:oe,applyDayContainers:ae}}function Ep(){const[u,c]=L.useState("folders"),[a,p]=L.useState(!1),[d,m]=L.useState(!1),[x,v]=L.useState(!1),[C,E]=L.useState(null),[D,b]=L.useState(null),[T,A]=L.useState(null),[w,F]=L.useState(null),I=L.useRef({selectedRootFolder:null,selectedDay:null});return{currentView:u,setCurrentView:c,sidebarCollapsed:a,setSidebarCollapsed:p,hideAssigned:d,setHideAssigned:m,showHelp:x,setShowHelp:v,galleryViewPhoto:C,setGalleryViewPhoto:E,fullscreenPhoto:D,setFullscreenPhoto:b,selectedDay:T,setSelectedDay:A,selectedRootFolder:w,setSelectedRootFolder:F,foldersViewStateRef:I}}function Pp(){const[u,c]=L.useState(null),a=L.useRef(null),p=L.useCallback(()=>{c(null),a.current&&(window.clearTimeout(a.current),a.current=null)},[]),d=L.useCallback((m,x="info",v)=>{c({message:m,tone:x,actionLabel:v?.actionLabel,onAction:v?.onAction}),a.current&&window.clearTimeout(a.current);const C=v?.durationMs??2500;a.current=window.setTimeout(()=>{c(null),a.current=null},C)},[]);return{toast:u,showToast:d,clearToast:p}}function bp(u,c,a){const[p,d]=L.useState(!1),[m,x]=L.useState(""),[v,C]=L.useState("idle"),E=L.useCallback(()=>{const w=[],F={A:"Establishing",B:"People",C:"Culture-Detail",D:"Action-Moment",E:"Transition",M:"Mood-Food"},I={},U=[],Q=[];u.forEach(S=>{if(S.archived)U.push(S);else if(S.bucket){const M=S.day;I[M]||(I[M]={}),I[M][S.bucket]||(I[M][S.bucket]=[]),I[M][S.bucket].push(S)}else Q.push(S)});const ne=a.folderStructure.daysFolder,z=a.folderStructure.archiveFolder;w.push("#!/usr/bin/env bash"),w.push("set -e"),w.push(""),w.push("# Export script with dry-run first, then safe execution with preview and confirmation."),w.push("# Usage: Paste this script into terminal (after cd'ing to your project root)"),w.push("# It will show a preview first, then ask for confirmation before copying any files."),w.push(""),w.push(`DAYS_FOLDER="${ne}"`),w.push(`ARCHIVE_FOLDER="${z}"`),w.push('CURRENT_DIR="$(pwd)"'),w.push('TARGET_DAYS_DIR="${CURRENT_DIR}/${DAYS_FOLDER}"'),w.push('TARGET_ARCHIVE_DIR="${CURRENT_DIR}/${ARCHIVE_FOLDER}"'),w.push(""),w.push("# Color codes for output"),w.push("RED='\\033[0;31m'"),w.push("GREEN='\\033[0;32m'"),w.push("YELLOW='\\033[1;33m'"),w.push("BLUE='\\033[0;34m'"),w.push("NC='\\033[0m' # No Color"),w.push(""),w.push('echo "\\${BLUE}\\${NC}"'),w.push('echo "\\${BLUE}       EXPORT SCRIPT - DRY RUN PREVIEW\\${NC}"'),w.push('echo "\\${BLUE}\\${NC}"'),w.push("echo"),w.push('echo "\\${YELLOW}Current directory:\\${NC} \\${CURRENT_DIR}"'),w.push('echo "\\${YELLOW}Target days folder:\\${NC} \\${TARGET_DAYS_DIR}"'),w.push('echo "\\${YELLOW}Target archive folder:\\${NC} \\${TARGET_ARCHIVE_DIR}"'),w.push("echo"),w.push('echo "\\${GREEN}This is a DRY RUN - no files will be copied yet.\\${NC}"'),w.push('echo "\\${GREEN}You will be asked to confirm before any files are moved.\\${NC}"'),w.push("echo"),Q.length>0&&(w.push('echo "\\${YELLOW}Root files (\\${NC}'+Q.length+'):\\${NC}"'),Q.forEach(S=>{S.filePath&&w.push(`echo "  cp \\"${S.filePath}\\"  \\"${S.currentName}\\""`)}),w.push(""));let V=Q.length+U.length;return Object.keys(I).forEach(S=>{Object.keys(I[parseInt(S)]).forEach(M=>{V+=I[parseInt(S)][M].length})}),w.push('echo "\\${YELLOW}Days with organized photos:\\${NC}"'),Object.keys(I).map(Number).sort((S,M)=>S-M).forEach(S=>{const M=c[S]||`Day ${String(S).padStart(2,"0")}`,O=I[S],ee=Object.values(O).reduce(($,me)=>$+me.length,0);w.push(`echo "  ${M} (${ee} photos)"`),Object.keys(O).sort().forEach($=>{const me=F[$]||$,q=O[$];w.push(`echo "     ${$}_${me} (${q.length})"`)})}),U.length>0&&w.push('echo "  \\${YELLOW}Archive ('+U.length+')\\${NC}"'),w.push(""),w.push('echo "\\${YELLOW}Total files to copy:\\${NC} '+V+'"'),w.push("echo"),w.push('echo "\\${YELLOW}\\${NC}"'),w.push('echo "\\${YELLOW}Ready to proceed?\\${NC}"'),w.push('echo "\\${RED}WARNING: This will copy files to your project directory.\\${NC}"'),w.push('echo "\\${YELLOW}\\${NC}"'),w.push("echo"),w.push('read -r -p "\\${YELLOW}Type \\"yes\\" to confirm and copy files (or press Ctrl+C to abort):\\${NC} " confirm'),w.push('if [ "$confirm" != "yes" ]; then'),w.push('  echo "\\${RED}Aborted - no files were copied.\\${NC}"'),w.push("  exit 0"),w.push("fi"),w.push(""),w.push('echo "\\${GREEN}\\${NC}"'),w.push('echo "\\${GREEN}Starting file copy operation...\\${NC}"'),w.push('echo "\\${GREEN}\\${NC}"'),w.push("echo"),Q.length>0&&(Q.forEach(S=>{S.filePath&&w.push(`if [ -e "${S.currentName}" ]; then echo "Skipping existing: ${S.currentName}"; else cp "${S.filePath}" "${S.currentName}"; fi`)}),w.push("")),w.push('mkdir -p "${DAYS_FOLDER}"'),Object.keys(I).map(Number).sort((S,M)=>S-M).forEach(S=>{const M=c[S]||`Day ${String(S).padStart(2,"0")}`,O=`${ne}/${M}`,ee=I[S];Object.keys(ee).sort().forEach($=>{const me=F[$]||$,q=`${O}/${$}_${me}`,K=ee[$];w.push(`mkdir -p "${q}"`),K.forEach(Y=>{Y.filePath&&w.push(`if [ -e "${q}/${Y.currentName}" ]; then echo "Skipping existing: ${q}/${Y.currentName}"; else cp "${Y.filePath}" "${q}/${Y.currentName}"; fi`)})})}),U.length>0&&(w.push('mkdir -p "${ARCHIVE_FOLDER}"'),U.forEach(S=>{S.filePath&&w.push(`if [ -e "${z}/${S.currentName}" ]; then echo "Skipping existing: ${z}/${S.currentName}"; else cp "${S.filePath}" "${z}/${S.currentName}"; fi`)})),w.push(""),w.push('echo "\\${GREEN}\\${NC}"'),w.push('echo "\\${GREEN} Copy operation complete!\\${NC}"'),w.push('echo "\\${GREEN}\\${NC}"'),w.join(`
`)},[u,c,a]),D=L.useCallback(()=>{const w=E();x(w),C("idle"),d(!0)},[E]),b=L.useCallback(()=>{d(!1)},[]),T=L.useCallback(async()=>{const w=m||E();m||x(w);try{if(!navigator?.clipboard?.writeText)throw new Error("Clipboard API unavailable");await navigator.clipboard.writeText(w),C("copied")}catch{C("failed")}},[m,E]),A=L.useCallback(()=>{C("idle")},[]);return{showExportScript:p,exportScriptText:m,exportCopyStatus:v,buildExportScript:E,openExportScriptModal:D,closeExportScriptModal:b,copyExportScript:T,resetExportCopyStatus:A}}function _p(u){const{selectedPhotos:c,focusedPhoto:a,filteredPhotos:p,fullscreenPhoto:d,showHelp:m,showExportScript:x,showWelcome:v,showOnboarding:C,coverSelectionMode:E,MECE_BUCKETS:D,onAssignBucket:b,onToggleFavorite:T,onUndo:A,onRedo:w,onSetFocusedPhoto:F,onSetSelectedPhotos:I,onSetLastSelectedIndex:U,onSetFullscreenPhoto:Q,onSetShowHelp:ne,onSetCoverSelectionMode:z,onShowToast:V,lastSelectedIndexRef:S}=u;L.useEffect(()=>{const M=O=>{const ee=O.target;if(v||C||x||ee&&(ee.tagName==="INPUT"||ee.tagName==="TEXTAREA"||ee.tagName==="SELECT"||ee.isContentEditable))return;if(m){(O.key==="Escape"||O.key==="?")&&ne(!1);return}if(E&&O.key==="Escape"){z(!1),V?.("Cover selection cancelled.");return}if(O.key==="?"){ne(!0);return}const $=a||(c.size===1?Array.from(c)[0]:null);if(!$)return;if(O.key.toLowerCase()==="f"&&!O.shiftKey&&!O.metaKey&&!O.ctrlKey&&!O.altKey){const K=c.size>0?Array.from(c):[$];T(K);return}let me=O.key.toUpperCase();const q=D.find(K=>K.key===me);if(q&&q.key!=="F"){const K=c.size>0?Array.from(c):[$];b(K,q.key);const Y=p.findIndex(B=>B.id===$);if(Y<p.length-1){const B=p[Y+1].id;F(B),I(new Set([B])),U(Y+1),S&&(S.current=Y+1)}return}if(O.key==="ArrowRight"){const K=p.findIndex(Y=>Y.id===$);if(K<p.length-1){const Y=p[K+1].id;F(Y),I(new Set([Y])),U(K+1)}}else if(O.key==="ArrowLeft"){const K=p.findIndex(Y=>Y.id===$);if(K>0){const Y=p[K-1].id;F(Y),I(new Set([Y])),U(K-1),S&&(S.current=K-1)}}else O.key==="Enter"||O.key===" "?(O.preventDefault(),Q($)):O.key==="Escape"?d?Q(null):(I(new Set),F(null),U(null),S&&(S.current=null)):O.key==="z"&&(O.metaKey||O.ctrlKey)&&(O.preventDefault(),O.shiftKey?w():A())};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[c,a,p,b,T,A,w,m,d,v,C,x,E,D,F,I,U,Q,ne,z,V,S])}function Rp({photos:u,persistState:c,setDayLabels:a}){const[p,d]=L.useState(null),[m,x]=L.useState(""),v=L.useCallback((D,b)=>{d(D),x(b)},[]),C=L.useCallback(D=>{a(b=>({...b,[D]:m})),c(u),d(null)},[m,c,u,a]),E=L.useCallback(()=>{d(null)},[]);return{editingDay:p,editingDayName:m,setEditingDayName:x,startEditingDay:v,saveDayName:C,cancelEditingDay:E}}function Dp({photos:u,dayLabels:c,dayContainers:a,projectSettings:p,debugEnabled:d,currentView:m,selectedDay:x,selectedRootFolder:v,hideAssigned:C}){const E=L.useMemo(()=>{const z=new Map;return u.forEach(V=>{V.day&&(z.has(V.day)||z.set(V.day,[]),z.get(V.day).push(V))}),Array.from(z.entries()).sort((V,S)=>V[0]-S[0])},[u]),D=L.useMemo(()=>E.filter(([z])=>c[z]!=null),[E,c]),b=L.useCallback(z=>z.split(/[\\/]/).filter(Boolean).join("/"),[]),T=/^(?:day|d)[\s_-]?(\d{1,2})/i,A=L.useCallback((z,V)=>{const S=(a||[]).includes(z),M=V.some(B=>B.day!==null),O=V.some(B=>{const le=(B.filePath||B.originalName||"").split("/");return le.length>1&&/^D\d{1,2}/i.test(le[1])}),ee=E.some(([B])=>(c[B]||`Day ${String(B).padStart(2,"0")}`)===z),$=z===p?.folderStructure?.daysFolder,me=T.test(z)||z.toLowerCase().startsWith("day"),q=M||O||ee||$||me;let K=null;if(M){const B={};V.forEach(le=>{le.day!=null&&(B[le.day]=(B[le.day]||0)+1)}),Object.keys(B).length&&(K=Number(Object.entries(B).sort((le,te)=>te[1]-le[1])[0][0]))}if(K==null){const B=z.match(T);if(B){const le=parseInt(B[1],10);Number.isNaN(le)||(K=le)}}const Y=K!=null?c[K]||`Day ${String(K).padStart(2,"0")}`:z;return{isSelected:S,isDayLike:q,dayNumber:K,displayName:Y}},[a,c,E,p]),w=L.useCallback(z=>{const V=z.map(([ee,$])=>{const me=A(ee,$);return{folder:ee,items:$,...me}}),S=V.filter(ee=>ee.isSelected),M=V.filter(ee=>!ee.isSelected&&!ee.isDayLike),O=V.filter(ee=>!ee.isSelected&&ee.isDayLike);return S.sort((ee,$)=>(ee.dayNumber??999)-($.dayNumber??999)),M.sort((ee,$)=>ee.folder.localeCompare($.folder)),O.sort((ee,$)=>ee.folder.localeCompare($.folder)),{selected:S,nonDay:M,dayLike:O}},[A]),F=L.useCallback((z,V)=>{if(V==null)return"Day Root";const M=b(z.filePath||z.originalName||"").split("/").slice(0,-1),O=p?.folderStructure?.daysFolder;let ee=-1;if(O){const $=b(O),me=M.findIndex(q=>q.toLowerCase()===$.toLowerCase());if(me!==-1&&me+1<M.length){const q=M[me+1];gr(q)===V&&(ee=me+1)}}return ee===-1&&(ee=M.findIndex($=>O&&$.toLowerCase()===O.toLowerCase()?!1:gr($)===V)),ee!==-1&&ee+1<M.length?M[ee+1]:"Day Root"},[b,p]),I=L.useCallback((z,V)=>z.subfolderOverride!==void 0?z.subfolderOverride??"Day Root":F(z,V),[F]),U=L.useMemo(()=>{const z=new Map;for(const V of u){if(V.archived)continue;const S=(V.filePath||V.originalName||"").split(/[\\/]/),M=S.length>1?S[0]:"(root)";z.has(M)||z.set(M,[]),z.get(M).push(V)}return Array.from(z.entries()).sort((V,S)=>V[0].localeCompare(S[0]))},[u]),Q=L.useMemo(()=>{const z=new Map(U);return(a||[]).forEach(V=>{const S=b(V).split("/")[0];z.has(S)||z.set(S,[])}),Array.from(z.entries())},[U,a,b]);L.useEffect(()=>{},[d,E,c,u,a,p,U,A]);const ne=L.useMemo(()=>{const z=S=>!!S.bucket||S.isPreOrganized&&!!S.detectedBucket,V=S=>!C||!z(S)&&!S.archived;switch(m){case"days":return x!==null?u.filter(S=>!S.archived&&S.day===x).filter(V):u.filter(S=>S.day!==null&&!S.archived).filter(V);case"folders":return v!==null?u.filter(S=>{if(S.archived)return!1;const M=b(S.filePath||S.originalName||""),O=b(v),ee=M.split("/")[0]||"(root)";return(O.includes("/")?M===O||M.startsWith(`${O}/`):ee===O)&&V(S)}):x!==null?u.filter(S=>!S.archived&&S.day===x).filter(V):[];case"root":return v!==null?u.filter(S=>!S.archived&&(b(S.filePath||S.originalName||"").split("/")[0]||"(root)")===b(v)&&V(S)):[];case"favorites":return u.filter(S=>S.favorite&&!S.archived).filter(V);case"archive":return u.filter(S=>S.archived).filter(V);case"review":return u.filter(S=>S.bucket&&!S.archived).filter(V);default:return u.filter(V)}},[u,C,m,x,v,b]);return{days:E,visibleDays:D,normalizePath:b,categorizeFolder:A,sortFolders:w,getDerivedSubfolderGroup:F,getSubfolderGroup:I,rootGroups:U,displayRootGroups:Q,filteredPhotos:ne}}function Lp({photos:u,projectRootPath:c,projectName:a,projectFolderLabel:p,setRecentProjects:d,showToast:m}){return{setCoverForPhotoId:L.useCallback(async v=>{if(!c)return;const C=u.find(E=>E.id===v);if(!C){m("Selected photo is no longer available.","error");return}try{let E;if(C.fileHandle)E=await C.fileHandle.getFile();else if(C.thumbnail)E=await(await fetch(C.thumbnail)).blob();else{m("Cannot create cover from this photo.","error");return}const D=`original (${(E.size/1024).toFixed(1)}KB)`;await np(10);const b=await qf(c,E,0,0),T=Fe.get(kt),w=(T?JSON.parse(T):[]).map(U=>({...U,projectId:U.projectId||U.rootPath}));let F=w.findIndex(U=>U.projectId===c);F===-1&&(F=w.findIndex(U=>U.rootPath===c));const I=w.map((U,Q)=>Q===F?{...U,coverKey:b,lastOpened:Date.now()}:U);F===-1&&I.unshift({projectName:a||"Untitled Project",projectId:c,rootPath:p||c,lastOpened:Date.now(),totalPhotos:u.length,coverKey:b}),Fe.set(kt,JSON.stringify(I.slice(0,20))),d(I.slice(0,20)),console.log(`Cover saved to IndexedDB (${D}):`,c),m("Cover photo updated.")}catch(E){console.error("Failed to set cover photo:",E),m("Failed to set cover photo.","error")}},[u,c,a,p,d,m])}}function Tp({photos:u,saveToHistory:c,selectedDay:a}){const p=L.useCallback((x,v,C=null)=>{const E=Array.isArray(x)?x:[x],D={},b=u.map(T=>{if(!E.includes(T.id))return T;const A=C||T.day||a||Math.ceil(new Date(T.timestamp).getDate()/1),w=`${A}_${v}`,F=u.filter(Q=>Q.day===A&&Q.bucket===v).length,I=(D[w]||F)+1;D[w]=I;const U=v==="X"?T.originalName:`D${String(A).padStart(2,"0")}_${v}_${String(I).padStart(3,"0")}__${T.originalName}`;return{...T,bucket:v,day:A,sequence:I,currentName:U,archived:v==="X"}});c(b)},[u,c,a]),d=L.useCallback(x=>{const v=Array.isArray(x)?x:[x],C=u.map(E=>v.includes(E.id)?{...E,day:null}:E);c(C)},[u,c]),m=L.useCallback(x=>{const v=Array.isArray(x)?x:[x],C=u.map(E=>v.includes(E.id)?{...E,favorite:!E.favorite}:E);c(C)},[u,c]);return{assignBucket:p,removeDayAssignment:d,toggleFavorite:m}}function Op({projectRootPath:u,photosLength:c,selectedRootFolder:a,selectedDay:p,currentView:d,days:m,rootGroups:x,setSelectedDay:v,setSelectedRootFolder:C}){L.useEffect(()=>{if(!u||c===0||a!==null||p!==null||d!=="folders")return;const E=m[0]?.[0]??null;if(E!==null){v(E);return}const D=x[0]?.[0];D&&C(D)},[u,c,a,p,d,x,m,v,C])}function zp({projectRootPath:u,selectedPhotos:c,showToast:a,setCoverForPhotoId:p}){return{setCoverFromSelection:L.useCallback(async()=>{if(!u)return;if(c.size===0){a("Select a photo to set as cover.");return}if(c.size>1){a("Select a single photo to set as cover.");return}const m=Array.from(c)[0];await p(m)},[u,c,a,p])}}function Fp({handleOnboardingCompleteInternal:u,setHistory:c,setHistoryIndex:a,resetSelection:p,setSelectedDay:d,setSelectedRootFolder:m,setCurrentView:x}){return{handleOnboardingComplete:L.useCallback(async(C,E)=>{await u(C,E)&&(c([]),a(-1),p(),d(null),m(null),x("folders"))},[u,p,x,c,a,d,m])}}function Ip({showWelcome:u,projectName:c,stats:a,currentVersion:p,coverSelectionMode:d,selectedPhotosCount:m,projectRootPath:x,currentView:v,hideAssigned:C,recentProjects:E,projectError:D,permissionRetryProjectId:b,loadingProject:T,onMainMenu:A,onStartCoverSelection:w,onUseCoverSelection:F,onCancelCoverSelection:I,onSelectRecentProject:U,onOpenProject:Q,onDeleteProject:ne,onImportTrip:z,onExportScript:V,onShowHelp:S,onRetryPermission:M,onChangeView:O,onToggleHideAssigned:ee,onRememberFoldersViewState:$,onRestoreFoldersViewState:me,onClearDaySelection:q}){const[K,Y]=L.useState(!1);return u?null:o.jsxs("header",{className:"border-b border-gray-800 bg-gray-900",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-3",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("img",{src:"/Narrative/assets/Narrative_icon.png",alt:"Narrative",className:"w-8 h-8 rounded"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-semibold text-gray-100",children:c}),o.jsxs("p",{className:"text-xs text-gray-400",children:[a.sorted," sorted  ",a.root," root  ",a.favorites," favorites"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-gray-500",children:p}),o.jsx("button",{onClick:()=>{Y(!1),A()},className:"px-3 py-1 bg-gray-800 hover:bg-gray-700 rounded text-sm font-medium",title:"Back to the main menu",children:"Main Menu"}),x&&o.jsx("button",{onClick:w,className:`px-3 py-1 rounded text-sm font-medium ${d?"bg-yellow-200 text-yellow-900":"bg-gray-800 hover:bg-gray-700 text-gray-100"}`,title:"Set cover from selected photo",children:d?"Selecting":"Set Cover"}),d&&o.jsxs("div",{className:"px-3 py-1 bg-yellow-50 text-yellow-900 rounded text-sm flex items-center gap-3",children:[o.jsx("span",{children:"Select a photo to set as cover"}),m===1&&o.jsx("button",{onClick:F,className:"underline",children:"Use selection"}),o.jsx("button",{onClick:I,className:"underline",children:"Cancel"})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>Y(B=>!B),className:"px-3 py-1 bg-gray-800 hover:bg-gray-700 rounded text-sm font-medium flex items-center gap-1",title:"Open recent projects","aria-expanded":K,children:["Projects",o.jsx(Ci,{className:"w-4 h-4"})]}),K&&o.jsxs("div",{className:"absolute right-0 mt-2 w-72 rounded-lg border border-gray-800 bg-gray-900 shadow-xl z-20",children:[o.jsx("div",{className:"px-3 py-2 text-xs uppercase tracking-wide text-gray-400 border-b border-gray-800",children:"Recent Projects"}),E.length===0?o.jsx("div",{className:"px-3 py-3 text-sm text-gray-400",children:"No recent projects yet."}):o.jsx("div",{className:"max-h-64 overflow-y-auto",children:E.map(B=>o.jsxs("button",{onClick:()=>{Y(!1),U(B.projectId)},className:"w-full text-left px-3 py-2 hover:bg-gray-800",children:[o.jsx("div",{className:"text-sm text-gray-100",children:B.projectName}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:B.rootPath})]},B.projectId))}),o.jsx("div",{className:"border-t border-gray-800",children:o.jsx("button",{onClick:()=>{Y(!1),Q()},className:"w-full text-left px-3 py-2 text-sm text-blue-300 hover:bg-gray-800",children:"Open Project"})})]})]}),x&&o.jsx("button",{onClick:ne,className:"px-3 py-1 bg-red-700 hover:bg-red-800 rounded text-sm font-medium",title:"Delete project",children:"Delete"}),o.jsxs("button",{onClick:z,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm font-medium flex items-center gap-1",title:"Import existing trip folder",disabled:T,children:[T?o.jsx(_s,{className:"w-4 h-4 animate-spin"}):o.jsx(Ff,{className:"w-4 h-4"}),"Import Trip"]}),o.jsx("button",{onClick:V,className:"px-3 py-1 bg-gray-800 hover:bg-gray-700 rounded text-sm font-medium",title:"Export rename script",disabled:a.total===0,children:"Export Script"}),o.jsx("button",{onClick:S,className:"p-2 hover:bg-gray-800 rounded",title:"Show shortcuts (?)",children:"?"})]})]}),o.jsx("div",{className:"flex gap-1 px-6 pb-2",children:[{id:"folders",label:"Folders",count:a.root},{id:"favorites",label:"Favorites",count:a.favorites},{id:"archive",label:"Archive",count:a.archived},{id:"review",label:"Review",count:a.sorted}].map(B=>o.jsxs("button",{onClick:()=>{v==="folders"&&$(),O(B.id),B.id==="folders"?me():q()},className:`px-4 py-2 rounded-t text-sm font-medium transition-colors ${v===B.id?"bg-gray-950 text-blue-400":"text-gray-400 hover:text-gray-200"}`,children:[B.label," ",B.count>0&&o.jsxs("span",{className:"text-xs opacity-60",children:["(",B.count,")"]})]},B.id))}),o.jsx("div",{className:"flex flex-wrap items-center gap-2 px-6 pb-3",children:o.jsx("button",{onClick:ee,className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${C?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:C?"Show All":"Hide Assigned"})}),D&&o.jsx("div",{className:"mx-6 mb-3 rounded-lg border border-red-800 bg-red-950/60 px-4 py-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-red-200",children:D}),b&&o.jsx("button",{onClick:M,className:"ml-3 px-3 py-1 bg-red-700 hover:bg-red-600 text-white text-xs rounded transition-colors",children:"Try Again"})]})})]})}function Mp({currentView:u,sidebarCollapsed:c,onCollapseSidebar:a,onExpandSidebar:p,visibleDays:d,selectedDay:m,selectedRootFolder:x,onSelectDay:v,onSelectRootFolder:C,editingDay:E,editingDayName:D,onChangeEditingDayName:b,onStartEditingDay:T,onSaveDayName:A,onCancelEditingDay:w,onClearSelectedDay:F,days:I,dayLabels:U,dayContainers:Q,photos:ne,normalizePath:z,rootGroups:V,displayRootGroups:S,sortFolders:M,projectSettings:O,debugEnabled:ee}){return u==="days"&&c?o.jsx("button",{onClick:p,className:"w-12 border-r border-gray-800 bg-gray-900 flex items-center justify-center hover:bg-gray-800 transition-colors","aria-label":"Expand sidebar",title:"Expand sidebar",children:o.jsx(Ei,{className:"w-4 h-4 text-gray-400 rotate-180"})}):u==="days"?o.jsx("aside",{className:"w-48 border-r border-gray-800 bg-gray-900 overflow-y-auto",children:o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Days"}),o.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-800 rounded","aria-label":"Collapse sidebar",title:"Collapse sidebar",children:o.jsx(Ei,{className:"w-4 h-4 text-gray-400"})})]}),o.jsx("div",{className:"space-y-1",children:d.map(([$,me])=>o.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{C(null),v($)},onKeyDown:q=>{q.key==="Enter"&&(C(null),v($))},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${m===$?"bg-blue-600 text-white":"hover:bg-gray-800 text-gray-300"}`,children:[o.jsx("div",{className:"flex items-center justify-between",children:E===$?o.jsxs("div",{className:"flex items-center gap-2 w-full",children:[o.jsx("input",{value:D,onChange:q=>b(q.target.value),className:"w-full px-2 py-1 rounded bg-gray-800 text-sm text-gray-100"}),o.jsx("button",{onClick:q=>{q.stopPropagation(),A($)},className:"p-1 bg-green-600 rounded","aria-label":"Save day name",children:o.jsx(_i,{className:"w-4 h-4"})}),o.jsx("button",{onClick:q=>{q.stopPropagation(),w()},className:"p-1 bg-gray-800 rounded","aria-label":"Cancel",children:o.jsx(Zt,{className:"w-4 h-4"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"font-medium",children:U[$]||`Day ${String($).padStart(2,"0")}`}),o.jsxs("div",{className:"flex items-center gap-2",children:[m===$&&o.jsx("button",{onClick:q=>{q.stopPropagation(),F()},className:"px-2 py-0.5 rounded bg-gray-800 text-xs text-gray-300 hover:text-white","aria-label":"Clear day selection",title:"Clear day selection",children:"Clear"}),o.jsx("button",{onClick:q=>{q.stopPropagation(),T($,U[$]||`Day ${String($).padStart(2,"0")}`)},className:"p-1","aria-label":`Edit day ${$}`,children:o.jsx(bi,{className:"w-4 h-4 text-gray-400"})})]})]})}),o.jsxs("div",{className:"text-xs opacity-70",children:[me.length," photos"]})]},$))})]})}):u!=="folders"?null:o.jsx("aside",{className:"w-48 border-r border-gray-800 bg-gray-900 overflow-y-auto",children:o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase mb-3",children:"Days"}),o.jsx("div",{className:"space-y-1 mb-4",children:(()=>{const $=new Map,me=Q||[],q=[],K=[];me.forEach(R=>{const h=z(R);h.includes("/")?K.push(h):q.push(h)});const Y=R=>{const h=z(R);return ne.filter(_=>{const ie=z(_.filePath||_.originalName||"");return ie===h||ie.startsWith(`${h}/`)})};I.forEach(([R,h])=>{$.has(R)||$.set(R,{dayNumber:R,photos:h,folderName:null})}),K.forEach(R=>{const h=R.split("/").slice(-1)[0],_=gr(h);_==null||$.has(_)||$.set(_,{dayNumber:_,photos:Y(R),folderName:R})});const B=O?.folderStructure?.daysFolder;if(B){const R=z(B),h=new Map;ne.forEach(_=>{const oe=z(_.filePath||_.originalName||"").split("/");if(oe.length<2||oe[0]!==R)return;const ae=gr(oe[1]);ae!=null&&(h.has(ae)||h.set(ae,[]),h.get(ae).push(_))}),h.forEach((_,ie)=>{$.has(ie)||$.set(ie,{dayNumber:ie,photos:_,folderName:`${R}/${U[ie]||`Day ${String(ie).padStart(2,"0")}`}`})})}const le=M(S),te=[...le.selected,...le.nonDay,...le.dayLike];ee&&console.debug("[PhotoOrganizer] Folder categorization:",{selected:le.selected.map(R=>R.folder),nonDay:le.nonDay.map(R=>R.folder),dayLike:le.dayLike.map(R=>R.folder)}),V.forEach(([R,h])=>{const _=te.find(ie=>ie.folder===R);if(_&&_.isDayLike&&_.dayNumber!==null&&!$.has(_.dayNumber)){const ie=h.filter(oe=>oe.day===_.dayNumber||oe.day===null);$.set(_.dayNumber,{dayNumber:_.dayNumber,photos:ie,folderName:R})}});const j=Array.from($.values()).sort((R,h)=>R.dayNumber-h.dayNumber),X=q.filter(R=>te.find(_=>_.folder===R)?.dayNumber===null);return o.jsxs(o.Fragment,{children:[j.map(R=>o.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{C(null),v(R.dayNumber)},onKeyDown:h=>{h.key==="Enter"&&(C(null),v(R.dayNumber))},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${m===R.dayNumber?"bg-blue-600 text-white":"hover:bg-gray-800 text-gray-300"}`,children:[o.jsx("div",{className:"flex items-center justify-between",children:E===R.dayNumber?o.jsxs("div",{className:"flex items-center gap-2 w-full",children:[o.jsx("input",{value:D,onChange:h=>b(h.target.value),className:"w-full px-2 py-1 rounded bg-gray-800 text-sm text-gray-100"}),o.jsx("button",{onClick:h=>{h.stopPropagation(),A(R.dayNumber)},className:"p-1 bg-green-600 rounded","aria-label":"Save day name",children:o.jsx(_i,{className:"w-4 h-4"})}),o.jsx("button",{onClick:h=>{h.stopPropagation(),w()},className:"p-1 bg-gray-800 rounded","aria-label":"Cancel",children:o.jsx(Zt,{className:"w-4 h-4"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"font-medium",children:U[R.dayNumber]||`Day ${String(R.dayNumber).padStart(2,"0")}`}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("button",{onClick:h=>{h.stopPropagation(),T(R.dayNumber,U[R.dayNumber]||`Day ${String(R.dayNumber).padStart(2,"0")}`)},className:"p-1","aria-label":`Edit day ${R.dayNumber}`,children:o.jsx(bi,{className:"w-4 h-4 text-gray-400"})})})]})}),o.jsxs("div",{className:"text-xs opacity-70",children:[R.photos.length," photos"]})]},`day-${R.dayNumber}`)),X.map(R=>o.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{C(R),v(null)},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${x===R?"bg-blue-600 text-white":"hover:bg-gray-800 text-gray-300"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"font-medium",children:R}),o.jsx("div",{className:"text-xs px-2 py-0.5 rounded bg-gray-700 text-gray-300",children:"Container"})]}),o.jsxs("div",{className:"text-xs opacity-70",children:[V.find(([h])=>h===R)?.[1].length||0," photos"]})]},`container-${R}`))]})})()}),o.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase mb-3",children:"Other"}),o.jsx("div",{className:"space-y-1",children:(()=>{const{selected:$,nonDay:me}=M(S),q=O?.folderStructure?.daysFolder,K=[];if(q){const B=z(q),le=new Map;ne.forEach(te=>{if(te.archived)return;const X=z(te.filePath||te.originalName||"").split("/");if(X.length<3||X[0]!==B||gr(X[1])!=null)return;const h=X[1],_=`${B}/${h}`;le.has(_)||le.set(_,[]),le.get(_).push(te)}),le.forEach((te,j)=>{K.push({key:j,label:j,items:te})})}const Y=[...me.map(B=>({key:B.folder,label:B.folder,items:B.items})),...K];return o.jsxs(o.Fragment,{children:[Y.map(B=>o.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{C(B.key),v(null)},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${x===B.key?"bg-blue-600 text-white":"hover:bg-gray-800 text-gray-300"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"font-medium",children:B.label}),o.jsx("div",{className:"flex gap-2"})]}),o.jsxs("div",{className:"text-xs opacity-70",children:[B.items.length," photos (",B.items.filter(le=>le.day===null).length," ","unsorted)"]})]},B.key)),Y.length===0&&o.jsx("div",{className:"text-xs text-gray-400",children:"No other folders"})]})})()})]})})}const $p=async u=>{try{const c=await u.getFile();return new Promise(a=>{const p=document.createElement("video"),d=document.createElement("canvas"),m=d.getContext("2d"),x=()=>{d.width=p.videoWidth,d.height=p.videoHeight,p.currentTime=0},v=()=>{if(m){m.drawImage(p,0,0);const C=d.toDataURL("image/jpeg",.8);p.removeEventListener("loadedmetadata",x),p.removeEventListener("seeked",v),a(C)}};p.addEventListener("loadedmetadata",x),p.addEventListener("seeked",v),p.src=URL.createObjectURL(c),p.load(),setTimeout(()=>{p.removeEventListener("loadedmetadata",x),p.removeEventListener("seeked",v),a(null)},2e3)})}catch(c){return console.error("Failed to generate video thumbnail:",c),null}},Ap=({photos:u,currentPhotoId:c,onSelectPhoto:a,visibleCount:p=7})=>{const d=L.useRef(null),m=L.useRef(null),[x,v]=L.useState({});L.useEffect(()=>{(async()=>{const I=u.filter(U=>U.mimeType?.startsWith("video/")&&!x[U.id]);for(const U of I)if(U.fileHandle){const Q=await $p(U.fileHandle);v(ne=>({...ne,[U.id]:Q}))}})()},[u]),L.useEffect(()=>{if(m.current&&d.current){const F=d.current,I=m.current,U=F.getBoundingClientRect(),Q=I.getBoundingClientRect();(Q.left<U.left||Q.right>U.right)&&I.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},[c]);const C=F=>{if(d.current){const I=d.current.clientWidth*.7;d.current.scrollBy({left:F==="right"?I:-I,behavior:"smooth"})}},E=u.findIndex(F=>F.id===c),D=E>0,b=E<u.length-1,T=u.filter(F=>!F.mimeType?.startsWith("video/")),A=u.filter(F=>F.mimeType?.startsWith("video/")),w=(F,I)=>{const U=F.id===c,Q=F.bucket?{A:"bg-blue-500",B:"bg-purple-500",C:"bg-green-500",D:"bg-orange-500",E:"bg-yellow-500",M:"bg-indigo-500",X:"bg-gray-500"}[F.bucket]||"bg-gray-500":null,ne=F.mimeType?.startsWith("video/")&&x[F.id]||F.thumbnail;return o.jsxs("button",{ref:U?m:null,onClick:()=>a(F.id),className:`relative flex-shrink-0 group ${U?"ring-4 ring-blue-500 shadow-xl scale-110":"hover:ring-2 hover:ring-gray-600"} transition-all duration-200 rounded-lg overflow-hidden`,style:{width:"120px",height:"90px"},"aria-label":`${F.currentName}${U?" (current)":""}`,"aria-current":U?"true":void 0,children:[ne?o.jsx("img",{src:ne,alt:F.currentName,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:o.jsx("span",{className:"text-xs text-gray-500 text-center px-2 break-words",children:F.currentName})}),F.mimeType?.startsWith("video/")&&o.jsx("div",{className:"absolute top-1 left-1 bg-black/70 rounded p-1",children:o.jsx(Mf,{className:"w-3 h-3 text-white"})}),Q&&o.jsx("div",{className:`absolute top-1 right-1 ${Q} text-white text-xs font-bold rounded px-1.5 py-0.5 shadow-lg`,children:F.bucket}),F.favorite&&o.jsx("div",{className:"absolute bottom-1 right-1 bg-yellow-500 text-white text-xs rounded-full p-1",children:o.jsx("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),!U&&o.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:o.jsxs("span",{className:"text-white text-xs font-medium",children:["#",I+1]})}),U&&o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:"absolute inset-0 bg-blue-500/10"})})]},F.id)};return o.jsxs("div",{className:"relative bg-gray-900 border-t border-gray-800",children:[D&&o.jsx("button",{onClick:()=>C("left"),className:"absolute left-2 top-1/2 -translate-y-1/2 z-10 p-2 bg-gray-950/80 hover:bg-gray-800 rounded-lg text-gray-300 hover:text-white transition-colors shadow-lg","aria-label":"Scroll left",children:o.jsx(Ei,{className:"w-5 h-5"})}),o.jsxs("div",{ref:d,className:"flex items-center gap-3 px-12 py-4 overflow-x-auto scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900",style:{scrollbarWidth:"thin"},children:[T.length>0&&o.jsxs(o.Fragment,{children:[T.map((F,I)=>w(F,I)),A.length>0&&o.jsx("div",{className:"h-20 border-l border-gray-700 mx-2"})]}),A.length>0&&o.jsx("div",{className:"flex gap-3",children:A.map((F,I)=>{const U=u.findIndex(Q=>Q.id===F.id);return w(F,U)})})]}),b&&o.jsx("button",{onClick:()=>C("right"),className:"absolute right-2 top-1/2 -translate-y-1/2 z-10 p-2 bg-gray-950/80 hover:bg-gray-800 rounded-lg text-gray-300 hover:text-white transition-colors shadow-lg","aria-label":"Scroll right",children:o.jsx(zf,{className:"w-5 h-5"})}),o.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 bg-gray-950/80 px-3 py-1 rounded-full text-xs text-gray-300",children:[E+1," / ",u.length]})]})},Up=({photo:u,filteredPhotos:c,onClose:a,onNavigate:p,onToggleFavorite:d,onAssignBucket:m,onAssignDay:x,selectedBucket:v,selectedDay:C,buckets:E,dayLabels:D={}})=>{const[b,T]=L.useState(c.findIndex(K=>K.id===u.id)),[A,w]=L.useState(null),[F,I]=L.useState(!1),[U,Q]=L.useState(null),[ne,z]=L.useState(!0),[V,S]=L.useState(!0),M=L.useRef(null);L.useEffect(()=>{const K=c.findIndex(Y=>Y.id===u.id);K!==-1&&K!==b&&T(K)},[c,u.id,b]);const O=c[b]||u;L.useEffect(()=>(Q(null),(async()=>{A&&(O.fileHandle&&M.current===A||!O.fileHandle&&O.thumbnail===A)||(I(!0),M.current=null);try{if(O.fileHandle){const B=await O.fileHandle.getFile(),le=URL.createObjectURL(B);M.current=le,w(le)}else O.thumbnail?w(O.thumbnail):Q("No image data available")}catch(B){console.error("Failed to load full resolution image:",B),O.thumbnail?w(O.thumbnail):Q("Failed to load image")}finally{I(!1)}})(),()=>{if(M.current&&M.current.startsWith("blob:"))try{URL.revokeObjectURL(M.current)}catch{}}),[O.id,O.fileHandle,O.thumbnail]),L.useEffect(()=>{const Y=setTimeout(async()=>{const B=Math.min(b+1,c.length-1),le=Math.max(b-1,0),te=[B,le].filter(j=>j!==b);for(const j of te){const X=c[j];if(X?.fileHandle)try{await X.fileHandle.getFile()}catch{}}},100);return()=>clearTimeout(Y)},[b,c]);const ee=L.useCallback(K=>{let Y=b;K==="next"?Y=Math.min(b+1,c.length-1):Y=Math.max(b-1,0),Y!==b&&(T(Y),p(c[Y].id))},[b,c,p]),$=L.useCallback(K=>{const Y=c.findIndex(B=>B.id===K);Y!==-1&&Y!==b&&(T(Y),p(K))},[c,b,p]),me=L.useCallback(K=>{if(K.key==="Escape")K.preventDefault(),a();else if(K.key==="ArrowRight")K.preventDefault(),ee("next");else if(K.key==="ArrowLeft")K.preventDefault(),ee("prev");else if(K.key==="f"||K.key==="F")K.preventDefault(),d(O.id);else if(K.key.toLowerCase()==="x")K.preventDefault(),m(O.id,"X");else{const Y=K.key.toUpperCase();if(["A","B","C","D","E","M"].includes(Y)){K.preventDefault();const le=O.bucket===Y?"":Y;m(O.id,le)}}},[O.id,O.bucket,a,ee,d,m]);L.useEffect(()=>(window.addEventListener("keydown",me),()=>window.removeEventListener("keydown",me)),[me]);const q=E.find(K=>K.key===O.bucket);return o.jsxs("div",{className:"fixed inset-0 bg-black z-40 flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-3 border-b border-gray-800 bg-gray-900/95 backdrop-blur",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-100",children:"Gallery View"}),o.jsxs("div",{className:"text-sm text-gray-400",children:[b+1," of ",c.length]})]}),o.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-800 rounded-lg transition-colors","aria-label":"Close gallery view",children:o.jsx(Zt,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex-1 flex items-center justify-center bg-gray-950 overflow-hidden relative",children:[F&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/50 z-10",children:o.jsxs("div",{className:"text-center",children:[o.jsx(_s,{className:"w-12 h-12 animate-spin text-blue-400 mx-auto mb-3"}),o.jsx("p",{className:"text-sm text-gray-400",children:"Loading image..."})]})}),U&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/50 z-10",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm text-red-400 mb-2",children:U}),o.jsxs("p",{className:"text-xs text-gray-500",children:["File: ",O.currentName]})]})}),A&&o.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:O.mimeType?.startsWith("video/")?o.jsx("video",{src:A,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl",controls:!0,autoPlay:!0,muted:!0}):o.jsx("img",{src:A,alt:O.currentName,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl"})}),o.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col items-end gap-2",children:[q&&o.jsxs("div",{className:`${q.color} text-white px-4 py-2 rounded-lg shadow-xl flex items-center gap-2`,children:[o.jsx("span",{className:"text-xl font-bold",children:q.key}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"text-sm font-semibold",children:q.label}),o.jsx("div",{className:"text-xs opacity-90",children:q.description})]})]}),O.day&&o.jsxs("div",{className:"bg-gray-900/90 backdrop-blur text-white px-4 py-2 rounded-lg shadow-xl",children:[o.jsx("div",{className:"text-xs text-gray-400",children:"Day"}),o.jsx("div",{className:"text-sm font-semibold",children:D[O.day]||`Day ${String(O.day).padStart(2,"0")}`})]}),O.favorite&&o.jsxs("div",{className:"bg-yellow-500 text-white px-3 py-2 rounded-lg shadow-xl flex items-center gap-2",children:[o.jsx(js,{className:"w-4 h-4 fill-current"}),o.jsx("span",{className:"text-sm font-semibold",children:"Favorite"})]})]}),o.jsxs("div",{className:"absolute top-4 left-4 bg-gray-900/80 backdrop-blur rounded-lg shadow-lg overflow-hidden flex flex-col",children:[o.jsxs("button",{onClick:()=>z(!ne),className:"flex items-center justify-between px-3 py-2 text-xs text-gray-300 hover:bg-gray-800 transition-colors border-b border-gray-700",children:[o.jsx("span",{className:"font-semibold",children:"Quick Actions"}),ne?o.jsx(vc,{className:"w-4 h-4"}):o.jsx(Ci,{className:"w-4 h-4"})]}),ne&&o.jsxs("div",{className:"px-3 py-2 space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-800 rounded text-[10px]",children:""}),o.jsx("span",{children:"Navigate"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-800 rounded text-[10px]",children:"A-E,M,X"}),o.jsx("span",{children:"Assign"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-800 rounded text-[10px]",children:"F"}),o.jsx("span",{children:"Favorite"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-800 rounded text-[10px]",children:"Esc"}),o.jsx("span",{children:"Exit"})]})]})]}),o.jsxs("div",{className:"absolute top-4 right-4 bg-gray-900/80 backdrop-blur rounded-lg shadow-lg overflow-hidden flex flex-col max-w-xs",children:[o.jsxs("button",{onClick:()=>S(!V),className:"flex items-center justify-between px-3 py-2 text-xs text-gray-300 hover:bg-gray-800 transition-colors border-b border-gray-700",children:[o.jsx("span",{className:"font-semibold",children:"MECE Categories"}),V?o.jsx(vc,{className:"w-4 h-4"}):o.jsx(Ci,{className:"w-4 h-4"})]}),V&&o.jsx("div",{className:"px-3 py-3 space-y-2 max-h-80 overflow-y-auto",children:E.map(K=>o.jsxs("div",{className:`${K.color} text-white px-3 py-2 rounded text-xs`,children:[o.jsxs("div",{className:"font-bold text-sm",children:[K.key," - ",K.label]}),o.jsx("div",{className:"opacity-90 text-[11px] mt-0.5",children:K.description})]},K.key))})]})]}),o.jsx(Ap,{photos:c,currentPhotoId:O.id,onSelectPhoto:$})]})};function ji(u){return[...u].sort((c,a)=>{if(c.timestamp!==a.timestamp)return c.timestamp-a.timestamp;const p=c.filePath||c.originalName||"",d=a.filePath||a.originalName||"",m=p.localeCompare(d);if(m!==0)return m;const x=(c.originalName||"").localeCompare(a.originalName||"");return x!==0?x:c.id.localeCompare(a.id)})}function Bp({loadingProject:u,currentView:c,selectedDay:a,selectedRootFolder:p,photos:d,rootGroups:m,filteredPhotos:x,selectedPhotos:v,galleryViewPhoto:C,dayLabels:E,buckets:D,onSelectPhoto:b,onOpenViewer:T,onCloseViewer:A,onNavigateViewer:w,onToggleFavorite:F,onAssignBucket:I,onAssignDay:U,onSaveToHistory:Q,onShowToast:ne,getSubfolderGroup:z,getDerivedSubfolderGroup:V,isVideoPhoto:S,isMeceBucketLabel:M}){const O=(B,le,te)=>o.jsx("div",{className:"grid grid-cols-5 gap-3",children:B.map(j=>o.jsxs("div",{onClick:X=>{X.stopPropagation(),b(j.id)},onDoubleClick:X=>{X.stopPropagation(),T(j.id)},"data-testid":`photo-${j.id}`,className:`relative group cursor-pointer rounded-lg overflow-hidden transition-all shadow-lg hover:shadow-xl ${j.bucket||j.archived?"opacity-70 saturate-75":"hover:scale-105"} ${v.has(j.id)?"ring-2 ring-blue-500":""}`,children:[j.thumbnail?j.mimeType?.startsWith("video/")?o.jsx("video",{src:j.thumbnail,className:"w-full aspect-square object-cover",muted:!0,preload:"metadata"}):o.jsx("img",{src:j.thumbnail,alt:j.currentName,className:"w-full aspect-square object-cover"}):o.jsx("div",{className:"w-full aspect-square bg-gray-900 flex items-center justify-center text-xs text-gray-400 px-2 text-center",children:j.currentName}),j.mimeType?.startsWith("video/")&&o.jsx("div",{className:"absolute top-2 left-2 bg-black/70 backdrop-blur-sm rounded-full p-1.5",children:o.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M6.3 2.84A1.5 1.5 0 004 4.11v11.78a1.5 1.5 0 002.3 1.27l9.344-5.891a1.5 1.5 0 000-2.538L6.3 2.841z"})})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2",children:o.jsx("p",{className:"text-xs font-medium text-white truncate",children:j.currentName})})}),j.isPreOrganized&&o.jsx("div",{className:"absolute top-2 right-2 z-10",children:o.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-blue-600 text-white shadow-lg",title:`Auto-assigned: Day ${j.detectedDay??""}, Bucket ${j.detectedBucket??""}`,children:"Organized"})}),j.bucket&&o.jsx("div",{className:`absolute bottom-2 left-2 px-2 py-1 rounded text-xs font-bold ${D.find(X=>X.key===j.bucket)?.color} text-white shadow-lg`,children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{children:j.bucket}),j.favorite&&o.jsx(js,{className:"w-3 h-3 fill-current"})]})}),!j.bucket&&j.favorite&&o.jsx("div",{className:"absolute bottom-2 left-2 bg-yellow-500 text-white rounded-full p-1.5 shadow-lg",children:o.jsx(js,{className:"w-3.5 h-3.5 fill-current"})})]},j.id))});if(u)return o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsxs("div",{className:"text-center",children:[o.jsx(_s,{className:"w-12 h-12 mx-auto mb-4 animate-spin text-blue-400"}),o.jsx("p",{className:"text-gray-400",children:"Loading project..."})]})});if(c==="days"&&a===null)return o.jsx("div",{className:"flex items-center justify-center h-96 text-gray-500",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Of,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"Select a day to view photos"})]})});if(c==="folders"&&p===null&&a===null)return o.jsx("div",{className:"flex items-center justify-center h-96 text-gray-500",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Pi,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"Select a folder to view photos"})]})});const ee=c==="folders"&&p?(m.find(B=>B[0]===p)?.[1]||[]).filter(B=>!B.archived):null,$=ee!==null?ee:x,me=ji($);let q=null,K=me,Y;if(a!==null){const B=new Map;me.forEach(te=>{const j=z(te,a);B.has(j)||B.set(j,{label:j,photos:[]}),B.get(j).photos.push(te)}),q=Array.from(B.values()).sort((te,j)=>te.label==="Day Root"?-1:j.label==="Day Root"?1:te.label.localeCompare(j.label));const le=[];q.forEach(te=>{const j=ji(te.photos),X=j.filter(S),R=j.filter(h=>!S(h));X.length>0&&R.length>0?le.push(...R,...X):le.push(...j)}),K=le,Y=new Map,K.forEach((te,j)=>Y.set(te.id,j))}if($.length===0)return o.jsx("div",{className:"flex items-center justify-center h-96 text-gray-500",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Pi,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No photos in this view"})]})});if(C){const B=K.find(le=>le.id===C);if(B)return o.jsx(Up,{photo:B,filteredPhotos:K,onClose:A,onNavigate:w,onToggleFavorite:le=>F(le),onAssignBucket:(le,te)=>{if(I(le,te),te){const j=K.findIndex(X=>X.id===le);j!==-1&&(j<K.length-1?w(K[j+1].id):j>0?w(K[j-1].id):A())}},onAssignDay:(le,te)=>U(le,te),selectedBucket:B.bucket||void 0,selectedDay:B.day,buckets:D,dayLabels:E})}return a!==null&&q?o.jsx("div",{className:"space-y-8",children:q.map(B=>{const le=ji(B.photos),te=le.filter(S),j=le.filter(ae=>!S(ae)),X=te.length>0&&j.length>0,R=B.photos.filter(ae=>ae.day!==a?!1:V(ae,a)===B.label),h=R.some(ae=>ae.subfolderOverride!==void 0),_=B.label==="Day Root",ie=M(B.label),oe=!_&&!ie;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:B.label}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[o.jsxs("span",{children:[B.photos.length," items"]}),oe&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"text-xs text-blue-300 hover:text-blue-200",title:"Move photos in this subfolder to the day root",onClick:()=>{const ae=d,fe=d.map(Ne=>Ne.day!==a||V(Ne,a)!==B.label?Ne:{...Ne,subfolderOverride:null});Q(fe);const Se=E[a]||`Day ${String(a).padStart(2,"0")}`;ne(`Photos moved to ${Se}.`,"info",{durationMs:5e3,actionLabel:"Undo",onAction:()=>{Q(ae)}})},children:"Ingest to Day"}),o.jsx("button",{className:"text-xs text-gray-300 hover:text-gray-100",onClick:()=>{const ae=d.map(fe=>{if(fe.day!==a)return fe;const Se=V(fe,a);return Se!==B.label?fe:{...fe,subfolderOverride:Se}});Q(ae)},children:"Keep Subfolder"}),h&&o.jsx("button",{className:"text-xs text-red-300 hover:text-red-200",onClick:()=>{const ae=d.map(fe=>fe.day!==a?fe:R.find(Se=>Se.id===fe.id)?{...fe,subfolderOverride:void 0}:fe);Q(ae)},children:"Undo Ingest"})]})]})]}),X&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-2 text-xs uppercase tracking-wider text-gray-500",children:"Photos"}),O(j),o.jsx("div",{className:"mt-6 mb-2 text-xs uppercase tracking-wider text-gray-500",children:"Videos"}),O(te)]}),!X&&O(le)]},B.label)})}):O(K)}function Hp({selectedPhotos:u,photos:c,days:a,buckets:p,onSaveToHistory:d,onPersistState:m,onSetDayLabels:x,onSetSelectedDay:v,onSetCurrentView:C,onSetSelectedPhotos:E,onRemoveDayAssignment:D,onAssignBucket:b,onToggleFavorite:T}){const[A,w]=L.useState(!1),[F,I]=L.useState("");if(L.useEffect(()=>{w(!1)},[u]),u.size===0)return null;const U=u.size===1?Array.from(u)[0]:null,Q=U?c.find(ne=>ne.id===U):null;return o.jsx("aside",{className:"w-80 border-l border-gray-800 bg-gray-900 overflow-y-auto",children:o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"mb-6",children:u.size===1&&Q?o.jsxs(o.Fragment,{children:[Q.mimeType?.startsWith("video/")?o.jsx("video",{src:Q.thumbnail,className:"w-full rounded-lg",controls:!0}):o.jsx("img",{src:Q.thumbnail,alt:"Selected",className:"w-full rounded-lg"}),o.jsx("div",{className:"mt-2 text-xs text-gray-400 font-mono break-all",children:A?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{value:F,onChange:ne=>I(ne.target.value),className:"w-full px-2 py-1 rounded bg-gray-800 text-sm text-gray-100"}),o.jsx("button",{onClick:()=>{const ne=c.map(z=>z.id===U?{...z,currentName:F}:z);d(ne),w(!1)},className:"p-1 bg-green-600 rounded","aria-label":"Save name",children:o.jsx(_i,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>w(!1),className:"p-1 bg-gray-800 rounded","aria-label":"Cancel edit name",children:o.jsx(Zt,{className:"w-4 h-4"})})]}):o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{children:Q.currentName}),o.jsx("button",{onClick:()=>{I(Q.currentName||Q.originalName||""),w(!0)},className:"p-1 ml-2","aria-label":"Edit name",children:o.jsx(bi,{className:"w-4 h-4 text-gray-400"})})]})})]}):o.jsxs("div",{className:"text-sm text-gray-300",children:[u.size," selected"]})}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Assign Day"}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsxs("select",{"aria-label":"Assign to...",onChange:ne=>{const z=ne.target.value;if(!z)return;const V=z==="new"?Math.max(0,...a.map(O=>O[0]))+1:Number(z),S=Array.from(u),M=c.map(O=>S.includes(O.id)?{...O,day:V}:O);d(M),z==="new"&&(x(O=>({...O,[V]:`Day ${String(V).padStart(2,"0")}`})),m(M)),v(V),C("days"),E(new Set)},className:"px-3 py-2 rounded bg-gray-800",defaultValue:"",children:[o.jsx("option",{value:"",children:"Assign to..."}),a.map(([ne])=>o.jsx("option",{value:ne,children:`Day ${String(ne).padStart(2,"0")}`},ne)),o.jsx("option",{value:"new",children:"Create new day"})]}),o.jsx("div",{className:"text-xs text-gray-400",children:"Assign selected photos to a day folder"})]}),o.jsx("button",{onClick:()=>{D(Array.from(u)),E(new Set)},className:"w-full px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm font-medium transition-colors",children:"Remove Day Assignment"})]}),o.jsxs("div",{className:"space-y-2 mb-6",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Assign Category"}),p.map(ne=>o.jsxs("button",{onClick:()=>b(Array.from(u),ne.key),className:`w-full text-left px-4 py-3 rounded-lg transition-all ${ne.color} hover:brightness-110 text-white`,children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-lg",children:ne.key}),o.jsx("span",{className:"ml-3 font-medium",children:ne.label})]})}),o.jsx("p",{className:"text-xs mt-1 opacity-80",children:ne.description})]},ne.key))]}),o.jsx("div",{className:"space-y-3 pt-6 border-t border-gray-800",children:o.jsxs("button",{onClick:()=>T(Array.from(u)),className:`w-full px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${u.size===1&&Q?.favorite?"bg-yellow-600 hover:bg-yellow-700":"bg-gray-800 hover:bg-gray-700"}`,children:[o.jsx(js,{className:`w-4 h-4 ${u.size===1&&Q?.favorite?"fill-current":""}`}),"Toggle Favorite (F)"]})})]})})}function Vp({isOpen:u,buckets:c,onClose:a}){return u?o.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-6",children:o.jsx("div",{className:"bg-gray-900 rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-xl font-bold",children:"Keyboard Shortcuts"}),o.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-800 rounded",children:o.jsx(Zt,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-blue-400 mb-3",children:"MECE Categories"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:c.map(p=>o.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[o.jsx("kbd",{className:`px-2 py-1 rounded ${p.color} text-white font-bold`,children:p.key==="F"?"M":p.key}),o.jsx("span",{children:p.label})]},p.key))}),o.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"Keyboard shortcuts: AE, X, M (Mood/Food). F is reserved for Favorite."})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-blue-400 mb-3",children:"Navigation"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:""}),o.jsx("span",{children:"Previous / Next photo"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"Enter"}),o.jsx("span",{children:"Fullscreen view"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"Esc"}),o.jsx("span",{children:"Close / Deselect"})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-blue-400 mb-3",children:"Actions"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"F"}),o.jsx("span",{children:"Toggle favorite"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"Z"}),o.jsx("span",{children:"Undo (keyboard)"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"Z"}),o.jsx("span",{children:"Redo (keyboard)"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("kbd",{className:"px-2 py-1 bg-gray-800 rounded",children:"?"}),o.jsx("span",{children:"Show this help"})]})]})]})]})]})})}):null}function Wp({isOpen:u,scriptText:c,copyStatus:a,onClose:p,onCopyScript:d}){return u?o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-6",children:o.jsxs("div",{className:"bg-gray-900 rounded-lg max-w-2xl w-full overflow-hidden border border-gray-800",children:[o.jsxs("div",{className:"px-5 py-4 border-b border-gray-800 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-100",children:"Export Script"}),o.jsx("button",{onClick:p,className:"p-2 hover:bg-gray-800 rounded","aria-label":"Close export script dialog",children:o.jsx(Zt,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"px-5 py-4 space-y-3",children:[o.jsx("p",{className:"text-sm text-gray-400",children:"Copy these commands and run them in your terminal from the project root directory. They create organized day folders and copy your photos with the current bucket naming. Originals are preserved."}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:d,className:"px-3 py-2 rounded-lg bg-gray-800 text-gray-100 hover:bg-gray-700 text-sm",children:"Copy Script"}),a==="copied"&&o.jsx("span",{className:"text-xs text-green-400",children:"Copied."}),a==="failed"&&o.jsx("span",{className:"text-xs text-red-400",children:"Copy failed. Select and copy below."})]}),o.jsx("textarea",{readOnly:!0,value:c,className:"w-full h-64 rounded-lg border border-gray-800 bg-gray-950 px-3 py-2 text-xs text-gray-100 font-mono"})]})]})}):null}function Kp({toast:u,onDismiss:c}){return u?o.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:o.jsxs("div",{className:`flex items-center gap-3 px-4 py-2 rounded-lg text-sm shadow-lg ${u.tone==="error"?"bg-red-600 text-white":"bg-gray-800 text-gray-100"}`,role:"status","aria-live":"polite",children:[o.jsx("span",{children:u.message}),o.jsxs("div",{className:"flex items-center gap-2",children:[u.actionLabel&&o.jsx("button",{onClick:()=>{u.onAction?.(),c()},className:"px-2 py-0.5 rounded bg-white/10 text-xs text-white hover:bg-white/20",children:u.actionLabel}),o.jsx("button",{onClick:c,className:"p-1 rounded hover:bg-white/10","aria-label":"Dismiss toast",children:o.jsx(Zt,{className:"w-4 h-4"})})]})]})}):null}function Qp({photoId:u,photos:c,onClose:a}){if(!u)return null;const p=c.find(d=>d.id===u);return p?o.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex items-center justify-center",children:[o.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black/70 rounded-full transition-colors",children:o.jsx(Zt,{className:"w-6 h-6"})}),p.mimeType?.startsWith("video/")?o.jsx("video",{src:p.thumbnail,controls:!0,className:"max-w-full max-h-full object-contain",autoPlay:!1}):o.jsx("img",{src:p.thumbnail,alt:"Fullscreen",className:"max-w-full max-h-full object-contain"}),o.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-6",children:[o.jsx("p",{className:"text-center text-sm font-mono",children:p.currentName}),o.jsx("p",{className:"text-center text-xs text-gray-400 mt-2",children:"Press ESC to close  Arrow keys to navigate"})]})]}):null}const ll=[{key:"A",label:"Establishing",color:"bg-blue-500",description:"Wide shots, landscapes"},{key:"B",label:"People",color:"bg-purple-500",description:"Portraits, groups"},{key:"C",label:"Culture/Detail",color:"bg-green-500",description:"Local life, close-ups"},{key:"D",label:"Action/Moment",color:"bg-orange-500",description:"Events, activities"},{key:"E",label:"Transition",color:"bg-yellow-500",description:"Travel, movement"},{key:"M",label:"Mood/Food",color:"bg-indigo-500",description:"Food, mood"},{key:"X",label:"Archive",color:"bg-gray-500",description:"Unwanted shots"}],Yp=new Set(ll.map(u=>u.key)),Gp=u=>{const a=u.trim().split(/[\s_-]+/)[0]||"";return Yp.has(a.toUpperCase())};function Xp(){const u=L.useRef([]),[c,a]=L.useState(Es.getDisplayVersion()),p=!1,[d,m]=L.useState(!1),{toast:x,showToast:v,clearToast:C}=Pp(),{currentView:E,setCurrentView:D,sidebarCollapsed:b,setSidebarCollapsed:T,hideAssigned:A,setHideAssigned:w,showHelp:F,setShowHelp:I,galleryViewPhoto:U,setGalleryViewPhoto:Q,fullscreenPhoto:ne,setFullscreenPhoto:z,selectedDay:V,setSelectedDay:S,selectedRootFolder:M,setSelectedRootFolder:O,foldersViewStateRef:ee}=Ep(),{photos:$,setPhotos:me,projectName:q,setProjectName:K,projectRootPath:Y,setProjectRootPath:B,projectFolderLabel:le,projectSettings:te,recentProjects:j,setRecentProjects:X,showOnboarding:R,setShowOnboarding:h,showWelcome:_,setShowWelcome:ie,projectError:oe,setProjectError:ae,permissionRetryProjectId:fe,projectNeedingReselection:Se,setProjectNeedingReselection:Ne,loadingProject:J,loadingProgress:xe,loadingMessage:ge,dayLabels:re,setDayLabels:ke,dayContainers:Ee,loadProject:Pe,retryProjectPermission:je,handleOnboardingComplete:Re}=Cp({debugEnabled:p,showToast:v,prevThumbnailsRef:u}),{setHistory:De,setHistoryIndex:Oe,persistState:ht,saveToHistory:gt,undo:ot,redo:yt}=kp({photos:$,setPhotos:me,projectRootPath:Y,projectName:q,projectFolderLabel:le,projectSettings:te,dayLabels:re,prevThumbnailsRef:u}),{showExportScript:yr,exportScriptText:sl,exportCopyStatus:ol,openExportScriptModal:vr,closeExportScriptModal:Wn,copyExportScript:il}=bp($,re,te),{setCoverForPhotoId:en}=Lp({photos:$,projectRootPath:Y,projectName:q,projectFolderLabel:le,setRecentProjects:X,showToast:v});L.useEffect(()=>{(async()=>{try{const Te=await Es.getCurrentVersion();a(`v${Te}`)}catch{}})()},[p]);const{days:Ht,visibleDays:Ts,normalizePath:al,sortFolders:ul,getDerivedSubfolderGroup:Os,getSubfolderGroup:xr,rootGroups:Cn,displayRootGroups:wr,filteredPhotos:En}=Dp({photos:$,dayLabels:re,dayContainers:Ee,projectSettings:te,debugEnabled:p,currentView:E,selectedDay:V,selectedRootFolder:M,hideAssigned:A}),Nr=L.useCallback(he=>{if(he.mimeType?.startsWith("video/"))return!0;const Te=he.originalName.split(".").pop()?.toLowerCase()||"";return["mp4","mov","webm","avi","mkv"].includes(Te)},[]),{editingDay:tn,editingDayName:nn,setEditingDayName:cl,startEditingDay:dl,saveDayName:fl,cancelEditingDay:pl}=Rp({photos:$,persistState:ht,setDayLabels:ke}),{selectedPhotos:Vt,setSelectedPhotos:Pn,focusedPhoto:ml,setFocusedPhoto:bn,setLastSelectedIndex:kr,lastSelectedIndexRef:_n,resetSelection:zs}=Sp({filteredPhotos:En,coverSelectionMode:d,setCoverForPhotoId:en,setCoverSelectionMode:m}),{setCoverFromSelection:Rn}=zp({projectRootPath:Y,selectedPhotos:Vt,showToast:v,setCoverForPhotoId:en}),{handleOnboardingComplete:Dn}=Fp({handleOnboardingCompleteInternal:Re,setHistory:De,setHistoryIndex:Oe,resetSelection:zs,setSelectedDay:S,setSelectedRootFolder:O,setCurrentView:D}),Kn=L.useCallback(()=>{S(null),O(null)},[S,O]);Op({projectRootPath:Y,photosLength:$.length,selectedRootFolder:M,selectedDay:V,currentView:E,days:Ht,rootGroups:Cn,setSelectedDay:S,setSelectedRootFolder:O});const{assignBucket:Ln,removeDayAssignment:Fs,toggleFavorite:hl}=Tp({photos:$,saveToHistory:gt,selectedDay:V});_p({selectedPhotos:Vt,focusedPhoto:ml,filteredPhotos:En,fullscreenPhoto:ne,showHelp:F,showExportScript:yr,showWelcome:_,showOnboarding:R,coverSelectionMode:d,MECE_BUCKETS:ll,onAssignBucket:Ln,onToggleFavorite:hl,onUndo:ot,onRedo:yt,onSetFocusedPhoto:bn,onSetSelectedPhotos:Pn,onSetLastSelectedIndex:kr,onSetFullscreenPhoto:z,onSetShowHelp:I,onSetCoverSelectionMode:m,onShowToast:v,lastSelectedIndexRef:_n});const Is=Li.useMemo(()=>({total:$.length,sorted:$.filter(he=>he.bucket&&!he.archived).length,unsorted:$.filter(he=>!he.bucket&&!he.archived).length,archived:$.filter(he=>he.archived).length,favorites:$.filter(he=>he.favorite).length,root:$.filter(he=>he.day===null&&!he.archived).length}),[$]);return o.jsxs("div",{className:"h-screen flex flex-col bg-gray-950 text-gray-100",children:[o.jsx(Ip,{showWelcome:_,projectName:q,stats:Is,currentVersion:c,coverSelectionMode:d,selectedPhotosCount:Vt.size,projectRootPath:Y,currentView:E,hideAssigned:A,recentProjects:j,projectError:oe,permissionRetryProjectId:fe,loadingProject:J,onMainMenu:()=>{h(!1),ae(null),ie(!0),Fe.remove(Sn)},onStartCoverSelection:()=>{m(!0),v("Select a photo to set as cover. Click a photo to set, or press Esc to cancel.","info")},onUseCoverSelection:async()=>{await Rn(),m(!1)},onCancelCoverSelection:()=>{m(!1),v("Cover selection cancelled.")},onSelectRecentProject:he=>{Pe(he)},onOpenProject:()=>{h(!0)},onDeleteProject:async()=>{if(!(!Y||!window.confirm(`Delete project '${q}'? This will remove local state and stored folder access. This cannot be undone.`))){try{await Np(Y)}catch{v("Failed to delete project.","error");return}try{const Te=Fe.get(kt),St=(Te?JSON.parse(Te):[]).filter(gl=>gl.projectId!==Y);Fe.set(kt,JSON.stringify(St)),X(St)}catch{}Fe.remove(Sn),me([]),B(null),K("No Project"),ie(!0),v("Project deleted.")}},onImportTrip:()=>{ae(null),h(!0)},onExportScript:vr,onShowHelp:()=>I(!0),onRetryPermission:je,onChangeView:he=>D(he),onToggleHideAssigned:()=>w(he=>!he),onRememberFoldersViewState:()=>{ee.current={selectedRootFolder:M,selectedDay:V}},onRestoreFoldersViewState:()=>{O(ee.current.selectedRootFolder),S(ee.current.selectedDay)},onClearDaySelection:()=>{S(null)}}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o.jsx(Mp,{currentView:E,sidebarCollapsed:b,onCollapseSidebar:()=>T(!0),onExpandSidebar:()=>T(!1),visibleDays:Ts,selectedDay:V,selectedRootFolder:M,onSelectDay:S,onSelectRootFolder:O,editingDay:tn,editingDayName:nn,onChangeEditingDayName:cl,onStartEditingDay:dl,onSaveDayName:fl,onCancelEditingDay:pl,onClearSelectedDay:Kn,days:Ht,dayLabels:re,dayContainers:Ee,photos:$,normalizePath:al,rootGroups:Cn,displayRootGroups:wr,sortFolders:ul,projectSettings:te,debugEnabled:p}),o.jsx("main",{className:"flex-1 overflow-y-auto",children:o.jsx("div",{className:"p-6",children:o.jsx(Bp,{loadingProject:J,currentView:E,selectedDay:V,selectedRootFolder:M,photos:$,rootGroups:Cn,filteredPhotos:En,selectedPhotos:Vt,galleryViewPhoto:U,dayLabels:re,buckets:ll,onSelectPhoto:he=>Pn(new Set([he])),onOpenViewer:he=>Q(he),onCloseViewer:()=>Q(null),onNavigateViewer:he=>Q(he),onToggleFavorite:he=>{me(Te=>Te.map(qe=>qe.id===he?{...qe,favorite:!qe.favorite}:qe)),ht($.map(Te=>Te.id===he?{...Te,favorite:!Te.favorite}:Te))},onAssignBucket:(he,Te)=>Ln(he,Te),onAssignDay:(he,Te)=>{me(qe=>qe.map(St=>St.id===he?{...St,day:Te}:St)),ht($.map(qe=>qe.id===he?{...qe,day:Te}:qe))},onSaveToHistory:gt,onShowToast:v,getSubfolderGroup:xr,getDerivedSubfolderGroup:Os,isVideoPhoto:Nr,isMeceBucketLabel:Gp})})}),Vt.size>0&&!ne&&o.jsx(Hp,{selectedPhotos:Vt,photos:$,days:Ht,buckets:ll,onSaveToHistory:gt,onPersistState:ht,onSetDayLabels:ke,onSetSelectedDay:S,onSetCurrentView:D,onSetSelectedPhotos:Pn,onRemoveDayAssignment:Fs,onAssignBucket:Ln,onToggleFavorite:hl})]}),o.jsx(Qp,{photoId:ne,photos:$,onClose:()=>z(null)}),o.jsx(Wp,{isOpen:yr,scriptText:sl,copyStatus:ol,onClose:Wn,onCopyScript:il}),o.jsx(Vp,{isOpen:F,buckets:ll,onClose:()=>I(!1)}),o.jsx(Kp,{toast:x,onDismiss:C}),_&&o.jsx(sp,{isOpen:_,onClose:()=>{Y&&(ie(!1),Fe.set(Sn,Y))},onCreateComplete:Dn,onOpenProject:async he=>{ae(null);const Te=typeof globalThis<"u"&&(globalThis.vitest||globalThis.__APP_VERSION__==="0.0.0");if(!Te&&!("showDirectoryPicker"in window)){ae("This app requires the File System Access API, which is not available in this browser environment. Please use a compatible browser like Chrome or Edge.");return}if(Te){Pe(he);return}try{if(!await bs(he))try{const St=await window.showDirectoryPicker();await Ti(he,St),Pe(he);return}catch(St){console.warn("Folder re-selection cancelled or failed:",St),Ne(he),h(!0);return}Pe(he)}catch(qe){console.warn("Error checking stored handle on project open:",qe),Ne(he),h(!0)}},recentProjects:j,canClose:!!Y,errorMessage:oe}),o.jsx(Cc,{isOpen:R,onClose:()=>{h(!1),Ne(null)},onComplete:he=>Dn(he,Se),recentProjects:j,onSelectRecent:he=>{ae(null),Ne(null),h(!1),Pe(he)}}),o.jsx(op,{isOpen:J,title:"Loading Project",message:ge,progress:xe,showProgressBar:!0})]})}function qp(){return o.jsx(Xp,{})}const Dc=document.getElementById("root");if(!Dc)throw new Error('Root element not found. Make sure index.html contains a div with id="root"');Df.createRoot(Dc).render(o.jsx(Li.StrictMode,{children:o.jsx(qp,{})}));export{kf as g};
